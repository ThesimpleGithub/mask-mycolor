var N3=Object.defineProperty;var T3=(e,t,r)=>t in e?N3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ze=(e,t,r)=>(T3(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var Ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I3(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var Tx={exports:{}},hf={exports:{}},Ix=function(t,r){return function(){for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];return t.apply(r,o)}},D3=Ix,mf=Object.prototype.toString,gf=function(e){return function(t){var r=mf.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function As(e){return e=e.toLowerCase(),function(r){return gf(r)===e}}function yf(e){return Array.isArray(e)}function bu(e){return typeof e>"u"}function A3(e){return e!==null&&!bu(e)&&e.constructor!==null&&!bu(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Dx=As("ArrayBuffer");function R3(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Dx(e.buffer),t}function P3(e){return typeof e=="string"}function O3(e){return typeof e=="number"}function Ax(e){return e!==null&&typeof e=="object"}function eu(e){if(gf(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var F3=As("Date"),B3=As("File"),L3=As("Blob"),z3=As("FileList");function xf(e){return mf.call(e)==="[object Function]"}function M3(e){return Ax(e)&&xf(e.pipe)}function V3(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||mf.call(e)===t||xf(e.toString)&&e.toString()===t)}var U3=As("URLSearchParams");function W3(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G3(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function vf(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),yf(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function Ep(){var e={};function t(o,a){eu(e[a])&&eu(o)?e[a]=Ep(e[a],o):eu(o)?e[a]=Ep({},o):yf(o)?e[a]=o.slice():e[a]=o}for(var r=0,s=arguments.length;r<s;r++)vf(arguments[r],t);return e}function j3(e,t,r){return vf(t,function(o,a){r&&typeof o=="function"?e[a]=D3(o,r):e[a]=o}),e}function H3(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function K3(e,t,r,s){e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function q3(e,t,r){var s,o,a,i={};t=t||{};do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],i[a]||(t[a]=e[a],i[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function X3(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var s=e.indexOf(t,r);return s!==-1&&s===r}function Y3(e){if(!e)return null;var t=e.length;if(bu(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var Q3=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),kt={isArray:yf,isArrayBuffer:Dx,isBuffer:A3,isFormData:V3,isArrayBufferView:R3,isString:P3,isNumber:O3,isObject:Ax,isPlainObject:eu,isUndefined:bu,isDate:F3,isFile:B3,isBlob:L3,isFunction:xf,isStream:M3,isURLSearchParams:U3,isStandardBrowserEnv:G3,forEach:vf,merge:Ep,extend:j3,trim:W3,stripBOM:H3,inherits:K3,toFlatObject:q3,kindOf:gf,kindOfTest:As,endsWith:X3,toArray:Y3,isTypedArray:Q3,isFileList:z3},Ws=kt;function yg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Rx=function(t,r,s){if(!r)return t;var o;if(s)o=s(r);else if(Ws.isURLSearchParams(r))o=r.toString();else{var a=[];Ws.forEach(r,function(l,c){l===null||typeof l>"u"||(Ws.isArray(l)?c=c+"[]":l=[l],Ws.forEach(l,function(d){Ws.isDate(d)?d=d.toISOString():Ws.isObject(d)&&(d=JSON.stringify(d)),a.push(yg(c)+"="+yg(d))}))}),o=a.join("&")}if(o){var i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t},Z3=kt;function ll(){this.handlers=[]}ll.prototype.use=function(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};ll.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ll.prototype.forEach=function(t){Z3.forEach(this.handlers,function(s){s!==null&&t(s)})};var J3=ll,e$=kt,t$=function(t,r){e$.forEach(t,function(o,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[a])})},Px=kt;function wo(e,t,r,s,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o)}Px.inherits(wo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Ox=wo.prototype,Fx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Fx[e]={value:e}});Object.defineProperties(wo,Fx);Object.defineProperty(Ox,"isAxiosError",{value:!0});wo.from=function(e,t,r,s,o,a){var i=Object.create(Ox);return Px.toFlatObject(e,i,function(l){return l!==Error.prototype}),wo.call(i,e.message,t,r,s,o),i.name=e.name,a&&Object.assign(i,a),i};var Mo=wo,Bx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_n=kt;function n$(e,t){t=t||new FormData;var r=[];function s(a){return a===null?"":_n.isDate(a)?a.toISOString():_n.isArrayBuffer(a)||_n.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function o(a,i){if(_n.isPlainObject(a)||_n.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+i);r.push(a),_n.forEach(a,function(l,c){if(!_n.isUndefined(l)){var p=i?i+"."+c:c,d;if(l&&!i&&typeof l=="object"){if(_n.endsWith(c,"{}"))l=JSON.stringify(l);else if(_n.endsWith(c,"[]")&&(d=_n.toArray(l))){d.forEach(function(f){!_n.isUndefined(f)&&t.append(p,s(f))});return}}o(l,p)}}),r.pop()}else t.append(i,s(a))}return o(e),t}var Lx=n$,bc,xg;function r$(){if(xg)return bc;xg=1;var e=Mo;return bc=function(r,s,o){var a=o.config.validateStatus;!o.status||!a||a(o.status)?r(o):s(new e("Request failed with status code "+o.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))},bc}var $c,vg;function s$(){if(vg)return $c;vg=1;var e=kt;return $c=e.isStandardBrowserEnv()?function(){return{write:function(s,o,a,i,u,l){var c=[];c.push(s+"="+encodeURIComponent(o)),e.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),e.isString(i)&&c.push("path="+i),e.isString(u)&&c.push("domain="+u),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(s){var o=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),$c}var o$=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},a$=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},i$=o$,u$=a$,zx=function(t,r){return t&&!i$(r)?u$(t,r):r},_c,Cg;function l$(){if(Cg)return _c;Cg=1;var e=kt,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return _c=function(s){var o={},a,i,u;return s&&e.forEach(s.split(`
`),function(c){if(u=c.indexOf(":"),a=e.trim(c.substr(0,u)).toLowerCase(),i=e.trim(c.substr(u+1)),a){if(o[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?o[a]=(o[a]?o[a]:[]).concat([i]):o[a]=o[a]?o[a]+", "+i:i}}),o},_c}var Sc,wg;function c$(){if(wg)return Sc;wg=1;var e=kt;return Sc=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),o;function a(i){var u=i;return r&&(s.setAttribute("href",u),u=s.href),s.setAttribute("href",u),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return o=a(window.location.href),function(u){var l=e.isString(u)?a(u):u;return l.protocol===o.protocol&&l.host===o.host}}():function(){return function(){return!0}}(),Sc}var kc,bg;function cl(){if(bg)return kc;bg=1;var e=Mo,t=kt;function r(s){e.call(this,s==null?"canceled":s,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),kc=r,kc}var Ec,$g;function p$(){return $g||($g=1,Ec=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),Ec}var Nc,_g;function Sg(){if(_g)return Nc;_g=1;var e=kt,t=r$(),r=s$(),s=Rx,o=zx,a=l$(),i=c$(),u=Bx,l=Mo,c=cl(),p=p$();return Nc=function(f){return new Promise(function(m,g){var x=f.data,y=f.headers,v=f.responseType,w;function $(){f.cancelToken&&f.cancelToken.unsubscribe(w),f.signal&&f.signal.removeEventListener("abort",w)}e.isFormData(x)&&e.isStandardBrowserEnv()&&delete y["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var T=f.auth.username||"",S=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";y.Authorization="Basic "+btoa(T+":"+S)}var D=o(f.baseURL,f.url);b.open(f.method.toUpperCase(),s(D,f.params,f.paramsSerializer),!0),b.timeout=f.timeout;function z(){if(!!b){var O="getAllResponseHeaders"in b?a(b.getAllResponseHeaders()):null,V=!v||v==="text"||v==="json"?b.responseText:b.response,B={data:V,status:b.status,statusText:b.statusText,headers:O,config:f,request:b};t(function(H){m(H),$()},function(H){g(H),$()},B),b=null}}if("onloadend"in b?b.onloadend=z:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(z)},b.onabort=function(){!b||(g(new l("Request aborted",l.ECONNABORTED,f,b)),b=null)},b.onerror=function(){g(new l("Network Error",l.ERR_NETWORK,f,b,b)),b=null},b.ontimeout=function(){var V=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",B=f.transitional||u;f.timeoutErrorMessage&&(V=f.timeoutErrorMessage),g(new l(V,B.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,f,b)),b=null},e.isStandardBrowserEnv()){var E=(f.withCredentials||i(D))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;E&&(y[f.xsrfHeaderName]=E)}"setRequestHeader"in b&&e.forEach(y,function(V,B){typeof x>"u"&&B.toLowerCase()==="content-type"?delete y[B]:b.setRequestHeader(B,V)}),e.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),v&&v!=="json"&&(b.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&b.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(w=function(O){!b||(g(!O||O&&O.type?new c:O),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(w),f.signal&&(f.signal.aborted?w():f.signal.addEventListener("abort",w))),x||(x=null);var A=p(D);if(A&&["http","https","file"].indexOf(A)===-1){g(new l("Unsupported protocol "+A+":",l.ERR_BAD_REQUEST,f));return}b.send(x)})},Nc}var Tc,kg;function d$(){return kg||(kg=1,Tc=null),Tc}var pt=kt,Eg=t$,Ng=Mo,f$=Bx,h$=Lx,m$={"Content-Type":"application/x-www-form-urlencoded"};function Tg(e,t){!pt.isUndefined(e)&&pt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function g$(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Sg()),e}function y$(e,t,r){if(pt.isString(e))try{return(t||JSON.parse)(e),pt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}var pl={transitional:f$,adapter:g$(),transformRequest:[function(t,r){if(Eg(r,"Accept"),Eg(r,"Content-Type"),pt.isFormData(t)||pt.isArrayBuffer(t)||pt.isBuffer(t)||pt.isStream(t)||pt.isFile(t)||pt.isBlob(t))return t;if(pt.isArrayBufferView(t))return t.buffer;if(pt.isURLSearchParams(t))return Tg(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var s=pt.isObject(t),o=r&&r["Content-Type"],a;if((a=pt.isFileList(t))||s&&o==="multipart/form-data"){var i=this.env&&this.env.FormData;return h$(a?{"files[]":t}:t,i&&new i)}else if(s||o==="application/json")return Tg(r,"application/json"),y$(t);return t}],transformResponse:[function(t){var r=this.transitional||pl.transitional,s=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,a=!s&&this.responseType==="json";if(a||o&&pt.isString(t)&&t.length)try{return JSON.parse(t)}catch(i){if(a)throw i.name==="SyntaxError"?Ng.from(i,Ng.ERR_BAD_RESPONSE,this,null,this.response):i}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:d$()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};pt.forEach(["delete","get","head"],function(t){pl.headers[t]={}});pt.forEach(["post","put","patch"],function(t){pl.headers[t]=pt.merge(m$)});var Cf=pl,x$=kt,v$=Cf,C$=function(t,r,s){var o=this||v$;return x$.forEach(s,function(i){t=i.call(o,t,r)}),t},Ic,Ig;function Mx(){return Ig||(Ig=1,Ic=function(t){return!!(t&&t.__CANCEL__)}),Ic}var Dg=kt,Dc=C$,w$=Mx(),b$=Cf,$$=cl();function Ac(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $$}var _$=function(t){Ac(t),t.headers=t.headers||{},t.data=Dc.call(t,t.data,t.headers,t.transformRequest),t.headers=Dg.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Dg.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||b$.adapter;return r(t).then(function(o){return Ac(t),o.data=Dc.call(t,o.data,o.headers,t.transformResponse),o},function(o){return w$(o)||(Ac(t),o&&o.response&&(o.response.data=Dc.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},Zt=kt,Vx=function(t,r){r=r||{};var s={};function o(p,d){return Zt.isPlainObject(p)&&Zt.isPlainObject(d)?Zt.merge(p,d):Zt.isPlainObject(d)?Zt.merge({},d):Zt.isArray(d)?d.slice():d}function a(p){if(Zt.isUndefined(r[p])){if(!Zt.isUndefined(t[p]))return o(void 0,t[p])}else return o(t[p],r[p])}function i(p){if(!Zt.isUndefined(r[p]))return o(void 0,r[p])}function u(p){if(Zt.isUndefined(r[p])){if(!Zt.isUndefined(t[p]))return o(void 0,t[p])}else return o(void 0,r[p])}function l(p){if(p in r)return o(t[p],r[p]);if(p in t)return o(void 0,t[p])}var c={url:i,method:i,data:i,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l};return Zt.forEach(Object.keys(t).concat(Object.keys(r)),function(d){var f=c[d]||a,h=f(d);Zt.isUndefined(h)&&f!==l||(s[d]=h)}),s},Rc,Ag;function Ux(){return Ag||(Ag=1,Rc={version:"0.27.2"}),Rc}var S$=Ux().version,_r=Mo,wf={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){wf[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var Rg={};wf.transitional=function(t,r,s){function o(a,i){return"[Axios v"+S$+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return function(a,i,u){if(t===!1)throw new _r(o(i," has been removed"+(r?" in "+r:"")),_r.ERR_DEPRECATED);return r&&!Rg[i]&&(Rg[i]=!0,console.warn(o(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,i,u):!0}};function k$(e,t,r){if(typeof e!="object")throw new _r("options must be an object",_r.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(e),o=s.length;o-- >0;){var a=s[o],i=t[a];if(i){var u=e[a],l=u===void 0||i(u,a,e);if(l!==!0)throw new _r("option "+a+" must be "+l,_r.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _r("Unknown option "+a,_r.ERR_BAD_OPTION)}}var E$={assertOptions:k$,validators:wf},Wx=kt,N$=Rx,Pg=J3,Og=_$,dl=Vx,T$=zx,Gx=E$,Gs=Gx.validators;function bo(e){this.defaults=e,this.interceptors={request:new Pg,response:new Pg}}bo.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=dl(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var s=r.transitional;s!==void 0&&Gx.assertOptions(s,{silentJSONParsing:Gs.transitional(Gs.boolean),forcedJSONParsing:Gs.transitional(Gs.boolean),clarifyTimeoutError:Gs.transitional(Gs.boolean)},!1);var o=[],a=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(a=a&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});var i=[];this.interceptors.response.forEach(function(h){i.push(h.fulfilled,h.rejected)});var u;if(!a){var l=[Og,void 0];for(Array.prototype.unshift.apply(l,o),l=l.concat(i),u=Promise.resolve(r);l.length;)u=u.then(l.shift(),l.shift());return u}for(var c=r;o.length;){var p=o.shift(),d=o.shift();try{c=p(c)}catch(f){d(f);break}}try{u=Og(c)}catch(f){return Promise.reject(f)}for(;i.length;)u=u.then(i.shift(),i.shift());return u};bo.prototype.getUri=function(t){t=dl(this.defaults,t);var r=T$(t.baseURL,t.url);return N$(r,t.params,t.paramsSerializer)};Wx.forEach(["delete","get","head","options"],function(t){bo.prototype[t]=function(r,s){return this.request(dl(s||{},{method:t,url:r,data:(s||{}).data}))}});Wx.forEach(["post","put","patch"],function(t){function r(s){return function(a,i,u){return this.request(dl(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}bo.prototype[t]=r(),bo.prototype[t+"Form"]=r(!0)});var I$=bo,Pc,Fg;function D$(){if(Fg)return Pc;Fg=1;var e=cl();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(i){s=i});var o=this;this.promise.then(function(a){if(!!o._listeners){var i,u=o._listeners.length;for(i=0;i<u;i++)o._listeners[i](a);o._listeners=null}}),this.promise.then=function(a){var i,u=new Promise(function(l){o.subscribe(l),i=l}).then(a);return u.cancel=function(){o.unsubscribe(i)},u},r(function(i){o.reason||(o.reason=new e(i),s(o.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},t.prototype.unsubscribe=function(s){if(!!this._listeners){var o=this._listeners.indexOf(s);o!==-1&&this._listeners.splice(o,1)}},t.source=function(){var s,o=new t(function(i){s=i});return{token:o,cancel:s}},Pc=t,Pc}var Oc,Bg;function A$(){return Bg||(Bg=1,Oc=function(t){return function(s){return t.apply(null,s)}}),Oc}var Fc,Lg;function R$(){if(Lg)return Fc;Lg=1;var e=kt;return Fc=function(r){return e.isObject(r)&&r.isAxiosError===!0},Fc}var zg=kt,P$=Ix,tu=I$,O$=Vx,F$=Cf;function jx(e){var t=new tu(e),r=P$(tu.prototype.request,t);return zg.extend(r,tu.prototype,t),zg.extend(r,t),r.create=function(o){return jx(O$(e,o))},r}var qt=jx(F$);qt.Axios=tu;qt.CanceledError=cl();qt.CancelToken=D$();qt.isCancel=Mx();qt.VERSION=Ux().version;qt.toFormData=Lx;qt.AxiosError=Mo;qt.Cancel=qt.CanceledError;qt.all=function(t){return Promise.all(t)};qt.spread=A$();qt.isAxiosError=R$();hf.exports=qt;hf.exports.default=qt;(function(e){e.exports=hf.exports})(Tx);const bf=ff(Tx.exports);var Np={},$f={exports:{}},on={},xe={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),B$=Symbol.for("react.portal"),L$=Symbol.for("react.fragment"),z$=Symbol.for("react.strict_mode"),M$=Symbol.for("react.profiler"),V$=Symbol.for("react.provider"),U$=Symbol.for("react.context"),W$=Symbol.for("react.forward_ref"),G$=Symbol.for("react.suspense"),j$=Symbol.for("react.memo"),H$=Symbol.for("react.lazy"),Mg=Symbol.iterator;function K$(e){return e===null||typeof e!="object"?null:(e=Mg&&e[Mg]||e["@@iterator"],typeof e=="function"?e:null)}var Hx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kx=Object.assign,qx={};function Vo(e,t,r){this.props=e,this.context=t,this.refs=qx,this.updater=r||Hx}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xx(){}Xx.prototype=Vo.prototype;function _f(e,t,r){this.props=e,this.context=t,this.refs=qx,this.updater=r||Hx}var Sf=_f.prototype=new Xx;Sf.constructor=_f;Kx(Sf,Vo.prototype);Sf.isPureReactComponent=!0;var Vg=Array.isArray,Yx=Object.prototype.hasOwnProperty,kf={current:null},Qx={key:!0,ref:!0,__self:!0,__source:!0};function Zx(e,t,r){var s,o={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Yx.call(t,s)&&!Qx.hasOwnProperty(s)&&(o[s]=t[s]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)o[s]===void 0&&(o[s]=u[s]);return{$$typeof:ri,type:e,key:a,ref:i,props:o,_owner:kf.current}}function q$(e,t){return{$$typeof:ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ef(e){return typeof e=="object"&&e!==null&&e.$$typeof===ri}function X$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ug=/\/+/g;function Bc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?X$(""+e.key):t.toString(36)}function nu(e,t,r,s,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ri:case B$:i=!0}}if(i)return i=e,o=o(i),e=s===""?"."+Bc(i,0):s,Vg(o)?(r="",e!=null&&(r=e.replace(Ug,"$&/")+"/"),nu(o,t,r,"",function(c){return c})):o!=null&&(Ef(o)&&(o=q$(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Ug,"$&/")+"/")+e)),t.push(o)),1;if(i=0,s=s===""?".":s+":",Vg(e))for(var u=0;u<e.length;u++){a=e[u];var l=s+Bc(a,u);i+=nu(a,t,r,l,o)}else if(l=K$(e),typeof l=="function")for(e=l.call(e),u=0;!(a=e.next()).done;)a=a.value,l=s+Bc(a,u++),i+=nu(a,t,r,l,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ki(e,t,r){if(e==null)return e;var s=[],o=0;return nu(e,s,"","",function(a){return t.call(r,a,o++)}),s}function Y$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lt={current:null},ru={transition:null},Q$={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ru,ReactCurrentOwner:kf};we.Children={map:ki,forEach:function(e,t,r){ki(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ki(e,function(){t++}),t},toArray:function(e){return ki(e,function(t){return t})||[]},only:function(e){if(!Ef(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Vo;we.Fragment=L$;we.Profiler=M$;we.PureComponent=_f;we.StrictMode=z$;we.Suspense=G$;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q$;we.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Kx({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=kf.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)Yx.call(t,l)&&!Qx.hasOwnProperty(l)&&(s[l]=t[l]===void 0&&u!==void 0?u[l]:t[l])}var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}return{$$typeof:ri,type:e.type,key:o,ref:a,props:s,_owner:i}};we.createContext=function(e){return e={$$typeof:U$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:V$,_context:e},e.Consumer=e};we.createElement=Zx;we.createFactory=function(e){var t=Zx.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:W$,render:e}};we.isValidElement=Ef;we.lazy=function(e){return{$$typeof:H$,_payload:{_status:-1,_result:e},_init:Y$}};we.memo=function(e,t){return{$$typeof:j$,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=ru.transition;ru.transition={};try{e()}finally{ru.transition=t}};we.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};we.useCallback=function(e,t){return Lt.current.useCallback(e,t)};we.useContext=function(e){return Lt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return Lt.current.useDeferredValue(e)};we.useEffect=function(e,t){return Lt.current.useEffect(e,t)};we.useId=function(){return Lt.current.useId()};we.useImperativeHandle=function(e,t,r){return Lt.current.useImperativeHandle(e,t,r)};we.useInsertionEffect=function(e,t){return Lt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return Lt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return Lt.current.useMemo(e,t)};we.useReducer=function(e,t,r){return Lt.current.useReducer(e,t,r)};we.useRef=function(e){return Lt.current.useRef(e)};we.useState=function(e){return Lt.current.useState(e)};we.useSyncExternalStore=function(e,t,r){return Lt.current.useSyncExternalStore(e,t,r)};we.useTransition=function(){return Lt.current.useTransition()};we.version="18.2.0";(function(e){e.exports=we})(xe);const Pn=ff(xe.exports);var Jx={exports:{}},e2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,G){var ae=U.length;U.push(G);e:for(;0<ae;){var ee=ae-1>>>1,Y=U[ee];if(0<o(Y,G))U[ee]=G,U[ae]=Y,ae=ee;else break e}}function r(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var G=U[0],ae=U.pop();if(ae!==G){U[0]=ae;e:for(var ee=0,Y=U.length,Z=Y>>>1;ee<Z;){var te=2*(ee+1)-1,le=U[te],M=te+1,ye=U[M];if(0>o(le,ae))M<Y&&0>o(ye,le)?(U[ee]=ye,U[M]=ae,ee=M):(U[ee]=le,U[te]=ae,ee=te);else if(M<Y&&0>o(ye,ae))U[ee]=ye,U[M]=ae,ee=M;else break e}}return G}function o(U,G){var ae=U.sortIndex-G.sortIndex;return ae!==0?ae:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,u=i.now();e.unstable_now=function(){return i.now()-u}}var l=[],c=[],p=1,d=null,f=3,h=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var G=r(c);G!==null;){if(G.callback===null)s(c);else if(G.startTime<=U)s(c),G.sortIndex=G.expirationTime,t(l,G);else break;G=r(c)}}function $(U){if(g=!1,w(U),!m)if(r(l)!==null)m=!0,H(b);else{var G=r(c);G!==null&&Q($,G.startTime-U)}}function b(U,G){m=!1,g&&(g=!1,y(D),D=-1),h=!0;var ae=f;try{for(w(G),d=r(l);d!==null&&(!(d.expirationTime>G)||U&&!A());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,f=d.priorityLevel;var Y=ee(d.expirationTime<=G);G=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===r(l)&&s(l),w(G)}else s(l);d=r(l)}if(d!==null)var Z=!0;else{var te=r(c);te!==null&&Q($,te.startTime-G),Z=!1}return Z}finally{d=null,f=ae,h=!1}}var T=!1,S=null,D=-1,z=5,E=-1;function A(){return!(e.unstable_now()-E<z)}function O(){if(S!==null){var U=e.unstable_now();E=U;var G=!0;try{G=S(!0,U)}finally{G?V():(T=!1,S=null)}}else T=!1}var V;if(typeof v=="function")V=function(){v(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=O,V=function(){W.postMessage(null)}}else V=function(){x(O,0)};function H(U){S=U,T||(T=!0,V())}function Q(U,G){D=x(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,H(b))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(U){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var ae=f;f=G;try{return U()}finally{f=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ae=f;f=U;try{return G()}finally{f=ae}},e.unstable_scheduleCallback=function(U,G,ae){var ee=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ee+ae:ee):ae=ee,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,U={id:p++,callback:G,priorityLevel:U,startTime:ae,expirationTime:Y,sortIndex:-1},ae>ee?(U.sortIndex=ae,t(c,U),r(l)===null&&U===r(c)&&(g?(y(D),D=-1):g=!0,Q($,ae-ee))):(U.sortIndex=Y,t(l,U),m||h||(m=!0,H(b))),U},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(U){var G=f;return function(){var ae=f;f=G;try{return U.apply(this,arguments)}finally{f=ae}}}})(e2);(function(e){e.exports=e2})(Jx);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2=xe.exports,sn=Jx.exports;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n2=new Set,Aa={};function Rs(e,t){$o(e,t),$o(e+"Capture",t)}function $o(e,t){for(Aa[e]=t,e=0;e<t.length;e++)n2.add(t[e])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tp=Object.prototype.hasOwnProperty,Z$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wg={},Gg={};function J$(e){return Tp.call(Gg,e)?!0:Tp.call(Wg,e)?!1:Z$.test(e)?Gg[e]=!0:(Wg[e]=!0,!1)}function e_(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t_(e,t,r,s){if(t===null||typeof t>"u"||e_(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zt(e,t,r,s,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nf=/[\-:]([a-z])/g;function Tf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nf,Tf);$t[t]=new zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nf,Tf);$t[t]=new zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nf,Tf);$t[t]=new zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new zt(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function If(e,t,r,s){var o=$t.hasOwnProperty(t)?$t[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t_(t,r,o,s)&&(r=null),s||o===null?J$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,s=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var yr=t2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ei=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),r2=Symbol.for("react.provider"),s2=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),o2=Symbol.for("react.offscreen"),jg=Symbol.iterator;function aa(e){return e===null||typeof e!="object"?null:(e=jg&&e[jg]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Lc;function ma(e){if(Lc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lc=t&&t[1]||""}return`
`+Lc+e}var zc=!1;function Mc(e,t){if(!e||zc)return"";zc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),a=s.stack.split(`
`),i=o.length-1,u=a.length-1;1<=i&&0<=u&&o[i]!==a[u];)u--;for(;1<=i&&0<=u;i--,u--)if(o[i]!==a[u]){if(i!==1||u!==1)do if(i--,u--,0>u||o[i]!==a[u]){var l=`
`+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=u);break}}}finally{zc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ma(e):""}function n_(e){switch(e.tag){case 5:return ma(e.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 2:case 15:return e=Mc(e.type,!1),e;case 11:return e=Mc(e.type.render,!1),e;case 1:return e=Mc(e.type,!0),e;default:return""}}function Rp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zs:return"Fragment";case Qs:return"Portal";case Ip:return"Profiler";case Df:return"StrictMode";case Dp:return"Suspense";case Ap:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s2:return(e.displayName||"Context")+".Consumer";case r2:return(e._context.displayName||"Context")+".Provider";case Af:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rf:return t=e.displayName||null,t!==null?t:Rp(e.type)||"Memo";case Sr:t=e._payload,e=e._init;try{return Rp(e(t))}catch{}}return null}function r_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rp(t);case 8:return t===Df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function a2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s_(e){var t=a2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=s_(e))}function i2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=a2(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function $u(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pp(e,t){var r=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Hg(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Kr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function u2(e,t){t=t.checked,t!=null&&If(e,"checked",t,!1)}function Op(e,t){u2(e,t);var r=Kr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fp(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fp(e,t.type,Kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fp(e,t,r){(t!=="number"||$u(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ga=Array.isArray;function co(e,t,r,s){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Kr(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(ga(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Kr(r)}}function l2(e,t){var r=Kr(t.value),s=Kr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Xg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function c2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?c2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ti,p2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ti=Ti||document.createElement("div"),Ti.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ti.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ra(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o_=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(e){o_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wa[t]=wa[e]})});function d2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wa.hasOwnProperty(e)&&wa[e]?(""+t).trim():t+"px"}function f2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,o=d2(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,o):e[r]=o}}var a_=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(e,t){if(t){if(a_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Mp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vp=null;function Pf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Up=null,po=null,fo=null;function Yg(e){if(e=ai(e)){if(typeof Up!="function")throw Error(X(280));var t=e.stateNode;t&&(t=yl(t),Up(e.stateNode,e.type,t))}}function h2(e){po?fo?fo.push(e):fo=[e]:po=e}function m2(){if(po){var e=po,t=fo;if(fo=po=null,Yg(e),t)for(e=0;e<t.length;e++)Yg(t[e])}}function g2(e,t){return e(t)}function y2(){}var Vc=!1;function x2(e,t,r){if(Vc)return e(t,r);Vc=!0;try{return g2(e,t,r)}finally{Vc=!1,(po!==null||fo!==null)&&(y2(),m2())}}function Pa(e,t){var r=e.stateNode;if(r===null)return null;var s=yl(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var Wp=!1;if(cr)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{Wp=!1}function i_(e,t,r,s,o,a,i,u,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(p){this.onError(p)}}var ba=!1,_u=null,Su=!1,Gp=null,u_={onError:function(e){ba=!0,_u=e}};function l_(e,t,r,s,o,a,i,u,l){ba=!1,_u=null,i_.apply(u_,arguments)}function c_(e,t,r,s,o,a,i,u,l){if(l_.apply(this,arguments),ba){if(ba){var c=_u;ba=!1,_u=null}else throw Error(X(198));Su||(Su=!0,Gp=c)}}function Ps(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function v2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qg(e){if(Ps(e)!==e)throw Error(X(188))}function p_(e){var t=e.alternate;if(!t){if(t=Ps(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(s=o.return,s!==null){r=s;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return Qg(o),e;if(a===s)return Qg(o),t;a=a.sibling}throw Error(X(188))}if(r.return!==s.return)r=o,s=a;else{for(var i=!1,u=o.child;u;){if(u===r){i=!0,r=o,s=a;break}if(u===s){i=!0,s=o,r=a;break}u=u.sibling}if(!i){for(u=a.child;u;){if(u===r){i=!0,r=a,s=o;break}if(u===s){i=!0,s=a,r=o;break}u=u.sibling}if(!i)throw Error(X(189))}}if(r.alternate!==s)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function C2(e){return e=p_(e),e!==null?w2(e):null}function w2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=w2(e);if(t!==null)return t;e=e.sibling}return null}var b2=sn.unstable_scheduleCallback,Zg=sn.unstable_cancelCallback,d_=sn.unstable_shouldYield,f_=sn.unstable_requestPaint,Ze=sn.unstable_now,h_=sn.unstable_getCurrentPriorityLevel,Of=sn.unstable_ImmediatePriority,$2=sn.unstable_UserBlockingPriority,ku=sn.unstable_NormalPriority,m_=sn.unstable_LowPriority,_2=sn.unstable_IdlePriority,fl=null,Hn=null;function g_(e){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(fl,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:v_,y_=Math.log,x_=Math.LN2;function v_(e){return e>>>=0,e===0?32:31-(y_(e)/x_|0)|0}var Ii=64,Di=4194304;function ya(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Eu(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var u=i&~o;u!==0?s=ya(u):(a&=i,a!==0&&(s=ya(a)))}else i=r&~o,i!==0?s=ya(i):a!==0&&(s=ya(a));if(s===0)return 0;if(t!==0&&t!==s&&(t&o)===0&&(o=s&-s,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-An(t),o=1<<r,s|=e[r],t&=~o;return s}function C_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w_(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-An(a),u=1<<i,l=o[i];l===-1?((u&r)===0||(u&s)!==0)&&(o[i]=C_(u,t)):l<=t&&(e.expiredLanes|=u),a&=~u}}function jp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S2(){var e=Ii;return Ii<<=1,(Ii&4194240)===0&&(Ii=64),e}function Uc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function si(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=r}function b_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-An(r),a=1<<o;t[o]=0,s[o]=-1,e[o]=-1,r&=~a}}function Ff(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-An(r),o=1<<s;o&t|e[s]&t&&(e[s]|=t),r&=~o}}var Ae=0;function k2(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var E2,Bf,N2,T2,I2,Hp=!1,Ai=[],Or=null,Fr=null,Br=null,Oa=new Map,Fa=new Map,Nr=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jg(e,t){switch(e){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Oa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(t.pointerId)}}function ua(e,t,r,s,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[o]},t!==null&&(t=ai(t),t!==null&&Bf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function __(e,t,r,s,o){switch(t){case"focusin":return Or=ua(Or,e,t,r,s,o),!0;case"dragenter":return Fr=ua(Fr,e,t,r,s,o),!0;case"mouseover":return Br=ua(Br,e,t,r,s,o),!0;case"pointerover":var a=o.pointerId;return Oa.set(a,ua(Oa.get(a)||null,e,t,r,s,o)),!0;case"gotpointercapture":return a=o.pointerId,Fa.set(a,ua(Fa.get(a)||null,e,t,r,s,o)),!0}return!1}function D2(e){var t=us(e.target);if(t!==null){var r=Ps(t);if(r!==null){if(t=r.tag,t===13){if(t=v2(r),t!==null){e.blockedOn=t,I2(e.priority,function(){N2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function su(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Vp=s,r.target.dispatchEvent(s),Vp=null}else return t=ai(r),t!==null&&Bf(t),e.blockedOn=r,!1;t.shift()}return!0}function e1(e,t,r){su(e)&&r.delete(t)}function S_(){Hp=!1,Or!==null&&su(Or)&&(Or=null),Fr!==null&&su(Fr)&&(Fr=null),Br!==null&&su(Br)&&(Br=null),Oa.forEach(e1),Fa.forEach(e1)}function la(e,t){e.blockedOn===t&&(e.blockedOn=null,Hp||(Hp=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,S_)))}function Ba(e){function t(o){return la(o,e)}if(0<Ai.length){la(Ai[0],e);for(var r=1;r<Ai.length;r++){var s=Ai[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Or!==null&&la(Or,e),Fr!==null&&la(Fr,e),Br!==null&&la(Br,e),Oa.forEach(t),Fa.forEach(t),r=0;r<Nr.length;r++)s=Nr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Nr.length&&(r=Nr[0],r.blockedOn===null);)D2(r),r.blockedOn===null&&Nr.shift()}var ho=yr.ReactCurrentBatchConfig,Nu=!0;function k_(e,t,r,s){var o=Ae,a=ho.transition;ho.transition=null;try{Ae=1,Lf(e,t,r,s)}finally{Ae=o,ho.transition=a}}function E_(e,t,r,s){var o=Ae,a=ho.transition;ho.transition=null;try{Ae=4,Lf(e,t,r,s)}finally{Ae=o,ho.transition=a}}function Lf(e,t,r,s){if(Nu){var o=Kp(e,t,r,s);if(o===null)Zc(e,t,s,Tu,r),Jg(e,s);else if(__(o,e,t,r,s))s.stopPropagation();else if(Jg(e,s),t&4&&-1<$_.indexOf(e)){for(;o!==null;){var a=ai(o);if(a!==null&&E2(a),a=Kp(e,t,r,s),a===null&&Zc(e,t,s,Tu,r),a===o)break;o=a}o!==null&&s.stopPropagation()}else Zc(e,t,s,null,r)}}var Tu=null;function Kp(e,t,r,s){if(Tu=null,e=Pf(s),e=us(e),e!==null)if(t=Ps(e),t===null)e=null;else if(r=t.tag,r===13){if(e=v2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tu=e,null}function A2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h_()){case Of:return 1;case $2:return 4;case ku:case m_:return 16;case _2:return 536870912;default:return 16}default:return 16}}var Dr=null,zf=null,ou=null;function R2(){if(ou)return ou;var e,t=zf,r=t.length,s,o="value"in Dr?Dr.value:Dr.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===o[a-s];s++);return ou=o.slice(e,1<s?1-s:void 0)}function au(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function t1(){return!1}function an(e){function t(r,s,o,a,i){this._reactName=r,this._targetInst=o,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ri:t1,this.isPropagationStopped=t1,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=an(Uo),oi=qe({},Uo,{view:0,detail:0}),N_=an(oi),Wc,Gc,ca,hl=qe({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ca&&(ca&&e.type==="mousemove"?(Wc=e.screenX-ca.screenX,Gc=e.screenY-ca.screenY):Gc=Wc=0,ca=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:Gc}}),n1=an(hl),T_=qe({},hl,{dataTransfer:0}),I_=an(T_),D_=qe({},oi,{relatedTarget:0}),jc=an(D_),A_=qe({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),R_=an(A_),P_=qe({},Uo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O_=an(P_),F_=qe({},Uo,{data:0}),r1=an(F_),B_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z_[e])?!!t[e]:!1}function Vf(){return M_}var V_=qe({},oi,{key:function(e){if(e.key){var t=B_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=au(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(e){return e.type==="keypress"?au(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?au(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U_=an(V_),W_=qe({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s1=an(W_),G_=qe({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),j_=an(G_),H_=qe({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),K_=an(H_),q_=qe({},hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=an(q_),Y_=[9,13,27,32],Uf=cr&&"CompositionEvent"in window,$a=null;cr&&"documentMode"in document&&($a=document.documentMode);var Q_=cr&&"TextEvent"in window&&!$a,P2=cr&&(!Uf||$a&&8<$a&&11>=$a),o1=String.fromCharCode(32),a1=!1;function O2(e,t){switch(e){case"keyup":return Y_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Js=!1;function Z_(e,t){switch(e){case"compositionend":return F2(t);case"keypress":return t.which!==32?null:(a1=!0,o1);case"textInput":return e=t.data,e===o1&&a1?null:e;default:return null}}function J_(e,t){if(Js)return e==="compositionend"||!Uf&&O2(e,t)?(e=R2(),ou=zf=Dr=null,Js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return P2&&t.locale!=="ko"?null:t.data;default:return null}}var eS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eS[e.type]:t==="textarea"}function B2(e,t,r,s){h2(s),t=Iu(t,"onChange"),0<t.length&&(r=new Mf("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var _a=null,La=null;function tS(e){q2(e,0)}function ml(e){var t=no(e);if(i2(t))return e}function nS(e,t){if(e==="change")return t}var L2=!1;if(cr){var Hc;if(cr){var Kc="oninput"in document;if(!Kc){var u1=document.createElement("div");u1.setAttribute("oninput","return;"),Kc=typeof u1.oninput=="function"}Hc=Kc}else Hc=!1;L2=Hc&&(!document.documentMode||9<document.documentMode)}function l1(){_a&&(_a.detachEvent("onpropertychange",z2),La=_a=null)}function z2(e){if(e.propertyName==="value"&&ml(La)){var t=[];B2(t,La,e,Pf(e)),x2(tS,t)}}function rS(e,t,r){e==="focusin"?(l1(),_a=t,La=r,_a.attachEvent("onpropertychange",z2)):e==="focusout"&&l1()}function sS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ml(La)}function oS(e,t){if(e==="click")return ml(t)}function aS(e,t){if(e==="input"||e==="change")return ml(t)}function iS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var On=typeof Object.is=="function"?Object.is:iS;function za(e,t){if(On(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var o=r[s];if(!Tp.call(t,o)||!On(e[o],t[o]))return!1}return!0}function c1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p1(e,t){var r=c1(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=c1(r)}}function M2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?M2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function V2(){for(var e=window,t=$u();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$u(e.document)}return t}function Wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function uS(e){var t=V2(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&M2(r.ownerDocument.documentElement,r)){if(s!==null&&Wf(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(s.start,o);s=s.end===void 0?a:Math.min(s.end,o),!e.extend&&a>s&&(o=s,s=a,a=o),o=p1(r,a);var i=p1(r,s);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lS=cr&&"documentMode"in document&&11>=document.documentMode,eo=null,qp=null,Sa=null,Xp=!1;function d1(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xp||eo==null||eo!==$u(s)||(s=eo,"selectionStart"in s&&Wf(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sa&&za(Sa,s)||(Sa=s,s=Iu(qp,"onSelect"),0<s.length&&(t=new Mf("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=eo)))}function Pi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var to={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionend:Pi("Transition","TransitionEnd")},qc={},U2={};cr&&(U2=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function gl(e){if(qc[e])return qc[e];if(!to[e])return e;var t=to[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in U2)return qc[e]=t[r];return e}var W2=gl("animationend"),G2=gl("animationiteration"),j2=gl("animationstart"),H2=gl("transitionend"),K2=new Map,f1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(e,t){K2.set(e,t),Rs(t,[e])}for(var Xc=0;Xc<f1.length;Xc++){var Yc=f1[Xc],cS=Yc.toLowerCase(),pS=Yc[0].toUpperCase()+Yc.slice(1);Jr(cS,"on"+pS)}Jr(W2,"onAnimationEnd");Jr(G2,"onAnimationIteration");Jr(j2,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(H2,"onTransitionEnd");$o("onMouseEnter",["mouseout","mouseover"]);$o("onMouseLeave",["mouseout","mouseover"]);$o("onPointerEnter",["pointerout","pointerover"]);$o("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dS=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function h1(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,c_(s,t,void 0,e),e.currentTarget=null}function q2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],o=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var u=s[i],l=u.instance,c=u.currentTarget;if(u=u.listener,l!==a&&o.isPropagationStopped())break e;h1(o,u,c),a=l}else for(i=0;i<s.length;i++){if(u=s[i],l=u.instance,c=u.currentTarget,u=u.listener,l!==a&&o.isPropagationStopped())break e;h1(o,u,c),a=l}}}if(Su)throw e=Gp,Su=!1,Gp=null,e}function Me(e,t){var r=t[ed];r===void 0&&(r=t[ed]=new Set);var s=e+"__bubble";r.has(s)||(X2(t,e,2,!1),r.add(s))}function Qc(e,t,r){var s=0;t&&(s|=4),X2(r,e,s,t)}var Oi="_reactListening"+Math.random().toString(36).slice(2);function Ma(e){if(!e[Oi]){e[Oi]=!0,n2.forEach(function(r){r!=="selectionchange"&&(dS.has(r)||Qc(r,!1,e),Qc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oi]||(t[Oi]=!0,Qc("selectionchange",!1,t))}}function X2(e,t,r,s){switch(A2(t)){case 1:var o=k_;break;case 4:o=E_;break;default:o=Lf}r=o.bind(null,t,r,e),o=void 0,!Wp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Zc(e,t,r,s,o){var a=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var u=s.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(i===4)for(i=s.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;u!==null;){if(i=us(u),i===null)return;if(l=i.tag,l===5||l===6){s=a=i;continue e}u=u.parentNode}}s=s.return}x2(function(){var c=a,p=Pf(r),d=[];e:{var f=K2.get(e);if(f!==void 0){var h=Mf,m=e;switch(e){case"keypress":if(au(r)===0)break e;case"keydown":case"keyup":h=U_;break;case"focusin":m="focus",h=jc;break;case"focusout":m="blur",h=jc;break;case"beforeblur":case"afterblur":h=jc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=n1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=I_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=j_;break;case W2:case G2:case j2:h=R_;break;case H2:h=K_;break;case"scroll":h=N_;break;case"wheel":h=X_;break;case"copy":case"cut":case"paste":h=O_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=s1}var g=(t&4)!==0,x=!g&&e==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=c,w;v!==null;){w=v;var $=w.stateNode;if(w.tag===5&&$!==null&&(w=$,y!==null&&($=Pa(v,y),$!=null&&g.push(Va(v,$,w)))),x)break;v=v.return}0<g.length&&(f=new h(f,m,null,r,p),d.push({event:f,listeners:g}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&r!==Vp&&(m=r.relatedTarget||r.fromElement)&&(us(m)||m[pr]))break e;if((h||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=c,m=m?us(m):null,m!==null&&(x=Ps(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=n1,$="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=s1,$="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?f:no(h),w=m==null?f:no(m),f=new g($,v+"leave",h,r,p),f.target=x,f.relatedTarget=w,$=null,us(p)===c&&(g=new g(y,v+"enter",m,r,p),g.target=w,g.relatedTarget=x,$=g),x=$,h&&m)t:{for(g=h,y=m,v=0,w=g;w;w=js(w))v++;for(w=0,$=y;$;$=js($))w++;for(;0<v-w;)g=js(g),v--;for(;0<w-v;)y=js(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=js(g),y=js(y)}g=null}else g=null;h!==null&&m1(d,f,h,g,!1),m!==null&&x!==null&&m1(d,x,m,g,!0)}}e:{if(f=c?no(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=nS;else if(i1(f))if(L2)b=aS;else{b=sS;var T=rS}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=oS);if(b&&(b=b(e,c))){B2(d,b,r,p);break e}T&&T(e,f,c),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Fp(f,"number",f.value)}switch(T=c?no(c):window,e){case"focusin":(i1(T)||T.contentEditable==="true")&&(eo=T,qp=c,Sa=null);break;case"focusout":Sa=qp=eo=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,d1(d,r,p);break;case"selectionchange":if(lS)break;case"keydown":case"keyup":d1(d,r,p)}var S;if(Uf)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Js?O2(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(P2&&r.locale!=="ko"&&(Js||D!=="onCompositionStart"?D==="onCompositionEnd"&&Js&&(S=R2()):(Dr=p,zf="value"in Dr?Dr.value:Dr.textContent,Js=!0)),T=Iu(c,D),0<T.length&&(D=new r1(D,e,null,r,p),d.push({event:D,listeners:T}),S?D.data=S:(S=F2(r),S!==null&&(D.data=S)))),(S=Q_?Z_(e,r):J_(e,r))&&(c=Iu(c,"onBeforeInput"),0<c.length&&(p=new r1("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:c}),p.data=S))}q2(d,t)})}function Va(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Iu(e,t){for(var r=t+"Capture",s=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Pa(e,r),a!=null&&s.unshift(Va(e,a,o)),a=Pa(e,t),a!=null&&s.push(Va(e,a,o))),e=e.return}return s}function js(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function m1(e,t,r,s,o){for(var a=t._reactName,i=[];r!==null&&r!==s;){var u=r,l=u.alternate,c=u.stateNode;if(l!==null&&l===s)break;u.tag===5&&c!==null&&(u=c,o?(l=Pa(r,a),l!=null&&i.unshift(Va(r,l,u))):o||(l=Pa(r,a),l!=null&&i.push(Va(r,l,u)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var fS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function g1(e){return(typeof e=="string"?e:""+e).replace(fS,`
`).replace(hS,"")}function Fi(e,t,r){if(t=g1(t),g1(e)!==t&&r)throw Error(X(425))}function Du(){}var Yp=null,Qp=null;function Zp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jp=typeof setTimeout=="function"?setTimeout:void 0,mS=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,gS=typeof queueMicrotask=="function"?queueMicrotask:typeof y1<"u"?function(e){return y1.resolve(null).then(e).catch(yS)}:Jp;function yS(e){setTimeout(function(){throw e})}function Jc(e,t){var r=t,s=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(s===0){e.removeChild(o),Ba(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=o}while(r);Ba(t)}function Lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function x1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Wo,Ua="__reactProps$"+Wo,pr="__reactContainer$"+Wo,ed="__reactEvents$"+Wo,xS="__reactListeners$"+Wo,vS="__reactHandles$"+Wo;function us(e){var t=e[Wn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pr]||r[Wn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=x1(e);e!==null;){if(r=e[Wn])return r;e=x1(e)}return t}e=r,r=e.parentNode}return null}function ai(e){return e=e[Wn]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function no(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function yl(e){return e[Ua]||null}var td=[],ro=-1;function es(e){return{current:e}}function Ve(e){0>ro||(e.current=td[ro],td[ro]=null,ro--)}function Be(e,t){ro++,td[ro]=e.current,e.current=t}var qr={},Dt=es(qr),Gt=es(!1),xs=qr;function _o(e,t){var r=e.type.contextTypes;if(!r)return qr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function jt(e){return e=e.childContextTypes,e!=null}function Au(){Ve(Gt),Ve(Dt)}function v1(e,t,r){if(Dt.current!==qr)throw Error(X(168));Be(Dt,t),Be(Gt,r)}function Y2(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(X(108,r_(e)||"Unknown",o));return qe({},r,s)}function Ru(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qr,xs=Dt.current,Be(Dt,e),Be(Gt,Gt.current),!0}function C1(e,t,r){var s=e.stateNode;if(!s)throw Error(X(169));r?(e=Y2(e,t,xs),s.__reactInternalMemoizedMergedChildContext=e,Ve(Gt),Ve(Dt),Be(Dt,e)):Ve(Gt),Be(Gt,r)}var Jn=null,xl=!1,ep=!1;function Q2(e){Jn===null?Jn=[e]:Jn.push(e)}function CS(e){xl=!0,Q2(e)}function ts(){if(!ep&&Jn!==null){ep=!0;var e=0,t=Ae;try{var r=Jn;for(Ae=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Jn=null,xl=!1}catch(o){throw Jn!==null&&(Jn=Jn.slice(e+1)),b2(Of,ts),o}finally{Ae=t,ep=!1}}return null}var so=[],oo=0,Pu=null,Ou=0,dn=[],fn=0,vs=null,sr=1,or="";function ss(e,t){so[oo++]=Ou,so[oo++]=Pu,Pu=e,Ou=t}function Z2(e,t,r){dn[fn++]=sr,dn[fn++]=or,dn[fn++]=vs,vs=e;var s=sr;e=or;var o=32-An(s)-1;s&=~(1<<o),r+=1;var a=32-An(t)+o;if(30<a){var i=o-o%5;a=(s&(1<<i)-1).toString(32),s>>=i,o-=i,sr=1<<32-An(t)+o|r<<o|s,or=a+e}else sr=1<<a|r<<o|s,or=e}function Gf(e){e.return!==null&&(ss(e,1),Z2(e,1,0))}function jf(e){for(;e===Pu;)Pu=so[--oo],so[oo]=null,Ou=so[--oo],so[oo]=null;for(;e===vs;)vs=dn[--fn],dn[fn]=null,or=dn[--fn],dn[fn]=null,sr=dn[--fn],dn[fn]=null}var rn=null,tn=null,je=!1,Tn=null;function J2(e,t){var r=hn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function w1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rn=e,tn=Lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=vs!==null?{id:sr,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=hn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rn=e,tn=null,!0):!1;default:return!1}}function nd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rd(e){if(je){var t=tn;if(t){var r=t;if(!w1(e,t)){if(nd(e))throw Error(X(418));t=Lr(r.nextSibling);var s=rn;t&&w1(e,t)?J2(s,r):(e.flags=e.flags&-4097|2,je=!1,rn=e)}}else{if(nd(e))throw Error(X(418));e.flags=e.flags&-4097|2,je=!1,rn=e}}}function b1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Bi(e){if(e!==rn)return!1;if(!je)return b1(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zp(e.type,e.memoizedProps)),t&&(t=tn)){if(nd(e))throw ev(),Error(X(418));for(;t;)J2(e,t),t=Lr(t.nextSibling)}if(b1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){tn=Lr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=rn?Lr(e.stateNode.nextSibling):null;return!0}function ev(){for(var e=tn;e;)e=Lr(e.nextSibling)}function So(){tn=rn=null,je=!1}function Hf(e){Tn===null?Tn=[e]:Tn.push(e)}var wS=yr.ReactCurrentBatchConfig;function En(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Fu=es(null),Bu=null,ao=null,Kf=null;function qf(){Kf=ao=Bu=null}function Xf(e){var t=Fu.current;Ve(Fu),e._currentValue=t}function sd(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function mo(e,t){Bu=e,Kf=ao=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Wt=!0),e.firstContext=null)}function yn(e){var t=e._currentValue;if(Kf!==e)if(e={context:e,memoizedValue:t,next:null},ao===null){if(Bu===null)throw Error(X(308));ao=e,Bu.dependencies={lanes:0,firstContext:e}}else ao=ao.next=e;return t}var ls=null;function Yf(e){ls===null?ls=[e]:ls.push(e)}function tv(e,t,r,s){var o=t.interleaved;return o===null?(r.next=r,Yf(t)):(r.next=o.next,o.next=r),t.interleaved=r,dr(e,s)}function dr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var kr=!1;function Qf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Te&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,dr(e,r)}return o=s.interleaved,o===null?(t.next=t,Yf(s)):(t.next=o.next,o.next=t),s.interleaved=t,dr(e,r)}function iu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ff(e,r)}}function $1(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Lu(e,t,r,s){var o=e.updateQueue;kr=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var l=u,c=l.next;l.next=null,i===null?a=c:i.next=c,i=l;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==i&&(u===null?p.firstBaseUpdate=c:u.next=c,p.lastBaseUpdate=l))}if(a!==null){var d=o.baseState;i=0,p=c=l=null,u=a;do{var f=u.lane,h=u.eventTime;if((s&f)===f){p!==null&&(p=p.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var m=e,g=u;switch(f=t,h=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=qe({},d,f);break e;case 2:kr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[u]:f.push(u))}else h={eventTime:h,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(c=p=h,l=d):p=p.next=h,i|=f;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;f=u,u=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(1);if(p===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);ws|=i,e.lanes=i,e.memoizedState=d}}function _1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=r,typeof o!="function")throw Error(X(191,o));o.call(s)}}}var rv=new t2.Component().refs;function od(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:qe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vl={isMounted:function(e){return(e=e._reactInternals)?Ps(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ft(),o=Vr(e),a=ar(s,o);a.payload=t,r!=null&&(a.callback=r),t=zr(e,a,o),t!==null&&(Rn(t,e,o,s),iu(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ft(),o=Vr(e),a=ar(s,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=zr(e,a,o),t!==null&&(Rn(t,e,o,s),iu(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ft(),s=Vr(e),o=ar(r,s);o.tag=2,t!=null&&(o.callback=t),t=zr(e,o,s),t!==null&&(Rn(t,e,s,r),iu(t,e,s))}};function S1(e,t,r,s,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!za(r,s)||!za(o,a):!0}function sv(e,t,r){var s=!1,o=qr,a=t.contextType;return typeof a=="object"&&a!==null?a=yn(a):(o=jt(t)?xs:Dt.current,s=t.contextTypes,a=(s=s!=null)?_o(e,o):qr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function k1(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&vl.enqueueReplaceState(t,t.state,null)}function ad(e,t,r,s){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=rv,Qf(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=yn(a):(a=jt(t)?xs:Dt.current,o.context=_o(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(od(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&vl.enqueueReplaceState(o,o.state,null),Lu(e,r,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function pa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var s=r.stateNode}if(!s)throw Error(X(147,e));var o=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var u=o.refs;u===rv&&(u=o.refs={}),i===null?delete u[a]:u[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Li(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function E1(e){var t=e._init;return t(e._payload)}function ov(e){function t(y,v){if(e){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=Ur(y,v),y.index=0,y.sibling=null,y}function a(y,v,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,v,w,$){return v===null||v.tag!==6?(v=ip(w,y.mode,$),v.return=y,v):(v=o(v,w),v.return=y,v)}function l(y,v,w,$){var b=w.type;return b===Zs?p(y,v,w.props.children,$,w.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sr&&E1(b)===v.type)?($=o(v,w.props),$.ref=pa(y,v,w),$.return=y,$):($=fu(w.type,w.key,w.props,null,y.mode,$),$.ref=pa(y,v,w),$.return=y,$)}function c(y,v,w,$){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=up(w,y.mode,$),v.return=y,v):(v=o(v,w.children||[]),v.return=y,v)}function p(y,v,w,$,b){return v===null||v.tag!==7?(v=fs(w,y.mode,$,b),v.return=y,v):(v=o(v,w),v.return=y,v)}function d(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ip(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ei:return w=fu(v.type,v.key,v.props,null,y.mode,w),w.ref=pa(y,null,v),w.return=y,w;case Qs:return v=up(v,y.mode,w),v.return=y,v;case Sr:var $=v._init;return d(y,$(v._payload),w)}if(ga(v)||aa(v))return v=fs(v,y.mode,w,null),v.return=y,v;Li(y,v)}return null}function f(y,v,w,$){var b=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:u(y,v,""+w,$);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ei:return w.key===b?l(y,v,w,$):null;case Qs:return w.key===b?c(y,v,w,$):null;case Sr:return b=w._init,f(y,v,b(w._payload),$)}if(ga(w)||aa(w))return b!==null?null:p(y,v,w,$,null);Li(y,w)}return null}function h(y,v,w,$,b){if(typeof $=="string"&&$!==""||typeof $=="number")return y=y.get(w)||null,u(v,y,""+$,b);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ei:return y=y.get($.key===null?w:$.key)||null,l(v,y,$,b);case Qs:return y=y.get($.key===null?w:$.key)||null,c(v,y,$,b);case Sr:var T=$._init;return h(y,v,w,T($._payload),b)}if(ga($)||aa($))return y=y.get(w)||null,p(v,y,$,b,null);Li(v,$)}return null}function m(y,v,w,$){for(var b=null,T=null,S=v,D=v=0,z=null;S!==null&&D<w.length;D++){S.index>D?(z=S,S=null):z=S.sibling;var E=f(y,S,w[D],$);if(E===null){S===null&&(S=z);break}e&&S&&E.alternate===null&&t(y,S),v=a(E,v,D),T===null?b=E:T.sibling=E,T=E,S=z}if(D===w.length)return r(y,S),je&&ss(y,D),b;if(S===null){for(;D<w.length;D++)S=d(y,w[D],$),S!==null&&(v=a(S,v,D),T===null?b=S:T.sibling=S,T=S);return je&&ss(y,D),b}for(S=s(y,S);D<w.length;D++)z=h(S,y,D,w[D],$),z!==null&&(e&&z.alternate!==null&&S.delete(z.key===null?D:z.key),v=a(z,v,D),T===null?b=z:T.sibling=z,T=z);return e&&S.forEach(function(A){return t(y,A)}),je&&ss(y,D),b}function g(y,v,w,$){var b=aa(w);if(typeof b!="function")throw Error(X(150));if(w=b.call(w),w==null)throw Error(X(151));for(var T=b=null,S=v,D=v=0,z=null,E=w.next();S!==null&&!E.done;D++,E=w.next()){S.index>D?(z=S,S=null):z=S.sibling;var A=f(y,S,E.value,$);if(A===null){S===null&&(S=z);break}e&&S&&A.alternate===null&&t(y,S),v=a(A,v,D),T===null?b=A:T.sibling=A,T=A,S=z}if(E.done)return r(y,S),je&&ss(y,D),b;if(S===null){for(;!E.done;D++,E=w.next())E=d(y,E.value,$),E!==null&&(v=a(E,v,D),T===null?b=E:T.sibling=E,T=E);return je&&ss(y,D),b}for(S=s(y,S);!E.done;D++,E=w.next())E=h(S,y,D,E.value,$),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?D:E.key),v=a(E,v,D),T===null?b=E:T.sibling=E,T=E);return e&&S.forEach(function(O){return t(y,O)}),je&&ss(y,D),b}function x(y,v,w,$){if(typeof w=="object"&&w!==null&&w.type===Zs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ei:e:{for(var b=w.key,T=v;T!==null;){if(T.key===b){if(b=w.type,b===Zs){if(T.tag===7){r(y,T.sibling),v=o(T,w.props.children),v.return=y,y=v;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sr&&E1(b)===T.type){r(y,T.sibling),v=o(T,w.props),v.ref=pa(y,T,w),v.return=y,y=v;break e}r(y,T);break}else t(y,T);T=T.sibling}w.type===Zs?(v=fs(w.props.children,y.mode,$,w.key),v.return=y,y=v):($=fu(w.type,w.key,w.props,null,y.mode,$),$.ref=pa(y,v,w),$.return=y,y=$)}return i(y);case Qs:e:{for(T=w.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(y,v.sibling),v=o(v,w.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=up(w,y.mode,$),v.return=y,y=v}return i(y);case Sr:return T=w._init,x(y,v,T(w._payload),$)}if(ga(w))return m(y,v,w,$);if(aa(w))return g(y,v,w,$);Li(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(y,v.sibling),v=o(v,w),v.return=y,y=v):(r(y,v),v=ip(w,y.mode,$),v.return=y,y=v),i(y)):r(y,v)}return x}var ko=ov(!0),av=ov(!1),ii={},Kn=es(ii),Wa=es(ii),Ga=es(ii);function cs(e){if(e===ii)throw Error(X(174));return e}function Zf(e,t){switch(Be(Ga,t),Be(Wa,e),Be(Kn,ii),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lp(t,e)}Ve(Kn),Be(Kn,t)}function Eo(){Ve(Kn),Ve(Wa),Ve(Ga)}function iv(e){cs(Ga.current);var t=cs(Kn.current),r=Lp(t,e.type);t!==r&&(Be(Wa,e),Be(Kn,r))}function Jf(e){Wa.current===e&&(Ve(Kn),Ve(Wa))}var He=es(0);function zu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tp=[];function eh(){for(var e=0;e<tp.length;e++)tp[e]._workInProgressVersionPrimary=null;tp.length=0}var uu=yr.ReactCurrentDispatcher,np=yr.ReactCurrentBatchConfig,Cs=0,Ke=null,at=null,dt=null,Mu=!1,ka=!1,ja=0,bS=0;function Et(){throw Error(X(321))}function th(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!On(e[r],t[r]))return!1;return!0}function nh(e,t,r,s,o,a){if(Cs=a,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uu.current=e===null||e.memoizedState===null?kS:ES,e=r(s,o),ka){a=0;do{if(ka=!1,ja=0,25<=a)throw Error(X(301));a+=1,dt=at=null,t.updateQueue=null,uu.current=NS,e=r(s,o)}while(ka)}if(uu.current=Vu,t=at!==null&&at.next!==null,Cs=0,dt=at=Ke=null,Mu=!1,t)throw Error(X(300));return e}function rh(){var e=ja!==0;return ja=0,e}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ke.memoizedState=dt=e:dt=dt.next=e,dt}function xn(){if(at===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=dt===null?Ke.memoizedState:dt.next;if(t!==null)dt=t,at=e;else{if(e===null)throw Error(X(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?Ke.memoizedState=dt=e:dt=dt.next=e}return dt}function Ha(e,t){return typeof t=="function"?t(e):t}function rp(e){var t=xn(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=at,o=s.baseQueue,a=r.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}s.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,s=s.baseState;var u=i=null,l=null,c=a;do{var p=c.lane;if((Cs&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(u=l=d,i=s):l=l.next=d,Ke.lanes|=p,ws|=p}c=c.next}while(c!==null&&c!==a);l===null?i=s:l.next=u,On(s,t.memoizedState)||(Wt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=l,r.lastRenderedState=s}if(e=r.interleaved,e!==null){o=e;do a=o.lane,Ke.lanes|=a,ws|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function sp(e){var t=xn(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);On(a,t.memoizedState)||(Wt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function uv(){}function lv(e,t){var r=Ke,s=xn(),o=t(),a=!On(s.memoizedState,o);if(a&&(s.memoizedState=o,Wt=!0),s=s.queue,sh(dv.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||dt!==null&&dt.memoizedState.tag&1){if(r.flags|=2048,Ka(9,pv.bind(null,r,s,o,t),void 0,null),ht===null)throw Error(X(349));(Cs&30)!==0||cv(r,t,o)}return o}function cv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pv(e,t,r,s){t.value=r,t.getSnapshot=s,fv(t)&&hv(e)}function dv(e,t,r){return r(function(){fv(t)&&hv(e)})}function fv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!On(e,r)}catch{return!0}}function hv(e){var t=dr(e,1);t!==null&&Rn(t,e,1,-1)}function N1(e){var t=Vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t.queue=e,e=e.dispatch=SS.bind(null,Ke,e),[t.memoizedState,e]}function Ka(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function mv(){return xn().memoizedState}function lu(e,t,r,s){var o=Vn();Ke.flags|=e,o.memoizedState=Ka(1|t,r,void 0,s===void 0?null:s)}function Cl(e,t,r,s){var o=xn();s=s===void 0?null:s;var a=void 0;if(at!==null){var i=at.memoizedState;if(a=i.destroy,s!==null&&th(s,i.deps)){o.memoizedState=Ka(t,r,a,s);return}}Ke.flags|=e,o.memoizedState=Ka(1|t,r,a,s)}function T1(e,t){return lu(8390656,8,e,t)}function sh(e,t){return Cl(2048,8,e,t)}function gv(e,t){return Cl(4,2,e,t)}function yv(e,t){return Cl(4,4,e,t)}function xv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vv(e,t,r){return r=r!=null?r.concat([e]):null,Cl(4,4,xv.bind(null,t,e),r)}function oh(){}function Cv(e,t){var r=xn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&th(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function wv(e,t){var r=xn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&th(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function bv(e,t,r){return(Cs&21)===0?(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=r):(On(r,t)||(r=S2(),Ke.lanes|=r,ws|=r,e.baseState=!0),t)}function $S(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var s=np.transition;np.transition={};try{e(!1),t()}finally{Ae=r,np.transition=s}}function $v(){return xn().memoizedState}function _S(e,t,r){var s=Vr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},_v(e))Sv(t,r);else if(r=tv(e,t,r,s),r!==null){var o=Ft();Rn(r,e,s,o),kv(r,t,s)}}function SS(e,t,r){var s=Vr(e),o={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(_v(e))Sv(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,u=a(i,r);if(o.hasEagerState=!0,o.eagerState=u,On(u,i)){var l=t.interleaved;l===null?(o.next=o,Yf(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}r=tv(e,t,o,s),r!==null&&(o=Ft(),Rn(r,e,s,o),kv(r,t,s))}}function _v(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Sv(e,t){ka=Mu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kv(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ff(e,r)}}var Vu={readContext:yn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},kS={readContext:yn,useCallback:function(e,t){return Vn().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:T1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,lu(4194308,4,xv.bind(null,t,e),r)},useLayoutEffect:function(e,t){return lu(4194308,4,e,t)},useInsertionEffect:function(e,t){return lu(4,2,e,t)},useMemo:function(e,t){var r=Vn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Vn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=_S.bind(null,Ke,e),[s.memoizedState,e]},useRef:function(e){var t=Vn();return e={current:e},t.memoizedState=e},useState:N1,useDebugValue:oh,useDeferredValue:function(e){return Vn().memoizedState=e},useTransition:function(){var e=N1(!1),t=e[0];return e=$S.bind(null,e[1]),Vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ke,o=Vn();if(je){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),ht===null)throw Error(X(349));(Cs&30)!==0||cv(s,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,T1(dv.bind(null,s,a,e),[e]),s.flags|=2048,Ka(9,pv.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=Vn(),t=ht.identifierPrefix;if(je){var r=or,s=sr;r=(s&~(1<<32-An(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ja++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=bS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ES={readContext:yn,useCallback:Cv,useContext:yn,useEffect:sh,useImperativeHandle:vv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:wv,useReducer:rp,useRef:mv,useState:function(){return rp(Ha)},useDebugValue:oh,useDeferredValue:function(e){var t=xn();return bv(t,at.memoizedState,e)},useTransition:function(){var e=rp(Ha)[0],t=xn().memoizedState;return[e,t]},useMutableSource:uv,useSyncExternalStore:lv,useId:$v,unstable_isNewReconciler:!1},NS={readContext:yn,useCallback:Cv,useContext:yn,useEffect:sh,useImperativeHandle:vv,useInsertionEffect:gv,useLayoutEffect:yv,useMemo:wv,useReducer:sp,useRef:mv,useState:function(){return sp(Ha)},useDebugValue:oh,useDeferredValue:function(e){var t=xn();return at===null?t.memoizedState=e:bv(t,at.memoizedState,e)},useTransition:function(){var e=sp(Ha)[0],t=xn().memoizedState;return[e,t]},useMutableSource:uv,useSyncExternalStore:lv,useId:$v,unstable_isNewReconciler:!1};function No(e,t){try{var r="",s=t;do r+=n_(s),s=s.return;while(s);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function op(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function id(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var TS=typeof WeakMap=="function"?WeakMap:Map;function Ev(e,t,r){r=ar(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Wu||(Wu=!0,yd=s),id(e,t)},r}function Nv(e,t,r){r=ar(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;r.payload=function(){return s(o)},r.callback=function(){id(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){id(e,t),typeof s!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function I1(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new TS;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(r)||(o.add(r),e=WS.bind(null,e,t,r),t.then(e,e))}function D1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A1(e,t,r,s,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ar(-1,1),t.tag=2,zr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var IS=yr.ReactCurrentOwner,Wt=!1;function Rt(e,t,r,s){t.child=e===null?av(t,null,r,s):ko(t,e.child,r,s)}function R1(e,t,r,s,o){r=r.render;var a=t.ref;return mo(t,o),s=nh(e,t,r,s,a,o),r=rh(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,fr(e,t,o)):(je&&r&&Gf(t),t.flags|=1,Rt(e,t,s,o),t.child)}function P1(e,t,r,s,o){if(e===null){var a=r.type;return typeof a=="function"&&!fh(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Tv(e,t,a,s,o)):(e=fu(r.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&o)===0){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:za,r(i,s)&&e.ref===t.ref)return fr(e,t,o)}return t.flags|=1,e=Ur(a,s),e.ref=t.ref,e.return=t,t.child=e}function Tv(e,t,r,s,o){if(e!==null){var a=e.memoizedProps;if(za(a,s)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=s=a,(e.lanes&o)!==0)(e.flags&131072)!==0&&(Wt=!0);else return t.lanes=e.lanes,fr(e,t,o)}return ud(e,t,r,s,o)}function Iv(e,t,r){var s=t.pendingProps,o=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(uo,Jt),Jt|=r;else{if((r&1073741824)===0)return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(uo,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,Be(uo,Jt),Jt|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,Be(uo,Jt),Jt|=s;return Rt(e,t,o,r),t.child}function Dv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ud(e,t,r,s,o){var a=jt(r)?xs:Dt.current;return a=_o(t,a),mo(t,o),r=nh(e,t,r,s,a,o),s=rh(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,fr(e,t,o)):(je&&s&&Gf(t),t.flags|=1,Rt(e,t,r,o),t.child)}function O1(e,t,r,s,o){if(jt(r)){var a=!0;Ru(t)}else a=!1;if(mo(t,o),t.stateNode===null)cu(e,t),sv(t,r,s),ad(t,r,s,o),s=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var l=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=yn(c):(c=jt(r)?xs:Dt.current,c=_o(t,c));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==s||l!==c)&&k1(t,i,s,c),kr=!1;var f=t.memoizedState;i.state=f,Lu(t,s,i,o),l=t.memoizedState,u!==s||f!==l||Gt.current||kr?(typeof p=="function"&&(od(t,r,p,s),l=t.memoizedState),(u=kr||S1(t,r,u,s,f,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,nv(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:En(t.type,u),i.props=c,d=t.pendingProps,f=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=yn(l):(l=jt(r)?xs:Dt.current,l=_o(t,l));var h=r.getDerivedStateFromProps;(p=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==d||f!==l)&&k1(t,i,s,l),kr=!1,f=t.memoizedState,i.state=f,Lu(t,s,i,o);var m=t.memoizedState;u!==d||f!==m||Gt.current||kr?(typeof h=="function"&&(od(t,r,h,s),m=t.memoizedState),(c=kr||S1(t,r,c,s,f,m,l)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,m,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,m,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),i.props=s,i.state=m,i.context=l,s=c):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return ld(e,t,r,s,a,o)}function ld(e,t,r,s,o,a){Dv(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return o&&C1(t,r,!1),fr(e,t,a);s=t.stateNode,IS.current=t;var u=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=ko(t,e.child,null,a),t.child=ko(t,null,u,a)):Rt(e,t,u,a),t.memoizedState=s.state,o&&C1(t,r,!0),t.child}function Av(e){var t=e.stateNode;t.pendingContext?v1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&v1(e,t.context,!1),Zf(e,t.containerInfo)}function F1(e,t,r,s,o){return So(),Hf(o),t.flags|=256,Rt(e,t,r,s),t.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function pd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rv(e,t,r){var s=t.pendingProps,o=He.current,a=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Be(He,o&1),e===null)return rd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},(s&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=i):a=$l(i,s,0,null),e=fs(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=pd(r),t.memoizedState=cd,e):ah(t,i));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return DS(e,t,i,s,u,o,r);if(a){a=s.fallback,i=t.mode,o=e.child,u=o.sibling;var l={mode:"hidden",children:s.children};return(i&1)===0&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=l,t.deletions=null):(s=Ur(o,l),s.subtreeFlags=o.subtreeFlags&14680064),u!==null?a=Ur(u,a):(a=fs(a,i,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?pd(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=cd,s}return a=e.child,e=a.sibling,s=Ur(a,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ah(e,t){return t=$l({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zi(e,t,r,s){return s!==null&&Hf(s),ko(t,e.child,null,r),e=ah(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function DS(e,t,r,s,o,a,i){if(r)return t.flags&256?(t.flags&=-257,s=op(Error(X(422))),zi(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,o=t.mode,s=$l({mode:"visible",children:s.children},o,0,null),a=fs(a,o,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,(t.mode&1)!==0&&ko(t,e.child,null,i),t.child.memoizedState=pd(i),t.memoizedState=cd,a);if((t.mode&1)===0)return zi(e,t,i,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var u=s.dgst;return s=u,a=Error(X(419)),s=op(a,s,void 0),zi(e,t,i,s)}if(u=(i&e.childLanes)!==0,Wt||u){if(s=ht,s!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(s.suspendedLanes|i))!==0?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,dr(e,o),Rn(s,e,o,-1))}return dh(),s=op(Error(X(421))),zi(e,t,i,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=GS.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,tn=Lr(o.nextSibling),rn=t,je=!0,Tn=null,e!==null&&(dn[fn++]=sr,dn[fn++]=or,dn[fn++]=vs,sr=e.id,or=e.overflow,vs=t),t=ah(t,s.children),t.flags|=4096,t)}function B1(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),sd(e.return,t,r)}function ap(e,t,r,s,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=o)}function Pv(e,t,r){var s=t.pendingProps,o=s.revealOrder,a=s.tail;if(Rt(e,t,s.children,r),s=He.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&B1(e,r,t);else if(e.tag===19)B1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Be(He,s),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&zu(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),ap(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&zu(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}ap(t,!0,r,null,a);break;case"together":ap(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cu(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Ur(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ur(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AS(e,t,r){switch(t.tag){case 3:Av(t),So();break;case 5:iv(t);break;case 1:jt(t.type)&&Ru(t);break;case 4:Zf(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;Be(Fu,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Be(He,He.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Rv(e,t,r):(Be(He,He.current&1),e=fr(e,t,r),e!==null?e.sibling:null);Be(He,He.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Pv(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Be(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,Iv(e,t,r)}return fr(e,t,r)}var Ov,dd,Fv,Bv;Ov=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dd=function(){};Fv=function(e,t,r,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,cs(Kn.current);var a=null;switch(r){case"input":o=Pp(e,o),s=Pp(e,s),a=[];break;case"select":o=qe({},o,{value:void 0}),s=qe({},s,{value:void 0}),a=[];break;case"textarea":o=Bp(e,o),s=Bp(e,s),a=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Du)}zp(r,s);var i;r=null;for(c in o)if(!s.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var u=o[c];for(i in u)u.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Aa.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in s){var l=s[c];if(u=o!=null?o[c]:void 0,s.hasOwnProperty(c)&&l!==u&&(l!=null||u!=null))if(c==="style")if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};Bv=function(e,t,r,s){r!==s&&(t.flags|=4)};function da(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function RS(e,t,r){var s=t.pendingProps;switch(jf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return jt(t.type)&&Au(),Nt(t),null;case 3:return s=t.stateNode,Eo(),Ve(Gt),Ve(Dt),eh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Bi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tn!==null&&(Cd(Tn),Tn=null))),dd(e,t),Nt(t),null;case 5:Jf(t);var o=cs(Ga.current);if(r=t.type,e!==null&&t.stateNode!=null)Fv(e,t,r,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(X(166));return Nt(t),null}if(e=cs(Kn.current),Bi(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[Wn]=t,s[Ua]=a,e=(t.mode&1)!==0,r){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(o=0;o<xa.length;o++)Me(xa[o],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Hg(s,a),Me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Me("invalid",s);break;case"textarea":qg(s,a),Me("invalid",s)}zp(r,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="children"?typeof u=="string"?s.textContent!==u&&(a.suppressHydrationWarning!==!0&&Fi(s.textContent,u,e),o=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Fi(s.textContent,u,e),o=["children",""+u]):Aa.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&Me("scroll",s)}switch(r){case"input":Ni(s),Kg(s,a,!0);break;case"textarea":Ni(s),Xg(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Du)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=c2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Wn]=t,e[Ua]=s,Ov(e,t,!1,!1),t.stateNode=e;e:{switch(i=Mp(r,s),r){case"dialog":Me("cancel",e),Me("close",e),o=s;break;case"iframe":case"object":case"embed":Me("load",e),o=s;break;case"video":case"audio":for(o=0;o<xa.length;o++)Me(xa[o],e);o=s;break;case"source":Me("error",e),o=s;break;case"img":case"image":case"link":Me("error",e),Me("load",e),o=s;break;case"details":Me("toggle",e),o=s;break;case"input":Hg(e,s),o=Pp(e,s),Me("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=qe({},s,{value:void 0}),Me("invalid",e);break;case"textarea":qg(e,s),o=Bp(e,s),Me("invalid",e);break;default:o=s}zp(r,o),u=o;for(a in u)if(u.hasOwnProperty(a)){var l=u[a];a==="style"?f2(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p2(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ra(e,l):typeof l=="number"&&Ra(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Aa.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Me("scroll",e):l!=null&&If(e,a,l,i))}switch(r){case"input":Ni(e),Kg(e,s,!1);break;case"textarea":Ni(e),Xg(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Kr(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?co(e,!!s.multiple,a,!1):s.defaultValue!=null&&co(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Du)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nt(t),null;case 6:if(e&&t.stateNode!=null)Bv(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(X(166));if(r=cs(Ga.current),cs(Kn.current),Bi(t)){if(s=t.stateNode,r=t.memoizedProps,s[Wn]=t,(a=s.nodeValue!==r)&&(e=rn,e!==null))switch(e.tag){case 3:Fi(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fi(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Wn]=t,t.stateNode=s}return Nt(t),null;case 13:if(Ve(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&tn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ev(),So(),t.flags|=98560,a=!1;else if(a=Bi(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(X(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[Wn]=t}else So(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),a=!1}else Tn!==null&&(Cd(Tn),Tn=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(He.current&1)!==0?it===0&&(it=3):dh())),t.updateQueue!==null&&(t.flags|=4),Nt(t),null);case 4:return Eo(),dd(e,t),e===null&&Ma(t.stateNode.containerInfo),Nt(t),null;case 10:return Xf(t.type._context),Nt(t),null;case 17:return jt(t.type)&&Au(),Nt(t),null;case 19:if(Ve(He),a=t.memoizedState,a===null)return Nt(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)da(a,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=zu(e),i!==null){for(t.flags|=128,da(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Be(He,He.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ze()>To&&(t.flags|=128,s=!0,da(a,!1),t.lanes=4194304)}else{if(!s)if(e=zu(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),da(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!je)return Nt(t),null}else 2*Ze()-a.renderingStartTime>To&&r!==1073741824&&(t.flags|=128,s=!0,da(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,r=He.current,Be(He,s?r&1|2:r&1),t):(Nt(t),null);case 22:case 23:return ph(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Jt&1073741824)!==0&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function PS(e,t){switch(jf(t),t.tag){case 1:return jt(t.type)&&Au(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eo(),Ve(Gt),Ve(Dt),eh(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Jf(t),null;case 13:if(Ve(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));So()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(He),null;case 4:return Eo(),null;case 10:return Xf(t.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var Mi=!1,Tt=!1,OS=typeof WeakSet=="function"?WeakSet:Set,oe=null;function io(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ye(e,t,s)}else r.current=null}function fd(e,t,r){try{r()}catch(s){Ye(e,t,s)}}var L1=!1;function FS(e,t){if(Yp=Nu,e=V2(),Wf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var o=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,u=-1,l=-1,c=0,p=0,d=e,f=null;t:for(;;){for(var h;d!==r||o!==0&&d.nodeType!==3||(u=i+o),d!==a||s!==0&&d.nodeType!==3||(l=i+s),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===r&&++c===o&&(u=i),f===a&&++p===s&&(l=i),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}r=u===-1||l===-1?null:{start:u,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qp={focusedElem:e,selectionRange:r},Nu=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var m=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:En(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch($){Ye(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return m=L1,L1=!1,m}function Ea(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&fd(t,r,a)}o=o.next}while(o!==s)}}function wl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function hd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lv(e){var t=e.alternate;t!==null&&(e.alternate=null,Lv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wn],delete t[Ua],delete t[ed],delete t[xS],delete t[vS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zv(e){return e.tag===5||e.tag===3||e.tag===4}function z1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function md(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Du));else if(s!==4&&(e=e.child,e!==null))for(md(e,t,r),e=e.sibling;e!==null;)md(e,t,r),e=e.sibling}function gd(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(gd(e,t,r),e=e.sibling;e!==null;)gd(e,t,r),e=e.sibling}var wt=null,Nn=!1;function $r(e,t,r){for(r=r.child;r!==null;)Mv(e,t,r),r=r.sibling}function Mv(e,t,r){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(fl,r)}catch{}switch(r.tag){case 5:Tt||io(r,t);case 6:var s=wt,o=Nn;wt=null,$r(e,t,r),wt=s,Nn=o,wt!==null&&(Nn?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(Nn?(e=wt,r=r.stateNode,e.nodeType===8?Jc(e.parentNode,r):e.nodeType===1&&Jc(e,r),Ba(e)):Jc(wt,r.stateNode));break;case 4:s=wt,o=Nn,wt=r.stateNode.containerInfo,Nn=!0,$r(e,t,r),wt=s,Nn=o;break;case 0:case 11:case 14:case 15:if(!Tt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&((a&2)!==0||(a&4)!==0)&&fd(r,t,i),o=o.next}while(o!==s)}$r(e,t,r);break;case 1:if(!Tt&&(io(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){Ye(r,t,u)}$r(e,t,r);break;case 21:$r(e,t,r);break;case 22:r.mode&1?(Tt=(s=Tt)||r.memoizedState!==null,$r(e,t,r),Tt=s):$r(e,t,r);break;default:$r(e,t,r)}}function M1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new OS),t.forEach(function(s){var o=jS.bind(null,e,s);r.has(s)||(r.add(s),s.then(o,o))})}}function Sn(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];try{var a=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:wt=u.stateNode,Nn=!1;break e;case 3:wt=u.stateNode.containerInfo,Nn=!0;break e;case 4:wt=u.stateNode.containerInfo,Nn=!0;break e}u=u.return}if(wt===null)throw Error(X(160));Mv(a,i,o),wt=null,Nn=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Ye(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vv(t,e),t=t.sibling}function Vv(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sn(t,e),Mn(e),s&4){try{Ea(3,e,e.return),wl(3,e)}catch(g){Ye(e,e.return,g)}try{Ea(5,e,e.return)}catch(g){Ye(e,e.return,g)}}break;case 1:Sn(t,e),Mn(e),s&512&&r!==null&&io(r,r.return);break;case 5:if(Sn(t,e),Mn(e),s&512&&r!==null&&io(r,r.return),e.flags&32){var o=e.stateNode;try{Ra(o,"")}catch(g){Ye(e,e.return,g)}}if(s&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&u2(o,a),Mp(u,i);var c=Mp(u,a);for(i=0;i<l.length;i+=2){var p=l[i],d=l[i+1];p==="style"?f2(o,d):p==="dangerouslySetInnerHTML"?p2(o,d):p==="children"?Ra(o,d):If(o,p,d,c)}switch(u){case"input":Op(o,a);break;case"textarea":l2(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?co(o,!!a.multiple,h,!1):f!==!!a.multiple&&(a.defaultValue!=null?co(o,!!a.multiple,a.defaultValue,!0):co(o,!!a.multiple,a.multiple?[]:"",!1))}o[Ua]=a}catch(g){Ye(e,e.return,g)}}break;case 6:if(Sn(t,e),Mn(e),s&4){if(e.stateNode===null)throw Error(X(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Ye(e,e.return,g)}}break;case 3:if(Sn(t,e),Mn(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ba(t.containerInfo)}catch(g){Ye(e,e.return,g)}break;case 4:Sn(t,e),Mn(e);break;case 13:Sn(t,e),Mn(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(lh=Ze())),s&4&&M1(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Tt=(c=Tt)||p,Sn(t,e),Tt=c):Sn(t,e),Mn(e),s&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&(e.mode&1)!==0)for(oe=e,p=e.child;p!==null;){for(d=oe=p;oe!==null;){switch(f=oe,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ea(4,f,f.return);break;case 1:io(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ye(s,r,g)}}break;case 5:io(f,f.return);break;case 22:if(f.memoizedState!==null){U1(d);continue}}h!==null?(h.return=f,oe=h):U1(d)}p=p.sibling}e:for(p=null,d=e;;){if(d.tag===5){if(p===null){p=d;try{o=d.stateNode,c?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=d2("display",i))}catch(g){Ye(e,e.return,g)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Ye(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sn(t,e),Mn(e),s&4&&M1(e);break;case 21:break;default:Sn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zv(r)){var s=r;break e}r=r.return}throw Error(X(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(Ra(o,""),s.flags&=-33);var a=z1(e);gd(e,a,o);break;case 3:case 4:var i=s.stateNode.containerInfo,u=z1(e);md(e,u,i);break;default:throw Error(X(161))}}catch(l){Ye(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BS(e,t,r){oe=e,Uv(e)}function Uv(e,t,r){for(var s=(e.mode&1)!==0;oe!==null;){var o=oe,a=o.child;if(o.tag===22&&s){var i=o.memoizedState!==null||Mi;if(!i){var u=o.alternate,l=u!==null&&u.memoizedState!==null||Tt;u=Mi;var c=Tt;if(Mi=i,(Tt=l)&&!c)for(oe=o;oe!==null;)i=oe,l=i.child,i.tag===22&&i.memoizedState!==null?W1(o):l!==null?(l.return=i,oe=l):W1(o);for(;a!==null;)oe=a,Uv(a),a=a.sibling;oe=o,Mi=u,Tt=c}V1(e)}else(o.subtreeFlags&8772)!==0&&a!==null?(a.return=o,oe=a):V1(e)}}function V1(e){for(;oe!==null;){var t=oe;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Tt||wl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Tt)if(r===null)s.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:En(t.type,r.memoizedProps);s.componentDidUpdate(o,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&_1(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}_1(t,i,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Ba(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Tt||t.flags&512&&hd(t)}catch(f){Ye(t,t.return,f)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function U1(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function W1(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wl(4,t)}catch(l){Ye(t,r,l)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(l){Ye(t,o,l)}}var a=t.return;try{hd(t)}catch(l){Ye(t,a,l)}break;case 5:var i=t.return;try{hd(t)}catch(l){Ye(t,i,l)}}}catch(l){Ye(t,t.return,l)}if(t===e){oe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,oe=u;break}oe=t.return}}var LS=Math.ceil,Uu=yr.ReactCurrentDispatcher,ih=yr.ReactCurrentOwner,gn=yr.ReactCurrentBatchConfig,Te=0,ht=null,et=null,bt=0,Jt=0,uo=es(0),it=0,qa=null,ws=0,bl=0,uh=0,Na=null,Ut=null,lh=0,To=1/0,Zn=null,Wu=!1,yd=null,Mr=null,Vi=!1,Ar=null,Gu=0,Ta=0,xd=null,pu=-1,du=0;function Ft(){return(Te&6)!==0?Ze():pu!==-1?pu:pu=Ze()}function Vr(e){return(e.mode&1)===0?1:(Te&2)!==0&&bt!==0?bt&-bt:wS.transition!==null?(du===0&&(du=S2()),du):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:A2(e.type)),e)}function Rn(e,t,r,s){if(50<Ta)throw Ta=0,xd=null,Error(X(185));si(e,r,s),((Te&2)===0||e!==ht)&&(e===ht&&((Te&2)===0&&(bl|=r),it===4&&Tr(e,bt)),Ht(e,s),r===1&&Te===0&&(t.mode&1)===0&&(To=Ze()+500,xl&&ts()))}function Ht(e,t){var r=e.callbackNode;w_(e,t);var s=Eu(e,e===ht?bt:0);if(s===0)r!==null&&Zg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Zg(r),t===1)e.tag===0?CS(G1.bind(null,e)):Q2(G1.bind(null,e)),gS(function(){(Te&6)===0&&ts()}),r=null;else{switch(k2(s)){case 1:r=Of;break;case 4:r=$2;break;case 16:r=ku;break;case 536870912:r=_2;break;default:r=ku}r=Yv(r,Wv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Wv(e,t){if(pu=-1,du=0,(Te&6)!==0)throw Error(X(327));var r=e.callbackNode;if(go()&&e.callbackNode!==r)return null;var s=Eu(e,e===ht?bt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=ju(e,s);else{t=s;var o=Te;Te|=2;var a=jv();(ht!==e||bt!==t)&&(Zn=null,To=Ze()+500,ds(e,t));do try{VS();break}catch(u){Gv(e,u)}while(1);qf(),Uu.current=a,Te=o,et!==null?t=0:(ht=null,bt=0,t=it)}if(t!==0){if(t===2&&(o=jp(e),o!==0&&(s=o,t=vd(e,o))),t===1)throw r=qa,ds(e,0),Tr(e,s),Ht(e,Ze()),r;if(t===6)Tr(e,s);else{if(o=e.current.alternate,(s&30)===0&&!zS(o)&&(t=ju(e,s),t===2&&(a=jp(e),a!==0&&(s=a,t=vd(e,a))),t===1))throw r=qa,ds(e,0),Tr(e,s),Ht(e,Ze()),r;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(X(345));case 2:os(e,Ut,Zn);break;case 3:if(Tr(e,s),(s&130023424)===s&&(t=lh+500-Ze(),10<t)){if(Eu(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Ft(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Jp(os.bind(null,e,Ut,Zn),t);break}os(e,Ut,Zn);break;case 4:if(Tr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var i=31-An(s);a=1<<i,i=t[i],i>o&&(o=i),s&=~a}if(s=o,s=Ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*LS(s/1960))-s,10<s){e.timeoutHandle=Jp(os.bind(null,e,Ut,Zn),s);break}os(e,Ut,Zn);break;case 5:os(e,Ut,Zn);break;default:throw Error(X(329))}}}return Ht(e,Ze()),e.callbackNode===r?Wv.bind(null,e):null}function vd(e,t){var r=Na;return e.current.memoizedState.isDehydrated&&(ds(e,t).flags|=256),e=ju(e,t),e!==2&&(t=Ut,Ut=r,t!==null&&Cd(t)),e}function Cd(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function zS(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var o=r[s],a=o.getSnapshot;o=o.value;try{if(!On(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tr(e,t){for(t&=~uh,t&=~bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-An(t),s=1<<r;e[r]=-1,t&=~s}}function G1(e){if((Te&6)!==0)throw Error(X(327));go();var t=Eu(e,0);if((t&1)===0)return Ht(e,Ze()),null;var r=ju(e,t);if(e.tag!==0&&r===2){var s=jp(e);s!==0&&(t=s,r=vd(e,s))}if(r===1)throw r=qa,ds(e,0),Tr(e,t),Ht(e,Ze()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,os(e,Ut,Zn),Ht(e,Ze()),null}function ch(e,t){var r=Te;Te|=1;try{return e(t)}finally{Te=r,Te===0&&(To=Ze()+500,xl&&ts())}}function bs(e){Ar!==null&&Ar.tag===0&&(Te&6)===0&&go();var t=Te;Te|=1;var r=gn.transition,s=Ae;try{if(gn.transition=null,Ae=1,e)return e()}finally{Ae=s,gn.transition=r,Te=t,(Te&6)===0&&ts()}}function ph(){Jt=uo.current,Ve(uo)}function ds(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mS(r)),et!==null)for(r=et.return;r!==null;){var s=r;switch(jf(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Au();break;case 3:Eo(),Ve(Gt),Ve(Dt),eh();break;case 5:Jf(s);break;case 4:Eo();break;case 13:Ve(He);break;case 19:Ve(He);break;case 10:Xf(s.type._context);break;case 22:case 23:ph()}r=r.return}if(ht=e,et=e=Ur(e.current,null),bt=Jt=t,it=0,qa=null,uh=bl=ws=0,Ut=Na=null,ls!==null){for(t=0;t<ls.length;t++)if(r=ls[t],s=r.interleaved,s!==null){r.interleaved=null;var o=s.next,a=r.pending;if(a!==null){var i=a.next;a.next=o,s.next=i}r.pending=s}ls=null}return e}function Gv(e,t){do{var r=et;try{if(qf(),uu.current=Vu,Mu){for(var s=Ke.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Mu=!1}if(Cs=0,dt=at=Ke=null,ka=!1,ja=0,ih.current=null,r===null||r.return===null){it=1,qa=t,et=null;break}e:{var a=e,i=r.return,u=r,l=t;if(t=bt,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=u,d=p.tag;if((p.mode&1)===0&&(d===0||d===11||d===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=D1(i);if(h!==null){h.flags&=-257,A1(h,i,u,a,t),h.mode&1&&I1(a,c,t),t=h,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if((t&1)===0){I1(a,c,t),dh();break e}l=Error(X(426))}}else if(je&&u.mode&1){var x=D1(i);if(x!==null){(x.flags&65536)===0&&(x.flags|=256),A1(x,i,u,a,t),Hf(No(l,u));break e}}a=l=No(l,u),it!==4&&(it=2),Na===null?Na=[a]:Na.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Ev(a,l,t);$1(a,y);break e;case 1:u=l;var v=a.type,w=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Mr===null||!Mr.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var $=Nv(a,u,t);$1(a,$);break e}}a=a.return}while(a!==null)}Kv(r)}catch(b){t=b,et===r&&r!==null&&(et=r=r.return);continue}break}while(1)}function jv(){var e=Uu.current;return Uu.current=Vu,e===null?Vu:e}function dh(){(it===0||it===3||it===2)&&(it=4),ht===null||(ws&268435455)===0&&(bl&268435455)===0||Tr(ht,bt)}function ju(e,t){var r=Te;Te|=2;var s=jv();(ht!==e||bt!==t)&&(Zn=null,ds(e,t));do try{MS();break}catch(o){Gv(e,o)}while(1);if(qf(),Te=r,Uu.current=s,et!==null)throw Error(X(261));return ht=null,bt=0,it}function MS(){for(;et!==null;)Hv(et)}function VS(){for(;et!==null&&!d_();)Hv(et)}function Hv(e){var t=Xv(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Kv(e):et=t,ih.current=null}function Kv(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=RS(r,t,Jt),r!==null){et=r;return}}else{if(r=PS(r,t),r!==null){r.flags&=32767,et=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,et=null;return}}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);it===0&&(it=5)}function os(e,t,r){var s=Ae,o=gn.transition;try{gn.transition=null,Ae=1,US(e,t,r,s)}finally{gn.transition=o,Ae=s}return null}function US(e,t,r,s){do go();while(Ar!==null);if((Te&6)!==0)throw Error(X(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(b_(e,a),e===ht&&(et=ht=null,bt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Vi||(Vi=!0,Yv(ku,function(){return go(),null})),a=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||a){a=gn.transition,gn.transition=null;var i=Ae;Ae=1;var u=Te;Te|=4,ih.current=null,FS(e,r),Vv(r,e),uS(Qp),Nu=!!Yp,Qp=Yp=null,e.current=r,BS(r),f_(),Te=u,Ae=i,gn.transition=a}else e.current=r;if(Vi&&(Vi=!1,Ar=e,Gu=o),a=e.pendingLanes,a===0&&(Mr=null),g_(r.stateNode),Ht(e,Ze()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],s(o.value,{componentStack:o.stack,digest:o.digest});if(Wu)throw Wu=!1,e=yd,yd=null,e;return(Gu&1)!==0&&e.tag!==0&&go(),a=e.pendingLanes,(a&1)!==0?e===xd?Ta++:(Ta=0,xd=e):Ta=0,ts(),null}function go(){if(Ar!==null){var e=k2(Gu),t=gn.transition,r=Ae;try{if(gn.transition=null,Ae=16>e?16:e,Ar===null)var s=!1;else{if(e=Ar,Ar=null,Gu=0,(Te&6)!==0)throw Error(X(331));var o=Te;for(Te|=4,oe=e.current;oe!==null;){var a=oe,i=a.child;if((oe.flags&16)!==0){var u=a.deletions;if(u!==null){for(var l=0;l<u.length;l++){var c=u[l];for(oe=c;oe!==null;){var p=oe;switch(p.tag){case 0:case 11:case 15:Ea(8,p,a)}var d=p.child;if(d!==null)d.return=p,oe=d;else for(;oe!==null;){p=oe;var f=p.sibling,h=p.return;if(Lv(p),p===c){oe=null;break}if(f!==null){f.return=h,oe=f;break}oe=h}}}var m=a.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}oe=a}}if((a.subtreeFlags&2064)!==0&&i!==null)i.return=a,oe=i;else e:for(;oe!==null;){if(a=oe,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Ea(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,oe=y;break e}oe=a.return}}var v=e.current;for(oe=v;oe!==null;){i=oe;var w=i.child;if((i.subtreeFlags&2064)!==0&&w!==null)w.return=i,oe=w;else e:for(i=v;oe!==null;){if(u=oe,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:wl(9,u)}}catch(b){Ye(u,u.return,b)}if(u===i){oe=null;break e}var $=u.sibling;if($!==null){$.return=u.return,oe=$;break e}oe=u.return}}if(Te=o,ts(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(fl,e)}catch{}s=!0}return s}finally{Ae=r,gn.transition=t}}return!1}function j1(e,t,r){t=No(r,t),t=Ev(e,t,1),e=zr(e,t,1),t=Ft(),e!==null&&(si(e,1,t),Ht(e,t))}function Ye(e,t,r){if(e.tag===3)j1(e,e,r);else for(;t!==null;){if(t.tag===3){j1(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Mr===null||!Mr.has(s))){e=No(r,e),e=Nv(t,e,1),t=zr(t,e,1),e=Ft(),t!==null&&(si(t,1,e),Ht(t,e));break}}t=t.return}}function WS(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ft(),e.pingedLanes|=e.suspendedLanes&r,ht===e&&(bt&r)===r&&(it===4||it===3&&(bt&130023424)===bt&&500>Ze()-lh?ds(e,0):uh|=r),Ht(e,t)}function qv(e,t){t===0&&((e.mode&1)===0?t=1:(t=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var r=Ft();e=dr(e,t),e!==null&&(si(e,t,r),Ht(e,r))}function GS(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qv(e,r)}function jS(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(t),qv(e,r)}var Xv;Xv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gt.current)Wt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Wt=!1,AS(e,t,r);Wt=(e.flags&131072)!==0}else Wt=!1,je&&(t.flags&1048576)!==0&&Z2(t,Ou,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;cu(e,t),e=t.pendingProps;var o=_o(t,Dt.current);mo(t,r),o=nh(null,t,s,e,o,r);var a=rh();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(s)?(a=!0,Ru(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Qf(t),o.updater=vl,t.stateNode=o,o._reactInternals=t,ad(t,s,e,r),t=ld(null,t,s,!0,a,r)):(t.tag=0,je&&a&&Gf(t),Rt(null,t,o,r),t=t.child),t;case 16:s=t.elementType;e:{switch(cu(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=KS(s),e=En(s,e),o){case 0:t=ud(null,t,s,e,r);break e;case 1:t=O1(null,t,s,e,r);break e;case 11:t=R1(null,t,s,e,r);break e;case 14:t=P1(null,t,s,En(s.type,e),r);break e}throw Error(X(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:En(s,o),ud(e,t,s,o,r);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:En(s,o),O1(e,t,s,o,r);case 3:e:{if(Av(t),e===null)throw Error(X(387));s=t.pendingProps,a=t.memoizedState,o=a.element,nv(e,t),Lu(t,s,null,r);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=No(Error(X(423)),t),t=F1(e,t,s,r,o);break e}else if(s!==o){o=No(Error(X(424)),t),t=F1(e,t,s,r,o);break e}else for(tn=Lr(t.stateNode.containerInfo.firstChild),rn=t,je=!0,Tn=null,r=av(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(So(),s===o){t=fr(e,t,r);break e}Rt(e,t,s,r)}t=t.child}return t;case 5:return iv(t),e===null&&rd(t),s=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,Zp(s,o)?i=null:a!==null&&Zp(s,a)&&(t.flags|=32),Dv(e,t),Rt(e,t,i,r),t.child;case 6:return e===null&&rd(t),null;case 13:return Rv(e,t,r);case 4:return Zf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ko(t,null,s,r):Rt(e,t,s,r),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:En(s,o),R1(e,t,s,o,r);case 7:return Rt(e,t,t.pendingProps,r),t.child;case 8:return Rt(e,t,t.pendingProps.children,r),t.child;case 12:return Rt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,Be(Fu,s._currentValue),s._currentValue=i,a!==null)if(On(a.value,i)){if(a.children===o.children&&!Gt.current){t=fr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){i=a.child;for(var l=u.firstContext;l!==null;){if(l.context===s){if(a.tag===1){l=ar(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),sd(a.return,r,t),u.lanes|=r;break}l=l.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(X(341));i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),sd(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Rt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,mo(t,r),o=yn(o),s=s(o),t.flags|=1,Rt(e,t,s,r),t.child;case 14:return s=t.type,o=En(s,t.pendingProps),o=En(s.type,o),P1(e,t,s,o,r);case 15:return Tv(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:En(s,o),cu(e,t),t.tag=1,jt(s)?(e=!0,Ru(t)):e=!1,mo(t,r),sv(t,s,o),ad(t,s,o,r),ld(null,t,s,!0,e,r);case 19:return Pv(e,t,r);case 22:return Iv(e,t,r)}throw Error(X(156,t.tag))};function Yv(e,t){return b2(e,t)}function HS(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,t,r,s){return new HS(e,t,r,s)}function fh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KS(e){if(typeof e=="function")return fh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Af)return 11;if(e===Rf)return 14}return 2}function Ur(e,t){var r=e.alternate;return r===null?(r=hn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fu(e,t,r,s,o,a){var i=2;if(s=e,typeof e=="function")fh(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Zs:return fs(r.children,o,a,t);case Df:i=8,o|=8;break;case Ip:return e=hn(12,r,t,o|2),e.elementType=Ip,e.lanes=a,e;case Dp:return e=hn(13,r,t,o),e.elementType=Dp,e.lanes=a,e;case Ap:return e=hn(19,r,t,o),e.elementType=Ap,e.lanes=a,e;case o2:return $l(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r2:i=10;break e;case s2:i=9;break e;case Af:i=11;break e;case Rf:i=14;break e;case Sr:i=16,s=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=hn(i,r,t,o),t.elementType=e,t.type=s,t.lanes=a,t}function fs(e,t,r,s){return e=hn(7,e,s,t),e.lanes=r,e}function $l(e,t,r,s){return e=hn(22,e,s,t),e.elementType=o2,e.lanes=r,e.stateNode={isHidden:!1},e}function ip(e,t,r){return e=hn(6,e,null,t),e.lanes=r,e}function up(e,t,r){return t=hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qS(e,t,r,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function hh(e,t,r,s,o,a,i,u,l){return e=new qS(e,t,r,u,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=hn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(a),e}function XS(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Qv(e){if(!e)return qr;e=e._reactInternals;e:{if(Ps(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(jt(r))return Y2(e,r,t)}return t}function Zv(e,t,r,s,o,a,i,u,l){return e=hh(r,s,!0,e,o,a,i,u,l),e.context=Qv(null),r=e.current,s=Ft(),o=Vr(r),a=ar(s,o),a.callback=t!=null?t:null,zr(r,a,o),e.current.lanes=o,si(e,o,s),Ht(e,s),e}function _l(e,t,r,s){var o=t.current,a=Ft(),i=Vr(o);return r=Qv(r),t.context===null?t.context=r:t.pendingContext=r,t=ar(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zr(o,t,i),e!==null&&(Rn(e,o,i,a),iu(e,o,i)),i}function Hu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function H1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function mh(e,t){H1(e,t),(e=e.alternate)&&H1(e,t)}function YS(){return null}var Jv=typeof reportError=="function"?reportError:function(e){console.error(e)};function gh(e){this._internalRoot=e}Sl.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));_l(e,t,null,null)};Sl.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bs(function(){_l(null,e,null,null)}),t[pr]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=T2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nr.length&&t!==0&&t<Nr[r].priority;r++);Nr.splice(r,0,e),r===0&&D2(e)}};function yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function K1(){}function QS(e,t,r,s,o){if(o){if(typeof s=="function"){var a=s;s=function(){var c=Hu(i);a.call(c)}}var i=Zv(t,s,e,0,null,!1,!1,"",K1);return e._reactRootContainer=i,e[pr]=i.current,Ma(e.nodeType===8?e.parentNode:e),bs(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var u=s;s=function(){var c=Hu(l);u.call(c)}}var l=hh(e,0,!1,null,null,!1,!1,"",K1);return e._reactRootContainer=l,e[pr]=l.current,Ma(e.nodeType===8?e.parentNode:e),bs(function(){_l(t,l,r,s)}),l}function El(e,t,r,s,o){var a=r._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var u=o;o=function(){var l=Hu(i);u.call(l)}}_l(t,i,e,o)}else i=QS(r,t,e,o,s);return Hu(i)}E2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ya(t.pendingLanes);r!==0&&(Ff(t,r|1),Ht(t,Ze()),(Te&6)===0&&(To=Ze()+500,ts()))}break;case 13:bs(function(){var s=dr(e,1);if(s!==null){var o=Ft();Rn(s,e,1,o)}}),mh(e,1)}};Bf=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var r=Ft();Rn(t,e,134217728,r)}mh(e,134217728)}};N2=function(e){if(e.tag===13){var t=Vr(e),r=dr(e,t);if(r!==null){var s=Ft();Rn(r,e,t,s)}mh(e,t)}};T2=function(){return Ae};I2=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};Up=function(e,t,r){switch(t){case"input":if(Op(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var o=yl(s);if(!o)throw Error(X(90));i2(s),Op(s,o)}}}break;case"textarea":l2(e,r);break;case"select":t=r.value,t!=null&&co(e,!!r.multiple,t,!1)}};g2=ch;y2=bs;var ZS={usingClientEntryPoint:!1,Events:[ai,no,yl,h2,m2,ch]},fa={findFiberByHostInstance:us,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},JS={bundleType:fa.bundleType,version:fa.version,rendererPackageName:fa.rendererPackageName,rendererConfig:fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C2(e),e===null?null:e.stateNode},findFiberByHostInstance:fa.findFiberByHostInstance||YS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{fl=Ui.inject(JS),Hn=Ui}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;on.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yh(t))throw Error(X(200));return XS(e,t,null,r)};on.createRoot=function(e,t){if(!yh(e))throw Error(X(299));var r=!1,s="",o=Jv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=hh(e,1,!1,null,null,r,!1,s,o),e[pr]=t.current,Ma(e.nodeType===8?e.parentNode:e),new gh(t)};on.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=C2(t),e=e===null?null:e.stateNode,e};on.flushSync=function(e){return bs(e)};on.hydrate=function(e,t,r){if(!kl(t))throw Error(X(200));return El(null,e,t,!0,r)};on.hydrateRoot=function(e,t,r){if(!yh(e))throw Error(X(405));var s=r!=null&&r.hydratedSources||null,o=!1,a="",i=Jv;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Zv(t,null,e,1,r!=null?r:null,o,!1,a,i),e[pr]=t.current,Ma(e),s)for(e=0;e<s.length;e++)r=s[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Sl(t)};on.render=function(e,t,r){if(!kl(t))throw Error(X(200));return El(null,e,t,!1,r)};on.unmountComponentAtNode=function(e){if(!kl(e))throw Error(X(40));return e._reactRootContainer?(bs(function(){El(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1};on.unstable_batchedUpdates=ch;on.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!kl(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return El(e,t,r,!1,s)};on.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=on})($f);const ek=ff($f.exports);var q1=$f.exports;Np.createRoot=q1.createRoot,Np.hydrateRoot=q1.hydrateRoot;var xh={exports:{}},Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.element"),Ch=Symbol.for("react.portal"),Nl=Symbol.for("react.fragment"),Tl=Symbol.for("react.strict_mode"),Il=Symbol.for("react.profiler"),Dl=Symbol.for("react.provider"),Al=Symbol.for("react.context"),tk=Symbol.for("react.server_context"),Rl=Symbol.for("react.forward_ref"),Pl=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),Fl=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),nk=Symbol.for("react.offscreen"),eC;eC=Symbol.for("react.module.reference");function wn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case vh:switch(e=e.type,e){case Nl:case Il:case Tl:case Pl:case Ol:return e;default:switch(e=e&&e.$$typeof,e){case tk:case Al:case Rl:case Bl:case Fl:case Dl:return e;default:return t}}case Ch:return t}}}Re.ContextConsumer=Al;Re.ContextProvider=Dl;Re.Element=vh;Re.ForwardRef=Rl;Re.Fragment=Nl;Re.Lazy=Bl;Re.Memo=Fl;Re.Portal=Ch;Re.Profiler=Il;Re.StrictMode=Tl;Re.Suspense=Pl;Re.SuspenseList=Ol;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(e){return wn(e)===Al};Re.isContextProvider=function(e){return wn(e)===Dl};Re.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===vh};Re.isForwardRef=function(e){return wn(e)===Rl};Re.isFragment=function(e){return wn(e)===Nl};Re.isLazy=function(e){return wn(e)===Bl};Re.isMemo=function(e){return wn(e)===Fl};Re.isPortal=function(e){return wn(e)===Ch};Re.isProfiler=function(e){return wn(e)===Il};Re.isStrictMode=function(e){return wn(e)===Tl};Re.isSuspense=function(e){return wn(e)===Pl};Re.isSuspenseList=function(e){return wn(e)===Ol};Re.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Nl||e===Il||e===Tl||e===Pl||e===Ol||e===nk||typeof e=="object"&&e!==null&&(e.$$typeof===Bl||e.$$typeof===Fl||e.$$typeof===Dl||e.$$typeof===Al||e.$$typeof===Rl||e.$$typeof===eC||e.getModuleId!==void 0)};Re.typeOf=wn;(function(e){e.exports=Re})(xh);function rk(e){function t(Y,Z,te,le,M){for(var ye=0,J=0,Le=0,ke=0,_e,fe,ot=0,xt=0,be,ct=be=_e=0,De=0,vt=0,sa=0,Ct=0,Si=te.length,oa=Si-1,$n,me="",Qe="",Cc="",wc="",br;De<Si;){if(fe=te.charCodeAt(De),De===oa&&J+ke+Le+ye!==0&&(J!==0&&(fe=J===47?10:47),ke=Le=ye=0,Si++,oa++),J+ke+Le+ye===0){if(De===oa&&(0<vt&&(me=me.replace(f,"")),0<me.trim().length)){switch(fe){case 32:case 9:case 59:case 13:case 10:break;default:me+=te.charAt(De)}fe=59}switch(fe){case 123:for(me=me.trim(),_e=me.charCodeAt(0),be=1,Ct=++De;De<Si;){switch(fe=te.charCodeAt(De)){case 123:be++;break;case 125:be--;break;case 47:switch(fe=te.charCodeAt(De+1)){case 42:case 47:e:{for(ct=De+1;ct<oa;++ct)switch(te.charCodeAt(ct)){case 47:if(fe===42&&te.charCodeAt(ct-1)===42&&De+2!==ct){De=ct+1;break e}break;case 10:if(fe===47){De=ct+1;break e}}De=ct}}break;case 91:fe++;case 40:fe++;case 34:case 39:for(;De++<oa&&te.charCodeAt(De)!==fe;);}if(be===0)break;De++}switch(be=te.substring(Ct,De),_e===0&&(_e=(me=me.replace(d,"").trim()).charCodeAt(0)),_e){case 64:switch(0<vt&&(me=me.replace(f,"")),fe=me.charCodeAt(1),fe){case 100:case 109:case 115:case 45:vt=Z;break;default:vt=H}if(be=t(Z,vt,be,fe,M+1),Ct=be.length,0<U&&(vt=r(H,me,sa),br=u(3,be,vt,Z,V,O,Ct,fe,M,le),me=vt.join(""),br!==void 0&&(Ct=(be=br.trim()).length)===0&&(fe=0,be="")),0<Ct)switch(fe){case 115:me=me.replace(T,i);case 100:case 109:case 45:be=me+"{"+be+"}";break;case 107:me=me.replace(v,"$1 $2"),be=me+"{"+be+"}",be=W===1||W===2&&a("@"+be,3)?"@-webkit-"+be+"@"+be:"@"+be;break;default:be=me+be,le===112&&(be=(Qe+=be,""))}else be="";break;default:be=t(Z,r(Z,me,sa),be,le,M+1)}Cc+=be,be=sa=vt=ct=_e=0,me="",fe=te.charCodeAt(++De);break;case 125:case 59:if(me=(0<vt?me.replace(f,""):me).trim(),1<(Ct=me.length))switch(ct===0&&(_e=me.charCodeAt(0),_e===45||96<_e&&123>_e)&&(Ct=(me=me.replace(" ",":")).length),0<U&&(br=u(1,me,Z,Y,V,O,Qe.length,le,M,le))!==void 0&&(Ct=(me=br.trim()).length)===0&&(me="\0\0"),_e=me.charCodeAt(0),fe=me.charCodeAt(1),_e){case 0:break;case 64:if(fe===105||fe===99){wc+=me+te.charAt(De);break}default:me.charCodeAt(Ct-1)!==58&&(Qe+=o(me,_e,fe,me.charCodeAt(2)))}sa=vt=ct=_e=0,me="",fe=te.charCodeAt(++De)}}switch(fe){case 13:case 10:J===47?J=0:1+_e===0&&le!==107&&0<me.length&&(vt=1,me+="\0"),0<U*ae&&u(0,me,Z,Y,V,O,Qe.length,le,M,le),O=1,V++;break;case 59:case 125:if(J+ke+Le+ye===0){O++;break}default:switch(O++,$n=te.charAt(De),fe){case 9:case 32:if(ke+ye+J===0)switch(ot){case 44:case 58:case 9:case 32:$n="";break;default:fe!==32&&($n=" ")}break;case 0:$n="\\0";break;case 12:$n="\\f";break;case 11:$n="\\v";break;case 38:ke+J+ye===0&&(vt=sa=1,$n="\f"+$n);break;case 108:if(ke+J+ye+B===0&&0<ct)switch(De-ct){case 2:ot===112&&te.charCodeAt(De-3)===58&&(B=ot);case 8:xt===111&&(B=xt)}break;case 58:ke+J+ye===0&&(ct=De);break;case 44:J+Le+ke+ye===0&&(vt=1,$n+="\r");break;case 34:case 39:J===0&&(ke=ke===fe?0:ke===0?fe:ke);break;case 91:ke+J+Le===0&&ye++;break;case 93:ke+J+Le===0&&ye--;break;case 41:ke+J+ye===0&&Le--;break;case 40:if(ke+J+ye===0){if(_e===0)switch(2*ot+3*xt){case 533:break;default:_e=1}Le++}break;case 64:J+Le+ke+ye+ct+be===0&&(be=1);break;case 42:case 47:if(!(0<ke+ye+Le))switch(J){case 0:switch(2*fe+3*te.charCodeAt(De+1)){case 235:J=47;break;case 220:Ct=De,J=42}break;case 42:fe===47&&ot===42&&Ct+2!==De&&(te.charCodeAt(Ct+2)===33&&(Qe+=te.substring(Ct,De+1)),$n="",J=0)}}J===0&&(me+=$n)}xt=ot,ot=fe,De++}if(Ct=Qe.length,0<Ct){if(vt=Z,0<U&&(br=u(2,Qe,vt,Y,V,O,Ct,le,M,le),br!==void 0&&(Qe=br).length===0))return wc+Qe+Cc;if(Qe=vt.join(",")+"{"+Qe+"}",W*B!==0){switch(W!==2||a(Qe,2)||(B=0),B){case 111:Qe=Qe.replace($,":-moz-$1")+Qe;break;case 112:Qe=Qe.replace(w,"::-webkit-input-$1")+Qe.replace(w,"::-moz-$1")+Qe.replace(w,":-ms-input-$1")+Qe}B=0}}return wc+Qe+Cc}function r(Y,Z,te){var le=Z.trim().split(x);Z=le;var M=le.length,ye=Y.length;switch(ye){case 0:case 1:var J=0;for(Y=ye===0?"":Y[0]+" ";J<M;++J)Z[J]=s(Y,Z[J],te).trim();break;default:var Le=J=0;for(Z=[];J<M;++J)for(var ke=0;ke<ye;++ke)Z[Le++]=s(Y[ke]+" ",le[J],te).trim()}return Z}function s(Y,Z,te){var le=Z.charCodeAt(0);switch(33>le&&(le=(Z=Z.trim()).charCodeAt(0)),le){case 38:return Z.replace(y,"$1"+Y.trim());case 58:return Y.trim()+Z.replace(y,"$1"+Y.trim());default:if(0<1*te&&0<Z.indexOf("\f"))return Z.replace(y,(Y.charCodeAt(0)===58?"":"$1")+Y.trim())}return Y+Z}function o(Y,Z,te,le){var M=Y+";",ye=2*Z+3*te+4*le;if(ye===944){Y=M.indexOf(":",9)+1;var J=M.substring(Y,M.length-1).trim();return J=M.substring(0,Y).trim()+J+";",W===1||W===2&&a(J,1)?"-webkit-"+J+J:J}if(W===0||W===2&&!a(M,1))return M;switch(ye){case 1015:return M.charCodeAt(10)===97?"-webkit-"+M+M:M;case 951:return M.charCodeAt(3)===116?"-webkit-"+M+M:M;case 963:return M.charCodeAt(5)===110?"-webkit-"+M+M:M;case 1009:if(M.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+M+M;case 978:return"-webkit-"+M+"-moz-"+M+M;case 1019:case 983:return"-webkit-"+M+"-moz-"+M+"-ms-"+M+M;case 883:if(M.charCodeAt(8)===45)return"-webkit-"+M+M;if(0<M.indexOf("image-set(",11))return M.replace(A,"$1-webkit-$2")+M;break;case 932:if(M.charCodeAt(4)===45)switch(M.charCodeAt(5)){case 103:return"-webkit-box-"+M.replace("-grow","")+"-webkit-"+M+"-ms-"+M.replace("grow","positive")+M;case 115:return"-webkit-"+M+"-ms-"+M.replace("shrink","negative")+M;case 98:return"-webkit-"+M+"-ms-"+M.replace("basis","preferred-size")+M}return"-webkit-"+M+"-ms-"+M+M;case 964:return"-webkit-"+M+"-ms-flex-"+M+M;case 1023:if(M.charCodeAt(8)!==99)break;return J=M.substring(M.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+J+"-webkit-"+M+"-ms-flex-pack"+J+M;case 1005:return m.test(M)?M.replace(h,":-webkit-")+M.replace(h,":-moz-")+M:M;case 1e3:switch(J=M.substring(13).trim(),Z=J.indexOf("-")+1,J.charCodeAt(0)+J.charCodeAt(Z)){case 226:J=M.replace(b,"tb");break;case 232:J=M.replace(b,"tb-rl");break;case 220:J=M.replace(b,"lr");break;default:return M}return"-webkit-"+M+"-ms-"+J+M;case 1017:if(M.indexOf("sticky",9)===-1)break;case 975:switch(Z=(M=Y).length-10,J=(M.charCodeAt(Z)===33?M.substring(0,Z):M).substring(Y.indexOf(":",7)+1).trim(),ye=J.charCodeAt(0)+(J.charCodeAt(7)|0)){case 203:if(111>J.charCodeAt(8))break;case 115:M=M.replace(J,"-webkit-"+J)+";"+M;break;case 207:case 102:M=M.replace(J,"-webkit-"+(102<ye?"inline-":"")+"box")+";"+M.replace(J,"-webkit-"+J)+";"+M.replace(J,"-ms-"+J+"box")+";"+M}return M+";";case 938:if(M.charCodeAt(5)===45)switch(M.charCodeAt(6)){case 105:return J=M.replace("-items",""),"-webkit-"+M+"-webkit-box-"+J+"-ms-flex-"+J+M;case 115:return"-webkit-"+M+"-ms-flex-item-"+M.replace(D,"")+M;default:return"-webkit-"+M+"-ms-flex-line-pack"+M.replace("align-content","").replace(D,"")+M}break;case 973:case 989:if(M.charCodeAt(3)!==45||M.charCodeAt(4)===122)break;case 931:case 953:if(E.test(Y)===!0)return(J=Y.substring(Y.indexOf(":")+1)).charCodeAt(0)===115?o(Y.replace("stretch","fill-available"),Z,te,le).replace(":fill-available",":stretch"):M.replace(J,"-webkit-"+J)+M.replace(J,"-moz-"+J.replace("fill-",""))+M;break;case 962:if(M="-webkit-"+M+(M.charCodeAt(5)===102?"-ms-"+M:"")+M,te+le===211&&M.charCodeAt(13)===105&&0<M.indexOf("transform",10))return M.substring(0,M.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+M}return M}function a(Y,Z){var te=Y.indexOf(Z===1?":":"{"),le=Y.substring(0,Z!==3?te:10);return te=Y.substring(te+1,Y.length-1),G(Z!==2?le:le.replace(z,"$1"),te,Z)}function i(Y,Z){var te=o(Z,Z.charCodeAt(0),Z.charCodeAt(1),Z.charCodeAt(2));return te!==Z+";"?te.replace(S," or ($1)").substring(4):"("+Z+")"}function u(Y,Z,te,le,M,ye,J,Le,ke,_e){for(var fe=0,ot=Z,xt;fe<U;++fe)switch(xt=Q[fe].call(p,Y,ot,te,le,M,ye,J,Le,ke,_e)){case void 0:case!1:case!0:case null:break;default:ot=xt}if(ot!==Z)return ot}function l(Y){switch(Y){case void 0:case null:U=Q.length=0;break;default:if(typeof Y=="function")Q[U++]=Y;else if(typeof Y=="object")for(var Z=0,te=Y.length;Z<te;++Z)l(Y[Z]);else ae=!!Y|0}return l}function c(Y){return Y=Y.prefix,Y!==void 0&&(G=null,Y?typeof Y!="function"?W=1:(W=2,G=Y):W=0),c}function p(Y,Z){var te=Y;if(33>te.charCodeAt(0)&&(te=te.trim()),ee=te,te=[ee],0<U){var le=u(-1,Z,te,te,V,O,0,0,0,0);le!==void 0&&typeof le=="string"&&(Z=le)}var M=t(H,te,Z,0,0);return 0<U&&(le=u(-2,M,te,te,V,O,M.length,0,0,0),le!==void 0&&(M=le)),ee="",B=0,O=V=1,M}var d=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,m=/zoo|gra/,g=/([,: ])(transform)/g,x=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,w=/::(place)/g,$=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,T=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,D=/-self|flex-/g,z=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,O=1,V=1,B=0,W=1,H=[],Q=[],U=0,G=null,ae=0,ee="";return p.use=l,p.set=c,e!==void 0&&c(e),p}var sk={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ok(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var ak=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,X1=ok(function(e){return ak.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),tC={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=typeof Symbol=="function"&&Symbol.for,wh=mt?Symbol.for("react.element"):60103,bh=mt?Symbol.for("react.portal"):60106,Ll=mt?Symbol.for("react.fragment"):60107,zl=mt?Symbol.for("react.strict_mode"):60108,Ml=mt?Symbol.for("react.profiler"):60114,Vl=mt?Symbol.for("react.provider"):60109,Ul=mt?Symbol.for("react.context"):60110,$h=mt?Symbol.for("react.async_mode"):60111,Wl=mt?Symbol.for("react.concurrent_mode"):60111,Gl=mt?Symbol.for("react.forward_ref"):60112,jl=mt?Symbol.for("react.suspense"):60113,ik=mt?Symbol.for("react.suspense_list"):60120,Hl=mt?Symbol.for("react.memo"):60115,Kl=mt?Symbol.for("react.lazy"):60116,uk=mt?Symbol.for("react.block"):60121,lk=mt?Symbol.for("react.fundamental"):60117,ck=mt?Symbol.for("react.responder"):60118,pk=mt?Symbol.for("react.scope"):60119;function un(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wh:switch(e=e.type,e){case $h:case Wl:case Ll:case Ml:case zl:case jl:return e;default:switch(e=e&&e.$$typeof,e){case Ul:case Gl:case Kl:case Hl:case Vl:return e;default:return t}}case bh:return t}}}function nC(e){return un(e)===Wl}Pe.AsyncMode=$h;Pe.ConcurrentMode=Wl;Pe.ContextConsumer=Ul;Pe.ContextProvider=Vl;Pe.Element=wh;Pe.ForwardRef=Gl;Pe.Fragment=Ll;Pe.Lazy=Kl;Pe.Memo=Hl;Pe.Portal=bh;Pe.Profiler=Ml;Pe.StrictMode=zl;Pe.Suspense=jl;Pe.isAsyncMode=function(e){return nC(e)||un(e)===$h};Pe.isConcurrentMode=nC;Pe.isContextConsumer=function(e){return un(e)===Ul};Pe.isContextProvider=function(e){return un(e)===Vl};Pe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wh};Pe.isForwardRef=function(e){return un(e)===Gl};Pe.isFragment=function(e){return un(e)===Ll};Pe.isLazy=function(e){return un(e)===Kl};Pe.isMemo=function(e){return un(e)===Hl};Pe.isPortal=function(e){return un(e)===bh};Pe.isProfiler=function(e){return un(e)===Ml};Pe.isStrictMode=function(e){return un(e)===zl};Pe.isSuspense=function(e){return un(e)===jl};Pe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ll||e===Wl||e===Ml||e===zl||e===jl||e===ik||typeof e=="object"&&e!==null&&(e.$$typeof===Kl||e.$$typeof===Hl||e.$$typeof===Vl||e.$$typeof===Ul||e.$$typeof===Gl||e.$$typeof===lk||e.$$typeof===ck||e.$$typeof===pk||e.$$typeof===uk)};Pe.typeOf=un;(function(e){e.exports=Pe})(tC);var _h=tC.exports,dk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Sh={};Sh[_h.ForwardRef]=hk;Sh[_h.Memo]=rC;function Y1(e){return _h.isMemo(e)?rC:Sh[e.$$typeof]||dk}var mk=Object.defineProperty,gk=Object.getOwnPropertyNames,Q1=Object.getOwnPropertySymbols,yk=Object.getOwnPropertyDescriptor,xk=Object.getPrototypeOf,Z1=Object.prototype;function sC(e,t,r){if(typeof t!="string"){if(Z1){var s=xk(t);s&&s!==Z1&&sC(e,s,r)}var o=gk(t);Q1&&(o=o.concat(Q1(t)));for(var a=Y1(e),i=Y1(t),u=0;u<o.length;++u){var l=o[u];if(!fk[l]&&!(r&&r[l])&&!(i&&i[l])&&!(a&&a[l])){var c=yk(t,l);try{mk(e,l,c)}catch{}}}}return e}var vk=sC;function In(){return(In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var J1=function(e,t){for(var r=[e[0]],s=0,o=t.length;s<o;s+=1)r.push(t[s],e[s+1]);return r},wd=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!xh.exports.typeOf(e)},Ku=Object.freeze([]),Wr=Object.freeze({});function Io(e){return typeof e=="function"}function ey(e){return e.displayName||e.name||"Component"}function kh(e){return e&&typeof e.styledComponentId=="string"}var Do=typeof process<"u"&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Eh=typeof window<"u"&&"HTMLElement"in window,Ck=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:!1),wk={};function $s(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var bk=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var t=e.prototype;return t.indexOfGroup=function(r){for(var s=0,o=0;o<r;o++)s+=this.groupSizes[o];return s},t.insertRules=function(r,s){if(r>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,i=a;r>=i;)(i<<=1)<0&&$s(16,""+r);this.groupSizes=new Uint32Array(i),this.groupSizes.set(o),this.length=i;for(var u=a;u<i;u++)this.groupSizes[u]=0}for(var l=this.indexOfGroup(r+1),c=0,p=s.length;c<p;c++)this.tag.insertRule(l,s[c])&&(this.groupSizes[r]++,l++)},t.clearGroup=function(r){if(r<this.length){var s=this.groupSizes[r],o=this.indexOfGroup(r),a=o+s;this.groupSizes[r]=0;for(var i=o;i<a;i++)this.tag.deleteRule(o)}},t.getGroup=function(r){var s="";if(r>=this.length||this.groupSizes[r]===0)return s;for(var o=this.groupSizes[r],a=this.indexOfGroup(r),i=a+o,u=a;u<i;u++)s+=this.tag.getRule(u)+`/*!sc*/
`;return s},e}(),hu=new Map,qu=new Map,Ia=1,Wi=function(e){if(hu.has(e))return hu.get(e);for(;qu.has(Ia);)Ia++;var t=Ia++;return hu.set(e,t),qu.set(t,e),t},$k=function(e){return qu.get(e)},_k=function(e,t){t>=Ia&&(Ia=t+1),hu.set(e,t),qu.set(t,e)},Sk="style["+Do+'][data-styled-version="5.3.5"]',kk=new RegExp("^"+Do+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Ek=function(e,t,r){for(var s,o=r.split(","),a=0,i=o.length;a<i;a++)(s=o[a])&&e.registerName(t,s)},Nk=function(e,t){for(var r=(t.textContent||"").split(`/*!sc*/
`),s=[],o=0,a=r.length;o<a;o++){var i=r[o].trim();if(i){var u=i.match(kk);if(u){var l=0|parseInt(u[1],10),c=u[2];l!==0&&(_k(c,l),Ek(e,c,u[3]),e.getTag().insertRules(l,s)),s.length=0}else s.push(i)}}},Tk=function(){return typeof window<"u"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},oC=function(e){var t=document.head,r=e||t,s=document.createElement("style"),o=function(u){for(var l=u.childNodes,c=l.length;c>=0;c--){var p=l[c];if(p&&p.nodeType===1&&p.hasAttribute(Do))return p}}(r),a=o!==void 0?o.nextSibling:null;s.setAttribute(Do,"active"),s.setAttribute("data-styled-version","5.3.5");var i=Tk();return i&&s.setAttribute("nonce",i),r.insertBefore(s,a),s},Ik=function(){function e(r){var s=this.element=oC(r);s.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var a=document.styleSheets,i=0,u=a.length;i<u;i++){var l=a[i];if(l.ownerNode===o)return l}$s(17)}(s),this.length=0}var t=e.prototype;return t.insertRule=function(r,s){try{return this.sheet.insertRule(s,r),this.length++,!0}catch{return!1}},t.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},t.getRule=function(r){var s=this.sheet.cssRules[r];return s!==void 0&&typeof s.cssText=="string"?s.cssText:""},e}(),Dk=function(){function e(r){var s=this.element=oC(r);this.nodes=s.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(r,s){if(r<=this.length&&r>=0){var o=document.createTextNode(s),a=this.nodes[r];return this.element.insertBefore(o,a||null),this.length++,!0}return!1},t.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},t.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),Ak=function(){function e(r){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(r,s){return r<=this.length&&(this.rules.splice(r,0,s),this.length++,!0)},t.deleteRule=function(r){this.rules.splice(r,1),this.length--},t.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),ty=Eh,Rk={isServer:!Eh,useCSSOMInjection:!Ck},Xu=function(){function e(r,s,o){r===void 0&&(r=Wr),s===void 0&&(s={}),this.options=In({},Rk,{},r),this.gs=s,this.names=new Map(o),this.server=!!r.isServer,!this.server&&Eh&&ty&&(ty=!1,function(a){for(var i=document.querySelectorAll(Sk),u=0,l=i.length;u<l;u++){var c=i[u];c&&c.getAttribute(Do)!=="active"&&(Nk(a,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}e.registerId=function(r){return Wi(r)};var t=e.prototype;return t.reconstructWithOptions=function(r,s){return s===void 0&&(s=!0),new e(In({},this.options,{},r),this.gs,s&&this.names||void 0)},t.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},t.getTag=function(){return this.tag||(this.tag=(o=(s=this.options).isServer,a=s.useCSSOMInjection,i=s.target,r=o?new Ak(i):a?new Ik(i):new Dk(i),new bk(r)));var r,s,o,a,i},t.hasNameForId=function(r,s){return this.names.has(r)&&this.names.get(r).has(s)},t.registerName=function(r,s){if(Wi(r),this.names.has(r))this.names.get(r).add(s);else{var o=new Set;o.add(s),this.names.set(r,o)}},t.insertRules=function(r,s,o){this.registerName(r,s),this.getTag().insertRules(Wi(r),o)},t.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},t.clearRules=function(r){this.getTag().clearGroup(Wi(r)),this.clearNames(r)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(r){for(var s=r.getTag(),o=s.length,a="",i=0;i<o;i++){var u=$k(i);if(u!==void 0){var l=r.names.get(u),c=s.getGroup(i);if(l&&c&&l.size){var p=Do+".g"+i+'[id="'+u+'"]',d="";l!==void 0&&l.forEach(function(f){f.length>0&&(d+=f+",")}),a+=""+c+p+'{content:"'+d+`"}/*!sc*/
`}}}return a}(this)},e}(),Pk=/(a)(d)/gi,ny=function(e){return String.fromCharCode(e+(e>25?39:97))};function bd(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=ny(t%52)+r;return(ny(t%52)+r).replace(Pk,"$1-$2")}var lo=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},aC=function(e){return lo(5381,e)};function iC(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Io(r)&&!kh(r))return!1}return!0}var Ok=aC("5.3.5"),Fk=function(){function e(t,r,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&iC(t),this.componentId=r,this.baseHash=lo(Ok,r),this.baseStyle=s,Xu.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,s){var o=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(t,r,s)),this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(o,this.staticRulesId))a.push(this.staticRulesId);else{var i=_s(this.rules,t,r,s).join(""),u=bd(lo(this.baseHash,i)>>>0);if(!r.hasNameForId(o,u)){var l=s(i,"."+u,void 0,o);r.insertRules(o,u,l)}a.push(u),this.staticRulesId=u}else{for(var c=this.rules.length,p=lo(this.baseHash,s.hash),d="",f=0;f<c;f++){var h=this.rules[f];if(typeof h=="string")d+=h;else if(h){var m=_s(h,t,r,s),g=Array.isArray(m)?m.join(""):m;p=lo(p,g+f),d+=g}}if(d){var x=bd(p>>>0);if(!r.hasNameForId(o,x)){var y=s(d,"."+x,void 0,o);r.insertRules(o,x,y)}a.push(x)}}return a.join(" ")},e}(),Bk=/^\s*\/\/.*$/gm,Lk=[":","[",".","#"];function zk(e){var t,r,s,o,a=e===void 0?Wr:e,i=a.options,u=i===void 0?Wr:i,l=a.plugins,c=l===void 0?Ku:l,p=new rk(u),d=[],f=function(g){function x(y){if(y)try{g(y+"}")}catch{}}return function(y,v,w,$,b,T,S,D,z,E){switch(y){case 1:if(z===0&&v.charCodeAt(0)===64)return g(v+";"),"";break;case 2:if(D===0)return v+"/*|*/";break;case 3:switch(D){case 102:case 112:return g(w[0]+v),"";default:return v+(E===0?"/*|*/":"")}case-2:v.split("/*|*/}").forEach(x)}}}(function(g){d.push(g)}),h=function(g,x,y){return x===0&&Lk.indexOf(y[r.length])!==-1||y.match(o)?g:"."+t};function m(g,x,y,v){v===void 0&&(v="&");var w=g.replace(Bk,""),$=x&&y?y+" "+x+" { "+w+" }":w;return t=v,r=x,s=new RegExp("\\"+r+"\\b","g"),o=new RegExp("(\\"+r+"\\b){2,}"),p(y||!x?"":x,$)}return p.use([].concat(c,[function(g,x,y){g===2&&y.length&&y[0].lastIndexOf(r)>0&&(y[0]=y[0].replace(s,h))},f,function(g){if(g===-2){var x=d;return d=[],x}}])),m.hash=c.length?c.reduce(function(g,x){return x.name||$s(15),lo(g,x.name)},5381).toString():"",m}var uC=Pn.createContext();uC.Consumer;var lC=Pn.createContext(),Mk=(lC.Consumer,new Xu),$d=zk();function cC(){return xe.exports.useContext(uC)||Mk}function pC(){return xe.exports.useContext(lC)||$d}var dC=function(){function e(t,r){var s=this;this.inject=function(o,a){a===void 0&&(a=$d);var i=s.name+a.hash;o.hasNameForId(s.id,i)||o.insertRules(s.id,i,a(s.rules,i,"@keyframes"))},this.toString=function(){return $s(12,String(s.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=r}return e.prototype.getName=function(t){return t===void 0&&(t=$d),this.name+t.hash},e}(),Vk=/([A-Z])/,Uk=/([A-Z])/g,Wk=/^ms-/,Gk=function(e){return"-"+e.toLowerCase()};function ry(e){return Vk.test(e)?e.replace(Uk,Gk).replace(Wk,"-ms-"):e}var sy=function(e){return e==null||e===!1||e===""};function _s(e,t,r,s){if(Array.isArray(e)){for(var o,a=[],i=0,u=e.length;i<u;i+=1)(o=_s(e[i],t,r,s))!==""&&(Array.isArray(o)?a.push.apply(a,o):a.push(o));return a}if(sy(e))return"";if(kh(e))return"."+e.styledComponentId;if(Io(e)){if(typeof(c=e)!="function"||c.prototype&&c.prototype.isReactComponent||!t)return e;var l=e(t);return _s(l,t,r,s)}var c;return e instanceof dC?r?(e.inject(r,s),e.getName(s)):e:wd(e)?function p(d,f){var h,m,g=[];for(var x in d)d.hasOwnProperty(x)&&!sy(d[x])&&(Array.isArray(d[x])&&d[x].isCss||Io(d[x])?g.push(ry(x)+":",d[x],";"):wd(d[x])?g.push.apply(g,p(d[x],x)):g.push(ry(x)+": "+(h=x,(m=d[x])==null||typeof m=="boolean"||m===""?"":typeof m!="number"||m===0||h in sk?String(m).trim():m+"px")+";"));return f?[f+" {"].concat(g,["}"]):g}(e):e.toString()}var oy=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Gn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return Io(e)||wd(e)?oy(_s(J1(Ku,[e].concat(r)))):r.length===0&&e.length===1&&typeof e[0]=="string"?e:oy(_s(J1(e,r)))}var fC=function(e,t,r){return r===void 0&&(r=Wr),e.theme!==r.theme&&e.theme||t||r.theme},jk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Hk=/(^-|-$)/g;function lp(e){return e.replace(jk,"-").replace(Hk,"")}var Nh=function(e){return bd(aC(e)>>>0)};function Gi(e){return typeof e=="string"&&!0}var _d=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},Kk=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function qk(e,t,r){var s=e[r];_d(t)&&_d(s)?hC(s,t):e[r]=t}function hC(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];for(var o=0,a=r;o<a.length;o++){var i=a[o];if(_d(i))for(var u in i)Kk(u)&&qk(e,i[u],u)}return e}var Xa=Pn.createContext();Xa.Consumer;function Xk(e){var t=xe.exports.useContext(Xa),r=xe.exports.useMemo(function(){return function(s,o){if(!s)return $s(14);if(Io(s)){var a=s(o);return a}return Array.isArray(s)||typeof s!="object"?$s(8):o?In({},o,{},s):s}(e.theme,t)},[e.theme,t]);return e.children?Pn.createElement(Xa.Provider,{value:r},e.children):null}var cp={};function mC(e,t,r){var s=kh(e),o=!Gi(e),a=t.attrs,i=a===void 0?Ku:a,u=t.componentId,l=u===void 0?function(v,w){var $=typeof v!="string"?"sc":lp(v);cp[$]=(cp[$]||0)+1;var b=$+"-"+Nh("5.3.5"+$+cp[$]);return w?w+"-"+b:b}(t.displayName,t.parentComponentId):u,c=t.displayName,p=c===void 0?function(v){return Gi(v)?"styled."+v:"Styled("+ey(v)+")"}(e):c,d=t.displayName&&t.componentId?lp(t.displayName)+"-"+t.componentId:t.componentId||l,f=s&&e.attrs?Array.prototype.concat(e.attrs,i).filter(Boolean):i,h=t.shouldForwardProp;s&&e.shouldForwardProp&&(h=t.shouldForwardProp?function(v,w,$){return e.shouldForwardProp(v,w,$)&&t.shouldForwardProp(v,w,$)}:e.shouldForwardProp);var m,g=new Fk(r,d,s?e.componentStyle:void 0),x=g.isStatic&&i.length===0,y=function(v,w){return function($,b,T,S){var D=$.attrs,z=$.componentStyle,E=$.defaultProps,A=$.foldedComponentIds,O=$.shouldForwardProp,V=$.styledComponentId,B=$.target,W=function(le,M,ye){le===void 0&&(le=Wr);var J=In({},M,{theme:le}),Le={};return ye.forEach(function(ke){var _e,fe,ot,xt=ke;for(_e in Io(xt)&&(xt=xt(J)),xt)J[_e]=Le[_e]=_e==="className"?(fe=Le[_e],ot=xt[_e],fe&&ot?fe+" "+ot:fe||ot):xt[_e]}),[J,Le]}(fC(b,xe.exports.useContext(Xa),E)||Wr,b,D),H=W[0],Q=W[1],U=function(le,M,ye,J){var Le=cC(),ke=pC(),_e=M?le.generateAndInjectStyles(Wr,Le,ke):le.generateAndInjectStyles(ye,Le,ke);return _e}(z,S,H),G=T,ae=Q.$as||b.$as||Q.as||b.as||B,ee=Gi(ae),Y=Q!==b?In({},b,{},Q):b,Z={};for(var te in Y)te[0]!=="$"&&te!=="as"&&(te==="forwardedAs"?Z.as=Y[te]:(O?O(te,X1,ae):!ee||X1(te))&&(Z[te]=Y[te]));return b.style&&Q.style!==b.style&&(Z.style=In({},b.style,{},Q.style)),Z.className=Array.prototype.concat(A,V,U!==V?U:null,b.className,Q.className).filter(Boolean).join(" "),Z.ref=G,xe.exports.createElement(ae,Z)}(m,v,w,x)};return y.displayName=p,(m=Pn.forwardRef(y)).attrs=f,m.componentStyle=g,m.displayName=p,m.shouldForwardProp=h,m.foldedComponentIds=s?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ku,m.styledComponentId=d,m.target=s?e.target:e,m.withComponent=function(v){var w=t.componentId,$=function(T,S){if(T==null)return{};var D,z,E={},A=Object.keys(T);for(z=0;z<A.length;z++)D=A[z],S.indexOf(D)>=0||(E[D]=T[D]);return E}(t,["componentId"]),b=w&&w+"-"+(Gi(v)?v:lp(ey(v)));return mC(v,In({},$,{attrs:f,componentId:b}),r)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(v){this._foldedDefaultProps=s?hC({},e.defaultProps,v):v}}),m.toString=function(){return"."+m.styledComponentId},o&&vk(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Sd=function(e){return function t(r,s,o){if(o===void 0&&(o=Wr),!xh.exports.isValidElementType(s))return $s(1,String(s));var a=function(){return r(s,o,Gn.apply(void 0,arguments))};return a.withConfig=function(i){return t(r,s,In({},o,{},i))},a.attrs=function(i){return t(r,s,In({},o,{attrs:Array.prototype.concat(o.attrs,i).filter(Boolean)}))},a}(mC,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Sd[e]=Sd(e)});var Yk=function(){function e(r,s){this.rules=r,this.componentId=s,this.isStatic=iC(r),Xu.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(r,s,o,a){var i=a(_s(this.rules,s,o,a).join(""),""),u=this.componentId+r;o.insertRules(u,u,i)},t.removeStyles=function(r,s){s.clearRules(this.componentId+r)},t.renderStyles=function(r,s,o,a){r>2&&Xu.registerId(this.componentId+r),this.removeStyles(r,o),this.createStyles(r,s,o,a)},e}();function Qk(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var o=Gn.apply(void 0,[e].concat(r)),a="sc-global-"+Nh(JSON.stringify(o)),i=new Yk(o,a);function u(c){var p=cC(),d=pC(),f=xe.exports.useContext(Xa),h=xe.exports.useRef(p.allocateGSInstance(a)).current;return p.server&&l(h,c,p,f,d),xe.exports.useLayoutEffect(function(){if(!p.server)return l(h,c,p,f,d),function(){return i.removeStyles(h,p)}},[h,c,p,f,d]),null}function l(c,p,d,f,h){if(i.isStatic)i.renderStyles(c,wk,d,h);else{var m=In({},p,{theme:fC(p,f,u.defaultProps)});i.renderStyles(c,m,d,h)}}return Pn.memo(u)}function ay(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var o=Gn.apply(void 0,[e].concat(r)).join(""),a=Nh(o);return new dC(a,o)}const ge=Sd;var Th={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk=xe.exports,Jk=Symbol.for("react.element"),eE=Symbol.for("react.fragment"),tE=Object.prototype.hasOwnProperty,nE=Zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rE={key:!0,ref:!0,__self:!0,__source:!0};function gC(e,t,r){var s,o={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)tE.call(t,s)&&!rE.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:Jk,type:e,key:a,ref:i,props:o,_owner:nE.current}}ql.Fragment=eE;ql.jsx=gC;ql.jsxs=gC;(function(e){e.exports=ql})(Th);const j=Th.exports.jsx,Ee=Th.exports.jsxs,sE=ge.svg`
  width: 16.5vh;
  height: 16.5vh;
  @media (max-height: 512px) {
    width: 80px;
    height: 80px;
  }
`,oE=()=>Ee(sE,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 210 210",children:[Ee("defs",{children:[j("clipPath",{id:"clip-path",children:j("circle",{id:"\uD0C0\uC6D0_113","data-name":"\uD0C0\uC6D0 113",cx:"105",cy:"105",r:"105",transform:"translate(1030 1524)",fill:"#fff",stroke:"#707070","stroke-width":"1"})}),j("clipPath",{id:"clip-path-2",children:j("circle",{id:"\uD0C0\uC6D0_111","data-name":"\uD0C0\uC6D0 111",cx:"106",cy:"106",r:"106",transform:"translate(430.991 -1192.009)",fill:"#fff",stroke:"#707070","stroke-width":"1"})}),Ee("linearGradient",{id:"linear-gradient",x1:"0.067",y1:"0.197",x2:"0.903",y2:"0.864",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#fac712"}),j("stop",{offset:"1","stop-color":"#f69f23"})]}),Ee("linearGradient",{id:"linear-gradient-3",x1:"0.939",y1:"0.658",x2:"0.05",y2:"0.5",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#fac712"}),j("stop",{offset:"1","stop-color":"#feef00"})]}),Ee("linearGradient",{id:"linear-gradient-4",x1:"0.165",y1:"0.093",x2:"0.777",y2:"1",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#f69f23"}),j("stop",{offset:"1","stop-color":"#fb6312"})]}),Ee("linearGradient",{id:"linear-gradient-5",x1:"0.923",y1:"0.5",x2:"0",y2:"0.5",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#7421b0"}),j("stop",{offset:"1","stop-color":"#3a48ba"})]}),Ee("linearGradient",{id:"linear-gradient-6",x1:"0.863",y1:"0.783",x2:"0.14",y2:"0.168",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#3a48ba"}),j("stop",{offset:"1","stop-color":"#006fc4"})]}),Ee("linearGradient",{id:"linear-gradient-8",x1:"0.878",y1:"0.121",x2:"0.043",y2:"0.802",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#d2298e"}),j("stop",{offset:"1","stop-color":"#7421b0"})]}),Ee("linearGradient",{id:"linear-gradient-10",x1:"0.625",y1:"0.698",x2:"0.197",y2:"0.034",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#006fc4"}),j("stop",{offset:"1","stop-color":"#00c2af"})]}),Ee("linearGradient",{id:"linear-gradient-11",x1:"0.788",y1:"0.076",x2:"0.152",y2:"0.875",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#ff2600"}),j("stop",{offset:"1","stop-color":"#d2298e"})]}),Ee("linearGradient",{id:"linear-gradient-12",x1:"0.562",y1:"0.141",x2:"0.5",y2:"1",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#fb6312"}),j("stop",{offset:"1","stop-color":"#ff2600"})]}),Ee("linearGradient",{id:"linear-gradient-13",x1:"0.5",y1:"0.958",x2:"0.5",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#00c2af"}),j("stop",{offset:"1","stop-color":"#00b500"})]}),Ee("linearGradient",{id:"linear-gradient-14",x1:"0.107",y1:"0.817",x2:"0.921",y2:"0.149",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#7fd200"}),j("stop",{offset:"1","stop-color":"#feef00"})]}),Ee("linearGradient",{id:"linear-gradient-16",x1:"0.251",y1:"1",x2:"0.822",y2:"0.108",gradientUnits:"objectBoundingBox",children:[j("stop",{offset:"0","stop-color":"#00b500"}),j("stop",{offset:"1","stop-color":"#7fd200"})]})]}),j("g",{id:"\uB9C8\uC2A4\uD06C_\uADF8\uB8F9_9","data-name":"\uB9C8\uC2A4\uD06C \uADF8\uB8F9 9",transform:"translate(-1030 -1524)","clip-path":"url(#clip-path)",children:Ee("g",{id:"color-img",transform:"translate(598.009 2715.009)","clip-path":"url(#clip-path-2)",children:[Ee("g",{id:"\uADF8\uB8F9_1891","data-name":"\uADF8\uB8F9 1891",transform:"translate(431 -1192)",children:[j("circle",{id:"\uD0C0\uC6D0_110","data-name":"\uD0C0\uC6D0 110",cx:"93",cy:"93",r:"93",transform:"translate(11.991 11.991)",fill:"#fff"}),Ee("g",{id:"\uADF8\uB8F9_1890","data-name":"\uADF8\uB8F9 1890",transform:"translate(0 0)",children:[j("path",{id:"\uD328\uC2A4_228","data-name":"\uD328\uC2A4 228",d:"M1059.352,338.546l.019.019-.019-.019Z",transform:"translate(-878.672 -157.867)",fill:"none"}),j("path",{id:"\uD328\uC2A4_229","data-name":"\uD328\uC2A4 229",d:"M863.792,225.648h0Z",transform:"translate(-860.174 -147.096)",fill:"none"}),j("path",{id:"\uD328\uC2A4_230","data-name":"\uD328\uC2A4 230",d:"M1001.985,159.988a89.191,89.191,0,0,1,40.02,23.123l12.438-12.439h0l.019-.019-.1-.056a106.761,106.761,0,0,0-47.822-27.611h0Z",transform:"translate(-873.763 -139.369)",fill:"url(#linear-gradient)"}),j("path",{id:"\uD328\uC2A4_254","data-name":"\uD328\uC2A4 254",d:"M1001.985,159.988a89.191,89.191,0,0,1,40.02,23.123l12.438-12.439h0l.019-.019-.1-.056a106.761,106.761,0,0,0-47.822-27.611h0Z",transform:"translate(-873.763 -137.35)",fill:"url(#linear-gradient)"}),j("path",{id:"\uD328\uC2A4_231","data-name":"\uD328\uC2A4 231",d:"M946.455,142.647l4.556,17a89.748,89.748,0,0,1,46.223,0l4.557-17a107.669,107.669,0,0,0-55.336,0h0Z",transform:"translate(-868.13 -139.031)",fill:"url(#linear-gradient-3)"}),j("rect",{id:"\uC0AC\uAC01\uD615_856","data-name":"\uC0AC\uAC01\uD615 856",width:"17.602",transform:"translate(128.89 20.619) rotate(-75)",fill:"#feef00"}),j("path",{id:"\uD328\uC2A4_232","data-name":"\uD328\uC2A4 232",d:"M1045.75,185.7a89.178,89.178,0,0,1,23.122,40.019l17-4.556h0l0,0a106.762,106.762,0,0,0-27.608-47.819l-.057-.1h0Z",transform:"translate(-877.508 -141.958)",fill:"url(#linear-gradient-4)"}),j("path",{id:"\uD328\uC2A4_233","data-name":"\uD328\uC2A4 233",d:"M1058.188,173.261,1045.75,185.7h0l12.458-12.458h0l-.019.019Z",transform:"translate(-877.508 -141.958)",fill:"#f69f23"}),j("path",{id:"\uD328\uC2A4_234","data-name":"\uD328\uC2A4 234",d:"M997.233,350.23a89.748,89.748,0,0,1-46.223,0l-4.557,17h0a107.654,107.654,0,0,0,55.332,0h0Z",transform:"translate(-868.13 -158.867)",fill:"url(#linear-gradient-5)"}),j("path",{id:"\uD328\uC2A4_235","data-name":"\uD328\uC2A4 235",d:"M941.97,365.068l4.556-17a89.183,89.183,0,0,1-40.019-23.122l-12.44,12.44h0l-.017.018.089.051a106.757,106.757,0,0,0,47.832,27.617h0Z",transform:"translate(-862.764 -156.703)",fill:"url(#linear-gradient-6)"}),j("path",{id:"\uD328\uC2A4_252","data-name":"\uD328\uC2A4 252",d:"M941.97,365.068l4.556-17a89.183,89.183,0,0,1-40.019-23.122l-12.44,12.44h0l-.017.018.089.051a106.757,106.757,0,0,0,47.832,27.617h0Z",transform:"translate(-865.709 -158.722)",fill:"url(#linear-gradient-6)"}),j("path",{id:"\uD328\uC2A4_236","data-name":"\uD328\uC2A4 236",d:"M946.454,367.232h0l4.556-17h0Z",transform:"translate(-867.916 -158.867)",fill:"#3a48ba"}),j("path",{id:"\uD328\uC2A4_237","data-name":"\uD328\uC2A4 237",d:"M1054.443,337.382l-12.438-12.439a89.181,89.181,0,0,1-40.02,23.122l4.556,17h0a106.749,106.749,0,0,0,47.822-27.609l.1-.058h0l-.019-.019Z",transform:"translate(-873.763 -156.703)",fill:"url(#linear-gradient-8)"}),j("path",{id:"\uD328\uC2A4_253","data-name":"\uD328\uC2A4 253",d:"M1054.443,337.382l-12.438-12.439a89.181,89.181,0,0,1-40.02,23.122l4.556,17h0a106.749,106.749,0,0,0,47.822-27.609l.1-.058h0l-.019-.019Z",transform:"translate(-873.095 -157.712)",fill:"url(#linear-gradient-8)"}),j("path",{id:"\uD328\uC2A4_238","data-name":"\uD328\uC2A4 238",d:"M1006.541,367.232l-4.556-17h0l4.556,17h0Z",transform:"translate(-873.095 -158.867)",fill:"#d2298e"}),j("path",{id:"\uD328\uC2A4_239","data-name":"\uD328\uC2A4 239",d:"M903.917,321.2a89.183,89.183,0,0,1-23.122-40.019l-17,4.556a106.754,106.754,0,0,0,27.616,47.829l.053.092h0Z",transform:"translate(-860.174 -152.958)",fill:"url(#linear-gradient-10)"}),j("path",{id:"\uD328\uC2A4_240","data-name":"\uD328\uC2A4 240",d:"M894.066,337.383l12.44-12.44h0L894.048,337.4h0l.018-.018Z",transform:"translate(-862.764 -156.703)",fill:"#006fc4"}),j("path",{id:"\uD328\uC2A4_241","data-name":"\uD328\uC2A4 241",d:"M1085.875,285.735l-17-4.556A89.183,89.183,0,0,1,1045.75,321.2l12.438,12.439h0l.019.019.056-.1a106.756,106.756,0,0,0,27.609-47.818l0-.006Z",transform:"translate(-877.508 -152.958)",fill:"url(#linear-gradient-11)"}),j("path",{id:"\uD328\uC2A4_242","data-name":"\uD328\uC2A4 242",d:"M1045.75,324.943l12.438,12.439h0l-12.439-12.439Z",transform:"translate(-877.508 -156.703)",fill:"#ff2600"}),j("path",{id:"\uD328\uC2A4_243","data-name":"\uD328\uC2A4 243",d:"M1071.036,230.2a89.756,89.756,0,0,1,0,46.224l17,4.555h0v0a107.662,107.662,0,0,0,0-55.324v-.006h0Z",transform:"translate(-879.672 -147.325)",fill:"url(#linear-gradient-12)"}),j("path",{id:"\uD328\uC2A4_244","data-name":"\uD328\uC2A4 244",d:"M1088.038,225.648l-17,4.556h0l17-4.556h0Z",transform:"translate(-879.672 -147.11)",fill:"#fb6312"}),j("path",{id:"\uD328\uC2A4_245","data-name":"\uD328\uC2A4 245",d:"M1088.038,285.734l-17-4.556h0l17,4.556h0Z",transform:"translate(-879.672 -152.29)",fill:"#fb6312"}),j("path",{id:"\uD328\uC2A4_246","data-name":"\uD328\uC2A4 246",d:"M863.454,280.983l17-4.556a89.726,89.726,0,0,1,0-46.224l-17-4.556h0a107.67,107.67,0,0,0,0,55.336Z",transform:"translate(-859.836 -147.324)",fill:"url(#linear-gradient-13)"}),j("path",{id:"\uD328\uC2A4_247","data-name":"\uD328\uC2A4 247",d:"M880.794,281.179l-17,4.556h0l17-4.556Z",transform:"translate(-860.174 -152.29)",fill:"#00c2af"}),j("path",{id:"\uD328\uC2A4_248","data-name":"\uD328\uC2A4 248",d:"M906.506,183.111a89.183,89.183,0,0,1,40.02-23.123l-.752-2.8-.687-2.562-.152-.566c-.292-1.091-.573-2.141-.848-3.165l-.469-1.749q-.444-1.66-.869-3.243l-.781-2.914A106.758,106.758,0,0,0,894.14,170.6l-.091.053h0Z",transform:"translate(-862.764 -139.369)",fill:"url(#linear-gradient-14)"}),j("path",{id:"\uD328\uC2A4_255","data-name":"\uD328\uC2A4 255",d:"M906.506,183.111a89.183,89.183,0,0,1,40.02-23.123l-.752-2.8-.687-2.562-.152-.566c-.292-1.091-.573-2.141-.848-3.165l-.469-1.749q-.444-1.66-.869-3.243l-.781-2.914A106.758,106.758,0,0,0,894.14,170.6l-.091.053h0Z",transform:"translate(-863.431 -138.36)",fill:"url(#linear-gradient-14)"}),j("path",{id:"\uD328\uC2A4_249","data-name":"\uD328\uC2A4 249",d:"M948.1,149.142l.469,1.749c.274,1.024.556,2.074.848,3.165l.152.566.687,2.562.752,2.8h0l-4.556-17h0l.781,2.914Q947.66,147.484,948.1,149.142Z",transform:"translate(-867.916 -139.369)",fill:"#7fd200"}),j("path",{id:"\uD328\uC2A4_250","data-name":"\uD328\uC2A4 250",d:"M863.792,221.164l17,4.556A89.173,89.173,0,0,1,903.917,185.7L891.46,173.242l-.052.09a106.758,106.758,0,0,0-27.618,47.831Z",transform:"translate(-860.174 -141.958)",fill:"url(#linear-gradient-16)"}),j("path",{id:"\uD328\uC2A4_251","data-name":"\uD328\uC2A4 251",d:"M863.792,225.648h0l17,4.556h0Z",transform:"translate(-860.175 -147.11)",fill:"#00b500"}),j("rect",{id:"\uC0AC\uAC01\uD615_857","data-name":"\uC0AC\uAC01\uD615 857",height:"17.618",transform:"translate(31.285 31.283) rotate(-45)",fill:"#00b500"})]})]}),j("circle",{id:"\uD0C0\uC6D0_112","data-name":"\uD0C0\uC6D0 112",cx:"90",cy:"90",r:"90",transform:"translate(446.991 -1176.009)",fill:"#fff"}),j("text",{id:"_","data-name":"?",transform:"translate(507.991 -1043.009)","font-size":"123",fontWeight:"300",fontFamily:"Pretendard Variable",children:j("tspan",{x:"0",y:"0",children:"?"})})]})})]}),aE=ge.div`
  font-size: 1.9vh;
  margin-top: 7.5vh;
  margin-bottom: 3.13vh;
  text-align: center;
  line-height: 2.5vh;
  @media (max-height: 513px) {
    font-size: 9px;
    line-height: 15px;
  }
`,iy=ge.span`
  font-weight: 700;
`,uy=ge.span`
  font-weight: 400;
`,iE=()=>Ee(aE,{children:[j(iy,{children:"\uC778\uACF5\uC9C0\uB2A5"}),j(uy,{children:"\uC774 \uD37C\uC2A4\uB110\uCEEC\uB7EC\uB97C \uCE21\uC815 \uD6C4"}),j("br",{}),j(uy,{children:"\uCD94\uCC9C\uD55C \uB9C8\uC2A4\uD06C\uB97C"}),j(iy,{children:" \uAC00\uC0C1\uC73C\uB85C \uCC29\uC6A9\uD574\uBCF4\uC138\uC694"})]}),uE=ge.p`
  font-size: 3.3vh;
  margin-bottom: 1.56vh;
  font-weight: 400;
  font-family: 'Dongle';
  @media (max-height: 513px) {
    font-size: 13px;
  }
`,lE=ge.p`
  font-size: 3.4vh;
  font-weight: 600;
  @media (max-height: 513px) {
    font-size: 15px;
  }
`,cE=ge.header`
  margin-top: 7vh;
  margin-bottom: 3.9vh;
  text-align: center;
`,pE=()=>Ee(cE,{children:[j(uE,{children:"\uB098\uC5D0\uAC8C \uC5B4\uC6B8\uB9AC\uB294 \uB9C8\uC2A4\uD06C\uB294 \uBB58\uAE4C?"}),j(lE,{children:"\uD37C\uC2A4\uB110 \uCEEC\uB7EC \uB9C8\uC2A4\uD06C \uCD94\uCC9C"})]});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dE=1e-7,fE=1e-4;class hE{constructor(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,r){this.dataIdsCount++,this.data.set(t,r)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class yC{decComplexRef(t){}time(t){return L("time")}read(t){return L("read")}readSync(t){return L("readSync")}numDataIds(){return L("numDataIds")}disposeData(t){return L("disposeData")}write(t,r,s){return L("write")}move(t,r,s,o){return L("move")}memory(){return L("memory")}floatPrecision(){return L("floatPrecision")}epsilon(){return this.floatPrecision()===32?dE:fE}batchMatMul(t,r,s,o){return L("batchMatMul")}fusedBatchMatMul({a:t,b:r,transposeA:s,transposeB:o,bias:a,activation:i,preluActivationWeights:u}){return L("fusedBatchMatMul")}slice(t,r,s){return L("slice")}stridedSlice(t,r,s,o){return L("stridedSlice")}unstack(t,r){return L("unstack")}reverse(t,r){return L("reverse")}concat(t,r){return L("concat")}neg(t){return L("neg")}add(t,r){return L("add")}addN(t){return L("addN")}subtract(t,r){return L("subtract")}multiply(t,r){return L("multiply")}realDivide(t,r){return L("realDivide")}floorDiv(t,r){return L("floorDiv")}sum(t,r){return L("sum")}prod(t,r){return L("prod")}unsortedSegmentSum(t,r,s){return L("unsortedSegmentSum")}argMin(t,r){return L("argMin")}argMax(t,r){return L("argMax")}equal(t,r){return L("equal")}notEqual(t,r){return L("notEqual")}less(t,r){return L("less")}lessEqual(t,r){return L("lessEqual")}greater(t,r){return L("greater")}greaterEqual(t,r){return L("greaterEqual")}logicalNot(t){return L("logicalNot")}logicalAnd(t,r){return L("logicalAnd")}logicalOr(t,r){return L("logicalOr")}where(t){return L("where")}select(t,r,s){return L("select")}topk(t,r,s){return L("topk")}min(t,r){return L("min")}minimum(t,r){return L("minimum")}mod(t,r){return L("mod")}max(t,r){return L("max")}maximum(t,r){return L("maximum")}all(t,r){return L("all")}any(t,r){return L("any")}squaredDifference(t,r){return L("squaredDifference")}ceil(t){return L("ceil")}floor(t){return L("floor")}round(t){return L("round")}sign(t){return L("sign")}isNaN(t){return L("isNaN")}isInf(t){return L("isInf")}isFinite(t){return L("isFinite")}pow(t,r){return L("pow")}exp(t){return L("exp")}expm1(t){return L("expm1")}softmax(t,r){return L("softmax")}log(t){return L("log")}log1p(t){return L("log1p")}sqrt(t){return L("sqrt")}rsqrt(t){return L("rsqrt")}square(t){return L("square")}reciprocal(t){return L("reciprocal")}relu(t){return L("relu")}relu6(t){return L("relu6")}prelu(t,r){return L("prelu")}elu(t){return L("elu")}eluDer(t,r){return L("eluDer")}selu(t){return L("selu")}int(t){return L("int")}clip(t,r,s){return L("clip")}abs(t){return L("abs")}complexAbs(t){return L("complexAbs")}sigmoid(t){return L("sigmoid")}softplus(t){return L("softplus")}sin(t){return L("sin")}cos(t){return L("cos")}tan(t){return L("tan")}asin(t){return L("asin")}acos(t){return L("acos")}atan(t){return L("atan")}atan2(t,r){return L("atan2")}sinh(t){return L("sinh")}cosh(t){return L("cosh")}tanh(t){return L("tanh")}asinh(t){return L("asinh")}acosh(t){return L("acosh")}atanh(t){return L("atanh")}erf(t){return L("erf")}step(t,r){return L("step")}fusedConv2d({input:t,filter:r,convInfo:s,bias:o,activation:a,preluActivationWeights:i}){return L("fusedConv2d")}conv2d(t,r,s){return L("conv2d")}conv2dDerInput(t,r,s){return L("conv2dDerInput")}conv2dDerFilter(t,r,s){return L("conv2dDerFilter")}fusedDepthwiseConv2D({input:t,filter:r,convInfo:s,bias:o,activation:a,preluActivationWeights:i}){return L("fusedDepthwiseConv2D")}depthwiseConv2D(t,r,s){return L("depthwiseConv2D")}depthwiseConv2DDerInput(t,r,s){return L("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,r,s){return L("depthwiseConv2DDerFilter")}conv3d(t,r,s){return L("conv3d")}conv3dDerInput(t,r,s){return L("conv3dDerInput")}conv3dDerFilter(t,r,s){return L("conv3dDerFilter")}maxPool(t,r){return L("maxPool")}maxPoolBackprop(t,r,s,o){return L("maxPoolBackprop")}avgPool(t,r){return L("avgPool")}avgPoolBackprop(t,r,s){return L("avgPoolBackprop")}avgPool3d(t,r){return L("avgPool3d")}avgPool3dBackprop(t,r,s){return L("avgPool3dBackprop")}maxPool3d(t,r){return L("maxPool3d")}maxPool3dBackprop(t,r,s,o){return L("maxPool3dBackprop")}reshape(t,r){return L("reshape")}cast(t,r){return L("cast")}tile(t,r){return L("tile")}pad(t,r,s){return L("pad")}transpose(t,r){return L("transpose")}gather(t,r,s,o=0){return L("gather")}gatherND(t,r){return L("gatherND")}scatterND(t,r,s){return L("scatterND")}batchToSpaceND(t,r,s){return L("batchToSpaceND")}spaceToBatchND(t,r,s){return L("spaceToBatchND")}resizeBilinear(t,r,s,o,a){return L("resizeBilinear")}resizeBilinearBackprop(t,r,s){return L("resizeBilinearBackprop")}resizeNearestNeighbor(t,r,s,o,a){return L("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,r,s){return L("resizeNearestNeighborBackprop")}batchNorm(t,r,s,o,a,i){return L("batchNorm")}localResponseNormalization4D(t,r,s,o,a){return L("localResponseNormalization4D")}LRNGrad(t,r,s,o,a,i,u){return L("LRNGrad")}multinomial(t,r,s,o){return L("multinomial")}oneHot(t,r,s,o){return L("oneHot")}cumsum(t,r,s,o){return L("cumsum")}nonMaxSuppression(t,r,s,o,a){return L("nonMaxSuppression")}fft(t){return L("fft")}ifft(t){return L("ifft")}complex(t,r){return L("complex")}real(t){return L("real")}imag(t){return L("imag")}cropAndResize(t,r,s,o,a,i){return L("cropAndResize")}depthToSpace(t,r,s){return L("depthToSpace")}split(t,r,s){return L("split")}sparseToDense(t,r,s,o){return L("sparseToDense")}diag(t){return L("diag")}fill(t,r,s){return L("fill")}onesLike(t){return L("onesLike")}zerosLike(t){return L("zerosLike")}linspace(t,r,s){return L("linspace")}dispose(){return L("dispose")}}function L(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yu(e,t,r){return Math.max(e,Math.min(t,r))}function xC(e){return e%2===0?e:e+1}function mE(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t}function k(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Fe(e,t,r=""){k(_t(e,t),()=>r+` Shapes ${e} and ${t} must match`)}function Ih(e){k(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ao(e,t=[],r=!1){if(t==null&&(t=[]),Array.isArray(e)||qn(e)&&!r)for(let s=0;s<e.length;++s)Ao(e[s],t,r);else t.push(e);return t}function ne(e){if(e.length===0)return 1;let t=e[0];for(let r=1;r<e.length;r++)t*=e[r];return t}function _t(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ut(e){return e%1===0}function kd(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function yo(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ly(e,t=s=>0,r){return new Promise((s,o)=>{let a=0;const i=()=>{if(e()){s();return}a++;const u=t(a);if(r!=null&&a>=r){o();return}setTimeout(i,u)};i()})}function gE(e,t){let r=1,s=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)r*=e[a];else if(e[a]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${a}`);s=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(s===-1){if(t>0&&t!==r)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(r===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%r!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${r}`);const o=e.slice();return o[s]=t/r,o}function Ge(e,t){const r=t.length;return e=e==null?t.map((s,o)=>o):[].concat(e),k(e.every(s=>s>=-r&&s<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${e}`),k(e.every(s=>ut(s)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(s=>s<0?r+s:s)}function Os(e,t){const r=[],s=[],o=t!=null&&Array.isArray(t)&&t.length===0,a=t==null||o?null:Ge(t,e).sort();let i=0;for(let u=0;u<e.length;++u){if(a!=null){if(a[i]===u&&e[u]!==1)throw new Error(`Can't squeeze axis ${u} since its dim '${e[u]}' is not 1`);(a[i]==null||a[i]>u)&&e[u]===1&&(r.push(e[u]),s.push(u)),a[i]<=u&&i++}e[u]!==1&&(r.push(e[u]),s.push(u))}return{newShape:r,keptDims:s}}function Xr(e,t){let r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return r}function Dh(e,t){let r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else if(e==="string")r=new Array(t);else throw new Error(`Unknown data type ${e}`);return r}function yE(e,t){for(let r=0;r<e.length;r++){const s=e[r];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function xE(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function vC(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function qn(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function CC(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function vE(e){if(e==null)return 0;let t=0;return e.forEach(r=>t+=r.length),t}function Xl(e){return typeof e=="string"||e instanceof String}function CE(e){return typeof e=="boolean"}function wE(e){return typeof e=="number"}function Yl(e){return Array.isArray(e)?Yl(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":wE(e)?"float32":Xl(e)?"string":CE(e)?"bool":"float32"}function cy(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ed(e,t){for(let r=t;r<e;++r)if(e%r===0)return r;return e}function Kt(e){const t=e.length;if(t<2)return[];const r=new Array(t-1);r[t-2]=e[t-1];for(let s=t-3;s>=0;--s)r[s]=r[s+1]*e[s+1];return r}function wC(e,t,r){const s=new Array;if(t.length===1){const o=t[0];for(let a=0;a<o;a++)s[a]=r[e+a]}else{const o=t[0],a=t.slice(1),i=a.reduce((u,l)=>u*l);for(let u=0;u<o;u++)s[u]=wC(e+u*i,a,r)}return s}function Nd(e,t){if(e.length===0)return t[0];const r=e.reduce((s,o)=>s*o);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}.`);return wC(0,e,t)}function bC(e,t){const r=Yr(e,t);for(let s=0;s<r.length;s++)r[s]=1;return r}function Yr(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function $C(e){e.forEach(t=>{k(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Td(e,t,r){if(t===0)return 0;if(t===1)return e[0];let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=r[o]*e[o];return s}function _C(e,t,r){if(t===0)return[];if(t===1)return[e];const s=new Array(t);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(e/r[o]),e-=s[o]*r[o];return s[s.length-1]=e,s}function Ya(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const py="tfjsflags";class bE{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,r){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${r}.`),this.platformName=t,this.platform=r}registerFlag(t,r,s){if(this.flagRegistry[t]={evaluationFn:r,setHook:s},this.urlFlags[t]!=null){const o=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const r=this.evaluateFlag(t);if(Ya(r))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=r,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,r){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=$E(this.global.location.search);py in t&&t[py].split(",").forEach(s=>{const[o,a]=s.split(":");this.urlFlags[o]=SE(o,a)})}}function $E(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(r,...s)=>(_E(t,s[0],s[1]),s.join("="))),t}function _E(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function SE(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function K(){return SC}let SC=null;function kE(e){SC=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let pp;function kC(){if(pp==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");pp=e}return pp}function EE(){const e=kC();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function EC(e,t){const r=EE();if(r.has(e))return r.get(e);{const s=t();return r.set(e,s),r.get(e)}}const Ah="Abs",Rh="Acos",Ph="Acosh",Ql="Add",Oh="AddN",NC="All",TC="Any",Fh="ArgMax",Bh="ArgMin",Lh="Asin",zh="Asinh",Mh="Atan",Vh="Atanh",Uh="Atan2",Wh="AvgPool",IC="AvgPoolGrad",Gh="AvgPool3D",DC="AvgPool3DGrad",jh="BatchMatMul",Hh="BatchToSpaceND",AC="Bincount",NE="BroadcastTo",Zl="Cast",Kh="Ceil",qh="ClipByValue",RC="Complex",Xh="ComplexAbs",Yh="Concat",Qh="Conv2D",PC="Conv2DBackpropFilter",Zh="Conv2DBackpropInput",Jh="Conv3D",OC="Conv3DBackpropFilterV2",FC="Conv3DBackpropInputV2",em="Cos",tm="Cosh",nm="Cumsum",BC="CropAndResize",LC="DenseBincount",zC="DepthToSpace",rm="DepthwiseConv2dNative",MC="DepthwiseConv2dNativeBackpropFilter",VC="DepthwiseConv2dNativeBackpropInput",TE="Diag",sm="Dilation2D",IE="Dilation2DBackpropInput",DE="Dilation2DBackpropFilter",om="RealDiv",am="Elu",UC="EluGrad",im="Erf",WC="Equal",um="Exp",lm="ExpandDims",cm="Expm1",GC="FFT",jC="Fill",HC="FlipLeftRight",pm="Floor",dm="FloorDiv",fm="FusedBatchNorm",hm="GatherV2",KC="GatherNd",qC="Greater",mm="GreaterEqual",gm="Identity",XC="IFFT",YC="Imag",ym="IsFinite",xm="IsInf",vm="IsNan",Cm="LeakyRelu",QC="Less",ZC="LessEqual",JC="LinSpace",wm="Log",bm="Log1p",ew="LogicalAnd",tw="LogicalNot",nw="LogicalOr",AE="LogSoftmax",$m="LRN",rw="LRNGrad",_m="Max",Sm="Maximum",km="MaxPool",sw="MaxPoolGrad",Em="MaxPool3D",ow="MaxPool3DGrad",aw="MaxPoolWithArgmax",Nm="Mean",Tm="Min",Im="Minimum",Dm="MirrorPad",Am="Mod",iw="Multinomial",Rm="Multiply",Pm="Neg",uw="NotEqual",lw="NonMaxSuppressionV3",cw="NonMaxSuppressionV4",pw="NonMaxSuppressionV5",Om="OnesLike",Fm="OneHot",Bm="Pack",Lm="PadV2",zm="Pow",Mm="Prelu",dw="Prod",fw="Range",hw="Real",Vm="Reciprocal",Um="Relu",Wm="Reshape",Gm="ResizeNearestNeighbor",mw="ResizeNearestNeighborGrad",jm="ResizeBilinear",gw="ResizeBilinearGrad",Hm="Relu6",Km="Reverse",qm="Round",Xm="Rsqrt",yw="ScatterNd",Ym="Select",Qm="Selu",Zm="Slice",Jm="Sin",e0="Sinh",t0="Sign",n0="Sigmoid",r0="Softplus",s0="Sqrt",o0="Sum",a0="SpaceToBatchND",i0="SplitV",u0="Softmax",l0="SquaredDifference",xw="Square",c0="Sub",vw="SparseToDense",Cw="StridedSlice",p0="Tan",d0="Tanh",Jl="Tile",ww="TopK",f0="Transpose",bw="Unique",h0="Unpack",m0="UnsortedSegmentSum",g0="ZerosLike",y0="Step",Id="FromPixels",$w="RotateWithOffset",Dd="_FusedMatMul",Ad="FusedConv2D",Rd="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qu=EC("kernelRegistry",()=>new Map),Pd=EC("gradRegistry",()=>new Map);function _w(e,t){const r=Sw(e,t);return Qu.get(r)}function dy(e){return Pd.get(e)}function fy(e){const t=Qu.entries(),r=[];for(;;){const{done:s,value:o}=t.next();if(s)break;const[a,i]=o,[u]=a.split("_");u===e&&r.push(i)}return r}function RE(e){const{kernelName:t,backendName:r}=e,s=Sw(t,r);Qu.has(s)&&console.warn(`The kernel '${t}' for backend '${r}' is already registered`),Qu.set(s,e)}function PE(e){const{kernelName:t}=e;Pd.has(t)&&K().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),Pd.set(t,e)}function Sw(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Go(e,t){return t==="string"?ec(e):x0([e],t)}function OE(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function x0(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ao(e)),K().getBool("DEBUG")&&yE(e,t),OE(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const r=new Uint8Array(e.length);for(let s=0;s<r.length;++s)Math.round(e[s])!==0&&(r[s]=1);return r}else throw new Error(`Unknown data type ${t}`)}function Er(){return K().platform.now()}function ec(e,t="utf-8"){return t=t||"utf-8",K().platform.encode(e,t)}function Qa(e,t="utf-8"){return t=t||"utf-8",K().platform.decode(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FE{constructor(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new LE)}profileKernel(t,r,s){let o;const a=()=>{o=s()},i=this.backendTimer.time(a);if(K().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<o.length;l++){const c=o[l];c.data().then(p=>{BE(p,c.dtype,t)})}return{kernelName:t,outputs:o,inputs:r,timeMs:i.then(l=>l.kernelMs),extraInfo:i.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:r,outputs:s,timeMs:o,inputs:a,extraInfo:i}=t;s.forEach(u=>{Promise.all([u.data(),o,i]).then(l=>{this.logger.logKernelProfile(r,u,l[0],l[1],a,l[2])})})}}function BE(e,t,r){if(t!=="float32")return!1;for(let s=0;s<e.length;s++){const o=e[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${r}'`),!0}return!1}class LE{logKernelProfile(t,r,s,o,a,i){const u=typeof o=="number"?yo(`${o}ms`,9):o.error,l=yo(t,25),c=r.rank,p=r.size,d=yo(r.shape.toString(),14);let f="";for(const h in a){const m=a[h];if(m!=null){const g=m.shape||r.shape,x=g.length;f+=`${h}: ${x}D ${x>0?g:""} `}}console.log(`%c${l}	%c${u}	%c${c}D ${d}	%c${p}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zE(e,t,r){const s={},o={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<e.length;l++){const c=e[l],p=c.inputs;for(const d in p){const f=p[d];let h=!1;for(let m=0;m<t.length;m++)if(s[f.id]){c.outputs.forEach(g=>s[g.id]=!0),h=!0,o[c.id]=!0;break}if(h)break}}const a={};a[r.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const c=e[l],p=c.inputs;for(let d=0;d<c.outputs.length;d++)if(a[c.outputs[d].id]){for(const f in p)a[p[f].id]=!0,i[c.id]=!0;break}}const u=[];for(let l=0;l<e.length;l++){const c=e[l];if(o[c.id]&&i[c.id]){const p={};for(const f in c.inputs){const h=c.inputs[f];s[h.id]&&(p[f]=h)}const d=Object.assign({},c);d.inputs=p,d.outputs=c.outputs,u.push(d)}}return u}function ME(e,t,r,s){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach(l=>{const c=e[l.id];c!=null?i.push(c):i.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const u=a.gradient(i);for(const l in a.inputs){if(!(l in u))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(u)}.`);const c=r(()=>u[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const p=a.inputs[l];if(!_t(c.shape,p.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${p.shape}'`);if(e[p.id]==null)e[p.id]=c;else{const d=e[p.id];e[p.id]=s(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hy=20,ha=3,dp=7;function VE(e,t,r,s){const o=Kt(t),a=UE(e,t,r,o),i=t.length,u=mu(e,t,r,o,a),l=["Tensor"];return s&&(l.push(`  dtype: ${r}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(u.map(c=>"    "+c).join(`
`)),l.join(`
`)}function UE(e,t,r,s){const o=ne(t),a=s[s.length-1],i=new Array(a).fill(0),u=t.length,l=r==="complex64"?Ca(e):e;if(u>1)for(let c=0;c<o/a;c++){const p=c*a;for(let d=0;d<a;d++)i[d]=Math.max(i[d],va(l[p+d],0,r).length)}return i}function va(e,t,r){let s;return Array.isArray(e)?s=`${parseFloat(e[0].toFixed(dp))} + ${parseFloat(e[1].toFixed(dp))}j`:Xl(e)?s=`'${e}'`:r==="bool"?s=kw(e):s=parseFloat(e.toFixed(dp)).toString(),yo(s,t)}function kw(e){return e===0?"false":"true"}function mu(e,t,r,s,o,a=!0){const i=r==="complex64"?2:1,u=t[0],l=t.length;if(l===0){if(r==="complex64"){const g=Ca(e);return[va(g[0],0,r)]}return r==="bool"?[kw(e[0])]:[e[0].toString()]}if(l===1){if(u>hy){const x=ha*i;let y=Array.from(e.slice(0,x)),v=Array.from(e.slice((u-ha)*i,u*i));return r==="complex64"&&(y=Ca(y),v=Ca(v)),["["+y.map((w,$)=>va(w,o[$],r)).join(", ")+", ..., "+v.map((w,$)=>va(w,o[u-ha+$],r)).join(", ")+"]"]}const g=r==="complex64"?Ca(e):Array.from(e);return["["+g.map((x,y)=>va(x,o[y],r)).join(", ")+"]"]}const c=t.slice(1),p=s.slice(1),d=s[0]*i,f=[];if(u>hy){for(let g=0;g<ha;g++){const x=g*d,y=x+d;f.push(...mu(e.slice(x,y),c,r,p,o,!1))}f.push("...");for(let g=u-ha;g<u;g++){const x=g*d,y=x+d;f.push(...mu(e.slice(x,y),c,r,p,o,g===u-1))}}else for(let g=0;g<u;g++){const x=g*d,y=x+d;f.push(...mu(e.slice(x,y),c,r,p,o,g===u-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let g=1;g<f.length-1;g++)f[g]=" "+f[g]+h;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(a?"":m),f}function Ca(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Za{constructor(t,r,s){if(this.dtype=r,this.shape=t.slice(),this.size=ne(t),s!=null){const o=s.length;k(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Dh(r,this.size),this.strides=Kt(t)}set(t,...r){r.length===0&&(r=[0]),k(r.length===this.rank,()=>`The number of provided coordinates (${r.length}) must match the rank (${this.rank})`);const s=this.locToIndex(r);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let r=0;for(const o of t){if(o<0||o>=this.shape[r]){const a=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(a)}r++}let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=this.strides[o]*t[o];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=this.strides[s]*t[s];return r}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const r=new Array(this.shape.length);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/this.strides[s]),t-=r[s]*this.strides[s];return r[r.length-1]=t,r}get rank(){return this.shape.length}toTensor(){return jn().makeTensor(this.values,this.shape,this.dtype)}}let jn=null,qs=null;function WE(e){jn=e}function GE(e){qs=e}class P{constructor(t,r,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=ne(t),this.strides=Kt(t),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return qs.buffer(this.shape,this.dtype,t)}bufferSync(){return qs.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Nd(this.shape,t)}arraySync(){return Nd(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=jn().read(this.dataId);if(this.dtype==="string"){const r=await t;try{return r.map(s=>Qa(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=jn().readSync(this.dataId);if(this.dtype==="string")try{return t.map(r=>Qa(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await jn().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(jn().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return qs.print(this,t)}clone(){return this.throwIfDisposed(),qs.clone(this)}toString(t=!1){const r=this.dataSync();return VE(r,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),qs.cast(this,t)}variable(t=!0,r,s){return this.throwIfDisposed(),jn().makeVariable(this,t,r,s)}}Object.defineProperty(P,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});class Od extends P{constructor(t,r,s,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=r,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!_t(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);jn().disposeTensor(this),this.dataId=t.dataId,jn().incRef(this,null)}dispose(){jn().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Od,Symbol.hasInstance,{value:e=>e instanceof P&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var my;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(my||(my={}));var Fd;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Fd||(Fd={}));var Bd;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Bd||(Bd={}));var Ld;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Ld||(Ld={}));var zd;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(zd||(zd={}));const jE={float32:Ld,int32:Fd,bool:Bd,complex64:zd};function Xn(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return jE[e][t]}function v0(e){return Xn(e,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xe(e,t){if(e.dtype===t.dtype)return[e,t];const r=Xn(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function Ew(e){const t=[];return Nw(e,t,new Set),t}function Nw(e,t,r){if(e==null)return;if(e instanceof P){t.push(e);return}if(!HE(e))return;const s=e;for(const o in s){const a=s[o];r.has(a)||(r.add(a),Nw(a,t,r))}}function HE(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gy{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Ro{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new gy}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let r=0;r<t.length;r++){const s=t[r];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:r}=this.initializeBackend(t);if(r)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,r,s=1){return t in this.registryFactory?(console.warn(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:r,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:r,asyncInit:s}=this.initializeBackend(t);if(!(s?await r:r))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new FE(this.backendInstance),!0}setupRegisteredKernels(){fy(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){fy(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const r=this.registryFactory[t];if(r==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=r.factory();if(s&&!(s instanceof yC)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,a=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[t]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return console.warn(`Initialization of backend ${t} failed`),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,r)=>this.registryFactory[r].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let r=0;r<t.length;r++){const s=t[r],{success:o,asyncInit:a}=this.initializeBackend(s);if(a||o)return{name:s,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,r){const s=this.state.tensorInfo.get(r),o=s.backend,a=this.readSync(r);o.disposeData(r),s.backend=t,t.move(r,a,s.shape,s.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,r){let s=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=r(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,r,s){t();try{const o=s();return r(),o}catch(o){throw r(),o}}nextTensorId(){return Ro.nextTensorId++}nextVariableId(){return Ro.nextVariableId++}clone(t){const r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),s={x:t},o=i=>({x:()=>{const u="float32",l={x:i},c={dtype:u};return R.runKernelFunc(p=>p.cast(i,u),l,null,Zl,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,s,[r],o,a,{}),r}runKernel(t,r,s,o,a){return this.runKernelFunc(null,r,null,t,s,o,a)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,r,s){const o=this.backend.numDataIds();let a=0;s.forEach(l=>{a+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=o-r-a-i;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${t}'`)}runKernelFunc(t,r,s,o,a,i,u){let l,c=[];const p=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");const d=this.state.numBytes,f=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let h;this.backendName==null&&this.backend;const m=_w(o,this.backendName);let g;if(m!=null)h=()=>{const y=this.backend.numDataIds();g=m.kernelFunc({inputs:r,attrs:a,backend:this.backend});const v=Array.isArray(g)?g:[g];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(o,y,v);const w=v.map($=>{if($.rank!=null)return $;const{dataId:b,shape:T,dtype:S}=$;return this.makeTensorFromDataId(b,T,S)});if(p){let $=this.getTensorsForGradient(o,r,w);if($==null){u==null&&(u=[]);const b=w.filter((T,S)=>u[S]);$=(i||[]).slice().concat(b)}c=this.saveTensorsForBackwardMode($)}return w};else{if(t==null)throw new Error(`Error running ${o}: Neither modular kernel nor forward func passed`);const y=v=>{!p||(c=v.map(w=>this.keep(this.clone(w))))};h=()=>{const v=this.backend.numDataIds();g=this.tidy(()=>t(this.backend,y));const w=Array.isArray(g)?g:[g];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(o,v,w),w}}let x;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?l=h():(x=this.profiler.profileKernel(o,r,()=>h()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(x),l=x.outputs)}),p&&this.addTapeNode(o,r,l,s,c,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(y=>r[y]!=null?r[y].shape:null),outputShapes:l.map(y=>y.shape),kernelTimeMs:x.timeMs,extraInfo:x.extraInfo}),Array.isArray(g)?l:l[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,r,s){const o=dy(t);if(o!=null){const a=o.inputsToSave||[],i=o.outputsToSave||[];let u;o.saveAllInputs?(k(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(c=>r[c])):u=a.map(c=>r[c]);const l=s.filter((c,p)=>i[p]);return u.concat(l)}return null}makeTensor(t,r,s,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let a=t;s==="string"&&Xl(t[0])&&(a=t.map(l=>ec(l)));const i=o.write(a,r,s),u=new P(r,s,i,this.nextTensorId());if(this.incRef(u,o),s==="string"){const l=this.state.tensorInfo.get(i),c=vE(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return u}makeTensorFromDataId(t,r,s,o){s=s||"float32";const a=new P(r,s,t,this.nextTensorId());return this.incRef(a,o),a}makeVariable(t,r=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const a=new Od(t,r,s,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}incRef(t,r){const s=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,s===0){this.state.numDataBuffers++;let o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*CC(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Od||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;const r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):(r.backend.decComplexRef(t.dataId),this.state.tensorInfo.get(t.dataId).refCount--)}disposeVariables(){for(const t in this.state.registeredVariables){const r=this.state.registeredVariables[t];this.disposeVariable(r)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const r=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,r,s,o,a,i){const u={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:s,saved:a},l=dy(t);l!=null&&(o=l.gradFunc),o!=null&&(u.gradient=c=>(c=c.map((p,d)=>{if(p==null){const f=s[d],h=Yr(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return p}),o(c.length>1?c:c[0],a,i))),this.state.activeTape.push(u)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(t){const r=Ew(t),s=new Set(r.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const i=this.state.activeScope.track[a];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(a=>{!a.kept&&a.scopeId===o.id&&this.track(a)})}gradients(t,r,s,o=!1){if(k(r.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));k(a instanceof P,()=>"The result y returned by f() must be a tensor.");const i=zE(this.state.activeTape,r,a);if(!o&&i.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const u={};u[a.id]=s==null?KE(a.shape):s,ME(u,i,c=>this.tidy(c),qE);const l=r.map(c=>u[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const p of c.saved)p.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(t){return k(cy(t),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{k(r.every(a=>a instanceof P),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};return r.forEach((a,i)=>{o[i]=a}),this.runKernelFunc((a,i)=>(s=t(...r,i),k(s.value instanceof P,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),k(cy(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),o,(a,i)=>{const u=s.gradFunc(a,i),l=Array.isArray(u)?u:[u];k(l.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),k(l.every(p=>p instanceof P),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const c={};return l.forEach((p,d)=>{c[d]=()=>p}),c})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const r=Er(),s=await this.backend.time(t);return s.wallMs=Er()-r,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new gy;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ro.nextTensorId=0;Ro.nextVariableId=0;function KE(e){const t=bC(ne(e),"float32");return R.makeTensor(t,e,"float32")}function Tw(){const e=kC();if(e._tfengine==null){const t=new bE(e);e._tfengine=new Ro(t)}return kE(e._tfengine.ENV),WE(()=>e._tfengine),e._tfengine}const R=Tw();function qE(e,t){const r={a:e,b:t};return R.runKernel(Ql,r)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(){return typeof navigator<"u"&&navigator!=null}function YE(){if(XE()){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Iw(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yn=K();Yn.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Yn.registerFlag("IS_BROWSER",()=>Iw());Yn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Yn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Yn.registerFlag("PROD",()=>!1);Yn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Yn.getBool("DEBUG"));Yn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Yn.registerFlag("IS_TEST",()=>!1);Yn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ui(e,t){let r=e;if(qn(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];const s=[];for(;Array.isArray(r)||qn(r)&&t!=="string";)s.push(r.length),r=r[0];return Array.isArray(e)&&K().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Dw(e,s,[]),s}function Dw(e,t,r){if(r=r||[],!Array.isArray(e)&&!qn(e)){k(t.length===0,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}k(t.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${e.length} elements`),k(e.length===t[0],()=>`Element arr[${r.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const s=t.slice(1);for(let o=0;o<e.length;++o)Dw(e[o],s,r.concat(o))}function yy(e,t,r,s){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${r}' passed to '${s}' must be ${e} tensor, but got ${t} tensor`)}}function _(e,t,r,s="numeric"){if(e instanceof P)return yy(s,e.dtype,t,r),e;let o=Yl(e);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),yy(s,o,t,r),e==null||!qn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${r}' must be a Tensor or TensorLike, but got '${l}'`)}const a=ui(e,o);!qn(e)&&!Array.isArray(e)&&(e=[e]);const u=o!=="string"?x0(e,o):Ao(e,[],!0);return R.makeTensor(u,a,o)}function Aw(e,t,r,s="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${r} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((a,i)=>_(a,`${t}[${i}]`,r,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QE="__op";function I(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let r=t[0];const s=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1)),r=r+QE;const o=(...a)=>{R.startScope(r);try{const i=s(...a);return Ya(i)&&console.error("Cannot return a Promise inside of tidy."),R.endScope(i),i}catch(i){throw R.endScope(null),i}};return Object.defineProperty(o,"name",{value:r,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZE(e,t){const r=_(e,"real","complex"),s=_(t,"imag","complex");Fe(r.shape,s.shape,`real and imag shapes, ${r.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:r,imag:s};return R.runKernel(RC,o)}const Ss=I({complex_:ZE});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function li(e,t,r,s){if(s==null&&(s=Yl(e)),s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!qn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){$C(t);const o=ne(t),a=ne(r);k(o===a,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${a}`);for(let i=0;i<r.length;++i){const u=r[i],l=i===r.length-1?u!==ne(t.slice(i)):!0;k(r[i]===t[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${r}) does not match the provided shape (${t}). `)}}return!qn(e)&&!Array.isArray(e)&&(e=[e]),t=t||r,e=s!=="string"?x0(e,s):Ao(e,[],!0),R.makeTensor(e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hs(e,t,r){const s=ui(e,r);return li(e,t,s,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xy={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vy=4;function JE(e,t){const r={};let s,o=0;for(const a of t){const i=a.name,u=a.dtype,l=a.shape,c=ne(l);let p;if("quantization"in a){const d=a.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${a.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(u!=="float32")throw new Error(`Weight ${a.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${u}.`)}else throw new Error(`Weight ${a.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const f=xy[d.dtype],h=e.slice(o,o+c*f),m=d.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(u==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){p=new Float32Array(m.length);for(let g=0;g<m.length;g++){const x=m[g];p[g]=x*d.scale+d.min}}else if(d.dtype==="float16")s===void 0&&(s=aN()),p=s(m);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(u==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);p=new Int32Array(m.length);for(let g=0;g<m.length;g++){const x=m[g];p[g]=Math.round(x*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${i}': ${u}`);o+=c*f}else if(u==="string"){const d=ne(a.shape);p=[];for(let f=0;f<d;f++){const h=new Uint32Array(e.slice(o,o+vy))[0];o+=vy;const m=new Uint8Array(e.slice(o,o+h));p.push(m),o+=h}}else{const d=xy[u],f=e.slice(o,o+c*d);if(u==="float32")p=new Float32Array(f);else if(u==="int32")p=new Int32Array(f);else if(u==="bool")p=new Uint8Array(f);else if(u==="complex64"){p=new Float32Array(f);const h=new Float32Array(p.length/2),m=new Float32Array(p.length/2);for(let y=0;y<h.length;y++)h[y]=p[y*2],m[y]=p[y*2+1];const g=hs(h,l,"float32"),x=hs(m,l,"float32");r[i]=Ss(g,x),g.dispose(),x.dispose()}else throw new Error(`Unsupported dtype in weight '${i}': ${u}`);o+=c*d}u!=="complex64"&&(r[i]=hs(p,l,u))}return r}const C0=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Cy(e){return C0?Buffer.byteLength(e):new Blob([e]).size}function eN(e){if(C0)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let r="";for(let s=0,o=t.length;s<o;s++)r+=String.fromCharCode(t[s]);return btoa(r)}function tN(e){if(C0){const s=Buffer.from(e,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(e),r=new Uint8Array(t.length);for(let s=0;s<t.length;++s)r.set([t.charCodeAt(s)],s);return r.buffer}function nN(e){if(e.length===1)return e[0];let t=0;e.forEach(o=>{t+=o.byteLength});const r=new Uint8Array(t);let s=0;return e.forEach(o=>{r.set(new Uint8Array(o),s),s+=o.byteLength}),r.buffer}function tc(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:Cy(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:Cy(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}function rN(){const e=r=>{let s=r<<13,o=0;for(;(s&8388608)===0;)o-=8388608,s<<=1;return s&=-8388609,o+=947912704,s|o},t=new Uint32Array(2048);t[0]=0;for(let r=1;r<1024;r++)t[r]=e(r);for(let r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}function sN(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function oN(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function aN(){const e=rN(),t=sN(),r=oN();return s=>{const o=new ArrayBuffer(4*s.length),a=new Uint32Array(o);for(let i=0;i<s.length;i++){const u=s[i],l=e[r[u>>10]+(u&1023)]+t[u>>10];a[i]=l}return new Float32Array(o)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Je{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Je.instance==null&&(Je.instance=new Je),Je.instance}static registerSaveRouter(t){Je.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Je.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Je.getHandlers(t,"save")}static getLoadHandlers(t,r){return Je.getHandlers(t,"load",r)}static getHandlers(t,r,s){const o=[];return(r==="load"?Je.getInstance().loadRouters:Je.getInstance().saveRouters).forEach(i=>{const u=i(t,s);u!==null&&o.push(u)}),o}}const iN=e=>Je.getSaveHandlers(e),uN=(e,t)=>Je.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Md="tensorflowjs",Vd=1,ps="models_store",Rr="model_info_store";function Rw(){if(!K().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Ud(e){const t=e.result;t.createObjectStore(ps,{keyPath:"modelPath"}),t.createObjectStore(Rr,{keyPath:"modelPath"})}class ks{constructor(t){if(this.indexedDB=Rw(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,r){return new Promise((s,o)=>{const a=this.indexedDB.open(Md,Vd);a.onupgradeneeded=()=>Ud(a),a.onsuccess=()=>{const i=a.result;if(r==null){const u=i.transaction(ps,"readonly"),c=u.objectStore(ps).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(c.result.modelArtifacts)},c.onerror=p=>(i.close(),o(c.error)),u.oncomplete=()=>i.close()}else{const u=tc(r),l=i.transaction(Rr,"readwrite");let c=l.objectStore(Rr);const p=c.put({modelPath:this.modelPath,modelArtifactsInfo:u});let d;p.onsuccess=()=>{d=i.transaction(ps,"readwrite");const h=d.objectStore(ps).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u});h.onsuccess=()=>s({modelArtifactsInfo:u}),h.onerror=m=>{c=l.objectStore(Rr);const g=c.delete(this.modelPath);g.onsuccess=()=>(i.close(),o(h.error)),g.onerror=x=>(i.close(),o(h.error))}},p.onerror=f=>(i.close(),o(p.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},a.onerror=i=>o(a.error)})}}ks.URL_SCHEME="indexeddb://";const Pw=e=>K().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ks.URL_SCHEME)?lN(e.slice(ks.URL_SCHEME.length)):null;Je.registerSaveRouter(Pw);Je.registerLoadRouter(Pw);function lN(e){return new ks(e)}function cN(e){return e.startsWith(ks.URL_SCHEME)?e.slice(ks.URL_SCHEME.length):e}class pN{constructor(){this.indexedDB=Rw()}async listModels(){return new Promise((t,r)=>{const s=this.indexedDB.open(Md,Vd);s.onupgradeneeded=()=>Ud(s),s.onsuccess=()=>{const o=s.result,a=o.transaction(Rr,"readonly"),u=a.objectStore(Rr).getAll();u.onsuccess=()=>{const l={};for(const c of u.result)l[c.modelPath]=c.modelArtifactsInfo;t(l)},u.onerror=l=>(o.close(),r(u.error)),a.oncomplete=()=>o.close()},s.onerror=o=>r(s.error)})}async removeModel(t){return t=cN(t),new Promise((r,s)=>{const o=this.indexedDB.open(Md,Vd);o.onupgradeneeded=()=>Ud(o),o.onsuccess=()=>{const a=o.result,i=a.transaction(Rr,"readwrite"),u=i.objectStore(Rr),l=u.get(t);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const p=u.delete(t),d=()=>{c=a.transaction(ps,"readwrite");const h=c.objectStore(ps).delete(t);h.onsuccess=()=>r(l.result.modelArtifactsInfo),h.onerror=m=>s(l.error)};p.onsuccess=d,p.onerror=f=>(d(),a.close(),s(l.error))}},l.onerror=p=>(a.close(),s(l.error)),i.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},o.onerror=a=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rr="/",Xs="tensorflowjs_models",Ow="info",dN="model_topology",fN="weight_specs",hN="weight_data",mN="model_metadata";function Fw(e){return{info:[Xs,e,Ow].join(rr),topology:[Xs,e,dN].join(rr),weightSpecs:[Xs,e,fN].join(rr),weightData:[Xs,e,hN].join(rr),modelMetadata:[Xs,e,mN].join(rr)}}function gN(e){const t=e.split(rr);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(rr)}function yN(e){return e.startsWith(Es.URL_SCHEME)?e.slice(Es.URL_SCHEME.length):e}class Es{constructor(t){if(!K().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Fw(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),o=tc(t);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,eN(t.weightData));const a={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};return t.signature!=null&&(a.signature=t.signature),t.userDefinedMetadata!=null&&(a.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(a.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:o}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const r={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=o;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const u=JSON.parse(a);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=tN(i),r}}Es.URL_SCHEME="localstorage://";const Bw=e=>K().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Es.URL_SCHEME)?xN(e.slice(Es.URL_SCHEME.length)):null;Je.registerSaveRouter(Bw);Je.registerLoadRouter(Bw);function xN(e){return new Es(e)}class vN{constructor(){k(K().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),k(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},r=Xs+rr,s=rr+Ow;for(let o=0;o<this.LS.length;++o){const a=this.LS.key(o);if(a.startsWith(r)&&a.endsWith(s)){const i=gN(a);t[i]=JSON.parse(this.LS.getItem(a))}}return t}async removeModel(t){t=yN(t);const r=Fw(t);if(this.LS.getItem(r.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(r.info));return this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy="://";class Ir{constructor(){this.managers={}}static getInstance(){return Ir.instance==null&&(Ir.instance=new Ir),Ir.instance}static registerManager(t,r){k(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(wy)&&(t=t.slice(0,t.indexOf(wy))),k(t.length>0,()=>"scheme must not be an empty string.");const s=Ir.getInstance();k(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=r}static getManager(t){const r=this.getInstance().managers[t];if(r==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return r}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CN{fetch(t,r){return fetch(t,r)}now(){return performance.now()}encode(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,r){return new TextDecoder(r).decode(t)}}if(K().get("IS_BROWSER")){K().setPlatform("browser",new CN);try{Ir.registerManager(Es.URL_SCHEME,new vN)}catch{}try{Ir.registerManager(ks.URL_SCHEME,new pN)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wN={importFetch:()=>require("node-fetch")};let fp;class bN{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,r){return K().global.fetch!=null?K().global.fetch(t,r):(fp==null&&(fp=wN.importFetch()),fp(t,r))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${r}`);return this.textEncoder.encode(t)}decode(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)}}K().get("IS_NODE")&&K().setPlatform("node",new bN);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(e,t="float32",r){return t=t||"float32",$C(e),new Za(e,t,r)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(e,t){const r=_(e,"x","cast");if(!xE(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:r},o={dtype:t};return R.runKernel(Zl,s,o)}const ie=I({cast_:$N});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _N(e){const r={x:_(e,"x","clone","string_or_numeric")};return R.runKernel(gm,r)}const ms=I({clone_:_N});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SN(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tw();const kN={buffer:St,cast:ie,clone:ms,print:SN};GE(kN);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EN="model",NN=".json",TN=".weights.bin";function by(e){return new Promise(t=>setTimeout(t)).then(e)}class Ns{constructor(t){if(!K().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Ns.URL_SCHEME)&&(t=t.slice(Ns.URL_SCHEME.length)),(t==null||t.length===0)&&(t=EN),this.modelTopologyFileName=t+NN,this.weightDataFileName=t+TN}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:s};t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer);const a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor;if(i.download=this.modelTopologyFileName,i.href=a,await by(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await by(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:tc(t)}}}}Ns.URL_SCHEME="downloads://";const IN=e=>K().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ns.URL_SCHEME)?DN(e.slice(Ns.URL_SCHEME.length)):null;Je.registerSaveRouter(IN);function DN(e="model"){return new Ns(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $y(e,t,r,s){i(e),r=r==null?0:r,s=s==null?1:s,u(r,s);let o=0;const a=l=>(l.then(c=>{const p=r+ ++o/e.length*(s-r);return t(p),c}),l);function i(l){k(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function u(l,c){k(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),k(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),k(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(e.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function AN(e,t){t==null&&(t={});const r=t.fetchFunc==null?K().platform.fetch:t.fetchFunc,s=e.map(d=>r(d,t.requestInit,{isBinary:!0})),o=0,a=.5,u=(t.onProgress==null?await Promise.all(s):await $y(s,t.onProgress,o,a)).map(d=>d.arrayBuffer()),l=.5,c=1;return t.onProgress==null?await Promise.all(u):await $y(u,t.onProgress,l,c)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RN="application/octet-stream",PN="application/json";class w0{constructor(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(k(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=K().platform.fetch,k(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&k(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:s};t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),r.body.append("model.json",new Blob([JSON.stringify(o)],{type:PN}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:RN}),"model.weights.bin");const a=await this.fetch(this.path,r);if(a.ok)return{modelArtifactsInfo:tc(t),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=await t.json()}catch{let g=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?g+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":g+=" Please make sure the server is serving valid JSON for this request.",new Error(g)}const s=r.modelTopology,o=r.weightsManifest,a=r.generatedBy,i=r.convertedBy,u=r.format,l=r.signature,c=r.userDefinedMetadata;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let p,d;o!=null&&([p,d]=await this.loadWeights(o));const f={modelTopology:s,weightSpecs:p,weightData:d,generatedBy:a,convertedBy:i,format:u};l!=null&&(f.signature=l),c!=null&&(f.userDefinedMetadata=c);const h=r.modelInitializer;return h&&(f.modelInitializer=h),f}async loadWeights(t){const r=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=ON(r),a=this.weightPathPrefix||s,i=[];for(const p of t)i.push(...p.weights);const u=[],l=[];for(const p of t)for(const d of p.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):u.push(a+d+o);this.weightUrlConverter&&u.push(...await Promise.all(l));const c=await AN(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,nN(c)]}}w0.URL_SCHEME_REGEX=/^https?:\/\//;function ON(e){const t=e.lastIndexOf("/"),r=e.lastIndexOf("?"),s=e.substring(0,t),o=r>t?e.substring(r):"";return[s+"/",o]}function _y(e){return e.match(w0.URL_SCHEME_REGEX)!=null}const Lw=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let r=!0;if(Array.isArray(e)?r=e.every(s=>_y(s)):r=_y(e),r)return zw(e,t)}return null};Je.registerSaveRouter(Lw);Je.registerLoadRouter(Lw);function zw(e,t){return new w0(e,t)}function Sy(e,t){return zw(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FN(e,t,r=!1,s=!1){let o=_(e,"a","matMul"),a=_(t,"b","matMul");[o,a]=Xe(o,a);const i={a:o,b:a},u={transposeA:r,transposeB:s};return R.runKernel(jh,i,u)}const Ie=I({matMul_:FN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BN(e,t,r=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:_(e,"indices","oneHot","int32")},i={depth:t,onValue:r,offValue:s};return R.runKernel(Fm,a,i)}const Mw=I({oneHot_:BN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LN(e,t){const r=_(e,"x","transpose");if(t==null&&(t=r.shape.map((a,i)=>i).reverse()),k(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(a=>{k(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:t};return R.runKernel(f0,s,o)}const Qr=I({transpose_:LN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zN(e,t,r){if(Ih(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const s=ui(e,r);if(s.length!==3&&s.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return li(e,t,s,r)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Hs;function MN(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let r=!1,s=!1,o=!1,a=!1,i=!1,u=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)s=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else if(e.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)u=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(_w(Id,R.backendName)!=null){const m={pixels:e},g={numChannels:t};return R.runKernel(Id,m,g)}const[c,p]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height];let d;i?d=e.getContext("2d").getImageData(0,0,c,p).data:s||r?d=e.data:(a||o||u)&&(Hs==null&&(Hs=document.createElement("canvas").getContext("2d")),Hs.canvas.width=c,Hs.canvas.height=p,Hs.drawImage(e,0,0,c,p),d=Hs.getImageData(0,0,c,p).data);let f;if(t===4)f=new Int32Array(d);else{const m=c*p;f=new Int32Array(m*t);for(let g=0;g<m;g++)for(let x=0;x<t;++x)f[g*t+x]=d[g*4+x]}return zN(f,[p,c,t],"int32")}const Vw=I({fromPixels_:MN});function Uw(e,t){const r=e.shape.length,s=t.shape.length;if(r<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${r}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>r)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${r}`);if(ne(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,a=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const u=e.shape,l=o.slice();l.pop();let c=1;for(let d=a;d<r;++d)c*=u[d],l.push(u[d]);const p=[...Kt(e.shape).map(d=>d/c),1].slice(0,a);return[l,i,c,p]}function Ww(e,t,r){const s=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${r.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${s}, and batchDim: ${o}.`;if(r.rank<o)throw new Error(a+` update.rank < ${o}. `);if(e.length<s+(r.rank-o))throw new Error(a+` Output shape length < ${s+(r.rank-o)}`);if(r.rank!==o+e.length-s)throw new Error(a+` update.rank != ${o+e.length-s}`);for(let i=0;i<o;++i)if(r.shape[i]!==t.shape[i])throw new Error(a+` updates.shape[${i}] (${r.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<r.rank-o;++i)if(r.shape[i+o]!==e[i+s])throw new Error(a+` updates.shape[${i+o}] (${r.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}function Gw(e,t,r){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(r.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${r}`);if(r.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}Ww(r,t,e)}function b0(e,t,r){const s=t.shape.length,o=s>1?t.shape[s-1]:1,a=r.length;let i=1;for(let d=o;d<a;++d)i*=r[d];const u=o<1?1:o,l=ne(t.shape)/u,c=[...Kt(r.slice(0,o)),1],p=ne(r);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:c,outputSize:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jw(e,t,r){const s=e.shape.length;k(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),k(s===r.length,()=>`Error in slice${s}D: Length of size ${r} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)k(t[o]+r[o]<=e.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${t[o]+r[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function gu(e){const t=[];let r=0;for(;e>0;)e&1&&t.push(r),e/=2,r++;return t}function Hw(e,t,r){const s=[];for(let o=0;o<e.length;o++)s[o]=Math.ceil((t[o]-e[o])/r[o]);return s}function Kw(e,t,r,s){const o=[...e];for(let a=o.length;a<s.length;a++)o.push(1);for(let a=0;a<r;a++)a===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function qw(e,t,r){return r<=e?r:r-(t-1)}function Xw(e,t){const r=[];for(let s=0;s<e;s++)r.push(t+s);return r}function Yw(e,t,r,s,o,a,i,u,l){const c=e.length;let p=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&r>0){const h=t[0],m=r+1;p=Qw(i,h,m,s,e),d=Zw(u,h,m,o,e),f=Kw(a,h,m,e)}else for(let h=0;h<c;h++)p[h]=eb(i,s,a,e,h,l),d[h]=tb(u,o,a,e,h,l),f[h]=Jw(a,h,l);return{begin:p,end:d,strides:f}}function Qw(e,t,r,s,o){const a=[...o],i=Xw(r,t);for(let u=0;u<a.length;u++)if(i.indexOf(u)>-1)a[u]=0;else{const l=qw(t,r,u);let c=s[l];e&1<<l&&(c=0),a[u]=c}return a}function Zw(e,t,r,s,o){const a=[...o],i=Xw(r,t);for(let u=0;u<a.length;u++)if(i.indexOf(u)>-1)a[u]=Number.MAX_SAFE_INTEGER;else{const l=qw(t,r,u);let c=s[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[u]=c}for(let u=0;u<a.length;u++){const l=o[u];a[u]<0&&(a[u]+=l),a[u]=Yu(0,a[u],o[u])}return a}function Jw(e,t,r){let s=e[t];return(r&1<<t||s==null)&&(s=1),s}function eb(e,t,r,s,o,a){let i=t[o];const u=r[o]||1;(e&1<<o||a&1<<o||i==null)&&(u>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),i=Yu(0,i,l-1),i}function tb(e,t,r,s,o,a){let i=t[o];const u=r[o]||1;(e&1<<o||a&1<<o||i==null)&&(u>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),u>0?i=Yu(0,i,l):i=Yu(-1,i,l-1),i}function $0(e,t,r){let s=r.length;for(let o=0;o<r.length;o++)if(r[o]>1){s=o;break}for(let o=s+1;o<r.length;o++)if(t[o]>0||r[o]!==e[o])return!1;return!0}function _0(e,t){let r=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)r+=e[s]*t[s];return r}function S0(e,t,r){let s;const o=e.shape.length;typeof t=="number"?s=[t,...new Array(o-1).fill(0)]:t.length<o?s=t.concat(new Array(o-t.length).fill(0)):s=t.slice(),s.forEach(i=>{k(i!==-1,()=>"slice() does not support negative begin indexing.")});let a;return r==null?a=new Array(o).fill(-1):typeof r=="number"?a=[r,...new Array(o-1).fill(-1)]:r.length<o?a=r.concat(new Array(o-r.length).fill(-1)):a=r,a=a.map((i,u)=>i>=0?i:(k(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${u}.`),e.shape[u]-s[u])),[s,a]}function nb(e,t,r,s,o,a,i,u,l){let c=t.slice(),p=r.slice(),d=s;s==null&&(d=new Array(c.length));const f=gu(i);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(i!==0&&u!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(i!==0&&l!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const h=e.length-c.length,m=gu(u),g=e.slice();m.forEach(S=>{c[S]=0,p[S]=1,g.splice(S,0,1)});const{begin:x,end:y,strides:v}=Yw(g,f,h,c,p,d,o,a,i);c=x,p=y,d=v;const w=gu(l);w.forEach(S=>{p[S]=c[S]+1,d[S]=1});const $=Hw(c,p,d),b=$.filter((S,D)=>w.indexOf(D)===-1);return{nonStrided:d.every(S=>S===1),$begin:c,$end:p,$strides:d,size:$,newShape:g,outShape:b}}const VN=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:jw,maskToAxes:gu,computeOutShape:Hw,stridesWithElidedDims:Kw,getNormalizedAxes:Yw,startIndicesWithElidedDims:Qw,stopIndicesWithElidedDims:Zw,stridesForAxis:Jw,startForAxis:eb,stopForAxis:tb,isSliceContinous:$0,computeFlatOffset:_0,parseSliceParams:S0,sliceInfo:nb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(e){K().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ji(){return R}function Se(e,t){return R.tidy(e,t)}function UN(e){Ew(e).forEach(r=>r.dispose())}function Pr(e){return R.keep(e)}function WN(){return R.backendName}function GN(e,t,r=1){return R.registerBackend(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jN(e,t){let r=_(e,"a","add"),s=_(t,"b","add");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(Ql,o)}const Ue=I({add_:jN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HN(e,t){let r=_(e,"a","floorDiv"),s=_(t,"b","floorDiv");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(dm,o)}const k0=I({floorDiv_:HN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KN(e,t){let r=_(e,"a","div"),s=_(t,"b","div");if([r,s]=Xe(r,s),r.dtype==="int32"&&s.dtype==="int32")return k0(r,s);const o={a:r,b:s},a={};return R.runKernel(om,o,a)}const Ce=I({div_:KN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qN(e,t){let r=_(e,"a","mul"),s=_(t,"b","mul");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(Rm,o)}const q=I({mul_:qN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XN(e){const t=_(e,"x","abs");if(t.dtype==="complex64"){const r={x:t};return R.runKernel(Xh,r)}else{const r={x:t};return R.runKernel(Ah,r)}}const en=I({abs_:XN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YN(e){const r={x:_(e,"x","acos")};return R.runKernel(Rh,r)}const rb=I({acos_:YN});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QN(e){const r={x:_(e,"x","acosh")};return R.runKernel(Ph,r)}const sb=I({acosh_:QN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZN(e){k(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),k(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((o,a)=>_(o,`tensors${a}`,"addN")),r=t[0];t.forEach(o=>{if(o.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!_t(o.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const s=t;return R.runKernel(Oh,s)}const JN=I({addN_:ZN});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(e,t=null,r=!1){const o={x:_(e,"x","all","bool")},a={axis:t,keepDims:r};return R.runKernel(NC,o,a)}const ob=I({all_:eT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tT(e,t=null,r=!1){const o={x:_(e,"x","any","bool")},a={axis:t,keepDims:r};return R.runKernel(TC,o,a)}const ab=I({any_:tT});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(e,t=0){const s={x:_(e,"x","argMax")},o={axis:t};return R.runKernel(Fh,s,o)}const ib=I({argMax_:nT});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rT(e,t=0){const s={x:_(e,"x","argMin")},o={axis:t};return R.runKernel(Bh,s,o)}const ub=I({argMin_:rT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(e){const r={x:_(e,"x","asin")};return R.runKernel(Lh,r)}const lb=I({asin_:sT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oT(e){const r={x:_(e,"x","asinh")};return R.runKernel(zh,r)}const cb=I({asinh_:oT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(e){const r={x:_(e,"x","atan")};return R.runKernel(Mh,r)}const pb=I({atan_:aT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iT(e,t){let r=_(e,"a","atan2"),s=_(t,"b","atan2");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(Uh,o)}const db=I({atan2_:iT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT(e){const r={x:_(e,"x","atanh")};return R.runKernel(Vh,r)}const fb=I({atanh_:uT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hb(e,t,r,s,o="NHWC",a){const i=e[3],u=[...t,i],l=jo(o);return ln(e,u,r,a,s,null,null,l)}function Fs(e,t,r,s,o,a,i="channelsLast"){const[u,l]=Zu(t);let c;if(i==="channelsLast")c=[u,l,e[3],e[3]];else if(i==="channelsFirst")c=[u,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return ln(e,c,r,s,o,a,!1,i)}function ci(e,t,r,s,o,a,i="NDHWC"){const[u,l,c]=Wd(t);let p,d;if(i==="NDHWC")d="channelsLast",p=[u,l,c,e[4],e[4]];else if(i==="NCDHW")d="channelsFirst",p=[u,l,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return pi(e,p,r,s,o,!1,d,a)}function ln(e,t,r,s,o,a,i=!1,u="channelsLast"){let[l,c,p,d]=[-1,-1,-1,-1];if(u==="channelsLast")[l,c,p,d]=e;else if(u==="channelsFirst")[l,d,c,p]=e;else throw new Error(`Unknown dataFormat ${u}`);const[f,h,,m]=t,[g,x]=Zu(r),[y,v]=Zu(s),w=xo(f,y),$=xo(h,v),{padInfo:b,outHeight:T,outWidth:S}=pT(o,c,p,g,x,w,$,a,u),D=i?m*d:m;let z;return u==="channelsFirst"?z=[l,D,T,S]:u==="channelsLast"&&(z=[l,T,S,D]),{batchSize:l,dataFormat:u,inHeight:c,inWidth:p,inChannels:d,outHeight:T,outWidth:S,outChannels:D,padInfo:b,strideHeight:g,strideWidth:x,filterHeight:f,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:$,dilationHeight:y,dilationWidth:v,inShape:e,outShape:z,filterShape:t}}function pi(e,t,r,s,o,a=!1,i="channelsLast",u){let[l,c,p,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,p,d,f]=e;else if(i==="channelsFirst")[l,f,c,p,d]=e;else throw new Error(`Unknown dataFormat ${i}`);const[h,m,g,,x]=t,[y,v,w]=Wd(r),[$,b,T]=Wd(s),S=xo(h,$),D=xo(m,b),z=xo(g,T),{padInfo:E,outDepth:A,outHeight:O,outWidth:V}=dT(o,c,p,d,y,v,w,S,D,z,u),B=a?x*f:x;let W;return i==="channelsFirst"?W=[l,B,A,O,V]:i==="channelsLast"&&(W=[l,A,O,V,B]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:p,inWidth:d,inChannels:f,outDepth:A,outHeight:O,outWidth:V,outChannels:B,padInfo:E,strideDepth:y,strideHeight:v,strideWidth:w,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:D,effectiveFilterWidth:z,dilationDepth:$,dilationHeight:b,dilationWidth:T,inShape:e,outShape:W,filterShape:t}}function lT(e,t,r,s,o){s==null&&(s=E0(e,t,r));const a=e[0],i=e[1],u=gs((a-t+2*s)/r+1,o),l=gs((i-t+2*s)/r+1,o);return[u,l]}function cT(e,t,r,s,o,a){o==null&&(o=E0(e,t,s));const i=e[0],u=e[1],l=e[2],c=gs((i-t+2*o)/s+1,a),p=gs((u-t+2*o)/s+1,a),d=gs((l-t+2*o)/s+1,a);return[c,p,d,r]}function E0(e,t,r,s=1){const o=xo(t,s);return Math.floor((e[0]*(r-1)-r+o)/2)}function Zu(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Wd(e){return typeof e=="number"?[e,e,e]:e}function xo(e,t){return t<=1?e:e+(e-1)*(t-1)}function pT(e,t,r,s,o,a,i,u,l){let c,p,d;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=lT([t,r],a,s,e,u);p=h[0],d=h[1]}else if(e==="same"){p=Math.ceil(t/s),d=Math.ceil(r/o);const f=Math.max(0,(p-1)*s+a-t),h=Math.max(0,(d-1)*o+i-r),m=Math.floor(f/2),g=f-m,x=Math.floor(h/2),y=h-x;c={top:m,bottom:g,left:x,right:y,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((t-a+1)/s),d=Math.ceil((r-i+1)/o);else if(typeof e=="object"){const f=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],m=l==="channelsLast"?e[2][0]:e[3][0],g=l==="channelsLast"?e[2][1]:e[3][1];c={top:f,bottom:h,left:m,right:g,type:f===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},p=gs((t-a+f+h)/s+1,u),d=gs((r-i+m+g)/o+1,u)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:p,outWidth:d}}function dT(e,t,r,s,o,a,i,u,l,c,p){let d,f,h,m;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const x=cT([t,r,s,1],u,1,o,e,p);f=x[0],h=x[1],m=x[2]}else if(e==="same"){f=Math.ceil(t/o),h=Math.ceil(r/a),m=Math.ceil(s/i);const g=(f-1)*o+u-t,x=(h-1)*a+l-r,y=(m-1)*i+c-s,v=Math.floor(g/2),w=g-v,$=Math.floor(x/2),b=x-$,T=Math.floor(y/2),S=y-T;d={top:$,bottom:b,left:T,right:S,front:v,back:w,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-u+1)/o),h=Math.ceil((r-l+1)/a),m=Math.ceil((s-c+1)/i);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:m}}function gs(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Zr(e){const[t,r,s]=Zu(e);return t===1&&r===1&&s===1}function lt(e,t){return Zr(e)||Zr(t)}function jo(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fT(e,t){const s={x:_(e,"x","reshape","string_or_numeric")},o={shape:t};return R.runKernel(Wm,s,o)}const F=I({reshape_:fT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hT(e,t,r,s,o){const a=_(e,"x","avgPool","float32"),i=1;k(lt(r,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`);let u=a,l=!1;a.rank===3&&(l=!0,u=F(a,[1,a.shape[0],a.shape[1],a.shape[2]])),k(u.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${u.rank}.`),o!=null&&k(ut(s),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const c={x:u},p={filterSize:t,strides:r,pad:s,dimRoundingMode:o};let d=R.runKernel(Wh,c,p);return d=ie(d,a.dtype),l?F(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const N0=I({avgPool_:hT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mT(e,t,r,s,o,a="NDHWC",i){i==null?i=[1,1,1]:gt("dilations is deprecated, this field will be gone in v3.0.0.");const u=_(e,"x","avgPool3d","float32");let l=u,c=!1;u.rank===4&&(c=!0,l=F(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),k(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),k(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),k(lt(r,i),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),o!=null&&k(ut(s),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const p={x:l},d={filterSize:t,strides:r,pad:s,dimRoundingMode:o,dataFormat:a,dilations:i};let f=R.runKernel(Gh,p,d);return f=ie(f,l.dtype),c?F(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const gT=I({avgPool3d_:mT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yT(e,t=0){k(e.length>=1,()=>"Pass at least one tensor to concat");const r=Aw(e,"tensors","concat","string_or_numeric");if(r[0].dtype==="complex64"&&r.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),r.length===1)return ms(r[0]);const s=r,o={axis:t};return R.runKernel(Yh,s,o)}const nt=I({concat_:yT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xT(e){const r={x:_(e,"x","sigmoid")};return R.runKernel(n0,r)}const di=I({sigmoid_:xT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vT(e,t,r){const s=_(e,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},a={begin:t,size:r};return R.runKernel(Zm,o,a)}const Ne=I({slice_:vT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CT(e){const r={x:_(e,"x","tanh")};return R.runKernel(d0,r)}const mb=I({tanh_:CT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wT(e,t,r){const s=_(e,"x","batchToSpaceND"),o=t.reduce((u,l)=>u*l);k(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),k(r.length===t.length,()=>`crops.length is ${r.length} but should be equal to blockShape.length  ${t.length}`),k(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const a={x:s},i={blockShape:t,crops:r};return R.runKernel(Hh,a,i)}const nc=I({batchToSpaceND_:wT});function bT(e){let t;return e.rank===0||e.rank===1?t=F(e,[1,1,1,e.size]):e.rank===2?t=F(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=F(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $T(e,t,r,s,o,a){a==null&&(a=.001);const i=_(e,"x","batchNorm"),u=_(t,"mean","batchNorm"),l=_(r,"variance","batchNorm");let c;o!=null&&(c=_(o,"scale","batchNorm"));let p;s!=null&&(p=_(s,"offset","batchNorm")),k(u.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k(p==null||u.rank===p.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k(c==null||u.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:bT(i),scale:c,offset:p,mean:u,variance:l},h={varianceEpsilon:a},m=R.runKernel(fm,f,h);return F(m,i.shape)}const Gd=I({batchNorm_:$T});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _T(e,t,r){const s=_(e,"x","bincount"),o=_(t,"weights","bincount");k(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),k(r>=0,()=>`size must be non-negative, but got ${r}.`),k(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const a={x:s,weights:o},i={size:r};return R.runKernel(AC,a,i)}const ST=I({bincount_:_T});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kT(e,t){let r=_(e,"broadcastTo","x");const s=r.shape;if(t.some(c=>!(c>0)||c%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<r.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${r.rank}.`);if(t.length>r.rank){const c=r.shape.slice();for(;c.length<t.length;)c.unshift(1);r=F(r,c)}const o=r.shape,a=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])a[c]=1;else if(r.shape[c]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(a.map((c,p)=>c>1?p:-1).filter(c=>c>=0).length===0)return ms(r);const u={x:r},l={reps:a};return R.runKernel(Jl,u,l)}const Ju=I({broadcastTo_:kT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(e){const r={x:_(e,"x","ceil")};return R.runKernel(Kh,r)}const gb=I({ceil_:ET});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NT(e,t,r){const s=_(e,"x","clipByValue");k(t<=r,()=>`Error in clip: min (${t}) must be less than or equal to max (${r}).`);const o={x:s},a={clipValueMin:t,clipValueMax:r};return R.runKernel(qh,o,a)}const yb=I({clipByValue_:NT});function TT(e,t){return nt(e,t)}const xb=I({concat2d_:TT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IT(e,t,r,s,o="NHWC",a=[1,1],i){const u=_(e,"x","conv2d"),l=_(t,"filter","conv2d");let c=u,p=!1;u.rank===3&&(p=!0,c=F(u,[1,u.shape[0],u.shape[1],u.shape[2]])),k(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),k(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),i!=null&&k(ut(s),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`);const d=o==="NHWC"?c.shape[3]:c.shape[1];k(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),k(lt(r,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`);const f={x:c,filter:l},h={strides:r,pad:s,dataFormat:o,dilations:a,dimRoundingMode:i},m=R.runKernel(Qh,f,h);return p?F(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Ho=I({conv2d_:IT});function DT(e,t,r,s,o="NWC",a=1,i){const u=_(e,"x","conv1d"),l=_(t,"filter","conv1d");let c=u,p=!1;u.rank===2&&(p=!0,c=F(u,[1,u.shape[0],u.shape[1]])),k(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),k(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),i!=null&&k(ut(s),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),k(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),k(lt(r,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${r} and dilation '${a}'`),k(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=F(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=F(c,[c.shape[0],1,c.shape[1],c.shape[2]]),x=Ho(f,d,[1,r],s,"NHWC",[1,a],i);return p?F(x,[x.shape[2],x.shape[3]]):F(x,[x.shape[0],x.shape[2],x.shape[3]])}const vb=I({conv1d_:DT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AT(e,t,r,s,o,a="NHWC",i){k(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let u=e,l=t,c=!1;t.rank===3&&(c=!0,l=F(t,[1,t.shape[0],t.shape[1],t.shape[2]]),u=[1,e[0],e[1],e[2]]),k(u.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${u.length}.`),k(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),k(r.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${r.rank}`);const p=a==="NHWC"?u[3]:u[1],d=a==="NHWC"?l.shape[3]:l.shape[1];k(p===r.shape[2],()=>`Error in conv2dDerInput: depth of input (${p}) must match input depth for filter ${r.shape[2]}.`),k(d===r.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${r.shape[3]}.`),i!=null&&k(ut(o),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${i} but got pad ${o}.`);const f={dy:l,filter:r},h={strides:s,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:u},m=R.runKernel(Zh,f,h);return c?F(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const T0=I({conv2DBackpropInput_:AT});function RT(e,t,r,s,o,a){const i=_(e,"x","conv2dTranspose"),u=_(t,"filter","conv2dTranspose");return T0(r,i,u,s,o,"NHWC",a)}const Cb=I({conv2dTranspose_:RT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PT(e,t,r,s,o="NDHWC",a=[1,1,1]){const i=_(e,"x","conv3d"),u=_(t,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=F(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),k(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),k(u.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${u.rank}.`),k(l.shape[4]===u.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${u.shape[3]}.`),k(lt(r,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`),k(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);const p={x:l,filter:u},d={strides:r,pad:s,dataFormat:o,dilations:a},f=R.runKernel(Jh,p,d);return c?F(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const OT=I({conv3d_:PT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FT(e,t,r,s,o){k(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,i=t,u=!1;t.rank===4&&(u=!0,i=F(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],c=i.shape[4];k(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),k(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),k(r.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${r.rank}`),k(l===r.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${r.shape[3]}.`),k(c===r.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${r.shape[4]}.`);const p={dy:i,filter:r},d={pad:o,strides:s,inputShape:a},f=R.runKernel(FC,p,d);return u?F(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const BT=I({conv3DBackpropInput_:FT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LT(e){const r={x:_(e,"x","cos")};return R.runKernel(em,r)}const rc=I({cos_:LT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zT(e){const r={x:_(e,"x","cosh")};return R.runKernel(tm,r)}const I0=I({cosh_:zT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MT(e,t=0,r=!1,s=!1){const a={x:_(e,"x","cumsum")},i={axis:t,exclusive:r,reverse:s};return R.runKernel(nm,a,i)}const D0=I({cumsum_:MT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VT(e,t,r,s=!1){const o=_(e,"x","denseBincount"),a=_(t,"weights","denseBincount");k(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),k(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),k(r>=0,()=>`size must be non-negative, but got ${r}.`),k(a.size===o.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${a.shape}.`);const i={x:o,weights:a},u={size:r,binaryOutput:s};return R.runKernel(LC,i,u)}const UT=I({denseBincount_:VT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WT(e,t,r="NHWC"){const s=_(e,"x","depthToSpace"),o=r==="NHWC"?s.shape[1]:s.shape[2],a=r==="NHWC"?s.shape[2]:s.shape[3],i=r==="NHWC"?s.shape[3]:s.shape[1];k(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${s.shape}`),k(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t} for depthToSpace with input shape
        ${s.shape}`),k(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${s.shape}`);const u={x:s},l={blockSize:t,dataFormat:r};return R.runKernel(zC,u,l)}const wb=I({depthToSpace_:WT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GT(e,t,r,s,o="NHWC",a=[1,1],i){const u=_(e,"x","depthwiseConv2d"),l=_(t,"filter","depthwiseConv2d");let c=u,p=!1;u.rank===3&&(p=!0,c=F(u,[1,u.shape[0],u.shape[1],u.shape[2]])),k(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),k(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),k(c.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),i!=null&&k(ut(s),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`);const d={x:c,filter:l},f={strides:r,pad:s,dataFormat:o,dilations:a,dimRoundingMode:i},h=R.runKernel(rm,d,f);return p?F(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const fi=I({depthwiseConv2d_:GT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(e,t,r,s,o=[1,1],a="NHWC"){const i=_(e,"x","dilation2d"),u=_(t,"filter","dilation2d");k(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),k(u.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${u.rank}.`),k(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=i,c=!1;i.rank===3&&(l=F(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0);const p={x:l,filter:u},d={strides:r,pad:s,dilations:o},f=R.runKernel(sm,p,d);return c?F(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const bb=I({dilation2d_:jT});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(e,t){const r=e.length,s=[];for(let o=0;o<r;o++){const a=r-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&i===1&&s.unshift(a)}return s}function st(e,t){const r=[];for(let s=0;s<t.length;s++){const o=e[e.length-s-1],a=t.length-s-1,i=t[a];(o==null||o===1&&i>1)&&r.unshift(a)}return r}function ve(e,t){const r=[],s=Math.max(e.length,t.length);for(let o=0;o<s;o++){let a=e[e.length-o-1];a==null&&(a=1);let i=t[t.length-o-1];if(i==null&&(i=1),a===1)r.unshift(i);else if(i===1)r.unshift(a);else if(a!==i){const u=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(u)}else r.unshift(a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(e,t){let r=_(e,"a","equal"),s=_(t,"b","equal");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(WC,o)}const hi=I({equal_:HT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KT(e,t,r){const s=_(t,"a","where"),o=_(r,"b","where"),a=_(e,"condition","where","bool"),i=ve(s.shape,o.shape),u=Ju(s,i),l=Ju(o,i);a.rank===1&&k(a.shape[0]===s.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),a.rank!==1&&Fe(a.shape,l.shape,"Error in where: ");const c={condition:a,t:u,e:l};return R.runKernel(Ym,c)}const vn=I({where_:KT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qT(e){const r={x:_(e,"x","zerosLike")};return R.runKernel(g0,r)}const We=I({zerosLike_:qT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(e,t){let r=_(e,"a","div"),s=_(t,"b","div");[r,s]=Xe(r,s);const o=Ce(r,s),a=We(o),i=hi(s,a);return vn(i,a,o)}const $b=I({divNoNan_:XT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YT(e,t){const r=_(e,"t1","dot"),s=_(t,"t2","dot");k((r.rank===1||r.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${r.rank} and ${s.rank}.`);const o=r.rank===1?r.size:r.shape[1],a=s.rank===1?s.size:s.shape[0];if(k(o===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${a}.`),r.rank===1&&s.rank===1){const i=F(r,[1,-1]),u=F(s,[-1,1]),l=Ie(i,u);return F(l,[])}else if(r.rank===1&&s.rank===2){const i=F(r,[1,-1]),u=F(s,[s.shape[0],s.shape[1]]),l=Ie(i,u);return F(l,[l.size])}else if(r.rank===2&&s.rank===1){const i=F(s,[-1,1]),u=Ie(r,i);return F(u,[u.size])}else{const i=F(s,[s.shape[0],s.shape[1]]);return Ie(r,i)}}const QT=I({dot_:YT});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZT(e){const r={x:_(e,"x","elu")};return R.runKernel(am,r)}const A0=I({elu_:ZT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JT(e){let t=_(e,"x","erf");k(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=ie(t,"float32"));const r={x:t};return R.runKernel(im,r)}const _b=I({erf_:JT});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eI(e){const r={x:_(e,"x","exp")};return R.runKernel(um,r)}const Cn=I({exp_:eI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tI(e,t=0){const r=_(e,"x","expandDims","string_or_numeric");k(t<=r.rank,()=>"Axis must be <= rank of the tensor");const s={input:r},o={dim:t};return R.runKernel(lm,s,o)}const er=I({expandDims_:tI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nI(e){const r={x:_(e,"x","expm1")};return R.runKernel(cm,r)}const Sb=I({expm1_:nI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rI(e,t){const r=_(e,"x","tile","string_or_numeric");k(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${t}.`);const s={x:r},o={reps:t};return R.runKernel(Jl,s,o)}const vo=I({tile_:rI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sI(e,t,r,s="float32"){t==null&&(t=e);const o=St([e,t],s),a=e<=t?e:t;for(let u=0;u<a;++u)o.set(1,u,u);const i=F(o.toTensor(),[e,t]);if(r==null)return i;if(r.length===1)return vo(er(i,0),[r[0],1,1]);if(r.length===2)return vo(er(er(i,0),0),[r[0],r[1],1,1]);if(r.length===3)return vo(er(er(er(i,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${r.length}D.`)}const oI=I({eye_:sI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kb(e,t,r){const s={shape:e,value:t,dtype:r};return R.runKernel(jC,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aI(e){const r={x:_(e,"x","floor")};return R.runKernel(pm,r)}const R0=I({floor_:aI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iI(e,t,r=0,s=0){const o=_(e,"x","gather"),a=_(t,"indices","gather","int32"),i={x:o,indices:a},u={axis:r,batchDims:s};return R.runKernel(hm,i,u)}const el=I({gather_:iI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uI(e,t){let r=_(e,"a","greater"),s=_(t,"b","greater");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(qC,o)}const xr=I({greater_:uI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lI(e,t){let r=_(e,"a","greaterEqual"),s=_(t,"b","greaterEqual");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(mm,o)}const Bs=I({greaterEqual_:lI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cI(e){const r={input:_(e,"input","imag")};return R.runKernel(YC,r)}const P0=I({imag_:cI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pI(e){const r={x:_(e,"x","isFinite")};return R.runKernel(ym,r)}const dI=I({isFinite_:pI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fI(e){const r={x:_(e,"x","isInf")};return R.runKernel(xm,r)}const hI=I({isInf_:fI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mI(e){const r={x:_(e,"x","isNaN")};return R.runKernel(vm,r)}const gI=I({isNaN_:mI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yI(e,t=.2){const s={x:_(e,"x","leakyRelu")},o={alpha:t};return R.runKernel(Cm,s,o)}const O0=I({leakyRelu_:yI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xI(e,t){let r=_(e,"a","less"),s=_(t,"b","less");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(QC,o)}const sc=I({less_:xI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vI(e,t){let r=_(e,"a","lessEqual"),s=_(t,"b","lessEqual");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(ZC,o)}const Ls=I({lessEqual_:vI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CI(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");const s={start:e,stop:t,num:r};return R.runKernel(JC,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wI(e,t=5,r=1,s=1,o=.5){const a=_(e,"x","localResponseNormalization");k(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),k(ut(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=a,u=!1;a.rank===3&&(u=!0,i=F(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},c={depthRadius:t,bias:r,alpha:s,beta:o},p=R.runKernel($m,l,c);return u?F(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Eb=I({localResponseNormalization_:wI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bI(e){const r={x:_(e,"x","log")};return R.runKernel(wm,r)}const Ts=I({log_:bI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $I(e){const r={x:_(e,"x","log1p")};return R.runKernel(bm,r)}const F0=I({log1p_:$I});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(e){return R.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _I(e){const r={x:_(e,"x","neg")};return R.runKernel(Pm,r)}const rt=I({neg_:_I});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SI(e){const r={x:_(e,"x","softplus")};return R.runKernel(r0,r)}const B0=I({softplus_:SI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kI(e){const t=_(e,"x","logSigmoid");return hr(s=>({value:rt(B0(rt(s))),gradFunc:i=>q(i,di(rt(s)))}))(t)}const EI=I({logSigmoid_:kI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NI(e,t=null,r=!1){const o={x:_(e,"x","max")},a={reductionIndices:t,keepDims:r};return R.runKernel(_m,o,a)}const ys=I({max_:NI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TI(e,t){let r=_(e,"a","sub"),s=_(t,"b","sub");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(c0,o)}const ce=I({sub_:TI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function II(e,t=null,r=!1){let s=_(e,"x","sum");s.dtype==="bool"&&(s=ie(s,"int32"));const o={x:s},a={axis:t,keepDims:r};return R.runKernel(o0,o,a)}const he=I({sum_:II});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DI(e,t=-1){const r=_(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and axis was ${t}`);return hr((o,a)=>{const u=ys(o,t,!0),l=ce(o,u),c=ce(ie(l,"float32"),Ts(he(Cn(l),t,!0)));return a([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,m=!0,g=Cn(h);return ce(d,q(he(d,t,m),g))}}})(r)}const Nb=I({logSoftmax_:DI});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function Tb(e,t,r){const s=e.length+t.length,o=[];let a=0,i=0;for(let u=0;u<s;u++)r.indexOf(u)===-1?o.push(e[a++]):o.push(t[i++]);return o}function Bn(e,t){const r=[],s=e.length;for(let a=0;a<s;a++)t.indexOf(a)===-1&&r.push(e[a]);const o=t.map(a=>e[a]);return[r,o]}function Xt(e,t){const r=t.map(s=>1);return Tb(e,r,t)}function Ln(e,t,r){k(L0(t,r),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${r} input.`)}function cn(e,t){if(L0(e,t))return null;const r=[];for(let s=0;s<t;++s)e.indexOf(s)===-1&&r.push(s);return e.forEach(s=>r.push(s)),r}function mi(e){return e.map((t,r)=>[r,t]).sort((t,r)=>t[1]-r[1]).map(t=>t[0])}function bn(e,t){const r=[];for(let s=t-e;s<t;++s)r.push(s);return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AI(e,t=null,r=!1){const s=_(e,"x","logSumExp"),o=Ge(t,s.shape),a=ys(s,o,!0),i=ce(s,a),u=Cn(i),l=he(u,o),c=Ts(l),p=Ue(F(a,c.shape),c);if(r){const d=Xt(p.shape,o);return F(p,d)}return p}const Ib=I({logSumExp_:AI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RI(e,t){const r=_(e,"a","logicalAnd","bool"),s=_(t,"b","logicalAnd","bool");ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(ew,o)}const Is=I({logicalAnd_:RI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PI(e){const r={x:_(e,"x","logicalNot","bool")};return R.runKernel(tw,r)}const oc=I({logicalNot_:PI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OI(e,t){const r=_(e,"a","logicalOr","bool"),s=_(t,"b","logicalOr","bool");ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(nw,o)}const z0=I({logicalOr_:OI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FI(e,t){const r=_(e,"a","logicalXor","bool"),s=_(t,"b","logicalXor","bool");return ve(r.shape,s.shape),Is(z0(e,t),oc(Is(e,t)))}const BI=I({logicalXor_:FI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LI(e,t,r,s,o){const a=_(e,"x","maxPool"),i=1;let u=a,l=!1;a.rank===3&&(l=!0,u=F(a,[1,a.shape[0],a.shape[1],a.shape[2]])),k(u.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${u.rank}.`),k(lt(r,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),o!=null&&k(ut(s),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const c={x:u},p={filterSize:t,strides:r,pad:s,dimRoundingMode:o},d=R.runKernel(km,c,p);return l?F(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const M0=I({maxPool_:LI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zI(e,t=[1,1,1],r,s,o,a="NDHWC",i){i==null?i=[1,1,1]:gt("dilations is deprecated, this field will be gone in v3.0.0.");const u=_(e,"x","maxPool3d");let l=u,c=!1;u.rank===4&&(c=!0,l=F(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),k(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),k(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),k(lt(r,i),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),o!=null&&k(ut(s),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const p={x:l},d={filterSize:t,strides:r,pad:s,dimRoundingMode:o,dataFormat:a,dilations:i},f=R.runKernel(Em,p,d);return c?F(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const MI=I({maxPool3d_:zI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VI(e,t,r,s,o=!1){const i={x:_(e,"x","maxPoolWithArgmax")},u={filterSize:t,strides:r,pad:s,includeBatchInIndex:o},l=R.runKernel(aw,i,u);return{result:l[0],indexes:l[1]}}const UI=I({maxPoolWithArgmax_:VI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(e,t){let r=_(e,"a","maximum"),s=_(t,"b","maximum");[r,s]=Xe(r,s),r.dtype==="bool"&&(r=ie(r,"int32"),s=ie(s,"int32")),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(Sm,o)}const ac=I({maximum_:WI});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GI(e,t=null,r=!1){const o={x:_(e,"x","mean")},a={axis:t,keepDims:r};return R.runKernel(Nm,o,a)}const V0=I({mean_:GI});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jI(e,t=null,r=!1){const o={x:_(e,"x","min")},a={axis:t,keepDims:r};return R.runKernel(Tm,o,a)}const tl=I({min_:jI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HI(e,t){let r=_(e,"a","minimum"),s=_(t,"b","minimum");[r,s]=Xe(r,s),r.dtype==="bool"&&(r=ie(r,"int32"),s=ie(s,"int32")),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(Im,o)}const ic=I({minimum_:HI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KI(e,t,r){k(r==="reflect"||r==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${r}.`);const s=_(e,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");k(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const o=r==="reflect"?1:0;for(let u=0;u<s.rank;u++)k(t[u].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),k(t[u][0]>=0&&t[u][0]<=s.shape[u]-o&&t[u][1]>=0&&t[u][1]<=s.shape[u]-o,()=>`Padding in dimension ${u} cannot be greater than or equal to ${s.shape[u]-o} or less than 0 for input of shape ${s.shape}`);const a={paddings:t,mode:r},i={x:s};return R.runKernel(Dm,i,a)}const Db=I({mirrorPad_:KI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qI(e,t){let r=_(e,"a","mod"),s=_(t,"b","mod");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(Am,o)}const U0=I({mod_:qI});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XI(e){const t=_(e,"x","square"),r={};return R.runKernel("Square",{x:t},r)}const tt=I({square_:XI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YI(e,t,r,s=!1){const o=_(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);r=r||Math.random();const l={logits:i===1?F(o,[1,-1]):o},c={numSamples:t,seed:r,normalized:s},p=R.runKernel(iw,l,c);return i===1?F(p,[p.size]):p}const QI=I({multinomial_:YI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZI(e,t){let r=_(e,"a","notEqual"),s=_(t,"b","notEqual");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s};return R.runKernel(uw,o)}const uc=I({notEqual_:ZI});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(e,t="float32"){if(t==="complex64"){const s=mr(e,"float32"),o=mr(e,"float32");return Ss(s,o)}const r=Yr(ne(e),t);return R.makeTensor(r,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ko(e,t="float32"){if(t==="complex64"){const s=Ko(e,"float32"),o=mr(e,"float32");return Ss(s,o)}const r=bC(ne(e),t);return R.makeTensor(r,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JI(e){const r={x:_(e,"x","onesLike")};return R.runKernel(Om,r)}const Ab=I({onesLike_:JI});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(e,t,r=0){const s=_(e,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:r},a={x:s};return R.runKernel(Lm,a,o)}const W0=I({pad_:e9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9(e,t,r){const s=_(e,"x","spaceToBatchND");k(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),k(r.length===t.length,()=>`paddings.shape[0] ${r.length} must be equal to [blockShape] ${t.length}`),k(s.shape.reduce((i,u,l)=>l>0&&l<=t.length?i&&(u+r[l-1][0]+r[l-1][1])%t[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${r.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:s},a={blockShape:t,paddings:r};return R.runKernel(a0,o,a)}const lc=I({spaceToBatchND_:t9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(e,t,r,s,o,a){o==null&&(o=[1,1]),a==null&&(a=1),s===0&&(s="valid");const i=_(e,"x","maxPool");let u=i,l=!1;i.rank===3&&(l=!0,u=F(i,[1,i.shape[0],i.shape[1],i.shape[2]])),k(lt(a,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${o}'`);const c=Fs(u.shape,t,a,o,s),p=[c.dilationHeight,c.dilationWidth];let d;s==="same"?d=s9([c.filterHeight,c.filterWidth],p):d=[[0,0],[0,0]];const f=p[0]===1&&p[1]===1,[h,m]=r9([c.inHeight,c.inWidth],p,d),g=f?s:"valid",x=f?u:lc(u,p,h),v=(r==="avg"?()=>N0(x,t,a,g):()=>M0(x,t,a,g))(),w=f?v:nc(v,p,m);return l?F(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function r9(e,t,r){const s=r.map(p=>p[0]),o=r.map(p=>p[1]),a=e.concat(s,o),i=t.map((p,d)=>(p-a[d]%p)%p),u=o.map((p,d)=>p+i[d]),l=t.map((p,d)=>[s[d],u[d]]),c=t.map((p,d)=>[0,i[d]]);return[l,c]}function s9(e,t){const s=e.map((i,u)=>i+(i-1)*(t[u]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),a=s.map((i,u)=>i-o[u]);return s.map((i,u)=>[o[u],a[u]])}const o9=I({pool_:n9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9(e,t){let r=_(e,"base","pow"),s=_(t,"exp","pow");[r,s]=Xe(r,s);const o={a:r,b:s};return R.runKernel(zm,o)}const qo=I({pow_:a9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(e,t){const r=_(e,"x","prelu"),s=_(t,"alpha","prelu"),o={x:r,alpha:s};return R.runKernel(Mm,o)}const G0=I({prelu_:i9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9(e,t=null,r=!1){let s=_(e,"x","prod");s.dtype==="bool"&&(s=ie(s,"int32"));const o={x:s},a={axis:t,keepDims:r};return R.runKernel(dw,o,a)}const j0=I({prod_:u9});var Rb={exports:{}};(function(e){(function(t,r,s){function o(l){var c=this,p=u();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=p(" "),c.s1=p(" "),c.s2=p(" "),c.s0-=p(l),c.s0<0&&(c.s0+=1),c.s1-=p(l),c.s1<0&&(c.s1+=1),c.s2-=p(l),c.s2<0&&(c.s2+=1),p=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var p=new o(l),d=c&&c.state,f=p.next;return f.int32=function(){return p.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&a(d,p),f.state=function(){return a(p,{})}),f}function u(){var l=4022871197,c=function(p){p=p.toString();for(var d=0;d<p.length;d++){l+=p.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(Ds,e,!1)})(Rb);var Pb={exports:{}};(function(e){(function(t,r,s){function o(u){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},u===(u|0)?l.x=u:c+=u;for(var p=0;p<c.length+64;p++)l.x^=c.charCodeAt(p)|0,l.next()}function a(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l}function i(u,l){var c=new o(u),p=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,p&&(typeof p=="object"&&a(p,c),d.state=function(){return a(c,{})}),d}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(Ds,e,!1)})(Pb);var Ob={exports:{}};(function(e){(function(t,r,s){function o(u){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,u===(u|0)?l.x=u:c+=u;for(var p=0;p<c.length+64;p++)l.x^=c.charCodeAt(p)|0,p==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(u,l){return l.x=u.x,l.y=u.y,l.z=u.z,l.w=u.w,l.v=u.v,l.d=u.d,l}function i(u,l){var c=new o(u),p=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,p&&(typeof p=="object"&&a(p,c),d.state=function(){return a(c,{})}),d}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(Ds,e,!1)})(Ob);var Fb={exports:{}};(function(e){(function(t,r,s){function o(u){var l=this;l.next=function(){var p=l.x,d=l.i,f,h;return f=p[d],f^=f>>>7,h=f^f<<24,f=p[d+1&7],h^=f^f>>>10,f=p[d+3&7],h^=f^f>>>3,f=p[d+4&7],h^=f^f<<7,f=p[d+7&7],f=f^f<<13,h^=f^f<<9,p[d]=h,l.i=d+1&7,h};function c(p,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],p.x=h,p.i=0,f=256;f>0;--f)p.next()}c(l,u)}function a(u,l){return l.x=u.x.slice(),l.i=u.i,l}function i(u,l){u==null&&(u=+new Date);var c=new o(u),p=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,p&&(p.x&&a(p,c),d.state=function(){return a(c,{})}),d}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(Ds,e,!1)})(Fb);var Bb={exports:{}};(function(e){(function(t,r,s){function o(u){var l=this;l.next=function(){var p=l.w,d=l.X,f=l.i,h,m;return l.w=p=p+1640531527|0,m=d[f+34&127],h=d[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[f]=m^h,l.i=f,m+(p^p>>>16)|0};function c(p,d){var f,h,m,g,x,y=[],v=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,v=Math.max(v,d.length)),m=0,g=-32;g<v;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(x=x+1640531527|0,f=y[g&127]^=h+x,m=f==0?m+1:0);for(m>=128&&(y[(d&&d.length||0)&127]=-1),m=127,g=4*128;g>0;--g)h=y[m+34&127],f=y[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[m]=h^f;p.w=x,p.X=y,p.i=m}c(l,u)}function a(u,l){return l.i=u.i,l.w=u.w,l.X=u.X.slice(),l}function i(u,l){u==null&&(u=+new Date);var c=new o(u),p=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,p&&(p.X&&a(p,c),d.state=function(){return a(c,{})}),d}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(Ds,e,!1)})(Bb);var Lb={exports:{}};(function(e){(function(t,r,s){function o(u){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,m=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,u===Math.floor(u)?(l.a=u/4294967296|0,l.b=u|0):c+=u;for(var p=0;p<c.length+20;p++)l.b^=c.charCodeAt(p)|0,l.next()}function a(u,l){return l.a=u.a,l.b=u.b,l.c=u.c,l.d=u.d,l}function i(u,l){var c=new o(u),p=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,p&&(typeof p=="object"&&a(p,c),d.state=function(){return a(c,{})}),d}r&&r.exports?r.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(Ds,e,!1)})(Lb);var zb={exports:{}};const l9={},c9=Object.freeze(Object.defineProperty({__proto__:null,default:l9},Symbol.toStringTag,{value:"Module"})),p9=I3(c9);(function(e){(function(t,r){var s=this,o=256,a=6,i=52,u="random",l=r.pow(o,a),c=r.pow(2,i),p=c*2,d=o-1,f;function h($,b,T){var S=[];b=b==!0?{entropy:!0}:b||{};var D=y(x(b.entropy?[$,w(t)]:$==null?v():$,3),S),z=new m(S),E=function(){for(var A=z.g(a),O=l,V=0;A<c;)A=(A+V)*o,O*=o,V=z.g(1);for(;A>=p;)A/=2,O/=2,V>>>=1;return(A+V)/O};return E.int32=function(){return z.g(4)|0},E.quick=function(){return z.g(4)/4294967296},E.double=E,y(w(z.S),t),(b.pass||T||function(A,O,V,B){return B&&(B.S&&g(B,z),A.state=function(){return g(z,{})}),V?(r[u]=A,O):A})(E,D,"global"in b?b.global:this==r,b.state)}r["seed"+u]=h;function m($){var b,T=$.length,S=this,D=0,z=S.i=S.j=0,E=S.S=[];for(T||($=[T++]);D<o;)E[D]=D++;for(D=0;D<o;D++)E[D]=E[z=d&z+$[D%T]+(b=E[D])],E[z]=b;(S.g=function(A){for(var O,V=0,B=S.i,W=S.j,H=S.S;A--;)O=H[B=d&B+1],V=V*o+H[d&(H[B]=H[W=d&W+O])+(H[W]=O)];return S.i=B,S.j=W,V})(o)}function g($,b){return b.i=$.i,b.j=$.j,b.S=$.S.slice(),b}function x($,b){var T=[],S=typeof $,D;if(b&&S=="object")for(D in $)try{T.push(x($[D],b-1))}catch{}return T.length?T:S=="string"?$:$+"\0"}function y($,b){for(var T=$+"",S,D=0;D<T.length;)b[d&D]=d&(S^=b[d&D]*19)+T.charCodeAt(D++);return w(b)}function v(){try{var $;return f&&($=f.randomBytes)?$=$(o):($=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues($)),w($)}catch{var b=s.navigator,T=b&&b.plugins;return[+new Date,s,T,s.screen,w(t)]}}function w($){return String.fromCharCode.apply(0,$)}if(y(r.random(),t),e.exports){e.exports=h;try{f=p9}catch{}}})([],Math)})(zb);var d9=Rb.exports,f9=Pb.exports,h9=Ob.exports,m9=Fb.exports,g9=Bb.exports,y9=Lb.exports,zs=zb.exports;zs.alea=d9;zs.xor128=f9;zs.xorwow=h9;zs.xorshift7=m9;zs.xor4096=g9;zs.tychei=y9;var Mb=zs;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x9{constructor(t,r,s,o,a){this.mean=t,this.stdDev=r,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=a||Math.random();this.random=Mb.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,r,s=!1;for(;!s;){let o,a,i;do o=2*this.random()-1,a=2*this.random()-1,i=o*o+a*a;while(i>=1||i===0);const u=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*a*u,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(r))&&(this.nextVal=this.convertValue(r)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class v9{constructor(t=0,r=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=r-t,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${r} <= 1 and dtype is not float`);this.random=Mb.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(e,t=0,r=1,s="float32",o){const a=St(e,s),i=new v9(t,r,null,o);for(let u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}const w9=I({randomUniform_:C9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(e,t,r=1,s="float32"){if(r===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:r,dtype:s};return R.runKernel(fw,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9(e){const r={input:_(e,"input","real")};return R.runKernel(hw,r)}const nl=I({real_:b9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9(e){const r={x:_(e,"x","reciprocal")};return R.runKernel(Vm,r)}const Vb=I({reciprocal_:$9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9(e){const r={x:_(e,"x","relu")};return R.runKernel(Um,r)}const gi=I({relu_:_9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9(e){const r={x:_(e,"x","relu6")};return R.runKernel(Hm,r)}const H0=I({relu6_:S9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k9(e,t){const s={x:_(e,"x","reverse")},o={dims:t};return R.runKernel(Km,s,o)}const Po=I({reverse_:k9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(e){const r={x:_(e,"x","round")};return R.runKernel(qm,r)}const Ub=I({round_:E9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(e){const r={x:_(e,"x","rsqrt")};return R.runKernel(Xm,r)}const K0=I({rsqrt_:N9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function de(e,t){if((qn(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&qn(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return li(e,[],[],t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(e){const r={x:_(e,"x","selu")};return R.runKernel(Qm,r)}const Wb=I({selu_:T9});function I9(e,t,r,s,o,a=[1,1],i="NHWC"){const u=_(e,"x","separableConv2d"),l=_(t,"depthwiseFilter","separableConv2d"),c=_(r,"pointwiseFilter","separableConv2d");let p=u,d=!1;if(u.rank===3&&(d=!0,p=F(u,[1,u.shape[0],u.shape[1],u.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");k(p.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${p.rank}.`),k(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),k(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),k(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),k(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];k(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const m=fi(p,l,s,o,i,a),x=Ho(m,c,1,"valid",i);return d?F(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const D9=I({separableConv2d_:I9});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function A9(e,t){const r=_(e,"x","setdiff1d"),s=_(t,"y","setdiff1d");k(r.dtype===s.dtype,()=>`x and y should have the same dtype, but got x (${r.dtype}) and y (${s.dtype}).`),k(r.rank===1,()=>`x should be 1D tensor, but got x (${r.shape}).`),k(s.rank===1,()=>`y should be 1D tensor, but got y (${s.shape}).`);const o=await r.data(),a=await s.data(),i=new Set(a);let u=0;for(let p=0;p<o.length;p++)i.has(o[p])||u++;const l=new Za([u],r.dtype),c=new Za([u],"int32");for(let p=0,d=0;p<o.length;p++)i.has(o[p])||(l.values[d]=o[p],c.values[d]=p,d++);return[l.toTensor(),c.toTensor()]}const R9=A9;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(e){const r={x:_(e,"x","sign")};return R.runKernel(t0,r)}const Gb=I({sign_:P9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(e){const r={x:_(e,"x","sin")};return R.runKernel(Jm,r)}const q0=I({sin_:O9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F9(e){const r={x:_(e,"x","sinh")};return R.runKernel(e0,r)}const X0=I({sinh_:F9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9(e,t=-1){const r=_(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${r.rank} and dim was ${t}`);const s={logits:r},o={dim:t};return R.runKernel(u0,s,o)}const jb=I({softmax_:B9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L9(e){k(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return R.runKernel(GC,t)}const Y0=I({fft_:L9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(e){k(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return R.runKernel(XC,t)}const rl=I({ifft_:z9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9(e){const t=e.shape[e.shape.length-1],r=e.size/t;let s;if(t<=2){const o=F(e,[r,t]);s=rl(o)}else{const o=[r,2*(t-1)],a=F(nl(e),[r,t]),i=F(P0(e),[r,t]),u=Po(Ne(a,[0,1],[r,t-2]),1),l=q(Po(Ne(i,[0,1],[r,t-2]),1),de(-1)),c=nt([a,u],1),p=nt([i,l],1),d=F(Ss(c,p),[o[0],o[1]]);s=rl(d)}if(s=nl(s),e.rank===3&&e.shape[0]!==0){const o=s,a=e.shape[0];s=F(s,[a,s.shape[0]/a,s.shape[1]]),o.dispose()}return s}const Hb=I({irfft_:M9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9(e,t,r=0){const o={x:_(e,"x","split")},a={numOrSizeSplits:t,axis:r};return R.runKernel(i0,o,a)}const Oo=I({split_:V9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(e,t){k(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let r=e.shape[e.shape.length-1];const s=e.size/r;let o;if(t!=null&&t<r){const m=e.shape.map(x=>0),g=e.shape.map(x=>x);g[e.shape.length-1]=t,o=Ne(e,m,g),r=t}else if(t!=null&&t>r){const m=e.shape.map(g=>g);m[e.shape.length-1]=t-r,o=nt([e,mr(m)],e.shape.length-1),r=t}else o=e;const a=We(o),i=F(Ss(o,a),[s,r]),u=Y0(i),l=Math.floor(r/2)+1,c=nl(u),p=P0(u),d=Oo(c,[l,r-l],c.shape.length-1),f=Oo(p,[l,r-l],p.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,F(Ss(d[0],f[0]),h)}const Q0=I({rfft_:U9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9(e){const r={x:_(e,"x","sqrt")};return R.runKernel(s0,r)}const gr=I({sqrt_:W9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9(e,t){let r=_(e,"a","squaredDifference"),s=_(t,"b","squaredDifference");[r,s]=Xe(r,s),ve(r.shape,s.shape);const o={a:r,b:s},a={};return R.runKernel(l0,o,a)}const cc=I({squaredDifference_:G9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9(e,t){const r=_(e,"x","squeeze");return F(r,Os(r.shape,t).newShape)}const Ja=I({squeeze_:j9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9(e,t=0){const r=Aw(e,"tensors","stack","string_or_numeric");k(r.length>=1,()=>"Pass at least one tensor to tf.stack"),r.length>0&&k(t<=r[0].rank,()=>"Axis must be <= rank of the tensor");const s=r,o={axis:t};return R.runKernel(Bm,s,o)}const Fn=I({stack_:H9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9(e,t=0){const s={x:_(e,"x","step")},o={alpha:t};return R.runKernel(y0,s,o)}const yi=I({step_:K9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9(e,t,r,s,o=0,a=0,i=0,u=0,l=0){const p={x:_(e,"x","stridedSlice")},d={begin:t,end:r,strides:s,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:u,shrinkAxisMask:l};return R.runKernel(Cw,p,d)}const Kb=I({stridedSlice_:q9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9(e){const r={x:_(e,"x","tan")};return R.runKernel(p0,r)}const qb=I({tan_:X9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(e,t){Ih(e);const r=ui(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return li(e,null,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gr(e,t,r){if(Ih(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=ui(e,r);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return li(e,t,s,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9(e,t=1,r=!0){const s=_(e,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const a={x:s},i={k:t,sorted:r},[u,l]=R.runKernel(ww,a,i);return{values:u,indices:l}}const Xb=I({topk_:Y9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9(e,t=0,r=1,s,o){if(s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new x9(t,r,s,!0,o),i=St(e,s);for(let u=0;u<i.values.length;u++)i.values[u]=a.nextValue();return i.toTensor()}const Z9=I({truncatedNormal_:Q9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(e,t=0){const r=_(e,"x","unique","string_or_numeric");k(r.rank>0,()=>"The input tensor must be at least 1D");const s={x:r},o={axis:t},[a,i]=R.runKernel(bw,s,o);return{values:a,indices:i}}const Kd=I({unique_:J9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5(e,t,r){const s=_(e,"x","unsortedSegmentSum"),o=_(t,"segmentIds","unsortedSegmentSum","int32");k(ut(r),()=>"numSegments must be of dtype int");const a={x:s,segmentIds:o},i={numSegments:r};return R.runKernel(m0,a,i)}const Yb=I({unsortedSegmentSum_:e5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(e,t=0){const r=_(e,"x","unstack","string_or_numeric");k(t>=-r.shape.length&&t<r.shape.length,()=>`Axis = ${t} is not in [-${r.shape.length}, ${r.shape.length})`);const s={value:r},o={axis:t};return R.runKernel(h0,s,o)}const vr=I({unstack_:t5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qb(e,t){const r=[];for(let a=0;a<t.length;a++)t[a]&&r.push(a);const s=St(e,"int32"),o=St([r.length,e.length],"int32");for(let a=0;a<r.length;a++){const i=s.indexToLoc(r[a]),u=a*e.length;o.values.set(i,u)}return o.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function n5(e){const t=_(e,"condition","whereAsync","bool"),r=await t.data(),s=Qb(t.shape,r);return e!==t&&t.dispose(),s}const r5=n5;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","notEqualStrict"),s=_(t,"b","notEqualStrict");return Fe(r.shape,s.shape,"Error in notEqualStrict: "),uc(r,s)}function o5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","lessStrict"),s=_(t,"b","lessStrict");return Fe(r.shape,s.shape,"Error in lessStrict: "),sc(r,s)}function a5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","equalStrict"),s=_(t,"b","equalStrict");return Fe(r.shape,s.shape,"Error in equalStrict: "),hi(r,s)}function i5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","lessEqualStrict"),s=_(t,"b","lessEqualStrict");return Fe(r.shape,s.shape,"Error in lessEqualStrict: "),Ls(r,s)}function u5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","greaterStrict"),s=_(t,"b","greaterStrict");return Fe(r.shape,s.shape,"Error in greaterStrict: "),xr(r,s)}function l5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","greaterEqualStrict"),s=_(t,"b","greaterEqualStrict");return Fe(r.shape,s.shape,"Error in greaterEqualStrict: "),Bs(r,s)}const c5=I({equalStrict_:a5}),p5=I({greaterEqualStrict_:l5}),d5=I({greaterStrict_:u5}),f5=I({lessEqualStrict_:i5}),h5=I({lessStrict_:o5}),m5=I({notEqualStrict_:s5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","addStrict"),s=_(t,"b","addStrict");return Fe(r.shape,s.shape,"Error in addStrict: "),Ue(r,s)}function y5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","subStrict"),s=_(t,"b","subStrict");return Fe(r.shape,s.shape,"Error in subStrict: "),ce(r,s)}function x5(e,t){return gt("strict variants of ops have been deprecated and will be removed in future"),Fe(e.shape,t.shape,"Error in powStrict: "),qo(e,t)}function v5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","mul"),s=_(t,"b","mul");return Fe(r.shape,s.shape,"Error in multiplyStrict: "),q(r,s)}function C5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","div"),s=_(t,"b","div");return Fe(r.shape,s.shape,"Error in divideStrict: "),Ce(r,s)}function w5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","modStrict"),s=_(t,"b","modStrict");return Fe(r.shape,s.shape,"Error in modStrict: "),U0(r,s)}function b5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","minimumStrict"),s=_(t,"b","minimumStrict");return Fe(r.shape,s.shape,"Error in minimumStrict: "),ic(r,s)}function $5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","maximumStrict"),s=_(t,"b","maximumStrict");return Fe(r.shape,s.shape,"Error in maximumStrict: "),ac(r,s)}function _5(e,t){gt("strict variants of ops have been deprecated and will be removed in future");const r=_(e,"a","squaredDifferenceStrict"),s=_(t,"b","squaredDifferenceStrict");return Fe(r.shape,s.shape,"Error in squaredDifferenceStrict: "),cc(r,s)}const S5=I({addStrict_:g5}),k5=I({divStrict_:C5}),E5=I({maximumStrict_:$5}),N5=I({minimumStrict_:b5}),T5=I({modStrict_:w5}),I5=I({mulStrict_:v5}),D5=I({powStrict_:x5}),A5=I({squaredDifferenceStrict_:_5}),R5=I({subStrict_:y5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5(e,t="euclidean",r=null,s=!1){e=_(e,"x","norm");const o=Zb(e,t,r);let a=o.shape;if(s){const i=Ge(r,e.shape);a=Xt(o.shape,i)}return F(o,a)}function Zb(e,t,r=null){if(e.rank===0)return en(e);if(e.rank!==1&&r===null)return Zb(F(e,[-1]),t,r);if(e.rank===1||typeof r=="number"||Array.isArray(r)&&r.length===1){if(t===1)return he(en(e),r);if(t===1/0)return ys(en(e),r);if(t===-1/0)return tl(en(e),r);if(t==="euclidean"||t===2)return gr(he(qo(en(e),de(2,"int32")),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(r)&&r.length===2){if(t===1)return ys(he(en(e),r[0]),r[1]-1);if(t===1/0)return ys(he(en(e),r[1]),r[0]);if(t===-1/0)return tl(he(en(e),r[1]),r[0]);if(t==="fro"||t==="euclidean")return gr(he(tt(e),r));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}const Z0=I({norm_:P5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5(e,t,r){const s=_(e,"indices","scatterND","int32"),o=_(t,"updates","scatterND");Gw(o,s,r);const a={indices:s,updates:o},i={shape:r};return R.runKernel(yw,a,i)}const F5=I({scatterND_:O5});function B5(e,t,r,s){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(r.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${r.length}, should be: ${a}.`);const i=t.size;if(!(t.rank===0||t.rank===1&&i===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5(e,t,r,s=0){const o=_(e,"sparseIndices","sparseToDense","int32"),a=_(t,"sparseValues","sparseToDense"),i=_(s,"defaultValue","sparseToDense",a.dtype);B5(o,a,r,i);const u={sparseIndices:o,sparseValues:a,defaultValue:i},l={outputShape:r};return R.runKernel(vw,u,l)}const Jb=I({sparseToDense_:L5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(e,t){const r=_(t,"indices","gatherND","int32"),o={params:_(e,"x","gatherND"),indices:r};return R.runKernel(KC,o)}const M5=I({gatherND_:z5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function e4(e,t,r){const s=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+s-1);o[a]=t-r*Math.cos(i)}return Yt(o,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5(e,t,r,s,o,a="NHWC",i){let u=e;e.rank===3&&(u=F(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=F(t,[1,t.shape[0],t.shape[1],t.shape[2]])),k(u.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${u.shape}.`),k(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),k(r.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${r}.`);const c=a==="NHWC"?u.shape[3]:u.shape[1],p=a==="NHWC"?l.shape[3]:l.shape[1];k(c===r[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${r[2]}.`),k(p===r[3],()=>`Error in conv2dDerFilter: depth of dy (${p}) must match output depth for filter (${r[3]}).`),i!=null&&k(ut(o),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${i} but got pad ${o}.`);const d={x:u,dy:l},f={strides:s,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:r};return R.runKernel(PC,d,f)}const J0=I({conv2DBackpropFilter_:U5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pc(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return q(e,yi(t));throw new Error(`Cannot compute gradient for fused activation ${r}.`)}function dc(e,t){let r=t;const s=st(e.shape,t.shape);return s.length>0&&(r=he(r,s)),F(r,e.shape)}function fc(e,t,r,s){if(t==="linear")return e;if(t==="relu")return gi(e);if(t==="elu")return A0(e);if(t==="relu6")return H0(e);if(t==="prelu")return G0(e,r);if(t==="leakyrelu")return O0(e,s);throw new Error(`Unknown fused activation ${t}.`)}const hc=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5({x:e,filter:t,strides:r,pad:s,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:u,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:p}){if(l=l||"linear",hc(R.state.gradientDepth,l)===!1){let b=Ho(e,t,r,s,o,a,i);return u!=null&&(b=Ue(b,u)),fc(b,l,c,p)}const d=_(e,"x","conv2d"),f=_(t,"filter","conv2d");let h=d,m=!1;d.rank===3&&(m=!0,h=F(d,[1,d.shape[0],d.shape[1],d.shape[2]])),k(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),k(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),i!=null&&k(ut(s),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${s}.`),k(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),k(lt(r,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`),k(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const g=ln(h.shape,f.shape,r,a,s,i);let x;u!=null&&(x=_(u,"bias","fused conv2d"),[x]=Xe(x,d),ve(g.outShape,x.shape));let y;c!=null&&(y=_(c,"prelu weights","fused conv2d"));const v=(b,T)=>{const[S,D,z,E]=T,A=pc(b,z,l);k(Zr(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const O=T0(D.shape,A,S,r,s),V=J0(D,A,S.shape,r,s),B=[O,V];if(E!=null){const W=dc(E,A);B.push(W)}return B},w={x:h,filter:f,bias:x,preluActivationWeights:y},$={strides:r,pad:s,dataFormat:o,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:p};return u==null?hr((T,S,D)=>{let z=R.runKernel(Ad,w,$);return D([S,T,z]),m&&(z=F(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:v}})(h,f):hr((T,S,D,z)=>{let E=R.runKernel(Ad,w,$);return z([S,T,E,D]),m&&(E=F(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:v}})(h,f,x)}const G5=I({fusedConv2d_:W5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5(e,t,r,s,o,a=[1,1],i){let u=e;e.rank===3&&(u=F(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=F(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:u,dy:l},p={strides:s,pad:o,dimRoundingMode:i,dilations:a,filterShape:r};return R.runKernel(MC,c,p)}const t4=I({depthwiseConv2dNativeBackpropFilter_:j5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5(e,t,r,s,o,a=[1,1],i){let u=t,l=!1;t.rank===3&&(l=!0,u=F(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:u,filter:r},p={strides:s,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},d=R.runKernel(VC,c,p);return l?F(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const n4=I({depthwiseConv2dNativeBackpropInput_:H5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5({x:e,filter:t,strides:r,pad:s,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:u,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:p}){if(hc(R.state.gradientDepth,l)===!1){let b=fi(e,t,r,s,o,a,i);return u!=null&&(b=Ue(b,u)),fc(b,l,c,p)}const d=_(e,"x","depthwiseConv2d"),f=_(t,"filter","depthwiseConv2d");let h=d,m=!1;d.rank===3&&(m=!0,h=F(d,[1,d.shape[0],d.shape[1],d.shape[2]])),k(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),k(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),k(h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),a==null&&(a=[1,1]),k(lt(r,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`),i!=null&&k(ut(s),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${i} but got pad ${s}.`);const g=ln(h.shape,f.shape,r,a,s,i,!0);let x;u!=null&&(x=_(u,"bias","fused conv2d"),[x]=Xe(x,d),ve(g.outShape,x.shape));let y;c!=null&&(y=_(c,"prelu weights","fused depthwiseConv2d"));const v=(b,T)=>{k(Zr(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[S,D,z,E]=T,A=pc(b,z,l),O=n4(D.shape,A,S,r,s,a,i),V=t4(D,A,S.shape,r,s,a,i);if(E!=null){const B=dc(x,A);return[O,V,B]}return[O,V]},w={x:h,filter:f,bias:x,preluActivationWeights:y},$={strides:r,pad:s,dataFormat:o,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:p};return u==null?hr((T,S,D)=>{let z=R.runKernel(Rd,w,$);return D([S,T,z]),m&&(z=F(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:v}})(h,f):hr((T,S,D,z)=>{let E=R.runKernel(Rd,w,$);return z([S,T,E,D]),m&&(E=F(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:v}})(h,f,x)}const q5=I({fusedDepthwiseConv2d_:K5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5({a:e,b:t,transposeA:r=!1,transposeB:s=!1,bias:o,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:u}){if(hc(R.state.gradientDepth,a)===!1){let E=Ie(e,t,r,s);return o!=null&&(E=Ue(E,o)),fc(E,a,i,u)}let l=_(e,"a","fused matMul"),c=_(t,"b","fused matMul");[l,c]=Xe(l,c);const p=r?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?c.shape[c.rank-1]:c.shape[c.rank-2],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=s?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),x=ne(m),y=ne(g);k(l.rank>=2&&c.rank>=2&&l.rank===c.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${c.rank}.`),k(_t(m,g),()=>`Error in fused matMul: outer dimensions (${m}) and (${g}) of Tensors with shapes ${l.shape} and ${c.shape} must match.`),k(p===d,()=>`Error in fused matMul: inner shapes (${p}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${r} and transposeB=${s} must match.`);const v=l.shape.slice(0,-2).concat([f,h]),w=r?F(l,[x,p,f]):F(l,[x,f,p]),$=s?F(c,[y,h,d]):F(c,[y,d,h]);let b;o!=null&&(b=_(o,"bias","fused matMul"),[b]=Xe(b,l),ve(v,b.shape));let T;i!=null&&(T=_(i,"prelu weights","fused matMul"));const S=(E,A)=>{const[O,V,B,W]=A,H=pc(F(E,B.shape),B,a);let Q,U;if(!r&&!s?(Q=Ie(H,V,!1,!0),U=Ie(O,H,!0,!1)):!r&&s?(Q=Ie(H,V,!1,!1),U=Ie(H,O,!0,!1)):r&&!s?(Q=Ie(V,H,!1,!0),U=Ie(O,H,!1,!1)):(Q=Ie(V,H,!0,!0),U=Ie(H,O,!0,!0)),o!=null){const G=dc(W,H);return[Q,U,G]}else return[Q,U]},D={a:w,b:$,bias:b,preluActivationWeights:T},z={transposeA:r,transposeB:s,activation:a,leakyreluAlpha:u};return o==null?hr((A,O,V)=>{const B=R.runKernel(Dd,D,z);return V([A,O,B]),{value:F(B,v),gradFunc:S}})(w,$):hr((A,O,V,B)=>{const W=R.runKernel(Dd,D,z);return B([A,O,W,V]),{value:F(W,v),gradFunc:S}})(w,$,b)}const Y5=I({fusedMatMul_:X5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5(e){return e4(e,.54,.46)}const NG=I({hammingWindow_:Q5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5(e){return e4(e,.5,.5)}const J5=I({hannWindow_:Z5});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8(e,t,r,s=!1,o=0){let a=0;const i=[];for(;a+t<=e.size;)i.push(Ne(e,a,t)),a+=r;if(s)for(;a<e.size;){const u=a+t-e.size,l=nt([Ne(e,a,t-u),kb([u],o)]);i.push(l),a+=r}return i.length===0?Gr([],[0,t]):F(nt(i),[i.length,t])}const t8=I({frame_:e8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(e,t,r,s,o=J5){s==null&&(s=V5(t));const a=t8(e,t,r),i=q(a,o(t)),u=[];for(let l=0;l<a.shape[0];l++)u.push(Q0(Ne(i,[l,0],[1,t]),s));return nt(u)}const TG=I({stft_:n8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(e,t,r,s,o="bilinear",a=0){const i=_(e,"image","cropAndResize"),u=_(t,"boxes","cropAndResize","float32"),l=_(r,"boxInd","cropAndResize","int32"),c=u.shape[0];k(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),k(u.rank===2&&u.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${u.shape}.`),k(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${u.shape}.`),k(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),k(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),k(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const p={image:i,boxes:u,boxInd:l},d={method:o,extrapolationValue:a,cropSize:s};return R.runKernel(BC,p,d)}const s8=I({cropAndResize_:r8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(e){const t=_(e,"image","flipLeftRight","float32");k(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const r={image:t};return R.runKernel(HC,r,{})}const a8=I({flipLeftRight_:o8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(e,t,r=0,s=.5){const o=_(e,"image","rotateWithOffset","float32");k(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const a={image:o},i={radians:t,fillValue:r,center:s};return R.runKernel($w,a,i)}const u8=I({rotateWithOffset_:i8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xo(e,t,r,s,o,a){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),a==null&&(a=0);const i=e.shape[0];return r=Math.min(r,i),k(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),k(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),k(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),k(t.rank===1,()=>"scores must be a 1D tensor"),k(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),k(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:r,iouThreshold:s,scoreThreshold:o,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY){const a=_(e,"boxes","nonMaxSuppression"),i=_(t,"scores","nonMaxSuppression"),u=Xo(a,i,r,s,o);r=u.maxOutputSize,s=u.iouThreshold,o=u.scoreThreshold;const l={maxOutputSize:r,iouThreshold:s,scoreThreshold:o};return R.runKernel(lw,{boxes:a,scores:i},l)}const c8=I({nonMaxSuppression_:l8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(e,t,r){const s=d8(e,t,r),o=s<0?-(s+1):s;e.splice(o,0,t)}function d8(e,t,r){return h8(e,t,r||f8)}function f8(e,t){return e>t?1:e<t?-1:0}function h8(e,t,r){let s=0,o=e.length,a=0,i=!1;for(;s<o;){a=s+(o-s>>>1);const u=r(t,e[a]);u>0?s=a+1:(o=a,i=!u)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4(e,t,r,s,o){return eg(e,t,r,s,o,0)}function s4(e,t,r,s,o,a){return eg(e,t,r,s,o,0,!1,a,!0)}function o4(e,t,r,s,o,a){return eg(e,t,r,s,o,a,!0)}function eg(e,t,r,s,o,a,i=!1,u=!1,l=!1){const c=[];for(let x=0;x<t.length;x++)t[x]>o&&c.push({score:t[x],boxIndex:x,suppressBeginIndex:0});c.sort(ky);const p=a>0?-.5/a:0,d=[],f=[];for(;d.length<r&&c.length>0;){const x=c.pop(),{score:y,boxIndex:v,suppressBeginIndex:w}=x;if(y<o)break;let $=!1;for(let b=d.length-1;b>=w;--b){const T=m8(e,v,d[b]);if(T>=s){$=!0;break}if(x.score=x.score*g8(s,p,T),x.score<=o)break}x.suppressBeginIndex=d.length,$||(x.score===y?(d.push(v),f.push(x.score)):x.score>o&&p8(c,x,ky))}const h=d.length,m=r-h;u&&m>0&&(d.push(...new Array(m).fill(0)),f.push(...new Array(m).fill(0)));const g={selectedIndices:d};return i&&(g.selectedScores=f),l&&(g.validOutputs=h),g}function m8(e,t,r){const s=e.subarray(t*4,t*4+4),o=e.subarray(r*4,r*4+4),a=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),u=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),c=Math.min(o[0],o[2]),p=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(u-a)*(l-i),m=(d-c)*(f-p);if(h<=0||m<=0)return 0;const g=Math.max(a,c),x=Math.max(i,p),y=Math.min(u,d),v=Math.min(l,f),w=Math.max(y-g,0)*Math.max(v-x,0);return w/(h+m-w)}function g8(e,t,r){const s=Math.exp(t*r*r);return r<=e?s:0}function ky(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function y8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY){const a=_(e,"boxes","nonMaxSuppressionAsync"),i=_(t,"scores","nonMaxSuppressionAsync"),u=Xo(a,i,r,s,o);r=u.maxOutputSize,s=u.iouThreshold,o=u.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),c=l[0],p=l[1],{selectedIndices:d}=r4(c,p,r,s,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),Yt(d,"int32")}const x8=y8;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=_(e,"boxes","nonMaxSuppression"),u=_(t,"scores","nonMaxSuppression"),l=Xo(i,u,r,s,o,a);r=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:i,scores:u},p={maxOutputSize:r,iouThreshold:s,scoreThreshold:o,softNmsSigma:a},d=R.runKernel(pw,c,p);return{selectedIndices:d[0],selectedScores:d[1]}}const C8=I({nonMaxSuppressionWithScore_:v8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function w8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY,a=0){const i=_(e,"boxes","nonMaxSuppressionAsync"),u=_(t,"scores","nonMaxSuppressionAsync"),l=Xo(i,u,r,s,o,a);r=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([i.data(),u.data()]),p=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=o4(p,d,r,s,o,a);return i!==e&&i.dispose(),u!==t&&u.dispose(),{selectedIndices:Yt(f,"int32"),selectedScores:Yt(h)}}const b8=w8;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=_(e,"boxes","nonMaxSuppression"),u=_(t,"scores","nonMaxSuppression"),l=Xo(i,u,r,s,o,null),c=l.maxOutputSize,p=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:u},h={maxOutputSize:c,iouThreshold:p,scoreThreshold:d,padToMaxOutputSize:a},m=R.runKernel(cw,f,h);return{selectedIndices:m[0],validOutputs:m[1]}}const _8=I({nonMaxSuppressionPadded_:$8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function S8(e,t,r,s=.5,o=Number.NEGATIVE_INFINITY,a=!1){const i=_(e,"boxes","nonMaxSuppressionAsync"),u=_(t,"scores","nonMaxSuppressionAsync"),l=Xo(i,u,r,s,o,null),c=l.maxOutputSize,p=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),u.data()]),{selectedIndices:m,validOutputs:g}=s4(f,h,c,p,d,a);return i!==e&&i.dispose(),u!==t&&u.dispose(),{selectedIndices:Yt(m,"int32"),validOutputs:de(g,"int32")}}const k8=S8;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(e,t,r=!1,s=!1){const o=_(e,"images","resizeBilinear");k(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),k(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),k(s===!1||r===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=o,i=!1;o.rank===3&&(i=!0,a=F(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u={images:a},l={alignCorners:r,halfPixelCenters:s,size:t},c=R.runKernel(jm,u,l);return i?F(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const a4=I({resizeBilinear_:E8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(e,t,r=!1,s=!1){const o=_(e,"images","resizeNearestNeighbor");k(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),k(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),k(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),k(s===!1||r===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=o,i=!1;o.rank===3&&(i=!0,a=F(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u={images:a},l={alignCorners:r,halfPixelCenters:s,size:t},c=R.runKernel(Gm,u,l);return i?F(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const i4=I({resizeNearestNeighbor_:N8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(e,t,r){k(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),k(r%1===0,()=>`bandPart(): numUpper must be an integer, got ${r}.`);const s=_(e,"a","bandPart");k(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[a,i]=s.shape.slice(-2);if(!(t<=a))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`);if(!(r<=i))throw new Error(`bandPart(): numUpper (${r}) must not be greater than the number of columns (${i}).`);t<0&&(t=a),r<0&&(r=i);const u=F(Hd(0,a,1,"int32"),[-1,1]),l=Hd(0,i,1,"int32"),c=ce(u,l),p=Is(Ls(c,de(+t,"int32")),Bs(c,de(-r,"int32"))),d=mr([a,i],s.dtype);return F(Fn(vr(F(s,[-1,a,i])).map(f=>vn(p,f,d))),o)}const IG=I({bandPart_:T8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(e){let t;if(Array.isArray(e)){t=!1,k(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let a=1;a<e.length;++a)k(e[a].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[a].shape[0]} vs. ${o})`)}else t=!0,e=Oo(e,e.shape[0],0).map(o=>Ja(o,[0]));k(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const r=[],s=e;for(let o=0;o<e.length;++o)r.push(R.tidy(()=>{let a=s[o];if(o>0)for(let i=0;i<o;++i){const u=q(he(q(r[i],a)),r[i]);a=ce(a,u)}return Ce(a,Z0(a,"euclidean"))}));return t?Fn(r,0):r}const DG=I({gramSchmidt_:I8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(e,t=!1){if(k(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return Ey(e,t);{const r=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),s=vr(F(e,[r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];s.forEach(l=>{const[c,p]=Ey(l,t);o.push(c),a.push(p)});const i=F(Fn(o,0),e.shape),u=F(Fn(a,0),e.shape);return[i,u]}}function Ey(e,t=!1){return R.tidy(()=>{k(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const r=e.shape[0],s=e.shape[1];let o=oI(r),a=ms(e);const i=Gr([[1]],[1,1]);let u=ms(i);const l=r>=s?s:r;for(let c=0;c<l;++c){const p=a,d=u,f=o;[u,a,o]=R.tidy(()=>{const h=Ne(a,[c,c],[r-c,1]),m=Z0(h),g=Ne(a,[c,c],[1,1]),x=vn(xr(g,0),Gr([[-1]]),Gr([[1]])),y=ce(g,q(x,m)),v=Ce(h,y);v.shape[0]===1?u=ms(i):u=nt([i,Ne(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const w=rt(Ce(Ie(x,y),m)),$=Ne(a,[c,0],[r-c,s]),b=q(w,u),T=Qr(u);if(c===0)a=ce($,Ie(b,Ie(T,$)));else{const z=ce($,Ie(b,Ie(T,$)));a=nt([Ne(a,[0,0],[c,s]),z],0)}const S=Qr(b),D=Ne(o,[0,c],[r,o.shape[1]-c]);if(c===0)o=ce(D,Ie(Ie(D,u),S));else{const z=ce(D,Ie(Ie(D,u),S));o=nt([Ne(o,[0,0],[r,c]),z],1)}return[u,a,o]}),UN([p,d,f])}return!t&&r>s&&(o=Ne(o,[0,0],[r,s]),a=Ne(a,[0,0],[s,s])),[o,a]})}const AG=I({qr_:D8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Pt;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Pt||(Pt={}));function A8(e,t,r=Pt.SUM_BY_NONZERO_WEIGHTS){const s=_(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=_(t,"weights","computeWeightedLoss"));const a=o==null?s:q(s,o);if(r===Pt.NONE)return a;if(r===Pt.SUM)return he(a);if(r===Pt.MEAN){if(o==null)return V0(a);{const i=s.size/o.size,u=Ce(he(a),he(o));return i>1?Ce(u,de(i)):u}}if(r===Pt.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Ce(he(a),de(s.size));{const i=q(o,Ko(s.shape)),u=ie(he(uc(i,de(0))),"float32");return Ce(he(a),u)}}throw Error(`Unknown reduction: ${r}`)}const ns=I({computeWeightedLoss_:A8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(e,t,r,s=Pt.SUM_BY_NONZERO_WEIGHTS){const o=_(e,"labels","absoluteDifference"),a=_(t,"predictions","absoluteDifference");let i=null;r!=null&&(i=_(r,"weights","absoluteDifference")),Fe(o.shape,a.shape,"Error in absoluteDifference: ");const u=en(ce(o,a));return ns(u,i,s)}const RG=I({absoluteDifference_:R8});function P8(e,t,r,s,o=Pt.SUM_BY_NONZERO_WEIGHTS){const a=_(e,"labels","cosineDistance"),i=_(t,"predictions","cosineDistance");let u=null;s!=null&&(u=_(s,"weights","cosineDistance")),Fe(a.shape,i.shape,"Error in cosineDistance: ");const l=de(1),c=ce(l,he(q(a,i),r,!0));return ns(c,u,o)}const PG=I({cosineDistance_:P8});function O8(e,t,r,s=Pt.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","hingeLoss");const a=_(t,"predictions","hingeLoss");let i=null;r!=null&&(i=_(r,"weights","hingeLoss")),Fe(o.shape,a.shape,"Error in hingeLoss: ");const u=de(1);o=ce(q(de(2),o),u);const l=gi(ce(u,q(o,a)));return ns(l,i,s)}const OG=I({hingeLoss_:O8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(e,t,r,s=1,o=Pt.SUM_BY_NONZERO_WEIGHTS){const a=_(e,"labels","huberLoss"),i=_(t,"predictions","huberLoss");let u=null;r!=null&&(u=_(r,"weights","huberLoss")),Fe(a.shape,i.shape,"Error in huberLoss: ");const l=de(s),c=en(ce(i,a)),p=ic(c,l),d=ce(c,p),f=Ue(q(de(.5),tt(p)),q(l,d));return ns(f,u,o)}const FG=I({huberLoss_:F8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B8(e,t,r,s=1e-7,o=Pt.SUM_BY_NONZERO_WEIGHTS){const a=_(e,"labels","logLoss"),i=_(t,"predictions","logLoss");let u=null;r!=null&&(u=_(r,"weights","logLoss")),Fe(a.shape,i.shape,"Error in logLoss: ");const l=de(1),c=de(s),p=rt(q(a,Ts(Ue(i,c)))),d=q(ce(l,a),Ts(Ue(ce(l,i),c))),f=ce(p,d);return ns(f,u,o)}const BG=I({logLoss_:B8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(e,t,r,s=Pt.SUM_BY_NONZERO_WEIGHTS){const o=_(e,"labels","meanSquaredError"),a=_(t,"predictions","meanSquaredError");let i=null;r!=null&&(i=_(r,"weights","meanSquaredError")),Fe(o.shape,a.shape,"Error in meanSquaredError: ");const u=cc(o,a);return ns(u,i,s)}const LG=I({meanSquaredError_:L8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(e,t){const r=_(e,"labels","sigmoidCrossEntropyWithLogits"),s=_(t,"logits","sigmoidCrossEntropyWithLogits");Fe(r.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=gi(s),a=q(s,r),i=F0(Cn(rt(en(s))));return Ue(ce(o,a),i)}function M8(e,t,r,s=0,o=Pt.SUM_BY_NONZERO_WEIGHTS){let a=_(e,"multiClassLabels","sigmoidCrossEntropy");const i=_(t,"logits","sigmoidCrossEntropy");let u=null;if(r!=null&&(u=_(r,"weights","sigmoidCrossEntropy")),Fe(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const c=de(s),p=de(1),d=de(.5);a=Ue(q(a,ce(p,c)),q(d,c))}const l=z8(a,i);return ns(l,u,o)}const zG=I({sigmoidCrossEntropy_:M8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(e,t,r=-1){if(r===-1&&(r=t.rank-1),r!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${r}`);return hr((o,a,i)=>{const l=Ib(a,[r],!0),c=ce(ie(a,"float32"),l);i([o,c]);const p=rt(q(c,o));return{value:he(p,[r]),gradFunc:(h,m)=>{const[g,x]=m,y=Xt(h.shape,[r]);return[q(F(h,y),ce(ie(g,"float32"),Cn(x))),q(F(h,y),ce(Cn(x),ie(g,"float32")))]}}})(e,t)}function U8(e,t,r,s=0,o=Pt.SUM_BY_NONZERO_WEIGHTS){let a=_(e,"onehotLabels","softmaxCrossEntropy");const i=_(t,"logits","softmaxCrossEntropy");let u=null;if(r!=null&&(u=_(r,"weights","softmaxCrossEntropy")),Fe(a.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const c=de(s),p=de(1),d=de(a.shape[1]);a=Ue(q(a,ce(p,c)),Ce(c,d))}const l=V8(a,i);return ns(l,u,o)}const MG=I({softmaxCrossEntropy_:U8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dn={flipLeftRight:a8,resizeNearestNeighbor:i4,resizeBilinear:a4,rotateWithOffset:u8,cropAndResize:s8,nonMaxSuppression:c8,nonMaxSuppressionAsync:x8,nonMaxSuppressionWithScore:C8,nonMaxSuppressionWithScoreAsync:b8,nonMaxSuppressionPadded:_8,nonMaxSuppressionPaddedAsync:k8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(e,t){const r=e[0].length;e.forEach((o,a)=>{k(o.length===r,()=>`Error in concat${r}D: rank of tensors[${a}] must be the same as the rank of the rest (${r})`)}),k(t>=0&&t<r,()=>`Error in concat${r}D: axis must be between 0 and ${r-1}.`);const s=e[0];e.forEach((o,a)=>{for(let i=0;i<r;i++)k(i===t||o[i]===s[i],()=>`Error in concat${r}D: Shape of tensors[${a}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${a}.`)})}function Yo(e,t){const r=e[0].slice();for(let s=1;s<e.length;s++)r[t]+=e[s][t];return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tg=30;function mc(e){return e<=tg?e:Ed(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4(e,t,r){const s=r*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ng(e,t,r,s=!0){let o=[];if(s)o=o.concat(t.slice(0)),o.push(e[0]/r),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const a=t.length;for(let i=0;i<a;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(a+1))}return o}function rg(e,t,r=!0){const s=[];if(r){s.push(t);for(let o=t+1;o<e;++o)o<=2*t?(s.push(o),s.push(o-(t+1))):s.push(o)}else{const o=[],a=[];for(let i=1;i<e;++i)i>=t*2+1||i%2===1?a.push(i):o.push(i);s.push(...o),s.push(0),s.push(...a)}return s}function sg(e,t,r,s=!0){const o=[];s?o.push(e[0]/r):o.push(e[0]*r);for(let a=1;a<e.length;++a)a<=t.length?s?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function c4(e,t){const r=[0];for(let s=0;s<t;++s)r.push(e[s][0]);return r}function p4(e,t,r){const s=e.slice(0,1);for(let o=0;o<r;++o)s.push(e[o+1]-t[o][0]-t[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const og=1.7580993408473768,ag=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4=.3275911,f4=.254829592,h4=-.284496736,m4=1.421413741,g4=-1.453152027,y4=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(...e){K().getBool("IS_TEST")||console.warn(...e)}function W8(...e){K().getBool("IS_TEST")||console.log(...e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qd(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const r=new Float32Array(e.length*2);for(let s=0;s<r.length;s+=2)r[s]=e[s/2],r[s+1]=t[s/2];return r}function G8(e){const t=new Float32Array(e.length/2),r=new Float32Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=e[s],r[s/2]=e[s+1];return{real:t,imag:r}}function j8(e){const t=Math.ceil(e.length/4),r=new Float32Array(t),s=new Float32Array(t);for(let o=0;o<e.length;o+=4)r[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:r,imag:s}}function H8(e){const t=Math.floor(e.length/4),r=new Float32Array(t),s=new Float32Array(t);for(let o=2;o<e.length;o+=4)r[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:r,imag:s}}function K8(e,t){const r=e[t*2],s=e[t*2+1];return{real:r,imag:s}}function q8(e,t,r,s){e[s*2]=t,e[s*2+1]=r}function X8(e,t){const r=new Float32Array(e/2),s=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);r[o]=Math.cos(a),s[o]=Math.sin(a)}return{real:r,imag:s}}function Y8(e,t,r){const s=(r?2:-2)*Math.PI*(e/t),o=Math.cos(s),a=Math.sin(s);return{real:o,imag:a}}function x4(e,t,r=0){let s=[];if(typeof t=="number")k(e.shape[r]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(e.shape[r]/t);else{const o=t.reduce((i,u)=>(u===-1&&(i+=1),i),0);k(o<=1,()=>"There should be only one negative value in split array.");const a=t.indexOf(-1);if(a!==-1){const i=t.reduce((u,l)=>l>0?u+l:u);t[a]=e.shape[r]-i}k(e.shape[r]===t.reduce((i,u)=>i+u),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(e,t){let r=!1,s;for(e<=tg?(s=e,r=!0):s=Ed(e,Math.floor(Math.sqrt(e)));!r;)s>t||s===e?r=!0:s=Ed(e,s+1);return s}function C4(e,t,r){const s=[],o=e.length;for(let a=0;a<o;a++)a!==t?s.push(e[a]):s.push(r);return s}function w4(e,t,r,s){const o=t.shape.length,a=e.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>a)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${a}).`);if(r<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${r}).`);for(let d=0;d<s;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const i=e.shape[r],u=[];let l=1,c=1,p=1;for(let d=0;d<s;++d)u.push(e.shape[d]),l*=e.shape[d];for(let d=s;d<r;d++)u.push(e.shape[d]),c*=e.shape[d];for(let d=s;d<o;d++)u.push(t.shape[d]);for(let d=r+1;d<a;d++)u.push(e.shape[d]),p*=e.shape[d];return{batchSize:l,sliceSize:p,outerSize:c,dimSize:i,outputShape:u}}const Q8=Object.freeze(Object.defineProperty({__proto__:null,segOpComputeOptimalWindowSize:v4,computeOutShape:C4,collectGatherOpShapeInfo:w4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();const s=mr(e.shape),o=ie(e,"float32"),a=r.complex(o,s);return s.dispose(),o.dispose(),a}if(!vC(e.dtype,t))return R.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){const s=r.real(e),o=ie(s,t);return s.dispose(),o}if(t==="int32")return r.int(e);if(t==="bool"){const s=de(0,e.dtype),o=r.notEqual(e,s);return s.dispose(),o}else throw new Error(`Error in Cast: failed to cast ${e.dtype} to ${t}`)}function J8(e,t){return R.makeTensorFromDataId(e.dataId,t,e.dtype)}function ig(e){try{return e.map(t=>Qa(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function b4(e){return e.map(t=>ec(t))}const eD=Object.freeze(Object.defineProperty({__proto__:null,slice_util:VN,segment_util:Q8,castTensor:Z8,reshapeTensor:J8,fromUint8ToStringArray:ig,fromStringArrayToUint8:b4,upcastType:Xn,axesAreInnerMostDims:L0,combineLocations:Tb,computeOutAndReduceShapes:Bn,expandShapeToKeepDim:Xt,assertAxesAreInnerMostDims:Ln,getAxesPermutation:cn,getUndoAxesPermutation:mi,getInnerMostAxes:bn,getBroadcastDims:jd,getReductionAxes:st,assertAndGetBroadcastShape:ve,assertParamsConsistent:u4,computeOutShape:Yo,computeDilation2DInfo:hb,computePool2DInfo:Fs,computePool3DInfo:ci,computeConv2DInfo:ln,computeConv3DInfo:pi,computeDefaultPad:E0,tupleValuesAreOne:Zr,eitherStridesOrDilationsAreOne:lt,convertConv2DDataFormat:jo,getFusedDyActivation:pc,getFusedBiasGradient:dc,applyActivation:fc,shouldFuse:hc,PARALLELIZE_THRESHOLD:tg,computeOptimalWindowSize:mc,getImageCenter:l4,getReshaped:ng,getPermuted:rg,getReshapedPermuted:sg,getSliceBeginCoords:c4,getSliceSize:p4,prepareAndValidate:Uw,validateUpdateShape:Ww,validateInput:Gw,calculateShapes:b0,SELU_SCALEALPHA:og,SELU_SCALE:ag,ERF_P:d4,ERF_A1:f4,ERF_A2:h4,ERF_A3:m4,ERF_A4:g4,ERF_A5:y4,warn:xi,log:W8,mergeRealAndImagArrays:qd,splitRealAndImagArrays:G8,complexWithEvenIndex:j8,complexWithOddIndex:H8,getComplexWithIndex:K8,assignToTypedArray:q8,exponents:X8,exponent:Y8,prepareSplitSize:x4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4={kernelName:Ah,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,yi(ie(r,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tD={kernelName:Rh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>{const s=tt(ie(r,"float32")),o=gr(ce(de(1),s));return rt(Ce(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nD={kernelName:Ph,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>{const s=gr(ce(tt(ie(r,"float32")),1));return Ce(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rD={kernelName:Ql,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{let u=e;const l=st(r.shape,o);return l.length>0&&(u=he(u,l)),F(u,r.shape)},b:()=>{let u=e;const l=st(s.shape,o);return l.length>0&&(u=he(u,l)),F(u,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sD={kernelName:Oh,saveAllInputs:!0,gradFunc:(e,t)=>{const r={};return t.forEach((s,o)=>{r[o]=()=>e.clone()}),r}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oD={kernelName:Fh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>We(r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aD={kernelName:Bh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>We(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iD={kernelName:Lh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,gr(ce(de(1),tt(ie(r,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uD={kernelName:zh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>{const s=gr(Ue(de(1),tt(ie(r,"float32"))));return Ce(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lD={kernelName:Uh,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{const u=Ue(tt(r),tt(s));let l=q(e,Ce(s,u));const c=st(r.shape,o);return c.length>0&&(l=he(l,c)),F(l,r.shape)},b:()=>{const u=Ue(tt(r),tt(s));let l=rt(q(e,Ce(r,u)));const c=st(s.shape,o);return c.length>0&&(l=he(l,c)),F(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cD={kernelName:Mh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,Ue(tt(ie(r,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pD={kernelName:Vh,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,ce(de(1),tt(ie(r,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dD(e,t,r,s,o=[1,1,1],a,i){const u=_(e,"dy","avgPool3dGrad"),l=_(t,"input","avgPool3dGrad");let c=u,p=l,d=!1;l.rank===4&&(d=!0,c=F(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=F(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),k(c.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),k(p.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${p.rank}.`),k(lt(s,o),()=>`Error in avgPool3dGrad: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`),i!=null&&k(ut(a),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`);const f={dy:c,input:p},h={filterSize:r,strides:s,dilations:o,pad:a,dimRoundingMode:i},m=R.runKernel(DC,f,h);return d?F(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const fD=I({avgPool3dGrad_:dD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hD={kernelName:Gh,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{filterSize:o,strides:a,dilations:i,pad:u,dimRoundingMode:l}=r,c=i==null?[1,1,1]:i;return{x:()=>fD(e,s,o,a,c,u,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(e,t,r,s,o){const a=_(e,"dy","avgPoolGrad"),i=_(t,"input","avgPoolGrad");k(i.rank===a.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`);let u=i,l=a,c=!1;i.rank===3&&(c=!0,u=F(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=F(a,[1,a.shape[0],a.shape[1],a.shape[2]])),k(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),k(u.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${u.rank}.`);const p={dy:l,input:u},d={filterSize:r,strides:s,pad:o},f=R.runKernel(IC,p,d);return c?F(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const gD=I({avgPoolGrad_:mD});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yD={kernelName:Wh,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{filterSize:o,strides:a,pad:i}=r;return{x:()=>gD(e,s,o,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xD={kernelName:jh,inputsToSave:["a","b"],gradFunc:(e,t,r)=>{const[s,o]=t,{transposeA:a,transposeB:i}=r;return!a&&!i?{a:()=>Ie(e,o,!1,!0),b:()=>Ie(s,e,!0,!1)}:!a&&i?{a:()=>Ie(e,o,!1,!1),b:()=>Ie(e,s,!0,!1)}:a&&!i?{a:()=>Ie(o,e,!1,!0),b:()=>Ie(s,e,!1,!1)}:{a:()=>Ie(o,e,!0,!0),b:()=>Ie(e,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vD={kernelName:Hh,gradFunc:(e,t,r)=>{const{blockShape:s,crops:o}=r;return{x:()=>lc(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CD={kernelName:NE,gradFunc:(e,t,r)=>{const s=r,o=s.inputShape,a=s.shape,i=Array.from(a);for(let l=o.length-1;l>=0;l--)if(o[l]===a[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${a}].`);const u=[];for(let l=0;l<i.length;l++)i[l]>1&&u.push(l);return{x:()=>he(e,u,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wD={kernelName:Zl,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bD={kernelName:Kh,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $D={kernelName:qh,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{clipValueMin:o,clipValueMax:a}=r;return{x:()=>vn(Is(Bs(s,o),Ls(s,a)),e,We(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _D={kernelName:Xh,inputsToSave:["x"],gradFunc:$4.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SD={kernelName:Yh,saveAllInputs:!0,gradFunc:(e,t,r)=>{const s=t.map(l=>l.shape),{axis:o}=r,a=Ge(o,t[0].shape)[0],i=s.map(l=>l[a]);return Oo(e,i,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kD={kernelName:Qh,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{const[s,o]=t,{dilations:a,strides:i,pad:u,dataFormat:l}=r;return k(Zr(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>T0(s.shape,e,o,i,u,l),filter:()=>J0(s,e,o.shape,i,u,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ED={kernelName:Zh,inputsToSave:["dy","filter"],gradFunc:(e,t,r)=>{const[s,o]=t,{strides:a,pad:i,dataFormat:u,dimRoundingMode:l}=r;return{dy:()=>Ho(e,o,a,i,u,1,l),filter:()=>J0(e,s,o.shape,a,i,u,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ND(e,t,r,s,o){let a=e;e.rank===4&&(a=F(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;i.rank===4&&(i=F(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),k(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),k(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),k(r.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${r}.`),k(a.shape[4]===r[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${r[3]}.`),k(i.shape[4]===r[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${r[4]}).`);const u={x:a,dy:i},l={strides:s,pad:o,filterShape:r};return R.runKernel(OC,u,l)}const TD=I({conv3DBackpropFilter_:ND});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ID={kernelName:Jh,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{const{dilations:s,strides:o,pad:a}=r;k(Zr(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,u]=t;return{x:()=>BT(i.shape,e,u,o,a),filter:()=>TD(i,e,u.shape,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DD={kernelName:em,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(rt(q0(ie(r,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AD={kernelName:tm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(X0(ie(r,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RD={kernelName:nm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{axis:o,exclusive:a,reverse:i}=r;return{x:()=>{const u=cn([o],s.rank);let l=D0(e,o,a,!i);return u!=null&&(l=Qr(l,u)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PD={kernelName:rm,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{const{dilations:s,strides:o,pad:a,dimRoundingMode:i}=r,u=s==null?[1,1]:s;k(Zr(u),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${u}'`);const[l,c]=t;return k(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),k(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),k(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),k(lt(o,u),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${u}'.`),i!=null&&k(ut(a),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`),{x:()=>n4(l.shape,e,c,o,a,s,i),filter:()=>t4(l,e,c.shape,o,a,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD={kernelName:sm,inputsToSave:["x","filter"],gradFunc:(e,t,r)=>{const[s,o]=t,a={x:s,filter:o,dy:e},i={x:s,filter:o,dy:e};return{x:()=>R.runKernel(IE,a,r),filter:()=>R.runKernel(DE,i,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FD={kernelName:am,outputsToSave:[!0],gradFunc:(e,t)=>{const[r]=t,s={dy:e,y:r};return{x:()=>R.runKernel(UC,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BD={kernelName:im,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t,s=q(Cn(rt(tt(r))),2/Math.sqrt(Math.PI));return{x:()=>q(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LD={kernelName:um,outputsToSave:[!0],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zD={kernelName:lm,inputsToSave:["input"],gradFunc:(e,t)=>{const[r]=t;return{input:()=>F(e,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MD={kernelName:cm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,Cn(r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD={kernelName:pm,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD={kernelName:dm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{const u=Ce(e,ie(s,"float32")),l=st(r.shape,o);return l.length>0?F(he(u,l),r.shape):u},b:()=>{let u=q(e,ie(r,"float32"));const l=st(s.shape,o);l.length>0&&(u=F(he(u,l),s.shape));const c=tt(s);return rt(Ce(u,ie(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WD={kernelName:fm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,r)=>{const{varianceEpsilon:s}=r,[o,a,i,u]=t,l=u==null?de(1):u,c=st(a.shape,o.shape),p=[];if(a.rank===1){for(let $=0;$<o.shape.length-1;++$)p.push(o.shape[$]);p.push(1)}const d=ce(o,a),f=q(e,l),h=K0(Ue(i,de(s))),m=q(q(q(h,h),h),de(-.5));return{x:()=>a.rank===1?F(q(q(e,vo(F(h,[1,1,1,a.shape[0]]),p)),l),o.shape):F(q(q(e,h),l),o.shape),mean:()=>{let $=q(q(h,de(-1)),f);return a.rank===1&&($=he($,c)),F($,a.shape)},variance:()=>{let $=q(q(m,d),f);return a.rank===1&&($=he($,c)),F($,a.shape)},scale:()=>{const $=q(d,h);let b=q(e,$);return a.rank===1&&(b=he(b,c)),F(b,a.shape)},offset:()=>{let $=e;return a.rank===1&&($=he($,c)),F($,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GD={kernelName:hm,inputsToSave:["x","indices"],gradFunc:(e,t,r)=>{const[s,o]=t,{axis:a}=r,i=Ge(a,s.shape)[0];return{x:()=>{const l=s.shape,c=o.size,p=l.slice(0,i),d=p.length,f=l.slice(a,l.length).slice(1),h=f.length,m=Ny(0,d),g=Ny(d+1,d+1+h),x=Ty([p,[c],f]),y=F(e,x),v=F(o,[c]),w=Ty([[d],m,g]),$=Qr(y,w);let b=Yb($,v,s.shape[i]);const T=mi(w);return b=Qr(b,T),b},indices:()=>o}}};function Ny(e,t){const r=[];for(let s=e;s<t;++s)r.push(s);return r}function Ty(e){const t=[];for(let r=0;r<e.length;++r)for(let s=0;s<e[r].length;++s)t.push(e[r][s]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jD={kernelName:mm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t;return{a:()=>We(r),b:()=>We(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HD={kernelName:gm,gradFunc:e=>({x:()=>ie(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KD={kernelName:ym,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qD={kernelName:xm,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XD={kernelName:vm,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YD={kernelName:Cm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{alpha:o}=r,a=xr(s,0);return{x:()=>vn(a,e,q(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QD={kernelName:bm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,Ue(r,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZD={kernelName:wm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,ie(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JD={kernelName:AE,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,r)=>{const[s]=t,{axis:o}=r;return{logits:()=>{const i=Cn(s);return ce(e,q(he(e,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6(e,t,r,s=5,o=1,a=1,i=.5){const u={x:e,y:t,dy:r},l={depthRadius:s,bias:o,alpha:a,beta:i};return R.runKernel(rw,u,l)}const t6=I({localResponseNormalizationBackprop_:e6});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6={kernelName:$m,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{const[s,o]=t,{depthRadius:a,bias:i,alpha:u,beta:l}=r;return{x:()=>t6(s,o,e,a,i,u,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4(e,t,r,s){return t.rank<r.rank&&(t=F(t,Xt(t.shape,s))),e.rank<r.rank&&(e=F(e,Xt(e.shape,s))),{x:()=>q(e,ie(hi(r,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iy={kernelName:_m,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{const s=r,{reductionIndices:o}=s,a=t[0],i=t[1],u=Ge(o,a.shape),l=_4(e,i,a,u);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6={kernelName:Sm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t;return{a:()=>q(e,ie(Bs(r,s),"float32")),b:()=>q(e,ie(sc(r,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6(e,t,r,s,o,a=[1,1,1],i,u){const l=_(e,"dy","maxPool3dGrad"),c=_(t,"input","maxPool3dGrad"),p=_(r,"output","maxPool3dGrad");let d=l,f=c,h=p,m=!1;c.rank===4&&(m=!0,d=F(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=F(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=F(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),k(d.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${d.rank}.`),k(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),k(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),k(lt(o,a),()=>`Error in maxPool3dGrad: Either strides or dilations must be 1. Got strides ${o} and dilations '${a}'`),u!=null&&k(ut(i),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${u} but got pad ${i}.`);const g={dy:d,input:f,output:h},x={filterSize:s,strides:o,dilations:a,pad:i,dimRoundingMode:u},y=R.runKernel(ow,g,x);return m?F(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const o6=I({maxPool3dGrad_:s6});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6={kernelName:Em,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{const[s,o]=t,{filterSize:a,strides:i,dilations:u,pad:l,dimRoundingMode:c}=r,p=u==null?[1,1,1]:u;return{x:()=>o6(e,s,o,a,i,p,l,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6(e,t,r,s,o,a,i){const u=_(e,"dy","maxPoolGrad"),l=_(t,"input","maxPoolGrad"),c=_(r,"output","maxPoolGrad");k(l.rank===u.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${u.rank})`),k(u.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),k(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),i!=null&&k(ut(a),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${i} but got pad ${a}.`);const p={dy:u,input:l,output:c},d={filterSize:s,strides:o,pad:a,dimRoundingMode:i};return R.runKernel(sw,p,d)}const u6=I({maxPoolGrad_:i6});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6={kernelName:km,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{const[s,o]=t,{filterSize:a,strides:i,pad:u}=r;return{x:()=>u6(e,s,o,a,i,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6={kernelName:Nm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{axis:o}=r,a=Ge(o,s.shape),u=Bn(s.shape,a)[1],l=ne(u);return{x:()=>{const p=s.shape.slice();a.forEach(h=>{p[h]=1});const d=F(e,p);return Ce(q(d,Ko(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6={kernelName:Tm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,r)=>{const s=r,{axis:o}=s,[a,i]=t,u=Ge(o,a.shape),l=_4(e,i,a,u);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6={kernelName:Im,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t;return{a:()=>q(e,ie(Ls(r,s),"float32")),b:()=>q(e,ie(xr(r,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6={kernelName:Dm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const s=t[0],{paddings:o}=r,a=o.map(i=>i[0]);return{x:()=>Ne(e,a,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h6={kernelName:Am,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{const u=st(r.shape,o);return u.length>0?F(he(e,u),r.shape):e},b:()=>{const u=q(e,rt(R0(Ce(r,s)))),l=st(s.shape,o);return l.length>0?F(he(u,l),s.shape):u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6={kernelName:Rm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{const u=q(e,ie(s,"float32")),l=st(r.shape,o);return l.length>0?F(he(u,l),r.shape):u},b:()=>{const u=q(e,ie(r,"float32")),l=st(s.shape,o);return l.length>0?F(he(u,l),s.shape):u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6={kernelName:Pm,gradFunc:e=>({x:()=>rt(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6={kernelName:Fm,inputsToSave:["indices"],gradFunc:(e,t)=>{const r=t[0];return{indices:()=>mr(r.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6={kernelName:Om,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6={kernelName:Bm,saveAllInputs:!0,gradFunc:(e,t,r)=>{const{axis:s}=r;return vr(e,s).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dy={kernelName:Lm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const s=t[0],{paddings:o}=r,a=o.map(i=>i[0]);return{x:()=>Ne(e,a,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6={kernelName:zm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[r,s,o]=t,a=r,i=s,u=ve(a.shape,i.shape);return{a:()=>{const p=ie(i,"float32");let d=q(e,q(p,qo(a,ce(p,de(1)))));const f=st(a.shape,u);return f.length>0&&(d=he(d,f)),F(d,a.shape)},b:()=>{const p=xr(a,0),d=vn(p,Ts(a),We(a));let f=q(e,q(o,d));const h=st(i.shape,u);return h.length>0&&(f=he(f,h)),F(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6={kernelName:Mm,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[r,s]=t,o=xr(r,0);return{x:()=>vn(o,e,q(e,s)),alpha:()=>{let a=vn(o,We(e),q(e,r));const i=st(s.shape,e.shape);return i.length>0&&(a=he(a,i)),F(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6={kernelName:om,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{const u=Ce(e,ie(s,"float32")),l=st(r.shape,o);return l.length>0?F(he(u,l),r.shape):u},b:()=>{let u=q(e,ie(r,"float32"));const l=st(s.shape,o);l.length>0&&(u=F(he(u,l),s.shape));const c=tt(s);return rt(Ce(u,ie(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $6={kernelName:Vm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,rt(tt(r)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6={kernelName:Hm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t,s=q(Ls(r,6),yi(r));return{x:()=>q(e,ie(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6={kernelName:Um,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,ie(yi(r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6={kernelName:Wm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>F(e,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6={kernelName:jm,inputsToSave:["images"],gradFunc:(e,t,r)=>{const[s]=t,o={dy:e,images:s};return{images:()=>R.runKernel(gw,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6={kernelName:Gm,inputsToSave:["images"],gradFunc:(e,t,r)=>{const[s]=t,o={dy:e,images:s};return{images:()=>R.runKernel(mw,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6={kernelName:Km,gradFunc:(e,t,r)=>{const{dims:s}=r,o=Ge(s,e.shape);return{x:()=>Po(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6={kernelName:qm,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6={kernelName:Xm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>rt(Ce(e,q(qo(r,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6={kernelName:Ym,inputsToSave:["condition"],gradFunc:(e,t)=>{const[r]=t;return{condition:()=>ie(We(r),"float32"),t:()=>q(e,ie(r,e.dtype)),e:()=>q(e,ie(oc(r),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6={kernelName:Qm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>{const s=xr(r,de(0)),o=de(og),a=de(ag),i=q(e,a),u=q(q(e,o),Cn(ie(r,"float32")));return vn(s,i,u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P6={kernelName:n0,outputsToSave:[!0],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,q(r,ce(de(1),r)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6={kernelName:t0,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6={kernelName:Jm,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(rc(ie(r,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6={kernelName:e0,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(I0(ie(r,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L6={kernelName:Zm,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{begin:o,size:a}=r,i=s.shape,[u,l]=S0(s,o,a),c=[];for(let p=0;p<e.rank;p++)c.push([u[p],i[p]-u[p]-l[p]]);return{x:()=>W0(e,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6={kernelName:u0,outputsToSave:[!0],gradFunc:(e,t,r)=>{const[s]=t,{dim:o}=r,a=!0,i=q(e,s);return{logits:()=>ce(i,q(he(i,[o],a),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6={kernelName:r0,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,di(r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ay={kernelName:a0,gradFunc:(e,t,r)=>{const{blockShape:s,paddings:o}=r;return{x:()=>nc(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ry={kernelName:i0,gradFunc:(e,t,r)=>{const{axis:s}=r;return{x:()=>nt(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6={kernelName:s0,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,q(gr(ie(r,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6={kernelName:xw,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(e,q(ie(r,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6={kernelName:l0,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=de(2);return{a:()=>q(e,q(o,ce(r,s))),b:()=>q(e,q(o,ce(s,r)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6={kernelName:y0,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6={kernelName:c0,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[r,s]=t,o=ve(r.shape,s.shape);return{a:()=>{let u=e;const l=st(r.shape,o);return l.length>0&&(u=he(u,l)),F(u,r.shape)},b:()=>{let u=e;const l=st(s.shape,o);return l.length>0&&(u=he(u,l)),F(rt(u),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6={kernelName:o0,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,o=s.shape.slice(),{axis:a}=r;Ge(a,s.shape).forEach(c=>{o[c]=1});const u=F(e,o),l=q(u,Ko(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6={kernelName:p0,inputsToSave:["x"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>Ce(e,tt(rc(r)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q6={kernelName:d0,outputsToSave:[!0],gradFunc:(e,t)=>{const[r]=t;return{x:()=>q(ce(de(1),tt(r)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6={kernelName:Jl,inputsToSave:["x"],gradFunc:(e,t,r)=>{const[s]=t,{reps:o}=r;return{x:()=>{let i=We(s);if(s.rank===1)for(let u=0;u<o[0];++u)i=Ue(i,Ne(e,[u*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let u=0;u<o[0];++u)for(let l=0;l<o[1];++l)i=Ue(i,Ne(e,[u*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let u=0;u<o[0];++u)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)i=Ue(i,Ne(e,[u*s.shape[0],l*s.shape[1],c*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let u=0;u<o[0];++u)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let p=0;p<o[3];++p)i=Ue(i,Ne(e,[u*s.shape[0],l*s.shape[1],c*s.shape[2],p*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6={kernelName:f0,gradFunc:(e,t,r)=>{const s=r,{perm:o}=s,a=mi(o);return{x:()=>Qr(e,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6={kernelName:h0,gradFunc:(e,t,r)=>{const s=r,{axis:o}=s;return{value:()=>Fn(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6={kernelName:m0,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[r]=t;return{x:()=>J6(e,r)}}};function J6(e,t){const r=ac(t,We(t)),s=el(e,r);let o=Bs(t,de(0,"int32"));const a=s.rank-o.rank;for(let u=0;u<a;++u)o=er(o,u+1);o=Is(o,Ko(s.shape,"bool"));const i=We(s);return vn(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eA={kernelName:g0,gradFunc:e=>({x:()=>We(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tA=[$4,tD,nD,rD,sD,oD,aD,iD,uD,lD,cD,pD,hD,yD,xD,vD,CD,wD,bD,$D,_D,SD,ED,kD,ID,DD,AD,RD,PD,OD,b6,FD,BD,LD,zD,MD,UD,VD,WD,GD,jD,HD,KD,qD,XD,YD,QD,ZD,JD,n6,Iy,Iy,r6,a6,l6,c6,p6,d6,f6,h6,m6,g6,y6,x6,v6,Dy,Dy,C6,w6,$6,_6,S6,k6,E6,N6,T6,I6,D6,A6,R6,P6,O6,F6,B6,L6,z6,M6,Ay,Ay,Ry,Ry,V6,W6,U6,G6,j6,H6,K6,q6,X6,Y6,Q6,Z6,eA];for(const e of tA)PE(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.abs=function(){return this.throwIfDisposed(),en(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.acos=function(){return this.throwIfDisposed(),rb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.acosh=function(){return this.throwIfDisposed(),sb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.addStrict=function(e){return this.throwIfDisposed(),S5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.add=function(e){return this.throwIfDisposed(),Ue(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.all=function(e,t){return this.throwIfDisposed(),ob(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.any=function(e,t){return this.throwIfDisposed(),ab(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.argMax=function(e){return this.throwIfDisposed(),ib(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.argMin=function(e){return this.throwIfDisposed(),ub(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.asScalar=function(){return this.throwIfDisposed(),k(this.size===1,()=>"The array must have only 1 element."),F(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.asType=function(e){return this.throwIfDisposed(),ie(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.as1D=function(){return this.throwIfDisposed(),F(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.as2D=function(e,t){return this.throwIfDisposed(),F(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),F(this,[e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.as4D=function(e,t,r,s){return this.throwIfDisposed(),F(this,[e,t,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.as5D=function(e,t,r,s,o){return this.throwIfDisposed(),F(this,[e,t,r,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.asin=function(){return this.throwIfDisposed(),lb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.asinh=function(){return this.throwIfDisposed(),cb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.atan=function(){return this.throwIfDisposed(),pb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.atan2=function(e){return this.throwIfDisposed(),db(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.atanh=function(){return this.throwIfDisposed(),fb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.avgPool=function(e,t,r,s){return this.throwIfDisposed(),N0(this,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),nc(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.batchNorm=function(e,t,r,s,o){return this.throwIfDisposed(),Gd(this,e,t,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.broadcastTo=function(e){return this.throwIfDisposed(),Ju(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.cast=function(e){return this.throwIfDisposed(),ie(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.ceil=function(){return this.throwIfDisposed(),gb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),yb(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof P&&(e=[e]),nt([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.conv1d=function(e,t,r,s,o,a){return this.throwIfDisposed(),vb(this,e,t,r,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.conv2dTranspose=function(e,t,r,s,o){return this.throwIfDisposed(),Cb(this,e,t,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.conv2d=function(e,t,r,s,o,a){return this.throwIfDisposed(),Ho(this,e,t,r,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.cos=function(){return this.throwIfDisposed(),rc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.cosh=function(){return this.throwIfDisposed(),I0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.cumsum=function(e,t,r){return this.throwIfDisposed(),D0(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),wb(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.depthwiseConv2D=function(e,t,r,s,o,a){return gt("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),fi(this,e,t,r,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.depthwiseConv2d=function(e,t,r,s,o,a){return this.throwIfDisposed(),fi(this,e,t,r,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.dilation2d=function(e,t,r,s,o){return this.throwIfDisposed(),bb(this,e,t,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.divNoNan=function(e){return this.throwIfDisposed(),$b(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.divStrict=function(e){return this.throwIfDisposed(),k5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.div=function(e){return this.throwIfDisposed(),Ce(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.dot=function(e){return this.throwIfDisposed(),QT(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.elu=function(){return this.throwIfDisposed(),A0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.equalStrict=function(e){return this.throwIfDisposed(),c5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.equal=function(e){return this.throwIfDisposed(),hi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.erf=function(){return this.throwIfDisposed(),_b(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.exp=function(){return this.throwIfDisposed(),Cn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.expandDims=function(e){return this.throwIfDisposed(),er(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.expm1=function(){return this.throwIfDisposed(),Sb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.fft=function(){return this.throwIfDisposed(),Y0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.flatten=function(){return this.throwIfDisposed(),F(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.floor=function(){return this.throwIfDisposed(),R0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.floorDiv=function(e){return this.throwIfDisposed(),k0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.gather=function(e,t){return this.throwIfDisposed(),el(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),p5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Bs(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.greaterStrict=function(e){return this.throwIfDisposed(),d5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.greater=function(e){return this.throwIfDisposed(),xr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.ifft=function(){return this.throwIfDisposed(),rl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.irfft=function(){return this.throwIfDisposed(),Hb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.isFinite=function(){return this.throwIfDisposed(),dI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.isInf=function(){return this.throwIfDisposed(),hI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.isNaN=function(){return this.throwIfDisposed(),gI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.leakyRelu=function(e){return this.throwIfDisposed(),O0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),f5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ls(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.lessStrict=function(e){return this.throwIfDisposed(),h5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.less=function(e){return this.throwIfDisposed(),sc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.localResponseNormalization=function(e,t,r,s){return this.throwIfDisposed(),Eb(this,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logSigmoid=function(){return this.throwIfDisposed(),EI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logSoftmax=function(e){return this.throwIfDisposed(),Nb(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Ib(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.log=function(){return this.throwIfDisposed(),Ts(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.log1p=function(){return this.throwIfDisposed(),F0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Is(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logicalNot=function(){return this.throwIfDisposed(),oc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logicalOr=function(e){return this.throwIfDisposed(),z0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.logicalXor=function(e){return this.throwIfDisposed(),BI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.matMul=function(e,t,r){return this.throwIfDisposed(),Ie(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.maxPool=function(e,t,r,s){return this.throwIfDisposed(),M0(this,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.max=function(e,t){return this.throwIfDisposed(),ys(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.maximumStrict=function(e){return this.throwIfDisposed(),E5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.maximum=function(e){return this.throwIfDisposed(),ac(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.mean=function(e,t){return this.throwIfDisposed(),V0(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.min=function(e,t){return this.throwIfDisposed(),tl(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.minimumStrict=function(e){return this.throwIfDisposed(),N5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.minimum=function(e){return this.throwIfDisposed(),ic(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Db(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.modStrict=function(e){return this.throwIfDisposed(),T5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.mod=function(e){return this.throwIfDisposed(),U0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.mulStrict=function(e){return this.throwIfDisposed(),I5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.mul=function(e){return this.throwIfDisposed(),q(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.neg=function(){return this.throwIfDisposed(),rt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.norm=function(e,t,r){return this.throwIfDisposed(),Z0(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),m5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.notEqual=function(e){return this.throwIfDisposed(),uc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.oneHot=function(e,t=1,r=0){return this.throwIfDisposed(),Mw(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.onesLike=function(){return this.throwIfDisposed(),Ab(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.pad=function(e,t){return this.throwIfDisposed(),W0(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.pool=function(e,t,r,s,o){return this.throwIfDisposed(),o9(this,e,t,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.powStrict=function(e){return this.throwIfDisposed(),D5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.pow=function(e){return this.throwIfDisposed(),qo(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.prelu=function(e){return this.throwIfDisposed(),G0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.prod=function(e,t){return this.throwIfDisposed(),j0(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.reciprocal=function(){return this.throwIfDisposed(),Vb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.relu=function(){return this.throwIfDisposed(),gi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.relu6=function(){return this.throwIfDisposed(),H0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.reshapeAs=function(e){return this.throwIfDisposed(),F(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.reshape=function(e){return this.throwIfDisposed(),F(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.resizeBilinear=function(e,t,r){return this.throwIfDisposed(),a4(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.resizeNearestNeighbor=function(e,t,r){return this.throwIfDisposed(),i4(this,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.reverse=function(e){return this.throwIfDisposed(),Po(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.rfft=function(){return this.throwIfDisposed(),Q0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.round=function(){return this.throwIfDisposed(),Ub(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.rsqrt=function(){return this.throwIfDisposed(),K0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.selu=function(){return this.throwIfDisposed(),Wb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.separableConv2d=function(e,t,r,s,o,a){return this.throwIfDisposed(),D9(this,e,t,r,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sigmoid=function(){return this.throwIfDisposed(),di(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sign=function(){return this.throwIfDisposed(),Gb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sin=function(){return this.throwIfDisposed(),q0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sinh=function(){return this.throwIfDisposed(),X0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.slice=function(e,t){return this.throwIfDisposed(),Ne(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.softmax=function(e){return this.throwIfDisposed(),jb(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.softplus=function(){return this.throwIfDisposed(),B0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),lc(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.split=function(e,t){return this.throwIfDisposed(),Oo(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sqrt=function(){return this.throwIfDisposed(),gr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.square=function(){return this.throwIfDisposed(),tt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.squaredDifference=function(e){return this.throwIfDisposed(),cc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),A5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.squeeze=function(e){return this.throwIfDisposed(),Ja(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.stack=function(e,t){this.throwIfDisposed();const r=e instanceof P?[this,e]:[this,...e];return Fn(r,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.step=function(e){return this.throwIfDisposed(),yi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.stridedSlice=function(e,t,r,s,o,a,i,u){return this.throwIfDisposed(),Kb(this,e,t,r,s,o,a,i,u)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.subStrict=function(e){return this.throwIfDisposed(),R5(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sub=function(e){return this.throwIfDisposed(),ce(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.sum=function(e,t){return this.throwIfDisposed(),he(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.tan=function(){return this.throwIfDisposed(),qb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.tanh=function(){return this.throwIfDisposed(),mb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.tile=function(e){return this.throwIfDisposed(),vo(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.toBool=function(){return this.throwIfDisposed(),ie(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.toFloat=function(){return this.throwIfDisposed(),ie(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.toInt=function(){return this.throwIfDisposed(),ie(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.topk=function(e,t){return this.throwIfDisposed(),Xb(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.transpose=function(e){return this.throwIfDisposed(),Qr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.unique=function(e){return this.throwIfDisposed(),Kd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Yb(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.unstack=function(e){return this.throwIfDisposed(),vr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.where=function(e,t){return this.throwIfDisposed(),vn(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P.prototype.zerosLike=function(){return this.throwIfDisposed(),We(this)};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var kn;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(kn||(kn={}));var Py;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(Py||(Py={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nA={};function S4(e){return nA[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C(e,t,r,s,o){const a=t.inputParams[e];if(a&&a.inputIndexStart!==void 0){const u=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?u+1:a.inputIndexEnd;if(a.type==="tensor")return Ot(t.inputNames[a.inputIndexStart],r,s,o);if(a.type==="tensors")return t.inputNames.slice(u,l).map(f=>Ot(f,r,s,o));const c=Ot(t.inputNames.slice(u)[0],r,s,o),p=c.dataSync();return a.type==="number"?p[0]:Nd(c.shape,p)}const i=t.attrParams[e];return i&&i.value}function Ot(e,t,r,s){const[o,a]=Mt(e);if(s!=null){const u=s.getHashTableHandleByName(o);if(u!=null)return u}const i=r.currentContextIds.find(u=>!!t[sl(o,u)]);return i!==void 0?t[sl(o,i)][a]:void 0}function rA(e,t,r){return t[sl(e,r.currentContextId)]}function tr(e,t){const[r,s]=Mt(e);return[sl(r,t&&t.currentContextId),s]}function sl(e,t){return t?`${e}-${t}`:e}function Mt(e){const t=e.split(":");return t.length===1?[e,0]:[t[0],Number(t[t.length-1])]}function yu(e,t,r){let s=C("pad",e,t,r);if(s==="explicit"){s=C("explicitPaddings",e,t,r);const o=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)o[a][0]=s[a*2],o[a][1]=s[a*2+1];return o}return s}function nr(e){return e.kept?e:ms(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sA=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],oA=Object.freeze(Object.defineProperty({__proto__:null,json:sA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aA=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],iA=Object.freeze(Object.defineProperty({__proto__:null,json:aA},Symbol.toStringTag,{value:"Module"})),uA=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],lA=Object.freeze(Object.defineProperty({__proto__:null,json:uA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cA=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],pA=Object.freeze(Object.defineProperty({__proto__:null,json:cA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dA=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],fA=Object.freeze(Object.defineProperty({__proto__:null,json:dA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hA=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mA=Object.freeze(Object.defineProperty({__proto__:null,json:hA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gA=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],yA=Object.freeze(Object.defineProperty({__proto__:null,json:gA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xA=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],vA=Object.freeze(Object.defineProperty({__proto__:null,json:xA},Symbol.toStringTag,{value:"Module"})),CA=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],wA=Object.freeze(Object.defineProperty({__proto__:null,json:CA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bA=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],$A=Object.freeze(Object.defineProperty({__proto__:null,json:bA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _A=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],SA=Object.freeze(Object.defineProperty({__proto__:null,json:_A},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kA=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],EA=Object.freeze(Object.defineProperty({__proto__:null,json:kA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NA=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],TA=Object.freeze(Object.defineProperty({__proto__:null,json:NA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IA=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],DA=Object.freeze(Object.defineProperty({__proto__:null,json:IA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AA=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],RA=Object.freeze(Object.defineProperty({__proto__:null,json:AA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PA=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],OA=Object.freeze(Object.defineProperty({__proto__:null,json:PA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FA=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],BA=Object.freeze(Object.defineProperty({__proto__:null,json:FA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oy{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[oA,iA,lA,pA,fA,mA,yA,SA,$A,vA,EA,TA,DA,RA,OA,BA,wA],r=[].concat(...t.map(s=>s.json));this.opMappers=r.reduce((s,o)=>(s[o.tfOpName]=o,s),{})}transformGraph(t,r={}){const s=t.node,o=[],a=[],i=[],u=s.reduce((g,x)=>(g[x.name]=this.mapNode(x),x.op.startsWith("Placeholder")?o.push(g[x.name]):x.op==="Const"?a.push(g[x.name]):(x.input==null||x.input.length===0)&&i.push(g[x.name]),g),{});let l=[];const c=[];let p={},d={};r!=null&&(p=this.mapSignatureEntries(r.inputs),d=this.mapSignatureEntries(r.outputs));const f=Object.keys(u);f.forEach(g=>{const x=u[g];x.inputNames.forEach(y=>{const[v]=tr(y);x.inputs.push(u[v]),u[v].children.push(x)})}),Object.keys(d).length===0?f.forEach(g=>{const x=u[g];x.children.length===0&&c.push(x)}):Object.keys(d).forEach(g=>{const[x]=tr(g),y=u[x];y!=null&&(y.signatureKey=d[g],c.push(y))}),Object.keys(p).length>0?Object.keys(p).forEach(g=>{const[x]=tr(g),y=u[x];y&&(y.signatureKey=p[g],l.push(y))}):l=o;let h={};t.library!=null&&t.library.function!=null&&(h=t.library.function.reduce((g,x)=>(g[x.signature.name]=this.mapFunction(x),g),{}));const m={nodes:u,inputs:l,outputs:c,weights:a,placeholders:o,signature:r,functions:h};return i.length>0&&(m.initNodes=i),m}mapSignatureEntries(t){return Object.keys(t||{}).reduce((r,s)=>(r[t[s].name]=s,r),{})}mapNode(t){const r=S4(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const s={name:t.name,op:t.op,category:r.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.substr(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return r.inputs!=null&&(s.inputParams=r.inputs.reduce((o,a)=>(o[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},o),{})),r.attrs!=null&&(s.attrParams=r.attrs.reduce((o,a)=>{const i=a.type;let u;switch(a.type){case"string":u=Xd(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=Xd(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":u=nf(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=nf(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":u=Qd(t.attr,a.tfName,a.defaultValue||0),u===void 0&&!!a.tfDeprecatedName&&(u=Qd(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":u=tf(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=tf(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":u=Yd(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=Yd(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":u=sf(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=sf(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":u=ef(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=ef(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":u=rf(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=rf(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":u=Zd(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=Zd(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":u=Jd(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=Jd(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":u=Fy(t.attr,a.tfName,a.defaultValue),u===void 0&&!!a.tfDeprecatedName&&(u=Fy(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${t.op}`)}return o[a.name]={value:u,type:i},o},{})),s}mapFunction(t){const r=t.nodeDef,s=[],o=[];let a={};r!=null&&(a=r.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&o.push(d[f.name]),d),{}));const i=[],u=[];t.signature.inputArg.forEach(d=>{const[f]=tr(d.name),h={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:ug(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,i.push(h),a[f]=h}),Object.keys(a).forEach(d=>{const f=a[d];f.inputNames.forEach(h=>{const[m]=tr(h);f.inputs.push(a[m]),a[m].children.push(f)})});const c=t.ret;t.signature.outputArg.forEach(d=>{const[f,h]=tr(c[d.name]),m=a[f];m!=null&&(m.defaultOutput=h,u.push(m))});const p=this.mapArgsToSignature(t);return{nodes:a,inputs:i,outputs:u,weights:o,placeholders:s,signature:p}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((r,s)=>(r[s.name]=this.mapArgToTensorInfo(s),r),{}),outputs:t.signature.outputArg.reduce((r,s)=>(r[s.name]=this.mapArgToTensorInfo(s,t.ret),r),{})}}mapArgToTensorInfo(t,r){let s=t.name;return r!=null&&(s=r[s]),{name:s,dtype:t.type}}}function LA(e){const t=K().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function k4(e,t){const r=Array.isArray(e)?String.fromCharCode.apply(null,e):LA(e);return t?r:r.toLowerCase()}function Xd(e,t,r,s=!1){const o=e[t];return o!=null?k4(o.s,s):r}function Yd(e,t,r){const s=e[t];return s?s.b:r}function Qd(e,t,r){const s=e[t]||{},o=s.i!=null?s.i:s.f!=null?s.f:r;return typeof o=="number"?o:parseInt(o,10)}function ug(e){switch(typeof e=="string"&&(e=kn[e]),e){case kn.DT_FLOAT:return"float32";case kn.DT_INT32:case kn.DT_INT64:case kn.DT_INT8:case kn.DT_UINT8:return"int32";case kn.DT_BOOL:return"bool";case kn.DT_DOUBLE:return"float32";case kn.DT_STRING:return"string";default:return null}}function Fy(e,t,r){const s=e[t];return s&&s.func?s.func.name:r}function Zd(e,t,r){const s=e[t];return s&&s.type?ug(s.type):r}function Jd(e,t,r){const s=e[t];return s&&s.list&&s.list.type?s.list.type.map(o=>ug(o)):r}function E4(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function ef(e,t,r){const s=e[t];return s&&s.shape?E4(s.shape):r}function tf(e,t,r){const s=e[t];return s?((s.list.f&&s.list.f.length?s.list.f:s.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):r}function nf(e,t,r,s=!1){const o=e[t];return o&&o.list&&o.list.s?o.list.s.map(a=>k4(a,s)):r}function rf(e,t,r){const s=e[t];return s&&s.list&&s.list.shape?s.list.shape.map(o=>E4(o)):r}function sf(e,t,r){const s=e[t];return s&&s.list&&s.list.b?s.list.b:r}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zA{constructor(t,r,s){this.node=t,this.tensorMap=r,this.context=s,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,a)=>(o[a]=this.getAttr(a),o),{}))}getInput(t){return Ot(t,this.tensorMap,this.context)}getAttr(t,r){const s=this.node.rawAttrs[t];if(s.tensor!=null)return Ot(t,this.tensorMap,this.context);if(s.i!=null||s.f!=null)return Qd(this.node.rawAttrs,t,r);if(s.s!=null)return Xd(this.node.rawAttrs,t,r);if(s.b!=null)return Yd(this.node.rawAttrs,t,r);if(s.shape!=null)return ef(this.node.rawAttrs,t,r);if(s.type!=null)return Zd(this.node.rawAttrs,t,r);if(s.list!=null){if(s.list.i!=null||s.list.f!=null)return tf(this.node.rawAttrs,t,r);if(s.list.s!=null)return nf(this.node.rawAttrs,t,r);if(s.list.shape!=null)return rf(this.node.rawAttrs,t,r);if(s.list.b!=null)return sf(this.node.rawAttrs,t,r);if(s.list.type!=null)return Jd(this.node.rawAttrs,t,r)}return r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MA=(e,t,r)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Ue(C("a",e,t,r),C("b",e,t,r))];case"AddN":return[JN(C("tensors",e,t,r))];case"FloorMod":case"Mod":return[U0(C("a",e,t,r),C("b",e,t,r))];case"Mul":return[q(C("a",e,t,r),C("b",e,t,r))];case"RealDiv":case"Div":return[Ce(C("a",e,t,r),C("b",e,t,r))];case"DivNoNan":return[$b(C("a",e,t,r),C("b",e,t,r))];case"FloorDiv":return[k0(C("a",e,t,r),C("b",e,t,r))];case"Sub":return[ce(C("a",e,t,r),C("b",e,t,r))];case"Minimum":return[ic(C("a",e,t,r),C("b",e,t,r))];case"Maximum":return[ac(C("a",e,t,r),C("b",e,t,r))];case"Pow":return[qo(C("a",e,t,r),C("b",e,t,r))];case"SquaredDifference":return[cc(C("a",e,t,r),C("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VA=(e,t,r)=>{switch(e.op){case"Abs":case"ComplexAbs":return[en(C("x",e,t,r))];case"Acos":return[rb(C("x",e,t,r))];case"Acosh":return[sb(C("x",e,t,r))];case"Asin":return[lb(C("x",e,t,r))];case"Asinh":return[cb(C("x",e,t,r))];case"Atan":return[pb(C("x",e,t,r))];case"Atan2":return[db(C("x",e,t,r),C("y",e,t,r))];case"Atanh":return[fb(C("x",e,t,r))];case"Ceil":return[gb(C("x",e,t,r))];case"Complex":return[Ss(C("real",e,t,r),C("imag",e,t,r))];case"Cos":return[rc(C("x",e,t,r))];case"Cosh":return[I0(C("x",e,t,r))];case"Elu":return[A0(C("x",e,t,r))];case"Erf":return[_b(C("x",e,t,r))];case"Exp":return[Cn(C("x",e,t,r))];case"Expm1":return[Sb(C("x",e,t,r))];case"Floor":return[R0(C("x",e,t,r))];case"Log":return[Ts(C("x",e,t,r))];case"Log1p":return[F0(C("x",e,t,r))];case"Imag":return[P0(C("x",e,t,r))];case"Neg":return[rt(C("x",e,t,r))];case"Reciprocal":return[Vb(C("x",e,t,r))];case"Real":return[nl(C("x",e,t,r))];case"Relu":return[gi(C("x",e,t,r))];case"Round":return[Ub(C("x",e,t,r))];case"Selu":return[Wb(C("x",e,t,r))];case"Sigmoid":return[di(C("x",e,t,r))];case"Sin":return[q0(C("x",e,t,r))];case"Sign":return[Gb(C("x",e,t,r))];case"Sinh":return[X0(C("x",e,t,r))];case"Softplus":return[B0(C("x",e,t,r))];case"Sqrt":return[gr(C("x",e,t,r))];case"Square":return[tt(C("x",e,t,r))];case"Tanh":return[mb(C("x",e,t,r))];case"Tan":return[qb(C("x",e,t,r))];case"ClipByValue":return[yb(C("x",e,t,r),C("clipValueMin",e,t,r),C("clipValueMax",e,t,r))];case"Relu6":return[H0(C("x",e,t,r))];case"Rsqrt":return[K0(Ot(e.inputNames[0],t,r))];case"Prod":return[j0(C("x",e,t,r),C("axes",e,t,r))];case"LeakyRelu":return[O0(C("x",e,t,r),C("alpha",e,t,r))];case"Prelu":return[G0(C("x",e,t,r),C("alpha",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(e,t,r=""){k(UA(e,t),()=>r+` Shapes ${e} and ${t} must match`)}function UA(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==-1&&t[r]!==-1&&e[r]!==t[r])return!1;return!0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WA{constructor(t,r,s,o,a,i,u){this.name=t,this.dtype=r,this.maxSize=s,this.elementShape=o,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=u,this.tensors=[],this.closed_=!1,this.idTensor=de(0),Pr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(r=>{(t==null||!t.has(r.tensor.id))&&r.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const r=this.tensors[t];if(r.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(r.cleared=!0),r.read=!0,r.tensor}readMany(t){return t.map(r=>this.read(r))}write(t,r){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const s=this.tensors[t]||{};if(r.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${r.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=r.shape),pn(this.elementShape,r.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),s.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(s.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);s.tensor=r,Pr(r),s.written=!0,this.tensors[t]=s}writeMany(t,r){if(t.length!==r.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${r.length}.`);t.forEach((s,o)=>this.write(s,r[o]))}gather(t,r){if(!!r&&r!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${r}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return hs([],[0].concat(this.elementShape));const s=this.readMany(t);return pn(this.elementShape,s[0].shape,"TensorArray shape mismatch: "),Fn(s,0)}concat(t){if(!!t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return hs([],[0].concat(this.elementShape));const r=[];for(let o=0;o<this.size();o++)r.push(o);const s=this.readMany(r);return pn(this.elementShape,s[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${s[0].shape})`),nt(s,0)}scatter(t,r){if(r.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${r.dtype}`);if(t.length!==r.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${r.shape[0]}`);const s=Math.max(...t);if(!this.dynamicSize&&s>=this.maxSize)throw new Error(`Max index must be < array size (${s}  vs. ${this.maxSize})`);this.writeMany(t,vr(r,0))}split(t,r){if(r.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${r.dtype}`);let s=0;const o=t.map(l=>(s+=l,s));if(s!==r.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${r.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const a=s===0?0:r.size/s,i=[];Se(()=>{r=F(r,[1,s,a]);for(let l=0;l<t.length;++l){const c=l===0?0:o[l-1],p=[0,c,0],d=[1,t[l],a];i[l]=F(Ne(r,p,d),this.elementShape)}return i});const u=[];for(let l=0;l<t.length;l++)u[l]=l;this.writeMany(u,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qo{constructor(t,r,s,o=-1){this.tensors=t,this.elementShape=r,this.elementDtype=s,t!=null&&t.forEach(a=>{if(s!==a.dtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${a.dtype}`);pn(r,a.shape,"TensorList shape mismatch: "),Pr(a)}),this.idTensor=de(0),this.maxNumElements=o,Pr(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Qo([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(r=>{(t==null||!t.has(r.id))&&r.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,r,s=-1){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(s!==-1&&this.tensors.length!==s)throw new Error(`Operation expected a list with ${s} elements but got a list with ${this.tensors.length} elements.`);return pn(t,this.elementShape,"TensorList shape mismatch: "),Se(()=>{const o=this.tensors.map(a=>F(a,t));return Fn(o,0)})}popBack(t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const s=this.tensors.pop();return pn(s.shape,t,"TensorList shape mismatch: "),F(s,t)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(pn(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Pr(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=t}getItem(t,r,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);return pn(this.tensors[t].shape,r,"TensorList shape mismatch: "),this.tensors[t]}setItem(t,r){if(r.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);pn(this.elementShape,r.shape,"TensorList shape mismatch: "),Pr(r),this.tensors[t]=r}gather(t,r,s){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);return pn(this.elementShape,s,"TensorList shape mismatch: "),t=t.slice(0,this.size()),t.length===0?hs([],[0].concat(this.elementShape)):Se(()=>{const o=t.map(a=>F(this.tensors[a],s));return Fn(o,0)})}concat(t,r){if(!!t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);return pn(this.elementShape,r,"TensorList shape mismatch: "),this.size()===0?hs([],[0].concat(this.elementShape)):Se(()=>{const s=this.tensors.map(o=>F(o,r));return nt(s,0)})}}function GA(e,t,r){const s=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==r)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${r}`);const o=e.shape.slice(1);pn(o,t,"TensorList shape mismatch: ");const a=vr(e);return new Qo(a,t,s)}function jA(e,t,r){return new Qo([],e,t,r)}function HA(e,t,r,s){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(s!=null&&s!==-1&&o>=s)throw new Error(`Max index must be < array size (${o}  vs. ${s})`);const a=new Qo([],r,e.dtype,s),i=vr(e,0);return t.forEach((u,l)=>{a.setItem(u,i[l])}),a}function KA(e,t,r){let s=0;const o=t.map(l=>(s+=l,s));if(s!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${s}, and tensor's shape is: ${e.shape}`);const a=s===0?0:e.size/s,i=Se(()=>{const l=[];e=F(e,[1,s,a]);for(let c=0;c<t.length;++c){const p=c===0?0:o[c-1],d=[0,p,0],f=[1,t[c],a];l[c]=F(Ne(e,d,f),r)}return e.dispose(),l}),u=new Qo([],r,e.dtype,t.length);for(let l=0;l<i.length;l++)u.setItem(l,i[l]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qA=async(e,t,r)=>{switch(e.op){case"If":case"StatelessIf":{const s=C("thenBranch",e,t,r),o=C("elseBranch",e,t,r),a=C("cond",e,t,r),i=C("args",e,t,r);return(await a.data())[0]?r.functionMap[s].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap):r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{const s=C("body",e,t,r),o=C("cond",e,t,r),a=C("args",e,t,r),i=await r.functionMap[o].executeFunctionAsync(a,r.tensorArrayMap,r.tensorListMap),u=a.map(p=>p.id);let l=await i[0].data();i.forEach(p=>{!p.kept&&u.indexOf(p.id)===-1&&p.dispose()});let c=a;for(;l[0];){const p=c;c=await r.functionMap[s].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);const d=c.map(h=>h.id);p.forEach(h=>{!h.kept&&u.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});const f=await r.functionMap[o].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);l=await f[0].data(),f.forEach(h=>{!h.kept&&u.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{const s=C("pred",e,t,r);return[nr(s)]}case"Switch":{const s=C("pred",e,t,r);let o=C("data",e,t,r);return o.kept||(o=nr(o)),(await s.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const s=e.inputNames.find(o=>Ot(o,t,r)!==void 0);if(s){const o=Ot(s,t,r);return[nr(o)]}return}case"Enter":{const s=C("frameName",e,t,r),o=C("tensor",e,t,r);return r.enterFrame(s),[nr(o)]}case"Exit":{const s=C("tensor",e,t,r);return r.exitFrame(),[nr(s)]}case"NextIteration":{const s=C("tensor",e,t,r);return r.nextIteration(),[nr(s)]}case"TensorArrayV3":{const s=C("size",e,t,r),o=C("dtype",e,t,r),a=C("elementShape",e,t,r),i=C("dynamicSize",e,t,r),u=C("clearAfterRead",e,t,r),l=C("identicalElementShapes",e,t,r),c=C("name",e,t,r),p=new WA(c,o,s,a,l,i,u);return r.addTensorArray(p),[p.idTensor,de(1)]}case"TensorArrayWriteV3":{const s=C("tensorArrayId",e,t,r),o=C("index",e,t,r),a=C("tensor",e,t,r),i=r.getTensorArray(s.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const s=C("tensorArrayId",e,t,r),o=C("index",e,t,r);return[r.getTensorArray(s.id).read(o)]}case"TensorArrayGatherV3":{const s=C("tensorArrayId",e,t,r),o=C("indices",e,t,r),a=C("dtype",e,t,r);return[r.getTensorArray(s.id).gather(o,a)]}case"TensorArrayScatterV3":{const s=C("tensorArrayId",e,t,r),o=C("indices",e,t,r),a=C("tensor",e,t,r),i=r.getTensorArray(s.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const s=C("tensorArrayId",e,t,r),o=r.getTensorArray(s.id),a=C("dtype",e,t,r);return[o.concat(a)]}case"TensorArraySplitV3":{const s=C("tensorArrayId",e,t,r),o=C("tensor",e,t,r),a=C("lengths",e,t,r),i=r.getTensorArray(s.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const s=C("tensorArrayId",e,t,r),o=r.getTensorArray(s.id);return[de(o.size(),"int32")]}case"TensorArrayCloseV3":{const s=C("tensorArrayId",e,t,r),o=r.getTensorArray(s.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const s=C("tensorListId",e,t,r),o=C("index",e,t,r),a=C("tensor",e,t,r),i=r.getTensorList(s.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const s=C("tensorListId",e,t,r),o=C("index",e,t,r),a=C("elementShape",e,t,r),i=C("elementDType",e,t,r);return[r.getTensorList(s.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const s=C("indices",e,t,r),o=C("tensor",e,t,r),a=C("elementShape",e,t,r),i=C("numElements",e,t,r),u=HA(o,s,a,i);return r.addTensorList(u),[u.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=C("elementShape",e,t,r),o=C("elementDType",e,t,r);let a;e.op==="TensorListReserve"?a="numElements":a="maxNumElements";const i=C(a,e,t,r),u=jA(s,o,i);return r.addTensorList(u),[u.idTensor]}case"TensorListGather":{const s=C("tensorListId",e,t,r),o=C("indices",e,t,r),a=C("elementShape",e,t,r),i=C("elementDType",e,t,r);return[r.getTensorList(s.id).gather(o,i,a)]}case"TensorListStack":{const s=C("tensorListId",e,t,r),o=C("elementShape",e,t,r),a=C("elementDType",e,t,r),i=C("numElements",e,t,r);return[r.getTensorList(s.id).stack(o,a,i)]}case"TensorListFromTensor":{const s=C("tensor",e,t,r),o=C("elementShape",e,t,r),a=C("elementDType",e,t,r),i=GA(s,o,a);return r.addTensorList(i),[i.idTensor]}case"TensorListConcat":{const s=C("tensorListId",e,t,r),o=r.getTensorList(s.id),a=C("dtype",e,t,r),i=C("elementShape",e,t,r);return[o.concat(a,i)]}case"TensorListPushBack":{const s=C("tensorListId",e,t,r),o=C("tensor",e,t,r),a=r.getTensorList(s.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const s=C("tensorListId",e,t,r),o=C("elementShape",e,t,r),a=C("elementDType",e,t,r);return[r.getTensorList(s.id).popBack(o,a)]}case"TensorListSplit":{const s=C("tensor",e,t,r),o=C("elementShape",e,t,r),a=C("lengths",e,t,r),i=KA(s,a,o);return r.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(e,t,r){const[s,o]=C("fusedOps",e,t,r),a=s==="biasadd",i=o==="prelu",u=s==="fusedbatchnorm",l=C("numArgs",e,t,r);if(a){if(i&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const c=C("strides",e,t,r),p=yu(e,t,r),d=C("dataFormat",e,t,r).toUpperCase(),f=C("dilations",e,t,r),[h,m]=C("args",e,t,r),g=C("leakyreluAlpha",e,t,r);return{stride:c,pad:p,dataFormat:d,dilations:f,biasArg:h,preluArg:m,activationFunc:o,leakyreluAlpha:g}}const XA=(e,t,r)=>{switch(e.op){case"Conv1D":{const s=C("stride",e,t,r),o=C("pad",e,t,r),a=C("dataFormat",e,t,r).toUpperCase(),i=C("dilation",e,t,r);return[vb(C("x",e,t,r),C("filter",e,t,r),s,o,a,i)]}case"Conv2D":{const s=C("strides",e,t,r),o=yu(e,t,r),a=C("dataFormat",e,t,r).toUpperCase(),i=C("dilations",e,t,r);return[Ho(C("x",e,t,r),C("filter",e,t,r),[s[1],s[2]],o,a,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:p}=By(e,t,r);return[G5({x:C("x",e,t,r),filter:C("filter",e,t,r),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:p}=By(e,t,r);return[q5({x:C("x",e,t,r),filter:C("filter",e,t,r),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=C("outputShape",e,t,r),o=C("strides",e,t,r),a=yu(e,t,r);return[Cb(C("x",e,t,r),C("filter",e,t,r),s,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=C("strides",e,t,r),o=yu(e,t,r),a=C("dilations",e,t,r),i=C("dataFormat",e,t,r).toUpperCase();return[fi(C("input",e,t,r),C("filter",e,t,r),[s[1],s[2]],o,i,[a[1],a[2]])]}case"Conv3D":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("dataFormat",e,t,r).toUpperCase(),i=C("dilations",e,t,r);return[OT(C("x",e,t,r),C("filter",e,t,r),[s[1],s[2],s[3]],o,a,[i[1],i[2],i[3]])]}case"AvgPool":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("kernelSize",e,t,r);return[N0(C("x",e,t,r),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPool":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("kernelSize",e,t,r);return[M0(C("x",e,t,r),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPoolWithArgmax":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("kernelSize",e,t,r),i=C("includeBatchInIndex",e,t,r),{result:u,indexes:l}=UI(C("x",e,t,r),[a[1],a[2]],[s[1],s[2]],o,i);return[u,l]}case"AvgPool3D":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("kernelSize",e,t,r);return[gT(C("x",e,t,r),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"MaxPool3D":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("kernelSize",e,t,r);return[MI(C("x",e,t,r),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"Dilation2D":{const s=C("strides",e,t,r),o=C("pad",e,t,r),a=C("dilations",e,t,r),i=s[1],u=s[2],l=a[1],c=a[2];return[bb(C("x",e,t,r),C("filter",e,t,r),[i,u],o,[l,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YA=(e,t,r)=>{switch(e.op){case"Fill":{const s=C("shape",e,t,r),o=C("dtype",e,t,r),a=C("value",e,t,r);return[kb(s,a,o)]}case"LinSpace":{const s=C("start",e,t,r),o=C("stop",e,t,r),a=C("num",e,t,r);return[CI(s,o,a)]}case"Multinomial":{const s=C("logits",e,t,r),o=C("numSamples",e,t,r),a=C("seed",e,t,r);return[QI(s,o,a)]}case"OneHot":{const s=C("indices",e,t,r),o=C("depth",e,t,r),a=C("onValue",e,t,r),i=C("offValue",e,t,r);return[Mw(s,o,a,i)]}case"Ones":return[Ko(C("shape",e,t,r),C("dtype",e,t,r))];case"OnesLike":return[Ab(C("x",e,t,r))];case"RandomUniform":return[w9(C("shape",e,t,r),C("minval",e,t,r),C("maxval",e,t,r),C("dtype",e,t,r))];case"Range":{const s=C("start",e,t,r),o=C("stop",e,t,r),a=C("step",e,t,r);return[Hd(s,o,a,C("dtype",e,t,r))]}case"TruncatedNormal":{const s=C("shape",e,t,r),o=C("mean",e,t,r),a=C("stdDev",e,t,r),i=C("seed",e,t,r);return[Z9(s,o,a,C("dtype",e,t,r),i)]}case"Zeros":return[mr(C("shape",e,t,r),C("dtype",e,t,r))];case"ZerosLike":return[We(C("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hp(e,t,r){const s=C("boxes",e,t,r),o=C("scores",e,t,r),a=C("maxOutputSize",e,t,r),i=C("iouThreshold",e,t,r),u=C("scoreThreshold",e,t,r),l=C("softNmsSigma",e,t,r);return{boxes:s,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:u,softNmsSigma:l}}const QA=async(e,t,r)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:u,softNmsSigma:l}=hp(e,t,r),c=await Dn.nonMaxSuppressionWithScoreAsync(s,o,a,i,u,l);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:u}=hp(e,t,r),l=C("padToMaxOutputSize",e,t,r),c=await Dn.nonMaxSuppressionPaddedAsync(s,o,a,i,u,l);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:o,maxOutputSize:a,iouThreshold:i,scoreThreshold:u}=hp(e,t,r);return[await Dn.nonMaxSuppressionAsync(s,o,a,i,u)]}case"Where":{const s=ie(C("condition",e,t,r),"bool"),o=[await r5(s)];return s.dispose(),o}case"ListDiff":return R9(C("x",e,t,r),C("y",e,t,r));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZA=(e,t,r)=>{switch(e.op){case"TopKV2":{const s=C("x",e,t,r),o=C("k",e,t,r),a=C("sorted",e,t,r),i=Xb(s,o,a);return[i.values,i.indices]}case"Unique":{const s=C("x",e,t,r),o=Kd(s);return[o.values,o.indices]}case"UniqueV2":{const s=C("x",e,t,r),o=C("axis",e,t,r),a=Kd(s,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JA=(e,t,r)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const s=C("default",e,t,r);return[Ot(e.name,t,r)||s];case"Placeholder":return[Ot(e.name,t,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=C("x",e,t,r);return[nr(c)]}case"IdentityN":return C("x",e,t,r).map(c=>nr(c));case"Snapshot":const o=C("x",e,t,r);return[nr(o)];case"Shape":return[Yt(C("x",e,t,r).shape,"int32")];case"ShapeN":return C("x",e,t,r).map(c=>Yt(c.shape));case"Size":return[de(C("x",e,t,r).size,"int32")];case"Rank":return[de(C("x",e,t,r).rank,"int32")];case"NoOp":return[de(1)];case"Print":const a=C("x",e,t,r),i=C("data",e,t,r),u=C("message",e,t,r),l=C("summarize",e,t,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<i.length;c++)console.log(Array.prototype.slice.call(i[c].dataSync()).slice(0,l));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eR{constructor(t,r){this.keyDType=t,this.valueDType=r,this.handle=de(0),this.tensorMap=new Map,Pr(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),Se(()=>{const o=vr(r),a=s.length,i=o.length;k(a===i,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${i} elements.`);for(let u=0;u<a;u++){const l=s[u],c=o[u];Pr(c),this.tensorMap.set(l,c)}return this.handle})}async find(t,r){this.checkKeyAndValueTensor(t,r);const s=await t.data();return Se(()=>{const o=[];for(let a=0;a<s.length;a++){const i=s[a],u=this.findWithDefault(i,r);o.push(u)}return Fn(o)})}findWithDefault(t,r){const s=this.tensorMap.get(t);return s!=null?s:r}checkKeyAndValueTensor(t,r){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(r.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${r.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tR=async(e,t,r,s)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=C("keyDType",e,t,r),a=C("valueDType",e,t,r),i=new eR(o,a);return s.addHashTable(e.name,i),[i.handle]}case"LookupTableImport":case"LookupTableImportV2":{const o=C("tableHandle",e,t,r,s),a=C("keys",e,t,r),i=C("values",e,t,r);return[await s.getHashTableById(o.id).import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=C("tableHandle",e,t,r,s),a=C("keys",e,t,r),i=C("defaultValue",e,t,r);return[await s.getHashTableById(o.id).find(a,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nR=(e,t,r)=>{switch(e.op){case"ResizeBilinear":{const s=C("images",e,t,r),o=C("size",e,t,r),a=C("alignCorners",e,t,r),i=C("halfPixelCenters",e,t,r);return[Dn.resizeBilinear(s,[o[0],o[1]],a,i)]}case"ResizeNearestNeighbor":{const s=C("images",e,t,r),o=C("size",e,t,r),a=C("alignCorners",e,t,r),i=C("halfPixelCenters",e,t,r);return[Dn.resizeNearestNeighbor(s,[o[0],o[1]],a,i)]}case"CropAndResize":{const s=C("image",e,t,r),o=C("boxes",e,t,r),a=C("boxInd",e,t,r),i=C("cropSize",e,t,r),u=C("method",e,t,r),l=C("extrapolationValue",e,t,r);return[Dn.cropAndResize(s,o,a,i,u,l)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rR=(e,t,r)=>{switch(e.op){case"Equal":return[hi(C("a",e,t,r),C("b",e,t,r))];case"NotEqual":return[uc(C("a",e,t,r),C("b",e,t,r))];case"Greater":return[xr(C("a",e,t,r),C("b",e,t,r))];case"GreaterEqual":return[Bs(C("a",e,t,r),C("b",e,t,r))];case"Less":return[sc(C("a",e,t,r),C("b",e,t,r))];case"LessEqual":return[Ls(C("a",e,t,r),C("b",e,t,r))];case"LogicalAnd":return[Is(C("a",e,t,r),C("b",e,t,r))];case"LogicalNot":return[oc(C("a",e,t,r))];case"LogicalOr":return[z0(C("a",e,t,r),C("b",e,t,r))];case"Select":case"SelectV2":return[vn(C("condition",e,t,r),C("a",e,t,r),C("b",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sR=(e,t,r)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Ie(C("a",e,t,r),C("b",e,t,r),C("transposeA",e,t,r),C("transposeB",e,t,r))];case"Transpose":return[Qr(C("x",e,t,r),C("perm",e,t,r))];case"_FusedMatMul":const[s,o]=C("fusedOps",e,t,r),a=s==="biasadd",i=o==="prelu",u=C("numArgs",e,t,r),l=C("leakyreluAlpha",e,t,r);if(a){if(i&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,p]=C("args",e,t,r);return[Y5({a:C("a",e,t,r),b:C("b",e,t,r),transposeA:C("transposeA",e,t,r),transposeB:C("transposeB",e,t,r),bias:c,activation:o,preluActivationWeights:p,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oR=(e,t,r)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[Gd(C("x",e,t,r),C("mean",e,t,r),C("variance",e,t,r),C("offset",e,t,r),C("scale",e,t,r),C("epsilon",e,t,r))];case"FusedBatchNormV3":return[Gd(C("x",e,t,r),C("mean",e,t,r),C("variance",e,t,r),C("offset",e,t,r),C("scale",e,t,r),C("epsilon",e,t,r))];case"LRN":return[Eb(C("x",e,t,r),C("radius",e,t,r),C("bias",e,t,r),C("alpha",e,t,r),C("beta",e,t,r))];case"Softmax":return[jb(C("x",e,t,r))];case"LogSoftmax":return[Nb(C("x",e,t,r))];case"SparseToDense":return[Jb(C("sparseIndices",e,t,r),C("outputShape",e,t,r),C("sparseValues",e,t,r),C("defaultValue",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aR=(e,t,r)=>{switch(e.op){case"Max":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[ys(C("x",e,t,r),i,u)]}case"Mean":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[V0(C("x",e,t,r),i,u)]}case"Min":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[tl(C("x",e,t,r),i,u)]}case"Sum":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[he(C("x",e,t,r),i,u)]}case"All":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[ob(C("x",e,t,r),i,u)]}case"Any":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[ab(C("x",e,t,r),i,u)]}case"ArgMax":{const i=C("axis",e,t,r);return[ib(C("x",e,t,r),i)]}case"ArgMin":{const i=C("axis",e,t,r);return[ub(C("x",e,t,r),i)]}case"Prod":{const i=C("axis",e,t,r),u=C("keepDims",e,t,r);return[j0(C("x",e,t,r),i,u)]}case"Cumsum":{const i=C("axis",e,t,r),u=C("exclusive",e,t,r),l=C("reverse",e,t,r);return[D0(C("x",e,t,r),i,u,l)]}case"Bincount":const s=C("x",e,t,r),o=C("weights",e,t,r),a=C("size",e,t,r);return[ST(s,o,a)];case"DenseBincount":{const i=C("x",e,t,r),u=C("weights",e,t,r),l=C("size",e,t,r),c=C("binaryOutput",e,t,r);return[UT(i,u,l,c)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iR=(e,t,r)=>{switch(e.op){case"ConcatV2":case"Concat":{const s=C("n",e,t,r),o=C("axis",e,t,r);let a=C("tensors",e,t,r);return a=a.slice(0,s),[nt(a,o)]}case"Gather":{const s=C("x",e,t,r),o=C("indices",e,t,r);return[el(s,ie(o,"int32"),0)]}case"GatherV2":{const s=C("axis",e,t,r),o=C("batchDims",e,t,r),a=C("x",e,t,r),i=C("indices",e,t,r);return[el(a,ie(i,"int32"),s,o)]}case"Reverse":{const s=C("dims",e,t,r),o=[];for(let i=0;i<s.length;i++)s[i]&&o.push(i);const a=C("x",e,t,r);return[Po(a,o)]}case"ReverseV2":{const s=C("axis",e,t,r),o=C("x",e,t,r);return[Po(o,s)]}case"Slice":{const s=C("begin",e,t,r),o=C("size",e,t,r);return[Ne(C("x",e,t,r),s,o)]}case"StridedSlice":{const s=C("begin",e,t,r),o=C("end",e,t,r),a=C("strides",e,t,r),i=C("beginMask",e,t,r),u=C("endMask",e,t,r),l=C("ellipsisMask",e,t,r),c=C("newAxisMask",e,t,r),p=C("shrinkAxisMask",e,t,r),d=C("x",e,t,r);return[Kb(d,s,o,a,i,u,l,c,p)]}case"Pack":return Se(()=>{const s=C("axis",e,t,r),o=C("tensors",e,t,r),a=o[0].shape,i=Ja(o[0]).shape,u=o.map(l=>{const c=_t(l.shape,a);if(!c&&!_t(Ja(l).shape,i))throw new Error("the input tensors shape does not match");return c?l:F(l,a)});return[Fn(u,s)]});case"Unpack":{const s=C("axis",e,t,r),o=C("tensor",e,t,r);return vr(o,s)}case"Tile":{const s=C("reps",e,t,r);return[vo(C("x",e,t,r),s)]}case"Split":case"SplitV":{const s=C("axis",e,t,r),o=C("numOrSizeSplits",e,t,r),a=C("x",e,t,r);return Oo(a,o,s)}case"ScatterNd":{const s=C("indices",e,t,r),o=C("values",e,t,r),a=C("shape",e,t,r);return[F5(s,o,a)]}case"GatherNd":{const s=C("x",e,t,r),o=C("indices",e,t,r);return[M5(s,o)]}case"SparseToDense":{const s=C("sparseIndices",e,t,r),o=C("outputShape",e,t,r),a=C("sparseValues",e,t,r),i=C("defaultValue",e,t,r);return[Jb(s,a,o,a.dtype===i.dtype?i:ie(i,a.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uR=(e,t,r)=>{switch(e.op){case"FFT":return[Y0(C("x",e,t,r))];case"IFFT":return[rl(C("x",e,t,r))];case"RFFT":return[Q0(C("x",e,t,r))];case"IRFFT":return[Hb(C("x",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lR=(e,t,r)=>{switch(e.op){case"Cast":return[ie(C("x",e,t,r),C("dtype",e,t,r))];case"ExpandDims":{const s=C("axis",e,t,r);return[er(C("x",e,t,r),s)]}case"Squeeze":{const s=C("axis",e,t,r);return[Ja(C("x",e,t,r),s)]}case"Reshape":return[F(C("x",e,t,r),C("shape",e,t,r))];case"MirrorPad":return[Db(C("x",e,t,r),C("padding",e,t,r),C("mode",e,t,r))];case"PadV2":case"Pad":return[W0(C("x",e,t,r),C("padding",e,t,r),C("constantValue",e,t,r))];case"SpaceToBatchND":{const s=C("blockShape",e,t,r),o=C("paddings",e,t,r);return[lc(C("x",e,t,r),s,o)]}case"BatchToSpaceND":{const s=C("blockShape",e,t,r),o=C("crops",e,t,r);return[nc(C("x",e,t,r),s,o)]}case"DepthToSpace":{const s=C("blockSize",e,t,r),o=C("dataFormat",e,t,r).toUpperCase();return[wb(C("x",e,t,r),s,o)]}case"BroadcastTo":return[Ju(C("x",e,t,r),C("shape",e,t,r))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ly(e,t,r,s){const o=((a,i,u)=>{switch(a.category){case"arithmetic":return Se(()=>MA(a,i,u));case"basic_math":return Se(()=>VA(a,i,u));case"control":return qA(a,i,u);case"convolution":return Se(()=>XA(a,i,u));case"creation":return Se(()=>YA(a,i,u));case"dynamic":return QA(a,i,u);case"evaluation":return Se(()=>ZA(a,i,u));case"image":return Se(()=>nR(a,i,u));case"graph":return Se(()=>JA(a,i,u));case"logical":return Se(()=>rR(a,i,u));case"matrices":return Se(()=>sR(a,i,u));case"normalization":return Se(()=>oR(a,i,u));case"reduction":return Se(()=>aR(a,i,u));case"slice_join":return Se(()=>iR(a,i,u));case"spectral":return Se(()=>uR(a,i,u));case"transformation":return Se(()=>lR(a,i,u));case"hash_table":return tR(a,i,u,s);case"custom":const l=S4(a.op);if(l&&l.customExecutor)return l.customExecutor(new zA(a,i,u));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,r);return Ya(o)?o.then(a=>[].concat(a)):[].concat(o)}class zy{constructor(t={},r={},s={},o={}){this.weightMap=t,this.tensorArrayMap=r,this.tensorListMap=s,this.functionMap=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,r){return{id:t,frameName:r,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let r=0;r<this.contexts.length-1;r++){const s=this.contexts.slice(0,this.contexts.length-r);t.push(this.contextIdforContexts(s))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(r=>r.id===0&&r.iterationId===0?"":`${r.frameName}-${r.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const r in this.tensorArrayMap)this.tensorArrayMap[r].clearAndClose(t);for(const r in this.tensorListMap)this.tensorListMap[r].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function My(e,t,r,s){const o=new Set,a=[];let i=null,u=null;const l=new Set,c=Object.keys(e).map(f=>Mt(f)[0]);let p=[];s!=null&&(p=s.map(f=>Mt(f.name)[0]));const d=[...t];for(;d.length>0;){const f=d.pop();if((N4(f)||hR(f)||mR(f))&&i==null&&(i=f,u=i.children.map(h=>h.name).filter(h=>o.has(h))),o.add(f.name),r[f.name]==null&&c.indexOf(f.name)===-1&&p.indexOf(f.name)===-1){if(f.inputs.length===0){a.push(f.name);continue}f.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:u}}function cR(e,t,r){const{usedNodes:s,inputs:o}=r,a=[],i=Object.keys(o).map(p=>Mt(p)[0]).map(p=>e.nodes[p]),u=e.initNodes;i.forEach(p=>{s.has(p.name)&&a.push(p)}),e.weights.forEach(p=>{s.has(p.name)&&a.push(p)}),u!=null&&u.forEach(p=>{s.has(p.name)&&a.push(p)});const l=new Set,c=[];for(;a.length>0;){const p=a.pop();l.add(p.name),t[p.name]||c.push(p),p.children.forEach(d=>{!l.has(d.name)&&s.has(d.name)&&d.inputs.every(f=>l.has(f.name))&&a.push(d)})}return c}const pR=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],dR=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],fR=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function N4(e){return pR.indexOf(e.op)>=0}function hR(e){return dR.indexOf(e.op)>=0}function mR(e){return fR.indexOf(e.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ol{constructor(t,r){this.graph=t,this.parent=r,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(s=>{this._functionExecutorMap[s]=new ol(t.functions[s],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const r=Object.keys(t).map(s=>t[s].map(o=>o.id));this._weightIds=[].concat(...r),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const r=t.signatureKey||t.name;return t.defaultOutput?`${r}:${t.defaultOutput}`:r})}get functions(){return Object.keys(this._functions).reduce((t,r)=>(t[r]=this._functions[r].signature,t),{})}getCompilationKey(t,r){const s=t.map(a=>a.name).sort(),o=r.map(a=>a.name).sort();return s.join(this.SEPERATOR)+"--"+o.join(this.SEPERATOR)}compile(t,r){const s=My(t,r,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:a,syncInputs:i}=s;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(o.length>0){const u=r.map(c=>c.name),l=Object.keys(t);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${l}]. Missing the following inputs: [${o}]`)}return cR(this.graph,this.weightMap,s)}execute(t,r){t=this.mapInputs(t);const s=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),r=this.mapOutputs(r),this.checkOutputs(r);const o=s.map(d=>this.graph.nodes[Mt(d)[0]]),a=r.map(d=>Mt(d)[0]);let i=a.map(d=>this.graph.nodes[d]);i.length===0&&(i=this._outputs);const u=this.getCompilationKey(o,i);let l=this.compiledMap.get(u);l==null&&(l=this.compile(t,i),this.compiledMap.set(u,l));const c={},p={};return Se(()=>{const d=new zy(this.weightMap,c,p,this.functionExecutorMap),f=Object.assign({},this.weightMap);Object.keys(t).forEach(g=>{const[x,y]=Mt(g),v=[];v[y]=t[g],f[x]=v});const h=this.getFrozenTensorIds(f),m={};for(let g=0;g<l.length;g++){const x=l[g];if(!f[x.name]){const y=Ly(x,f,d,this._resourceManager);if(Ya(y))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);f[x.name]=y,this.checkTensorForDisposal(x.name,x,f,d,h,a,m)}}return this.parent==null&&d.dispose(h),r.map(g=>Ot(g,f,d))})}getFrozenTensorIds(t){const r=[].concat.apply([],Object.keys(t).map(s=>t[s]).map(s=>s.map(o=>o.id)));return new Set(r)}checkTensorForDisposal(t,r,s,o,a,i,u){r.category==="control"||i.indexOf(t)!==-1||(s[t].forEach(l=>{l!=null&&(u[l.id]=(u[l.id]||0)+r.children.length)}),r.inputs.forEach(l=>{if(l.category!=="control"){const c=rA(l.name,s,o);c!=null&&c.forEach(p=>{if(p&&!a.has(p.id)){const d=u[p.id];d===1?(p.dispose(),delete u[p.id]):d!=null&&u[p.id]--}})}}))}async executeAsync(t,r){return this._executeAsync(t,r)}async _executeAsync(t,r,s=!1,o={},a={}){s||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),r=this.mapOutputs(r),this.checkOutputs(r));const i=new zy(this.weightMap,o,a,this.functionExecutorMap),u=await this.executeWithControlFlow(t,i,r,s),l=r.map(f=>Ot(f,u,i)),c=l.map(f=>f.id),p=Object.keys(t).map(f=>t[f].id),d=new Set([...c,...p,...this.weightIds]);return Object.keys(u).forEach(f=>{u[f].forEach(m=>{m&&!m.isDisposed&&!d.has(m.id)&&m.dispose()})}),this.parent==null&&i.dispose(d),l}async executeFunctionAsync(t,r,s){const o=t.reduce((a,i,u)=>(a[this.inputs[u].name]=i,a),{});return this._executeAsync(o,this.outputNodes,!0,r,s)}async executeWithControlFlow(t,r,s,o){const a=Object.keys(t),i=a.map(w=>this.graph.nodes[Mt(w)[0]]),u=s.map(w=>Mt(w)[0]);let l=u.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:p,dynamicNode:d,syncInputs:f}=My(t,l,this.weightMap,this._initNodes),h=[...i,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:r.currentContext})),m=Object.assign({},this.weightMap);Object.keys(t).forEach(w=>{const[$,b]=Mt(w),T=[];T[b]=t[w],m[$]=T});const g={},x=this.getFrozenTensorIds(m),y={};for(;h.length>0;){const w=this.processStack(i,h,r,m,y,x,u,g,c);await Promise.all(w)}d==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=l.filter(w=>!N4(w)&&!Ot(w.name,m,r)).map(w=>w.name);if(v.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${a}]. Consider providing the following inputs: [${p}]. ${w}`)}return m}processStack(t,r,s,o,a,i,u,l,c){const p=[];for(;r.length>0;){const d=r.pop();s.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&C("isConstant",d.node,o,s)&&([f]=tr(d.node.name,s)),o[d.node.name]==null){const h=Ly(d.node,o,s,this._resourceManager);f||([f]=tr(d.node.name,s));const m=s.currentContext;Ya(h)?p.push(h.then(g=>(o[f]=g,s.currentContext=m,this.checkTensorForDisposal(f,d.node,o,s,i,u,l),this.processChildNodes(d.node,r,s,o,a,c),g))):(o[f]=h,this.checkTensorForDisposal(f,d.node,o,s,i,u,l),this.processChildNodes(d.node,r,s,o,a,c))}else this.processChildNodes(d.node,r,s,o,a,c)}return p}processChildNodes(t,r,s,o,a,i){t.children.forEach(u=>{const[l]=tr(u.name,s);a[l]||!i.has(u.name)||(u.op==="Merge"?u.inputNames.some(c=>!!Ot(c,o,s))&&(a[l]=!0,r.push({contexts:s.currentContext,node:u})):u.inputNames.every(c=>!!Ot(c,o,s))&&(a[l]=!0,r.push({contexts:s.currentContext,node:u})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(r=>r.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(r=>{const s=t[r],[o]=Mt(r),a=this.graph.nodes[o];if(a.attrParams.shape&&a.attrParams.shape.value){const i=a.attrParams.shape.value,u=i.length===s.shape.length&&s.shape.every((l,c)=>i[c]===-1||i[c]===l);k(u,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${i}], but was [${s.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&k(s.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${s.dtype}`)})}mapInputs(t){const r={};for(const s in t)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[s]!=null){const o=this._signature.inputs[s];r[o.name]=t[s]}else r[s]=t[s];return r}checkInputs(t){const r=Object.keys(t).filter(s=>{const[o]=Mt(s);return this.graph.nodes[o]==null});if(r.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${r}] that are not part of graph`)}mapOutputs(t){return t.map(r=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[r]!=null?this._signature.outputs[r].name:r,{})}checkOutputs(t){t.forEach(r=>{const[s]=Mt(r);if(!this.graph.nodes[s])throw new Error(`The output '${r}' is not found in the graph`)})}}class gR{constructor(t={},r={}){this.hashTableNameToHandle=t,this.hashTableMap=r}addHashTable(t,r){this.hashTableNameToHandle[t]=r.handle,this.hashTableMap[r.id]=r}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yR="?tfjs-format=file",xR="model.json";class vR{constructor(t,r={}){this.modelUrl=t,this.loadOptions=r,this.version="n/a",r==null&&(this.loadOptions={}),this.resourceManager=new gR}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=Sy(t,this.loadOptions);else{const r=uN(t,this.loadOptions);if(r.length===0)r.push(Sy(t,this.loadOptions));else if(r.length>1)throw new Error(`Found more than one (${r.length}) load handlers for URL '${[t]}'`);this.handler=r[0]}}async load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=await this.handler.load();return this.loadSync(t)}loadSync(t){this.artifacts=t;const r=this.artifacts.modelTopology;let s;this.artifacts.userDefinedMetadata!=null&&this.artifacts.userDefinedMetadata.signature!=null?s=this.artifacts.userDefinedMetadata.signature:s=this.artifacts.signature,this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`;const o=JE(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new ol(Oy.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const a=Oy.Instance.transformGraph(t.modelInitializer);this.initializer=new ol(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(t,r){if(typeof t=="string"){const s=iN(t);if(s.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${t}'`);t=s[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(t,r){return this.execute(t,this.outputNodes)}normalizeInputs(t){if(!(t instanceof P)&&!Array.isArray(t))return t;if(t=Array.isArray(t)?t:[t],t.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${t.length} input tensors.`);return this.inputNodes.reduce((r,s,o)=>(r[s]=t[o],r),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}execute(t,r){t=this.normalizeInputs(t),r=this.normalizeOutputs(r);const s=this.executor.execute(t,r);return s.length>1?s:s[0]}async executeAsync(t,r){t=this.normalizeInputs(t),r=this.normalizeOutputs(r);const s=await this.executor.executeAsync(t,r);return s.length>1?s:s[0]}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((r,s)=>(r[s]=[t[s]],r),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function ei(e,t={}){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&e.load==null&&(e.endsWith("/")||(e=e+"/"),e=`${e}${xR}${yR}`);const r=new vR(e,t);return await r.load(),r}/**
    * @license
    * Copyright 2020 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var of=function(){return(of=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ir(e,t,r,s){return new(r||(r=Promise))(function(o,a){function i(c){try{l(s.next(c))}catch(p){a(p)}}function u(c){try{l(s.throw(c))}catch(p){a(p)}}function l(c){var p;c.done?o(c.value):(p=c.value,p instanceof r?p:new r(function(d){d(p)})).then(i,u)}l((s=s.apply(e,t||[])).next())})}function ur(e,t){var r,s,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(c){return function(p){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(o=2&p[0]?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[2&p[0],o.value]),p[0]){case 0:case 1:o=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,s=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!((o=o.length>0&&o[o.length-1])||p[0]!==6&&p[0]!==2)){i=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){i.label=p[1];break}if(p[0]===6&&i.label<o[1]){i.label=o[1],o=p;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(p);break}o[2]&&i.ops.pop(),i.trys.pop();continue}p=t.call(e,i)}catch(d){p=[6,d],s=0}finally{r=o=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([l,c])}}}const T4=e=>({startEndTensor:e,startPoint:Ne(e,[0,0],[-1,2]),endPoint:Ne(e,[0,2],[-1,2])}),CR={strides:[8,16],anchors:[2,6]};function Vy(e,t){let r,s,o;if(e.topLeft instanceof P&&e.bottomRight instanceof P){const[i,u]=Se(()=>[nt([ce(t-1,e.topLeft.slice(0,1)),e.topLeft.slice(1,1)]),nt([ce(t-1,e.bottomRight.slice(0,1)),e.bottomRight.slice(1,1)])]);r=i,s=u,e.landmarks!=null&&(o=Se(()=>{const l=ce(Yt([t-1,0]),e.landmarks),c=Yt([1,-1]);return q(l,c)}))}else{const[i,u]=e.topLeft,[l,c]=e.bottomRight;r=[t-1-i,u],s=[t-1-l,c],e.landmarks!=null&&(o=e.landmarks.map(p=>[t-1-p[0],p[1]]))}const a={topLeft:r,bottomRight:s};return o!=null&&(a.landmarks=o),e.probability!=null&&(a.probability=e.probability instanceof P?e.probability.clone():e.probability),a}function Uy(e,t){return Se(()=>{let r;return r=e.hasOwnProperty("box")?e.box:e,((s,o)=>{const a=q(s.startPoint,o),i=q(s.endPoint,o),u=xb([a,i],1);return T4(u)})(r,t).startEndTensor.squeeze()})}class wR{constructor(t,r,s,o,a,i){this.blazeFaceModel=t,this.width=r,this.height=s,this.maxFaces=o,this.anchorsData=function(u,l,c){const p=[];for(let d=0;d<c.strides.length;d++){const f=c.strides[d],h=Math.floor((l+f-1)/f),m=Math.floor((u+f-1)/f),g=c.anchors[d];for(let x=0;x<h;x++){const y=f*(x+.5);for(let v=0;v<m;v++){const w=f*(v+.5);for(let $=0;$<g;$++)p.push([w,y])}}}return p}(r,s,CR),this.anchors=Gr(this.anchorsData),this.inputSizeData=[r,s],this.inputSize=Yt([r,s]),this.iouThreshold=a,this.scoreThreshold=i}async getBoundingBoxes(t,r,s=!0){const[o,a,i]=Se(()=>{const g=t.resizeBilinear([this.width,this.height]),x=q(ce(g.div(255),.5),2),y=this.blazeFaceModel.predict(x).squeeze(),v=function($,b,T){const S=Ne($,[0,1],[-1,2]),D=Ue(S,b),z=Ne($,[0,3],[-1,2]),E=Ce(z,T),A=Ce(D,T),O=Ce(E,2),V=ce(A,O),B=Ue(A,O),W=q(V,T),H=q(B,T);return xb([W,H],1)}(y,this.anchors,this.inputSize),w=Ne(y,[0,0],[-1,1]);return[y,v,di(w).squeeze()]}),u=console.warn;console.warn=()=>{};const l=Dn.nonMaxSuppression(a,i,this.maxFaces,this.iouThreshold,this.scoreThreshold);console.warn=u;const c=await l.array();l.dispose();let p=c.map(g=>Ne(a,[g,0],[1,-1]));r||(p=await Promise.all(p.map(async g=>{const x=await g.array();return g.dispose(),x})));const d=t.shape[1],f=t.shape[2];let h;h=r?Ce([f,d],this.inputSize):[f/this.inputSizeData[0],d/this.inputSizeData[1]];const m=[];for(let g=0;g<p.length;g++){const x=p[g],y=Se(()=>{const v=T4(x instanceof P?x:Gr(x));if(!s)return v;const w=c[g];let $;return $=r?this.anchors.slice([w,0],[1,2]):this.anchorsData[w],{box:v,landmarks:Ne(o,[w,5],[1,-1]).squeeze().reshape([6,-1]),probability:Ne(i,[w],[1]),anchor:$}});m.push(y)}return a.dispose(),i.dispose(),o.dispose(),{boxes:m,scaleFactor:h}}async estimateFaces(t,r=!1,s=!1,o=!0){const[,a]=function(c){return c instanceof P?[c.shape[0],c.shape[1]]:[c.height,c.width]}(t),i=Se(()=>(t instanceof P||(t=Vw(t)),t.toFloat().expandDims(0))),{boxes:u,scaleFactor:l}=await this.getBoundingBoxes(i,r,o);return i.dispose(),r?u.map(c=>{const p=Uy(c,l);let d={topLeft:p.slice([0],[2]),bottomRight:p.slice([2],[2])};if(o){const{landmarks:f,probability:h,anchor:m}=c,g=f.add(m).mul(l);d.landmarks=g,d.probability=h}return s&&(d=Vy(d,a)),d}):Promise.all(u.map(async c=>{const p=Uy(c,l);let d;if(o){const[f,h,m]=await Promise.all([c.landmarks,p,c.probability].map(async w=>w.array())),g=c.anchor,[x,y]=l,v=f.map(w=>[(w[0]+g[0])*x,(w[1]+g[1])*y]);d={topLeft:h.slice(0,2),bottomRight:h.slice(2),landmarks:v,probability:m},(w=>{w.startEndTensor.dispose(),w.startPoint.dispose(),w.endPoint.dispose()})(c.box),c.landmarks.dispose(),c.probability.dispose()}else{const f=await p.array();d={topLeft:f.slice(0,2),bottomRight:f.slice(2)}}return p.dispose(),s&&(d=Vy(d,a)),d}))}}async function bR({maxFaces:e=10,inputWidth:t=128,inputHeight:r=128,iouThreshold:s=.3,scoreThreshold:o=.75}={}){const a=await ei("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0});return new wR(a,t,r,e,s,o)}var lr={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function xu(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function vu(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function mp(e,t){t===void 0&&(t=1.5);var r=vu(e),s=xu(e),o=[t*s[0]/2,t*s[1]/2];return{startPoint:[r[0]-o[0],r[1]-o[1]],endPoint:[r[0]+o[0],r[1]+o[1]],landmarks:e.landmarks}}var $R=[[1,0,0],[0,1,0],[0,0,1]];function _R(e,t){var r,s=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]);return(r=s)-2*Math.PI*Math.floor((r+Math.PI)/(2*Math.PI))}function Wy(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function as(e,t){for(var r=0,s=0;s<e.length;s++)r+=e[s]*t[s];return r}function SR(e,t){for(var r=[],s=0;s<e.length;s++)r.push(e[s][t]);return r}function Gy(e,t){for(var r=[],s=e.length,o=0;o<s;o++){r.push([]);for(var a=0;a<s;a++)r[o].push(as(e[o],SR(t,a)))}return r}function jy(e,t){var r=Math.cos(e),s=Math.sin(e),o=[[r,-s,0],[s,r,0],[0,0,1]],a=Gy(Wy(t[0],t[1]),o);return Gy(a,Wy(-t[0],-t[1]))}var Hy=[13,lr.midwayBetweenEyes[0]],Ky=[3,2],gp=lr.leftEyeLower0,yp=[gp[0],gp[gp.length-1]],xp=lr.rightEyeLower0,vp=[xp[0],xp[xp.length-1]],qy=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function Hi(e,t,r,s){for(var o=0;o<qy.length;o++){var a=qy[o],i=a.key,u=a.indices,l=lr[""+r+i];if(s==null||s.includes(i))for(var c=0;c<u.length;c++){var p=u[c];e[l[c]]=[t[p][0],t[p][1],(t[p][2]+e[l[c]][2])/2]}}}var kR=function(){function e(t,r,s,o,a,i,u){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=t,this.meshDetector=r,this.irisModel=u,this.meshWidth=s,this.meshHeight=o,this.maxContinuousChecks=a,this.maxFaces=i}return e.prototype.transformRawCoords=function(t,r,s,o){var a,i,u,l,c=this,p=xu({startPoint:r.startPoint,endPoint:r.endPoint}),d=[p[0]/this.meshWidth,p[1]/this.meshHeight],f=t.map(function(v){return[d[0]*(v[0]-c.meshWidth/2),d[1]*(v[1]-c.meshHeight/2),v[2]]}),h=jy(s,[0,0]),m=f.map(function(v){return function(w,$){return[as(w,$[0]),as(w,$[1])]}(v,h).concat([v[2]])}),g=(i=[[(a=o)[0][0],a[1][0]],[a[0][1],a[1][1]]],u=[a[0][2],a[1][2]],l=[-as(i[0],u),-as(i[1],u)],[i[0].concat(l[0]),i[1].concat(l[1]),[0,0,1]]),x=vu({startPoint:r.startPoint,endPoint:r.endPoint}).concat([1]),y=[as(x,g[0]),as(x,g[1])];return m.map(function(v){return[v[0]+y[0],v[1]+y[1],v[2]]})},e.prototype.getLeftToRightEyeDepthDifference=function(t){return t[yp[0]][2]-t[vp[0]][2]},e.prototype.getEyeBox=function(t,r,s,o,a){a===void 0&&(a=!1);var i=function(c){var p=vu(c),d=xu(c),f=Math.max.apply(Math,d)/2;return{startPoint:[p[0]-f,p[1]-f],endPoint:[p[0]+f,p[1]+f],landmarks:c.landmarks}}(mp(this.calculateLandmarksBoundingBox([t[s],t[o]]),2.3)),u=xu(i),l=Dn.cropAndResize(r,[[i.startPoint[1]/this.meshHeight,i.startPoint[0]/this.meshWidth,i.endPoint[1]/this.meshHeight,i.endPoint[0]/this.meshWidth]],[0],[64,64]);return a&&(l=Dn.flipLeftRight(l)),{box:i,boxSize:u,crop:l}},e.prototype.getEyeCoords=function(t,r,s,o){o===void 0&&(o=!1);for(var a=[],i=0;i<76;i++){var u=t[3*i],l=t[3*i+1],c=t[3*i+2];a.push([(o?1-u/64:u/64)*s[0]+r.startPoint[0],l/64*s[1]+r.startPoint[1],c])}return{rawCoords:a,iris:a.slice(71)}},e.prototype.getAdjustedIrisCoords=function(t,r,s){var o=t[lr[s+"EyeUpper0"][3]][2],a=t[lr[s+"EyeLower0"][4]][2],i=(o+a)/2;return r.map(function(u,l){var c=i;return l===2?c=o:l===4&&(c=a),[u[0],u[1],c]})},e.prototype.predict=function(t,r){return ir(this,void 0,void 0,function(){var s,o,a,i,u=this;return ur(this,function(l){switch(l.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(t,!1,!0)]:[3,2];case 1:return s=l.sent(),o=s.boxes,a=s.scaleFactor,o.length===0?(this.regionsOfInterest=[],[2,null]):(i=o.map(function(c){var p,d,f={startPoint:c.box.startPoint.squeeze().arraySync(),endPoint:c.box.endPoint.squeeze().arraySync()},h=mp((d=a,{startPoint:[(p=f).startPoint[0]*d[0],p.startPoint[1]*d[1]],endPoint:[p.endPoint[0]*d[0],p.endPoint[1]*d[1]]}));return of({},h,{landmarks:c.landmarks.arraySync()})}),o.forEach(function(c){c!=null&&c.startPoint!=null&&(c.startEndTensor.dispose(),c.startPoint.dispose(),c.endPoint.dispose())}),this.updateRegionsOfInterest(i),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,l.label=3;case 3:return[2,Se(function(){return u.regionsOfInterest.map(function(c,p){var d,f=c.landmarks.length>=468,h=Hy[0],m=Hy[1];f===!1&&(h=Ky[0],m=Ky[1]),d=_R(c.landmarks[h],c.landmarks[m]);var g=vu({startPoint:c.startPoint,endPoint:c.endPoint}),x=[g[0]/t.shape[2],g[1]/t.shape[1]],y=t,v=$R;d!==0&&(y=Dn.rotateWithOffset(t,d,0,x),v=jy(-d,g));var w=function(_e,fe,ot){var xt=fe.shape[1],be=fe.shape[2],ct=[[_e.startPoint[1]/xt,_e.startPoint[0]/be,_e.endPoint[1]/xt,_e.endPoint[0]/be]];return Dn.cropAndResize(fe,ct,[0],ot)}({startPoint:c.startPoint,endPoint:c.endPoint},y,[u.meshHeight,u.meshWidth]).div(255),$=u.meshDetector.predict(w),b=$[1],T=$[2],S=F(T,[-1,3]).arraySync();if(r){var D=u.getEyeBox(S,w,yp[0],yp[1],!0),z=D.box,E=D.boxSize,A=D.crop,O=u.getEyeBox(S,w,vp[0],vp[1]),V=O.box,B=O.boxSize,W=O.crop,H=u.irisModel.predict(nt([A,W])).dataSync(),Q=H.slice(0,228),U=u.getEyeCoords(Q,z,E,!0),G=U.rawCoords,ae=U.iris,ee=H.slice(228),Y=u.getEyeCoords(ee,V,B),Z=Y.rawCoords,te=Y.iris,le=u.getLeftToRightEyeDepthDifference(S);Math.abs(le)<30?(Hi(S,G,"left"),Hi(S,Z,"right")):le<1?Hi(S,G,"left",["EyeUpper0","EyeLower0"]):Hi(S,Z,"right",["EyeUpper0","EyeLower0"]);var M=u.getAdjustedIrisCoords(S,ae,"left"),ye=u.getAdjustedIrisCoords(S,te,"right");S=S.concat(M).concat(ye)}var J=u.transformRawCoords(S,c,d,v),Le=Gr(J),ke=mp(u.calculateLandmarksBoundingBox(J));return u.regionsOfInterest[p]=of({},ke,{landmarks:Le.arraySync()}),{coords:Gr(S,[S.length,3]),scaledCoords:Le,box:ke,flag:b.squeeze()}})})]}})})},e.prototype.updateRegionsOfInterest=function(t){for(var r=0;r<t.length;r++){var s=t[r],o=this.regionsOfInterest[r],a=0;if(o&&o.startPoint){var i=s.startPoint,u=i[0],l=i[1],c=s.endPoint,p=c[0],d=c[1],f=o.startPoint,h=f[0],m=f[1],g=o.endPoint,x=g[0],y=g[1],v=Math.max(u,h),w=Math.max(l,m),$=(Math.min(p,x)-v)*(Math.min(d,y)-w);a=$/((p-u)*(d-l)+(x-h)*(y-l)-$)}a<.25&&(this.regionsOfInterest[r]=s)}this.regionsOfInterest=this.regionsOfInterest.slice(0,t.length)},e.prototype.clearRegionOfInterest=function(t){this.regionsOfInterest[t]!=null&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,t).concat(this.regionsOfInterest.slice(t+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var t=this.regionsOfInterest.length,r=t===0;return this.maxFaces===1||r?r:t!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(t){var r=t.map(function(o){return o[0]}),s=t.map(function(o){return o[1]});return{startPoint:[Math.min.apply(Math,r),Math.min.apply(Math,s)],endPoint:[Math.max.apply(Math,r),Math.max.apply(Math,s)]}},e}(),ER=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function NR(e){return ir(this,void 0,void 0,function(){var t,r,s,o,a,i,u,l,c,p,d,f,h,m,g;return ur(this,function(x){switch(x.label){case 0:return t=e.maxContinuousChecks,r=t===void 0?5:t,s=e.detectionConfidence,o=s===void 0?.9:s,a=e.maxFaces,i=a===void 0?10:a,u=e.iouThreshold,l=u===void 0?.3:u,c=e.scoreThreshold,p=c===void 0?.75:c,d=e.shouldLoadIrisModel,f=d===void 0||d,h=e.modelUrl,m=e.irisModelUrl,f?[4,Promise.all([Xy(i,l,p),Yy(h),TR(m)])]:[3,2];case 1:return g=x.sent(),[3,4];case 2:return[4,Promise.all([Xy(i,l,p),Yy(h)])];case 3:g=x.sent(),x.label=4;case 4:return[2,new IR(g[0],g[1],r,o,i,f?g[2]:null)]}})})}function Xy(e,t,r){return ir(this,void 0,void 0,function(){return ur(this,function(s){return[2,bR({maxFaces:e,iouThreshold:t,scoreThreshold:r})]})})}function Yy(e){return ir(this,void 0,void 0,function(){return ur(this,function(t){return e!=null?[2,ei(e)]:[2,ei("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]})})}function TR(e){return ir(this,void 0,void 0,function(){return ur(this,function(t){return e!=null?[2,ei(e)]:[2,ei("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]})})}function Qy(e,t){if(e.mesh instanceof P){var r=Se(function(){var u=Yt([t-1,0,0]),l=Yt([1,-1,1]);return Se(function(){return[nt([ce(t-1,e.boundingBox.topLeft.slice(0,1)),e.boundingBox.topLeft.slice(1,1)]),nt([ce(t-1,e.boundingBox.bottomRight.slice(0,1)),e.boundingBox.bottomRight.slice(1,1)]),ce(u,e.mesh).mul(l),ce(u,e.scaledMesh).mul(l)]})}),s=r[0],o=r[1],a=r[2],i=r[3];return Object.assign({},e,{boundingBox:{topLeft:s,bottomRight:o},mesh:a,scaledMesh:i})}return Object.assign({},e,{boundingBox:{topLeft:[t-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[t-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map(function(u){var l=u.slice(0);return l[0]=t-1-u[0],l}),scaledMesh:e.scaledMesh.map(function(u){var l=u.slice(0);return l[0]=t-1-u[0],l})})}var Fo,IR=function(){function e(t,r,s,o,a,i){this.pipeline=new kR(t,r,192,192,s,a,i),this.detectionConfidence=o}return e.getAnnotations=function(){return lr},e.getUVCoords=function(){return ER},e.prototype.estimateFaces=function(t){return ir(this,void 0,void 0,function(){var r,s,o,a,i,u,l,c,p,d,f,h,m=this;return ur(this,function(g){switch(g.label){case 0:if(r=t.returnTensors,s=r!==void 0&&r,o=t.flipHorizontal,a=o!==void 0&&o,i=t.predictIrises,u=i===void 0||i,l=t.input,u&&this.pipeline.irisModel==null)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return c=function(x){return x instanceof P?[x.shape[0],x.shape[1]]:[x.height,x.width]}(l),p=c[1],d=Se(function(){return l instanceof P||(l=Vw(l)),l.toFloat().expandDims(0)}),WN()!=="webgl"?[3,2]:(h=K().get("WEBGL_PACK_DEPTHWISECONV"),K().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(d,u)]);case 1:return f=g.sent(),K().set("WEBGL_PACK_DEPTHWISECONV",h),[3,4];case 2:return[4,this.pipeline.predict(d,u)];case 3:f=g.sent(),g.label=4;case 4:return d.dispose(),f!=null&&f.length>0?[2,Promise.all(f.map(function(x,y){return ir(m,void 0,void 0,function(){var v,w,$,b,T,S,D,z,E,A,O,V,B,W,H=this;return ur(this,function(Q){switch(Q.label){case 0:return v=x.coords,w=x.scaledCoords,$=x.box,b=x.flag,T=[b],s||(T=T.concat([v,w])),[4,Promise.all(T.map(function(U){return ir(H,void 0,void 0,function(){return ur(this,function(G){return[2,U.array()]})})}))];case 1:if(S=Q.sent(),D=S[0],b.dispose(),D<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(y),s)return z={faceInViewConfidence:D,mesh:v,scaledMesh:w,boundingBox:{topLeft:Yt($.startPoint),bottomRight:Yt($.endPoint)}},a?[2,Qy(z,p)]:[2,z];for(W in E=S.slice(1),A=E[0],O=E[1],w.dispose(),v.dispose(),V={faceInViewConfidence:D,boundingBox:{topLeft:$.startPoint,bottomRight:$.endPoint},mesh:A,scaledMesh:O},a&&(V=Qy(V,p)),B={},lr)(u||W.includes("Iris")===!1)&&(B[W]=lr[W].map(function(U){return V.scaledMesh[U]}));return V.annotations=B,[2,V]}})})}))]:[2,[]]}})})},e}();function I4(e,t){return e===void 0&&(e=Fo.mediapipeFacemesh),t===void 0&&(t={}),ir(this,void 0,void 0,function(){return ur(this,function(r){if(e===Fo.mediapipeFacemesh)return[2,NR(t)];throw new Error(e+" is not a valid package name.")})})}(function(e){e.mediapipeFacemesh="mediapipe-facemesh"})(Fo||(Fo={}));class D4{constructor(){ze(this,"canvas");ze(this,"video");ze(this,"ctx")}draw(t,...r){}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.video,0,0,this.canvas.width,this.canvas.height)}init(t,r,s){this.canvas=t,this.video=r,this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.style.height=innerHeight-s.clientHeight+3+"px",this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#FFFFFF"}}const DR=e=>{if(!e){const a=document.getElementById("video");e=document.createElement("canvas"),e.width=a.videoWidth,e.height=a.videoHeight,e.getContext("2d").drawImage(a,0,0,e.width,e.height)}const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),s=[];return[...r].forEach((a,i)=>s.push(r.charCodeAt(i))),new Blob([new Uint8Array(s)],{type:"image/png"})};class AR extends D4{constructor(r,s,o,a,i){super();ze(this,"PI",Math.PI*2);ze(this,"dotPos");ze(this,"radius");ze(this,"isDetected",!1);ze(this,"drawLineIdx",0);ze(this,"isCompleted",!1);ze(this,"progressCnt");this.setScanEnd=r,this.setExplain=s,this.setLoading=o,this.setIsCalculating=a,this.setColorData=i,this.radius=2,this.progressCnt=0,this.dotPos=[132,58,172,93,127,234,288,361,323,454,356,359,467,260,259,379,365,397,28,27,29,136,150,149,176,148,152,414,190,56,257,258,286,195,5,4,30,247,197,85,180,90,320,404,315,76,74,73,303,304,306,400,377,378,1,72,302]}draw(r){if(this.setExplain("\uD37C\uC2A4\uB110\uCEEC\uB7EC\uB97C \uCE21\uC815 \uC911\uC774\uC5D0\uC694!"),this.ctx.strokeStyle="rgba(255,255,255,.5)",this.ctx.lineWidth=1,this.drawLineIdx=1,this.progressCnt+=1,this.progressCnt<=20)this.dotPos.forEach((s,o)=>{var a,i,u,l;(a=this.ctx)==null||a.beginPath(),(i=this.ctx)==null||i.arc(r[s][0],r[s][1],this.radius,this.PI,0,!1),(u=this.ctx)==null||u.closePath(),(l=this.ctx)==null||l.fill(),this.ctx.stroke()});else if(!this.isCompleted){this.isCompleted=!0;const s=new FormData;s.append("file",DR(!1)),this.setLoading(!0),this.setIsCalculating(!0),bf.post("/remove/sendImg",s).then(o=>{this.setLoading(!1),this.setScanEnd(!0),this.setIsCalculating(!1),this.setColorData({result:o.data.result,resultKor:o.data.resultKor})}).catch(o=>alert("\uC5D0\uB7EC\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."))}}}function A4(){const e=navigator.userAgent;let t=!1,r=!1,s=!1;if(/iphone/i.test(e)){let o=0,a,i;/fbsv/i.test(e)?(a=e.split("FBSV")[1],i=a.substring(1,3)+"."+a.substring(4,5),o=parseFloat(i)):(a=e.split("OS")[1],i=a.substring(1,3)+"."+a.substring(4,5),o=parseFloat(i)),o<13.4?t=!0:r=!0}return/ipad/i.test(e)&&(t=!0),/mobile/i.test(e)||(s=!0),[t,r,s]}class Cu extends D4{constructor(){super();ze(this,"leftMask");ze(this,"rightMask");ze(this,"shortHeight");ze(this,"shortWidth");ze(this,"isPC");this.leftMask=new Image,this.rightMask=new Image,[this.shortHeight,this.shortWidth,this.isPC]=A4()}setMaskImage(r){this.leftMask.src=`/images/${r.left}`,this.rightMask.src=`/images/${r.right}`}draw(r){const s=r[195];let o,a;const i=Math.sqrt(Math.pow(Math.abs(r[117][0]-r[346][0]),2)+Math.pow(Math.abs(r[117][1]-r[346][1]),2)),u=Math.atan((r[145][1]-r[374][1])/(r[145][0]-r[374][0])),l=u*180/Math.PI;let c;const p=Math.abs(l*(i*.001));this.shortHeight?c=Math.sqrt(Math.pow(Math.abs(r[152][0]-s[0]),2)+Math.pow(Math.abs(r[152][1]-s[1]),2))*1.25:c=Math.sqrt(Math.pow(Math.abs(r[152][0]-s[0]),2)+Math.pow(Math.abs(r[152][1]-s[1]),2))*1.05,this.shortWidth?(o=(r[234][0]-s[0])*1.05,a=(r[454][0]-s[0])*1.08):(o=(r[234][0]-s[0])*1.1,a=(r[454][0]-s[0])*1.1),o>i*.1||Math.abs(o)<=i*.1||s[0]<r[234][0]||o>i*.2||Math.abs(o)<=i*.2?o=i*-.3:o>i*.3||Math.abs(o)<=i*.3?o=i*-.4:(o>i*.5||Math.abs(o)<=i*.5)&&(o=i*-.5),a<=i*.1||s[0]>r[454][0]||a<=i*.2?a=i*.3:a<=i*.3?a=i*.4:a<=i*.5&&(a=i*.5),!this.isPC&&!this.shortHeight&&!this.shortWidth&&(s[0]+=u*(i/5)*-1),this.ctx.save(),this.ctx.translate(s[0],s[1]),this.ctx.rotate(u),this.ctx.translate(-s[0],-s[1]),this.ctx.drawImage(this.leftMask,s[0]+1,s[1],o,c+p),this.ctx.drawImage(this.rightMask,s[0],s[1],a,c+p),this.ctx.restore()}}const lg={Container:ge.section`
    max-width: 720px !important;
    width: 720px;
    margin: auto !important;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px;
    @media (max-width: 720px) {
      width: 100%;
    }
  `,Svg:ge.svg`
    width: 30px;
    height: 30px;
    @media (max-width: 720px) {
      width: 4.16vw;
      height: 4.16vw;
    }
  `,loginBtn:ge.div`
    background: #4267b2;
    color: white;
    display: flex;
    align-items: center;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    cursor: pointer;
    margin-bottom: 10px;
    height: 40px;
    width: 300px;
    @media (max-width: 500px) {
      width: 200px;
    }
  `,columnWrapper:ge.article`
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: left;
    margin-bottom: 92px;
    @media (max-width: 720px) {
      margin-bottom: 12.78vw;
    }
  `,fadeUp:ay`
    0% {
      opacity: 0;
      transform : translateY(10px);
    }
     
    100% {
      opacity: 1;
      transform : translateY(0px);
    }
  `,fadeUp2:ay`
    0% {
      opacity: 0;
      transform : translateY(20px);
    }
    
    100% {
      opacity: 1;
      transform : translateY(0px);
    }
  `,flexDiv:ge.div`
    display: flex;
    flex-direction: row;
    align-items: center;
  `,noneOutline:Gn`
    outline: 0;
    cursor: pointer;
    transition: all ease-out 0.3s;
    padding: 4px 8px;
    font-size: 0.9em;
  `,sectionCss:Gn`
    margin-bottom: 60px;
  `,boxShadow:Gn`
    box-shadow: 0px 5px 20px #00000029;
    @media (max-width: 720px) {
      box-shadow: 0px 0.6vw 2.4vw #00000029;
    }
  `,lineHeight:Gn`
    line-height: 24px;
    @media (max-width: 720px) {
      line-height: 3.4vw;
    }
  `,borderRadius:Gn`
    border-radius: 8px;
    @media (max-width: 720px) {
      border-radius: 1.11vw;
    }
  `};var R4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zy=Pn.createContext&&Pn.createContext(R4),jr=globalThis&&globalThis.__assign||function(){return jr=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},jr.apply(this,arguments)},RR=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};function P4(e){return e&&e.map(function(t,r){return Pn.createElement(t.tag,jr({key:r},t.attr),P4(t.child))})}function cg(e){return function(t){return j(PR,{...jr({attr:jr({},e.attr)},t),children:P4(e.child)})}}function PR(e){var t=function(r){var s=e.attr,o=e.size,a=e.title,i=RR(e,["attr","size","title"]),u=o||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),Ee("svg",{...jr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,i,{className:l,style:jr(jr({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),children:[a&&j("title",{children:a}),e.children]})};return Zy!==void 0?j(Zy.Consumer,{children:function(r){return t(r)}}):t(R4)}function OR(e){return cg({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(e)}const FR=ge.div`
  position: relative;
  margin-top: 20px;
  margin-bottom: 20px;
  width: 150px;
  height: 150px;
  display: inline-flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: black;
  font-size: 11px;
  margin-left: 3px;
  cursor: pointer;
  @media (orientation: portrait) and (max-width: 720px),
    (orientation: landscape) and (max-height: 720px) {
    font-size: 1.52;
    width: 21vmin;
    height: 21vmin;
    margin-top: 2.8vmin;
    margin-bottom: 2.8vmin;
  }
  ${lg.borderRadius}
  z-index: 100003;
`,BR=ge.img`
  width: 110px;
  height: 80px;
  margin-top: 5px;
  /* @media all and ((orientation: portrait) and (max-width: 720px)),
    ((orientation: landscape) and (max-height: 720px)) {
    width: 15.28vmin;
  } */
  @media (orientation: portrait) and (max-width: 720px),
    (orientation: landscape) and (max-height: 720px) {
    width: 15.28vmin;
    height: 12vmin;
  }
`,LR=ge.button`
  background: none;
  color: black;
  position: absolute;
  padding: 0;
  top: 5px;
  right: 5px;
  @media (orientation: portrait) and (max-width: 720px),
    (orientation: landscape) and (max-height: 720px) {
    font-size: 3.5vmin;
  }
  font-size: 26px;
`;ge.span`
  font-size: 13px;
  @media ((orientation: portrait) and (max-width: 720px)),
    ((orientation: landscape) and (max-height: 720px)) {
    font-size: 1.8vmin;
  }
`;const zR=({maskData:e,idx:t,handleChangeMask:r,selected:s})=>Ee(FR,{style:{boxShadow:s?"0 0 0pt 2.5pt #db4c64":""},id:s?"selectedMask":"",className:"maskWrapper",onClick:a=>{r(t);const i=document.getElementById("selectedMask");i.style.boxShadow="none",i.id="";const u=a.currentTarget;u.id="selectedMask",u.style.boxShadow="0 0 0pt 2pt #db4c64"},children:[j(LR,{onClick:a=>{a.stopPropagation(),window.open(e.href)},children:j(OR,{})}),j(BR,{"data-src":`images/${e.src}`,className:"lazy"})]}),se={bts:"https://smartstore.naver.com/rivermarket276/products/7229087032",viuum1:"https://smartstore.naver.com/rivermarket276/products/7210389193",viuum2:"https://smartstore.naver.com/rivermarket276/products/7222530807",garim:"https://smartstore.naver.com/rivermarket276/products/7210265324",chramzone:"https://smartstore.naver.com/rivermarket276/products/7229286968",goodmanner1:"https://smartstore.naver.com/rivermarket276/products/7245200256",goodmanner2:"https://smartstore.naver.com/rivermarket276/products/7245160562",hyosung:"https://smartstore.naver.com/rivermarket276/products/7381458848",theGreen:"https://smartstore.naver.com/rivermarket276/products/7380981745"},N={bts_black_01:{src:"bts_black_01.png",left:"bts_black_01_left.png",right:"bts_black_01_right.png",href:se.bts},bts_cherry_01:{src:"bts_cherry_01.png",left:"bts_cherry_01_left.png",right:"bts_cherry_01_right.png",href:se.bts},bts_green_01:{src:"bts_green_01.png",left:"bts_green_01_left.png",right:"bts_green_01_right.png",href:se.bts},bts_mint_01:{src:"bts_mint_01.png",left:"bts_mint_01_left.png",right:"bts_mint_01_right.png",href:se.bts},bts_orange_01:{src:"bts_orange_01.png",left:"bts_orange_01_left.png",right:"bts_orange_01_right.png",href:se.bts},bts_pink_01:{src:"bts_pink_01.png",left:"bts_pink_01_left.png",right:"bts_pink_01_right.png",href:se.bts},bts_purple_01:{src:"bts_purple_01.png",left:"bts_purple_01_left.png",right:"bts_purple_01_right.png",href:se.bts},bts_skyblue_01:{src:"bts_skyblue_01.png",left:"bts_skyblue_01_left.png",right:"bts_skyblue_01_right.png",href:se.bts},bts_white_01:{src:"bts_white_01.png",left:"bts_white_01_left.png",right:"bts_white_01_right.png",href:se.bts},bts_yellow_01:{src:"bts_yellow_01.png",left:"bts_yellow_01_left.png",right:"bts_yellow_01_right.png",href:se.bts},cz_beige_01:{src:"cz_beige_01.png",left:"cz_beige_01_left.png",right:"cz_beige_01_right.png",href:se.chramzone},cz_black_01:{src:"cz_black_01.png",left:"cz_black_01_left.png",right:"cz_black_01_right.png",href:se.chramzone},cz_grey_01:{src:"cz_grey_01.png",left:"cz_grey_01_left.png",right:"cz_grey_01_right.png",href:se.chramzone},cz_navy_01:{src:"cz_navy_01.png",left:"cz_navy_01_left.png",right:"cz_navy_01_right.png",href:se.chramzone},cz_white_01:{src:"cz_white_01.png",left:"cz_white_01_left.png",right:"cz_white_01_right.png",href:se.chramzone},gm_beige_01:{src:"gm_beige_01.png",left:"gm_beige_01_left.png",right:"gm_beige_01_right.png",href:se.goodmanner1},gm_black_01:{src:"gm_black_01.png",left:"gm_black_01_left.png",right:"gm_black_01_right.png",href:se.goodmanner1},gm_grey_01:{src:"gm_grey_01.png",left:"gm_grey_01_left.png",right:"gm_grey_01_right.png",href:se.goodmanner1},gm_pink_01:{src:"gm_pink_01.png",left:"gm_pink_01_left.png",right:"gm_pink_01_right.png",href:se.goodmanner1},gm_white_01:{src:"gm_white_01.png",left:"gm_white_01_left.png",right:"gm_white_01_right.png",href:se.goodmanner1},gr_beige_01:{src:"gr_beige_01.png",left:"gr_beige_01_left.png",right:"gr_beige_01_right.png",href:se.garim},gr_berry_01:{src:"gr_berry_01.png",left:"gr_berry_01_left.png",right:"gr_berry_01_right.png",href:se.garim},gr_celesteblue_01:{src:"gr_celesteblue_01.png",left:"gr_celesteblue_01_left.png",right:"gr_celesteblue_01_right.png",href:se.garim},gr_coraltint_01:{src:"gr_coraltint_01.png",left:"gr_coraltint_01_left.png",right:"gr_coraltint_01_right.png",href:se.garim},gr_oceanblue_01:{src:"gr_oceanblue_01.png",left:"gr_oceanblue_01_left.png",right:"gr_oceanblue_01_right.png",href:se.garim},gr_peachcushion_01:{src:"gr_peachcushion_01.png",left:"gr_peachcushion_01_left.png",right:"gr_peachcushion_01_right.png",href:se.garim},gr_rosewine_01:{src:"gr_rosewine_01.png",left:"gr_rosewine_01_left.png",right:"gr_rosewine_01_right.png",href:se.garim},vm_ashgrey_01:{src:"vm_ashgrey_01.png",left:"vm_ashgrey_01_left.png",right:"vm_ashgrey_01_right.png",href:se.viuum2},vm_gingerbrown_01:{src:"vm_gingerbrown_01.png",left:"vm_gingerbrown_01_left.png",right:"vm_gingerbrown_01_right.png",href:se.viuum2},vm_lilacpurple_01:{src:"vm_lilacpurple_01.png",left:"vm_lilacpurple_01_left.png",right:"vm_lilacpurple_01_right.png",href:se.viuum2},vm_sandbeige_01:{src:"vm_sandbeige_01.png",left:"vm_sandbeige_01_left.png",right:"vm_sandbeige_01_right.png",href:se.viuum2},vm_black_01:{src:"vm_black_01.png",left:"vm_black_01_left.png",right:"vm_black_01_right.png",href:se.viuum1},vm_grey_01:{src:"vm_grey_01.png",left:"vm_grey_01_left.png",right:"vm_grey_01_right.png",href:se.viuum1},vm_ivory_01:{src:"vm_ivory_01.png",left:"vm_ivory_01_left.png",right:"vm_ivory_01_right.png",href:se.viuum1},vm_lightsilver_01:{src:"vm_lightsilver_01.png",left:"vm_lightsilver_01_left.png",right:"vm_lightsilver_01_right.png",href:se.viuum1},vm_pink_01:{src:"vm_pink_01.png",left:"vm_pink_01_left.png",right:"vm_pink_01_right.png",href:se.viuum1},vm_white_01:{src:"vm_white_01.png",left:"vm_white_01_left.png",right:"vm_white_01_right.png",href:se.viuum1},gm_beige_02:{src:"gm_beige_02.png",left:"gm_beige_02_left.png",right:"gm_beige_02_right.png",href:se.goodmanner2},gm_black_02:{src:"gm_black_02.png",left:"gm_black_02_left.png",right:"gm_black_02_right.png",href:se.goodmanner2},gm_grey_02:{src:"gm_grey_02.png",left:"gm_grey_02_left.png",right:"gm_grey_02_right.png",href:se.goodmanner2},gm_pink_02:{src:"gm_pink_02.png",left:"gm_pink_02_left.png",right:"gm_pink_02_right.png",href:se.goodmanner2},gm_white_02:{src:"gm_white_02.png",left:"gm_white_02_left.png",right:"gm_white_02_right.png",href:se.goodmanner2},hs_white_03:{src:"hs_white_03.png",left:"hs_white_03_left.png",right:"hs_white_03_right.png",href:se.hyosung},hs_mint_03:{src:"hs_mint_03.png",left:"hs_mint_03_left.png",right:"hs_mint_03_right.png",href:se.hyosung},hs_navy_03:{src:"hs_navy_03.png",left:"hs_navy_03_left.png",right:"hs_navy_03_right.png",href:se.hyosung},hs_neonOrange_03:{src:"hs_neonOrange_03.png",left:"hs_neonOrange_03_left.png",right:"hs_neonOrange_03_right.png",href:se.hyosung},hs_neonPink_03:{src:"hs_neonPink_03.png",left:"hs_neonPink_03_left.png",right:"hs_neonPink_03_right.png",href:se.hyosung},hs_neonYellow_03:{src:"hs_neonYellow_03.png",left:"hs_neonYellow_03_left.png",right:"hs_neonYellow_03_right.png",href:se.hyosung},hs_pink_03:{src:"hs_pink_03.png",left:"hs_pink_03_left.png",right:"hs_pink_03_right.png",href:se.hyosung},hs_red_03:{src:"hs_red_03.png",left:"hs_red_03_left.png",right:"hs_red_03_right.png",href:se.hyosung},hs_yellow_03:{src:"hs_yellow_03.png",left:"hs_yellow_03_left.png",right:"hs_yellow_03_right.png",href:se.hyosung},hs_beige_03:{src:"hs_beige_03.png",left:"hs_beige_03_left.png",right:"hs_beige_03_right.png",href:se.hyosung},hs_black_03:{src:"hs_black_03.png",left:"hs_black_03_left.png",right:"hs_black_03_right.png",href:se.hyosung},hs_blue_03:{src:"hs_blue_03.png",left:"hs_blue_03_left.png",right:"hs_blue_03_right.png",href:se.hyosung},hs_charcoal_03:{src:"hs_charcoal_03.png",left:"hs_charcoal_03_left.png",right:"hs_charcoal_03_right.png",href:se.hyosung},hs_grey_03:{src:"hs_grey_03.png",left:"hs_grey_03_left.png",right:"hs_grey_03_right.png",href:se.hyosung},hs_lightPink_03:{src:"hs_lightPink_03.png",left:"hs_lightPink_03_left.png",right:"hs_lightPink_03_right.png",href:se.hyosung},tg_white_04:{src:"tg_white_04.png",left:"tg_white_04_left.png",right:"tg_white_04_right.png",href:se.theGreen},tg_black_04:{src:"tg_black_04.png",left:"tg_black_04_left.png",right:"tg_black_04_right.png",href:se.theGreen},tg_burgundy_04:{src:"tg_burgundy_04.png",left:"tg_burgundy_04_left.png",right:"tg_burgundy_04_right.png",href:se.theGreen},tg_grey_04:{src:"tg_grey_04.png",left:"tg_grey_04_left.png",right:"tg_grey_04_right.png",href:se.theGreen},tg_mint_04:{src:"tg_mint_04.png",left:"tg_mint_04_left.png",right:"tg_mint_04_right.png",href:se.theGreen},tg_navy_04:{src:"tg_navy_04.png",left:"tg_navy_04_left.png",right:"tg_navy_04_right.png",href:se.theGreen},tg_orange_04:{src:"tg_orange_04.png",left:"tg_orange_04_left.png",right:"tg_orange_04_right.png",href:se.theGreen},tg_pink_04:{src:"tg_pink_04.png",left:"tg_pink_04_left.png",right:"tg_pink_04_right.png",href:se.theGreen},tg_purple_04:{src:"tg_purple_04.png",left:"tg_purple_04_left.png",right:"tg_purple_04_right.png",href:se.theGreen},tg_yellow_04:{src:"tg_yellow_04.png",left:"tg_yellow_04_left.png",right:"tg_yellow_04_right.png",href:se.theGreen}},Un=[{name:"\uB374\uD0C8 \uB9C8\uC2A4\uD06C",list:[N.tg_grey_04,N.tg_black_04,N.tg_burgundy_04,N.tg_mint_04,N.tg_navy_04,N.tg_orange_04,N.tg_pink_04,N.tg_purple_04,N.tg_white_04,N.tg_yellow_04]},{name:"\uB124\uC624\uD504\uB80C \uB9C8\uC2A4\uD06C",list:[N.hs_beige_03,N.hs_black_03,N.hs_blue_03,N.hs_charcoal_03,N.hs_grey_03,N.hs_lightPink_03,N.hs_mint_03,N.hs_navy_03,N.hs_neonOrange_03,N.hs_neonPink_03,N.hs_neonYellow_03,N.hs_pink_03,N.hs_red_03,N.hs_white_03,N.hs_yellow_03]},{name:"\uC0C8\uBD80\uB9AC \uB9C8\uC2A4\uD06C",list:[N.bts_black_01,N.bts_cherry_01,N.bts_green_01,N.bts_mint_01,N.bts_orange_01,N.bts_pink_01,N.bts_purple_01,N.bts_skyblue_01,N.bts_white_01,N.bts_yellow_01,N.cz_beige_01,N.cz_black_01,N.cz_grey_01,N.cz_navy_01,N.cz_white_01,N.gm_beige_01,N.gm_black_01,N.gm_grey_01,N.gm_pink_01,N.gm_white_01,N.gr_beige_01,N.gr_berry_01,N.gr_celesteblue_01,N.gr_coraltint_01,N.gr_oceanblue_01,N.gr_peachcushion_01,N.gr_rosewine_01,N.vm_ashgrey_01,N.vm_black_01,N.vm_gingerbrown_01,N.vm_grey_01,N.vm_ivory_01,N.vm_lightsilver_01,N.vm_lilacpurple_01,N.vm_pink_01,N.vm_sandbeige_01,N.vm_white_01]},{name:"3D \uB9C8\uC2A4\uD06C",list:[N.gm_grey_02,N.gm_beige_02,N.gm_black_02,N.gm_pink_02,N.gm_white_02]}],MR={"\uBD04 \uBE0C\uB77C\uC774\uD2B8":{explain:"\uBD04 \uBE0C\uB77C\uC774\uD2B8\uD1A4\uC740 \uACE0\uBA85\uB3C4 \uACE0\uCC44\uB3C4\uC758 \uCA0D\uD558\uACE0 \uBC1D\uC740 \uC0C9\uAC10\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_mint_01,N.bts_skyblue_01,N.bts_yellow_01,N.bts_orange_01,N.bts_green_01,N.bts_white_01,N.gm_white_02,N.tg_white_04,N.tg_pink_04,N.tg_purple_04]},"\uBD04 \uB77C\uC774\uD2B8":{explain:"\uBD04 \uB77C\uC774\uD2B8\uD1A4\uC740 \uC800\uCC44\uB3C4\uC758 \uC740\uC740\uD55C \uD30C\uC2A4\uD154\uD1A4 \uC0C9\uAC10\uACFC \uBD80\uB4DC\uB7EC\uC6C0\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.cz_beige_01,N.cz_white_01,N.gm_beige_01,N.gm_pink_01,N.gm_white_01,N.gr_beige_01,N.gr_berry_01,N.gr_celesteblue_01,N.gr_peachcushion_01,N.gr_rosewine_01,N.hs_lightPink_03,N.hs_white_03,N.vm_ivory_01,N.vm_lilacpurple_01,N.vm_pink_01,N.vm_lightsilver_01,N.vm_white_01,N.vm_sandbeige_01]},"\uC5EC\uB984 \uBE0C\uB77C\uC774\uD2B8":{explain:"\uC5EC\uB984 \uBE0C\uB77C\uC774\uD2B8\uB294 \uACE0\uBA85\uB3C4 \uACE0\uCC44\uB3C4\uC758 \uCA0D\uD55C \uC0C9\uAC10\uC73C\uB85C \uBE14\uB8E8\uBCA0\uC774\uC2A4\uC758 \uC2DC\uC6D0\uD55C \uC0C9\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_mint_01,N.bts_purple_01,N.bts_skyblue_01,N.bts_green_01,N.gr_berry_01,N.gr_celesteblue_01,N.gr_coraltint_01,N.gr_rosewine_01,N.hs_lightPink_03,N.hs_pink_03,N.tg_orange_04,N.tg_purple_04,N.vm_lilacpurple_01]},"\uC5EC\uB984 \uB77C\uC774\uD2B8":{explain:"\uC5EC\uB984 \uB77C\uC774\uD2B8\uB294 \uACE0\uBA85\uB3C4 \uC800\uCC44\uB3C4\uC758 \uCFE8\uD558\uACE0 \uBC1D\uC740 \uD1A4\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.cz_white_01,N.gm_beige_01,N.gm_pink_01,N.gm_white_01,N.gr_berry_01,N.gr_celesteblue_01,N.gr_peachcushion_01,N.gr_rosewine_01,N.hs_lightPink_03,N.hs_white_03,N.vm_lilacpurple_01,N.vm_pink_01,N.vm_lightsilver_01,N.vm_white_01]},"\uC5EC\uB984 \uBBA4\uD2B8":{explain:"\uC5EC\uB984 \uBBA4\uD2B8\uB294 \uB108\uBB34 \uBC1D\uC740 \uC0C9\uBCF4\uB2E8 \uD1A4 \uB2E4\uC6B4\uB41C \uCFE8\uD55C \uC0C9\uAC10\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.cz_grey_01,N.cz_navy_01,N.gm_grey_01,N.gm_grey_02,N.gm_pink_02,N.gr_beige_01,N.gr_berry_01,N.gr_oceanblue_01,N.hs_charcoal_03,N.hs_grey_03,N.hs_lightPink_03,N.hs_mint_03,N.hs_navy_03,N.tg_grey_04,N.tg_navy_04,N.tg_purple_04,N.vm_ashgrey_01,N.vm_gingerbrown_01,N.vm_grey_01]},"\uAC00\uC744 \uBBA4\uD2B8":{explain:"\uAC00\uC744 \uBBA4\uD2B8\uB294 \uC911\uAC04 \uACC4\uC5F4 \uC0C9\uAC10\uC73C\uB85C \uB2E4\uC6B4\uB418\uACE0 \uB530\uB73B\uD55C \uC0C9\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.cz_grey_01,N.cz_beige_01,N.gm_grey_01,N.gm_grey_02,N.gm_grey_02,N.gm_pink_02,N.gr_beige_01,N.gr_berry_01,N.gr_peachcushion_01,N.gr_rosewine_01,N.hs_charcoal_03,N.hs_grey_03,N.hs_beige_03,N.hs_lightPink_03,N.hs_mint_03,N.tg_grey_04,N.tg_purple_04,N.vm_ashgrey_01,N.vm_gingerbrown_01,N.vm_grey_01,N.vm_lightsilver_01]},"\uAC00\uC744 \uC2A4\uD2B8\uB871":{explain:"\uAC00\uC744 \uC2A4\uD2B8\uB871\uC740 \uC801\uB2F9\uD55C \uBC1D\uAE30\uC758 \uCC44\uB3C4\uAC00 \uB192\uC740 \uBE44\uBE44\uB4DC\uD55C \uC0C9\uAC10\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_cherry_01,N.bts_mint_01,N.bts_orange_01,N.bts_purple_01,N.gr_oceanblue_01,N.hs_blue_03,N.hs_navy_03,N.hs_neonOrange_03,N.hs_neonYellow_03,N.hs_pink_03,N.tg_burgundy_04,N.tg_navy_04]},"\uAC00\uC744 \uB525":{explain:"\uAC00\uC744 \uB525\uC740 \uCC44\uB3C4 \uB192\uC740 \uC6D0\uC0C9\uC5D0 \uAC80\uC740\uC0C9\uC774 \uC11E\uC778 \uB4EF \uAE4A\uACE0 \uADF8\uC73D\uD55C \uC0C9\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_black_01,N.bts_orange_01,N.cz_black_01,N.cz_navy_01,N.gm_black_01,N.gm_black_02,N.gr_oceanblue_01,N.hs_black_03,N.hs_blue_03,N.hs_charcoal_03,N.hs_navy_03,N.tg_black_04,N.tg_burgundy_04,N.tg_navy_04,N.vm_black_01,N.vm_gingerbrown_01]},"\uACA8\uC6B8 \uBE0C\uB77C\uC774\uD2B8":{explain:"\uACA8\uC6B8 \uBE0C\uB77C\uC774\uD2B8\uB294 \uACE0\uCC44\uB3C4\uC758 \uBE44\uBE44\uB4DC\uD55C \uB124\uC628 \uCEEC\uB7EC\uAC00 \uC798\uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_cherry_01,N.bts_mint_01,N.bts_orange_01,N.bts_purple_01,N.gr_berry_01,N.gr_oceanblue_01,N.gr_coraltint_01,N.hs_blue_03,N.hs_neonPink_03,N.hs_neonOrange_03,N.hs_neonYellow_03,N.hs_pink_03,N.tg_purple_04]},"\uACA8\uC6B8 \uB525":{explain:"\uACA8\uC6B8 \uB525\uC740 \uCC44\uB3C4\uAC00 \uB0AE\uACE0 \uBB34\uAC81\uC9C0\uB9CC \uCFE8\uD55C \uC0C9\uAC10\uC774 \uC5B4\uC6B8\uB824\uC694!",maskList:[N.bts_black_01,N.bts_cherry_01,N.cz_black_01,N.cz_navy_01,N.gm_black_01,N.gm_black_02,N.gr_oceanblue_01,N.hs_black_03,N.hs_blue_03,N.hs_charcoal_03,N.hs_navy_03,N.tg_black_04,N.tg_burgundy_04,N.tg_navy_04,N.vm_black_01,N.vm_gingerbrown_01]}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O4=function(e,t){return(O4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])})(e,t)},VR,Ki,UR=(function(e){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function r(){for(var s=[],o=0;o<arguments.length;o++){var a=arguments[o];if(a){var i=typeof a;if(i==="string"||i==="number")s.push(a);else if(Array.isArray(a)&&a.length){var u=r.apply(null,a);u&&s.push(u)}else if(i==="object")for(var l in a)t.call(a,l)&&a[l]&&s.push(l)}}return s.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}(Ki={path:VR,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&Ki.path)}},Ki.exports),Ki.exports);function af(e,t,r){var s,o,a,i,u;function l(){var p=Date.now()-i;p<t&&p>=0?s=setTimeout(l,t-p):(s=null,r||(u=e.apply(a,o),a=o=null))}t==null&&(t=100);var c=function(){a=this,o=arguments,i=Date.now();var p=r&&!s;return s||(s=setTimeout(l,t)),p&&(u=e.apply(a,o),a=o=null),u};return c.clear=function(){s&&(clearTimeout(s),s=null)},c.flush=function(){s&&(u=e.apply(a,o),a=o=null,clearTimeout(s),s=null)},c}af.debounce=af;var WR=af;(function(e,t){t===void 0&&(t={});var r=t.insertAt;if(e&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var Cp,GR=(Cp="indiana-scroll-container",function(e,t){if(!e)return Cp;var r;typeof e=="string"?r=e:t=e;var s=Cp;return r&&(s+="__"+r),s+(t?Object.keys(t).reduce(function(o,a){var i=t[a];return i&&(o+=" "+(typeof i=="boolean"?s+"--"+a:s+"--"+a+"_"+i)),o},""):"")}),jR=function(e){function t(r){var s=e.call(this,r)||this;return s.onEndScroll=function(){s.scrolling=!1,!s.pressed&&s.started&&s.processEnd()},s.onScroll=function(o){var a=s.container.current;a.scrollLeft===s.scrollLeft&&a.scrollTop===s.scrollTop||(s.scrolling=!0,s.processScroll(o),s.onEndScroll())},s.onTouchStart=function(o){var a=s.props.nativeMobileScroll;if(s.isDraggable(o.target))if(s.internal=!0,a&&s.scrolling)s.pressed=!0;else{var i=o.touches[0];s.processClick(o,i.clientX,i.clientY),!a&&s.props.stopPropagation&&o.stopPropagation()}},s.onTouchEnd=function(o){var a=s.props.nativeMobileScroll;s.pressed&&(!s.started||s.scrolling&&a?s.pressed=!1:s.processEnd(),s.forceUpdate())},s.onTouchMove=function(o){var a=s.props.nativeMobileScroll;if(s.pressed&&(!a||!s.isMobile)){var i=o.touches[0];i&&s.processMove(o,i.clientX,i.clientY),o.preventDefault(),s.props.stopPropagation&&o.stopPropagation()}},s.onMouseDown=function(o){s.isDraggable(o.target)&&s.isScrollable()&&(s.internal=!0,s.props.buttons.indexOf(o.button)!==-1&&(s.processClick(o,o.clientX,o.clientY),o.preventDefault(),s.props.stopPropagation&&o.stopPropagation()))},s.onMouseMove=function(o){s.pressed&&(s.processMove(o,o.clientX,o.clientY),o.preventDefault(),s.props.stopPropagation&&o.stopPropagation())},s.onMouseUp=function(o){s.pressed&&(s.started?s.processEnd():(s.internal=!1,s.pressed=!1,s.forceUpdate(),s.props.onClick&&s.props.onClick(o)),o.preventDefault(),s.props.stopPropagation&&o.stopPropagation())},s.container=Pn.createRef(),s.onEndScroll=WR(s.onEndScroll,300),s.scrolling=!1,s.started=!1,s.pressed=!1,s.internal=!1,s.getRef=s.getRef.bind(s),s}return function(r,s){function o(){this.constructor=r}O4(r,s),r.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}(t,e),t.prototype.componentDidMount=function(){var r=this.props.nativeMobileScroll,s=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),s.addEventListener("touchstart",this.onTouchStart,{passive:!1}),s.addEventListener("mousedown",this.onMouseDown,{passive:!1}),r&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},t.prototype.isDraggable=function(r){var s=this.props.ignoreElements;if(s){var o=r.closest(s);return o===null||o.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var r=this.container.current;return r&&(r.scrollWidth>r.clientWidth||r.scrollHeight>r.clientHeight)},t.prototype.processClick=function(r,s,o){var a=this.container.current;this.scrollLeft=a.scrollLeft,this.scrollTop=a.scrollTop,this.clientX=s,this.clientY=o,this.pressed=!0},t.prototype.processStart=function(r){r===void 0&&(r=!0);var s=this.props.onStartScroll;this.started=!0,r&&document.body.classList.add("indiana-dragging"),s&&s({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(r){if(this.started){var s=this.props.onScroll;s&&s({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(r,s,o){var a=this.props,i=a.horizontal,u=a.vertical,l=a.activationDistance,c=a.onScroll,p=this.container.current;this.started?(i&&(p.scrollLeft-=s-this.clientX),u&&(p.scrollTop-=o-this.clientY),c&&c({external:!this.internal}),this.clientX=s,this.clientY=o,this.scrollLeft=p.scrollLeft,this.scrollTop=p.scrollTop):(i&&Math.abs(s-this.clientX)>l||u&&Math.abs(o-this.clientY)>l)&&(this.clientX=s,this.clientY=o,this.processStart())},t.prototype.processEnd=function(){var r=this.props.onEndScroll;this.container.current&&r&&r({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(r){[this.container,this.props.innerRef].forEach(function(s){s&&(typeof s=="function"?s(r):s.current=r)})},t.prototype.render=function(){var r=this.props,s=r.children,o=r.draggingClassName,a=r.className,i=r.style,u=r.hideScrollbars,l=r.component;return Pn.createElement(l,{className:UR(a,this.pressed&&o,GR({dragging:this.pressed,"hide-scrollbars":u,"native-scroll":this.isMobile})),style:i,ref:this.getRef,onScroll:this.onScroll},s)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(xe.exports.PureComponent);const HR=({maskDataArr:e,handleChangeMaskData:t,handleChangeMask:r,selectedMask:s})=>{const[o,a]=xe.exports.useState(),i=xe.exports.useRef([]),u=xe.exports.useRef(!1),l=xe.exports.useRef(0),c=ge(jR)`
    white-space: nowrap;
  `,p=ge.article`
    transition: all 0.5s ease;
    width: 100vw;
    background-color: white;
    z-index: 100003;
    position: relative;
    padding: 0px 20px;
    max-width: 900px;
    padding-top: 15px;
    @media (orientation: portrait) and (max-width: 720px),
      (orientation: landscape) and (max-height: 720px) {
      padding-top: 2vmin;
    }
  `,d=ge.button`
    border-radius: 16px;
    padding: 5px 10px;
    background-color: ${h=>h.isSelected?"black":"white"};
    color: ${h=>h.isSelected?"white":"black"};
    margin-right: 10px;
    border: 1px solid black;
    font-size: 18px;
    @media (orientation: portrait) and (max-width: 720px),
      (orientation: landscape) and (max-height: 720px) {
      font-size: 2.5vmin;
      border-radius: 3vmin;
    }
  `;xe.exports.useEffect(()=>{window.innerWidth>720?a(720/150):a(window.innerWidth/(window.innerWidth*.25)),window.addEventListener("resize",()=>{window.innerWidth>720?a(720/150):a(window.innerWidth/(window.innerWidth*.25))})},[]),xe.exports.useEffect(()=>{const h=Un.findIndex(g=>g.list==e),m=i.current[h];u.current?m.scrollIntoView({block:"nearest",inline:"center"}):m.parentElement.scrollTo(l.current,0)},[e]);const f=(h,m)=>{const g=h.currentTarget;new IntersectionObserver((y,v)=>{y.forEach(w=>{w.intersectionRatio<1?u.current=!0:(u.current=!1,l.current=w.target.parentElement.scrollLeft),t(m),v.disconnect()})}).observe(g)};return Ee(p,{children:[j(c,{children:Un.map((h,m)=>j(d,{ref:g=>i.current[m]=g,onClick:g=>f(g,m),isSelected:Un[m].list==e,children:h.name}))}),j(c,{children:e.map((h,m)=>j(zR,{maskData:h,idx:m,handleChangeMask:r,selected:e.indexOf(s)===m},m))})]})},KR=({children:e})=>{const t=document.getElementById("modal-root");return ek.createPortal(e,t)},qR=ge.div`
  position: fixed;
  width: 100%;
  height: 100%;
  z-index: 100004;
  top: 0;
`,XR=ge.div`
  flex-direction: column;
  align-items: center;
  padding: 25px;
  position: fixed;
  left: 50%;
  display: flex;
  top: 50%;
  transform: translate(-50%, -50%);
  background: white;
  box-shadow: 1px 1px 4px gray;
  white-space: nowrap;
`,YR=ge.span`
  color: black;
  font-size: 16px;
  margin-top: 15px;
  margin-bottom: 3px;
`,Jy=({title:e,text:t})=>j(qR,{id:"ML_Loading",children:Ee(XR,{children:[j("img",{width:"65px",src:"/images/loading.gif"}),j(YR,{children:e}),j("span",{children:t})]})});function QR(e){return cg({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"}}]})(e)}function ZR(e){return cg({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.6 48 48 141.6 48 256s93.6 208 208 208 208-93.6 208-208S370.4 48 256 48zm112 194h-98l44.8-44.8C300.1 181.8 279.1 172 256 172c-46.2 0-84 37.8-84 84s37.8 84 84 84c34.9 0 65.3-21.2 77.6-52h29.8c-13.9 46.3-56.3 80-107.4 80-62.3 0-112-50.4-112-112s50.4-112 112-112c30.8 0 58.8 12.6 79.1 32.9L368 144v98z"}}]})(e)}function JR(){var e;let t;if("IntersectionObserver"in window){e=document.querySelectorAll(".lazy");var r=new IntersectionObserver(function(o,a){o.forEach(function(i){if(i.isIntersecting){var u=i.target;u.src=u.dataset.src,u.classList.add("afterLoad")}})});e.forEach(function(o){r.observe(o)})}else{var s;e=document.querySelectorAll(".lazy"),t=()=>{s&&clearTimeout(s),s=setTimeout(function(){var o=window.pageYOffset;e.forEach(function(a){a.offsetTop<window.innerHeight+o&&(a.src=a.dataset.src,a.classList.add("afterLoad"))}),e.length==0&&(document.removeEventListener("scroll",t),window.removeEventListener("resize",t),window.removeEventListener("orientationChange",t))},20)},document.addEventListener("scroll",t),window.addEventListener("resize",t),window.addEventListener("orientationChange",t)}}const e7=ge.div`
  white-space: pre-wrap;
  background: rgb(230, 230, 230);
  padding: 1.5vh 2vh;
  color: black;
  width: 100%;
  font-size: 1.7vh;
  margin-top: 0.5vh;
  margin-bottom: 1vh;
  text-align: center;
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  @media (max-width: 720px) {
    padding: 2vw 4.17vw;
    font-size: 2.42vw;
  }
  ${lg.borderRadius}
`,F4=Gn`
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  transform: scale(-1, 1);
  transition: 0.125s linear;
`,t7=ge.div`
  z-index: 100002;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  max-width: 700px;
`,n7=ge.video`
  opacity: 0;
  ${F4}
`,r7=ge.canvas`
  z-index: 100001;
  max-width: 900px;
  ${F4}
`,s7=ge.div`
  display: flex;
  height: calc(var(--vh, 1vh) * 100);
  width: 100vw;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
`,B4=Gn`
  padding: 7px 15px;
  position: absolute;
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-around;
  z-index: 100004;
  font-size: 23px;
  border-radius: 20px;
  top: 10px;
  background-color: #db4c64;
  @media (orientation: portrait) and (max-width: 720px),
    (orientation: landscape) and (max-height: 720px) {
    font-size: 3.5vmin;
    border-radius: 3vmin;
    padding: 1.3vmin 3vmin;
  }
  svg {
    margin-left: 5px;
  }
`,o7=ge.button`
  left: 10px;
  ${B4}
  svg {
    font-size: 29px;
  }
  @media (orientation: portrait) and (max-width: 720px),
    (orientation: landscape) and (max-height: 720px) {
    svg {
      font-size: 4.2vmin;
    }
  }
`,a7=ge.button`
  right: 10px;
  ${B4}
`,i7=({drawMethod:e,stream:t})=>{const[r,s]=xe.exports.useState("\uC778\uACF5\uC9C0\uB2A5\uC744 \uBD88\uB7EC\uC624\uB294 \uC911\uC774\uC608\uC694"),[o,a]=xe.exports.useState(!1),[i,u]=xe.exports.useState(Un[0].list),[l,c]=xe.exports.useState(!0),[p,d]=xe.exports.useState(!1),[f,h]=xe.exports.useState({result:"",resultKor:""}),m=xe.exports.useRef(Un[0].list[0]),g=z=>{m.current=Un[z].list[0],u(Un[z].list)},x=z=>{$.current.setMaskImage(i[z]),m.current=i[z]},y=xe.exports.useRef(null),v=xe.exports.useRef(null),w=xe.exports.useRef(null),$=xe.exports.useRef(),b=xe.exports.useRef(),T=z=>{$.current.draw(z)},S=z=>{$.current.draw(z)},D=async()=>{var E,A;const z=await b.current.estimateFaces({input:v.current,returnTensors:!1,flipHorizontal:!1,predictIrises:!1});try{if((E=$.current)==null||E.clear(),z){const V=(A=z[0])==null?void 0:A.scaledMesh;V&&(o?S(V):T(V))}v.current.srcObject.active&&requestAnimationFrame(D)}catch(O){alert(O)}};return xe.exports.useEffect(()=>{v.current.srcObject=t;try{v.current.play().then(()=>{$.current=new AR(a,s,c,d,h),$.current.init(y.current,v.current,w.current),I4(Fo.mediapipeFacemesh,{maxFaces:1}).then(z=>{b.current=z,c(!1),D()})})}catch(z){s(z)}},[]),xe.exports.useEffect(()=>{if(o){const{maskList:z,explain:E}=MR[f.resultKor],A=`\uD37C\uC2A4\uB110\uCEEC\uB7EC \uCD94\uCC9C - ${f.resultKor}`;Un.unshift({name:A,list:z}),u(Un[0].list),s(E),$.current=new Cu,$.current.init(y.current,v.current,w.current),m.current=Un[0].list[0],$.current.setMaskImage(m.current)}},[o]),xe.exports.useEffect(()=>{JR(),o&&$.current.setMaskImage(i[0])},[i]),Ee(s7,{children:[j(r7,{id:"canvas",ref:y}),j(n7,{muted:!0,playsInline:!0,id:"video",ref:v}),j(KR,{children:l?p?j(Jy,{text:"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694",title:"\uD37C\uC2A4\uB110\uCEEC\uB7EC\uB97C \uCE21\uC815 \uC911\uC774\uC5D0\uC694!"}):j(Jy,{text:"\uAE30\uAE30\uC5D0 \uB530\uB77C \uCD5C\uB300 1\uBD84 \uAC00\uAE4C\uC774 \uC18C\uC694\uB420 \uC218 \uC788\uC5B4\uC694",title:"\uC778\uACF5\uC9C0\uB2A5\uC744 \uBD88\uB7EC\uC624\uB294 \uC911\uC774\uC5D0\uC694"}):""}),Ee(o7,{onClick:()=>window.location.reload(),children:["\uB2E4\uC2DC\uD558\uAE30 ",j(ZR,{})]}),Ee(a7,{onClick:()=>window.open(`https://mycolor.kr/${f.result}`),children:[f.resultKor||"\uD37C\uC2A4\uB110\uCEEC\uB7EC"," ",j(QR,{})]}),j(t7,{children:j(e7,{id:"testExplain",children:r})}),j("div",{ref:w,children:j(HR,{maskDataArr:i,selectedMask:m.current,handleChangeMaskData:g,handleChangeMask:x})})]})},Vt={ModeBtn:ge.div`
    position: relative;
    top: 50%;
    transform: translateY(-50%);
    margin-top: 5px;
  `,TextWrapper:ge.div`
    display: flex;
    flex-direction: column;
    text-align: left;
    margin-left: 1vh;
  `,ImgWrapper:ge.div`
    width: 4.22vh;
    height: 4.22vh;
    min-width: 24px;
    min-height: 24px;
    border-radius: 100px;
    background-color: #ff5da3;
    display: flex;
  `,CamImg:ge.img`
    width: 2vh;
    min-width: 12px;
    min-height: 12px;
    height: 2vh;
    position: relative;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  `,P:ge.p`
    font-weight: 300;
    font-size: 1.22vh;
    margin-top: 0.63vh;
    color: #92888c;
    @media (max-height: 513px) {
      font-size: 8px;
    }
  `,H1:ge.span`
    font-size: 1.9vh;
    @media (max-height: 513px) {
      font-size: 11px;
    }
  `,MiddleWrapper:ge.div`
    display: flex;
    align-items: center;
  `,Wrapper:ge.div`
    display: flex;
    padding: 2vh 2vh;
    align-items: center;
    position: relative;
    margin-bottom: 2.5vh;
    background: white;
    text-align: center;
    cursor: pointer;
    box-shadow: 0px 10px 40px #0000000f;
    border-radius: 1.11vh;
    :hover {
      background-color: #ebfdfc;
    }
  `};var uf={exports:{}};(function(e,t){(function(){var r=!1,s=function(E){if(E instanceof s)return E;if(!(this instanceof s))return new s(E);this.EXIFwrapped=E};e.exports&&(t=e.exports=s),t.EXIF=s;var o=s.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},a=s.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},i=s.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},u=s.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},l=s.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function c(E){return!!E.exifdata}function p(E,A){A=A||E.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",E=E.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var O=atob(E),V=O.length,B=new ArrayBuffer(V),W=new Uint8Array(B),H=0;H<V;H++)W[H]=O.charCodeAt(H);return B}function d(E,A){var O=new XMLHttpRequest;O.open("GET",E,!0),O.responseType="blob",O.onload=function(V){(this.status==200||this.status===0)&&A(this.response)},O.send()}function f(E,A){function O(H){var Q=h(H);E.exifdata=Q||{};var U=m(H);if(E.iptcdata=U||{},s.isXmpEnabled){var G=S(H);E.xmpdata=G||{}}A&&A.call(E)}if(E.src)if(/^data\:/i.test(E.src)){var V=p(E.src);O(V)}else if(/^blob\:/i.test(E.src)){var B=new FileReader;B.onload=function(H){O(H.target.result)},d(E.src,function(H){B.readAsArrayBuffer(H)})}else{var W=new XMLHttpRequest;W.onload=function(){if(this.status==200||this.status===0)O(W.response);else throw"Could not load image";W=null},W.open("GET",E.src,!0),W.responseType="arraybuffer",W.send(null)}else if(self.FileReader&&(E instanceof self.Blob||E instanceof self.File)){var B=new FileReader;B.onload=function(Q){O(Q.target.result)},B.readAsArrayBuffer(E)}}function h(E){var A=new DataView(E);if(A.getUint8(0)!=255||A.getUint8(1)!=216)return!1;for(var O=2,V=E.byteLength,B;O<V;){if(A.getUint8(O)!=255)return!1;if(B=A.getUint8(O+1),B==225)return T(A,O+4,A.getUint16(O+2)-2);O+=2+A.getUint16(O+2)}}function m(E){var A=new DataView(E);if(A.getUint8(0)!=255||A.getUint8(1)!=216)return!1;for(var O=2,V=E.byteLength,B=function(U,G){return U.getUint8(G)===56&&U.getUint8(G+1)===66&&U.getUint8(G+2)===73&&U.getUint8(G+3)===77&&U.getUint8(G+4)===4&&U.getUint8(G+5)===4};O<V;){if(B(A,O)){var W=A.getUint8(O+7);W%2!==0&&(W+=1),W===0&&(W=4);var H=O+8+W,Q=A.getUint16(O+6+W);return x(E,H,Q)}O++}}var g={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function x(E,A,O){for(var V=new DataView(E),B={},W,H,Q,U,G=A;G<A+O;)V.getUint8(G)===28&&V.getUint8(G+1)===2&&(U=V.getUint8(G+2),U in g&&(Q=V.getInt16(G+3),H=g[U],W=b(V,G+5,Q),B.hasOwnProperty(H)?B[H]instanceof Array?B[H].push(W):B[H]=[B[H],W]:B[H]=W)),G++;return B}function y(E,A,O,V,B){var W=E.getUint16(O,!B),H={},Q,U,G;for(G=0;G<W;G++)Q=O+G*12+2,U=V[E.getUint16(Q,!B)],!U&&r&&console.log("Unknown tag: "+E.getUint16(Q,!B)),H[U]=v(E,Q,A,O,B);return H}function v(E,A,O,V,B){var W=E.getUint16(A+2,!B),H=E.getUint32(A+4,!B),Q=E.getUint32(A+8,!B)+O,U,G,ae,ee,Y,Z;switch(W){case 1:case 7:if(H==1)return E.getUint8(A+8,!B);for(U=H>4?Q:A+8,G=[],ee=0;ee<H;ee++)G[ee]=E.getUint8(U+ee);return G;case 2:return U=H>4?Q:A+8,b(E,U,H-1);case 3:if(H==1)return E.getUint16(A+8,!B);for(U=H>2?Q:A+8,G=[],ee=0;ee<H;ee++)G[ee]=E.getUint16(U+2*ee,!B);return G;case 4:if(H==1)return E.getUint32(A+8,!B);for(G=[],ee=0;ee<H;ee++)G[ee]=E.getUint32(Q+4*ee,!B);return G;case 5:if(H==1)return Y=E.getUint32(Q,!B),Z=E.getUint32(Q+4,!B),ae=new Number(Y/Z),ae.numerator=Y,ae.denominator=Z,ae;for(G=[],ee=0;ee<H;ee++)Y=E.getUint32(Q+8*ee,!B),Z=E.getUint32(Q+4+8*ee,!B),G[ee]=new Number(Y/Z),G[ee].numerator=Y,G[ee].denominator=Z;return G;case 9:if(H==1)return E.getInt32(A+8,!B);for(G=[],ee=0;ee<H;ee++)G[ee]=E.getInt32(Q+4*ee,!B);return G;case 10:if(H==1)return E.getInt32(Q,!B)/E.getInt32(Q+4,!B);for(G=[],ee=0;ee<H;ee++)G[ee]=E.getInt32(Q+8*ee,!B)/E.getInt32(Q+4+8*ee,!B);return G}}function w(E,A,O){var V=E.getUint16(A,!O);return E.getUint32(A+2+V*12,!O)}function $(E,A,O,V){var B=w(E,A+O,V);if(B){if(B>E.byteLength)return{}}else return{};var W=y(E,A,A+B,u,V);if(W.Compression)switch(W.Compression){case 6:if(W.JpegIFOffset&&W.JpegIFByteCount){var H=A+W.JpegIFOffset,Q=W.JpegIFByteCount;W.blob=new Blob([new Uint8Array(E.buffer,H,Q)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",W.Compression)}else W.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return W}function b(E,A,O){var V="";for(n=A;n<A+O;n++)V+=String.fromCharCode(E.getUint8(n));return V}function T(E,A){if(b(E,A,4)!="Exif")return!1;var O,V,B,W,H,Q=A+6;if(E.getUint16(Q)==18761)O=!1;else if(E.getUint16(Q)==19789)O=!0;else return!1;if(E.getUint16(Q+2,!O)!=42)return!1;var U=E.getUint32(Q+4,!O);if(U<8)return!1;if(V=y(E,Q,Q+U,a,O),V.ExifIFDPointer){W=y(E,Q,Q+V.ExifIFDPointer,o,O);for(B in W){switch(B){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":W[B]=l[B][W[B]];break;case"ExifVersion":case"FlashpixVersion":W[B]=String.fromCharCode(W[B][0],W[B][1],W[B][2],W[B][3]);break;case"ComponentsConfiguration":W[B]=l.Components[W[B][0]]+l.Components[W[B][1]]+l.Components[W[B][2]]+l.Components[W[B][3]];break}V[B]=W[B]}}if(V.GPSInfoIFDPointer){H=y(E,Q,Q+V.GPSInfoIFDPointer,i,O);for(B in H){switch(B){case"GPSVersionID":H[B]=H[B][0]+"."+H[B][1]+"."+H[B][2]+"."+H[B][3];break}V[B]=H[B]}}return V.thumbnail=$(E,Q,U,O),V}function S(E){if("DOMParser"in self){var A=new DataView(E);if(A.getUint8(0)!=255||A.getUint8(1)!=216)return!1;for(var O=2,V=E.byteLength,B=new DOMParser;O<V-4;)if(b(A,O,4)=="http"){var W=O-1,H=A.getUint16(O-2)-1,Q=b(A,W,H),U=Q.indexOf("xmpmeta>")+8;Q=Q.substring(Q.indexOf("<x:xmpmeta"),U);var G=Q.indexOf("x:xmpmeta")+10;Q=Q.slice(0,G)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+Q.slice(G);var ae=B.parseFromString(Q,"text/xml");return z(ae)}else O++}}function D(E){var A={};if(E.nodeType==1){if(E.attributes.length>0){A["@attributes"]={};for(var O=0;O<E.attributes.length;O++){var V=E.attributes.item(O);A["@attributes"][V.nodeName]=V.nodeValue}}}else if(E.nodeType==3)return E.nodeValue;if(E.hasChildNodes())for(var B=0;B<E.childNodes.length;B++){var W=E.childNodes.item(B),H=W.nodeName;if(A[H]==null)A[H]=D(W);else{if(A[H].push==null){var Q=A[H];A[H]=[],A[H].push(Q)}A[H].push(D(W))}}return A}function z(E){try{var A={};if(E.children.length>0)for(var O=0;O<E.children.length;O++){var V=E.children.item(O),B=V.attributes;for(var W in B){var H=B[W],Q=H.nodeName,U=H.nodeValue;Q!==void 0&&(A[Q]=U)}var G=V.nodeName;if(typeof A[G]>"u")A[G]=D(V);else{if(typeof A[G].push>"u"){var ae=A[G];A[G]=[],A[G].push(ae)}A[G].push(D(V))}}else A=E.textContent;return A}catch(ee){console.log(ee.message)}}s.enableXmp=function(){s.isXmpEnabled=!0},s.disableXmp=function(){s.isXmpEnabled=!1},s.getData=function(E,A){return(self.Image&&E instanceof self.Image||self.HTMLImageElement&&E instanceof self.HTMLImageElement)&&!E.complete?!1:(c(E)?A&&A.call(E):f(E,A),!0)},s.getTag=function(E,A){if(!!c(E))return E.exifdata[A]},s.getIptcTag=function(E,A){if(!!c(E))return E.iptcdata[A]},s.getAllTags=function(E){if(!c(E))return{};var A,O=E.exifdata,V={};for(A in O)O.hasOwnProperty(A)&&(V[A]=O[A]);return V},s.getAllIptcTags=function(E){if(!c(E))return{};var A,O=E.iptcdata,V={};for(A in O)O.hasOwnProperty(A)&&(V[A]=O[A]);return V},s.pretty=function(E){if(!c(E))return"";var A,O=E.exifdata,V="";for(A in O)O.hasOwnProperty(A)&&(typeof O[A]=="object"?O[A]instanceof Number?V+=A+" : "+O[A]+" ["+O[A].numerator+"/"+O[A].denominator+`]\r
`:V+=A+" : ["+O[A].length+` values]\r
`:V+=A+" : "+O[A]+`\r
`);return V},s.readFromBinaryFile=function(E){return h(E)}}).call(Ds)})(uf,uf.exports);const ex=uf.exports;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const is={},wp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function u7(e,t){is[e]=t}function Qn(e){if(!(e in is)){const r=c7(e);if(r!==null)is[e]=r;else return console.log("Could not get context for WebGL version",e),null}const t=is[e];return t.isContextLost()?(delete is[e],Qn(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),is[e])}function l7(e){if(typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function c7(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=l7(e);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete is[e]},!1),e===1?t.getContext("webgl",wp)||t.getContext("experimental-webgl",wp):t.getContext("webgl2",wp)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ti;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(ti||(ti={}));var nn;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(nn||(nn={}));var ft;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ft||(ft={}));function vi(e,t){return[t,e]}function p7(e,t){return e*t}function Da(e){const t=ne(e),r=Math.ceil(t/4);return kd(r)}function Zo(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function d7(e,t){const[r,s]=Zo(e,t);return r*s*4}function pg(e,t){const r=e;let s,o,a,i,u,l,c,p,d,f;return K().getNumber("WEBGL_VERSION")===2?(s=r.R32F,o=r.R16F,a=r.RGBA16F,i=r.RGBA32F,u=r.RED,c=4,p=1,d=r.HALF_FLOAT,f=r.FLOAT):(s=e.RGBA,o=e.RGBA,a=e.RGBA,i=r.RGBA,u=e.RGBA,c=4,p=4,d=t!=null?t.HALF_FLOAT_OES:null,f=e.FLOAT),l=e.RGBA,{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:u,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:p,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ue(e,t){const r=t();return K().getBool("DEBUG")&&f7(e),r}function f7(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+y7(e,t))}const h7=596e-10,m7=65504;function g7(e){return!!(K().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||h7<Math.abs(e)&&Math.abs(e)<m7)}function y7(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function qi(e,t){return Cr(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function x7(e,t){const r=Cr(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ue(e,()=>e.shaderSource(r,t)),ue(e,()=>e.compileShader(r)),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function v7(e,t){const r=Cr(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ue(e,()=>e.shaderSource(r,t)),ue(e,()=>e.compileShader(r)),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw w7(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}const C7=/ERROR: [0-9]+:([0-9]+):/g;function w7(e,t){const r=C7.exec(t);if(r==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const s=+r[1],o=e.split(`
`),a=o.length.toString().length+2,i=o.map((d,f)=>yo((f+1).toString(),a)+d);let u=0;for(let d=0;d<i.length;d++)u=Math.max(i[d].length,u);const l=i.slice(0,s-1),c=i.slice(s-1,s),p=i.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${yo(c[0],u)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join(`
`))}function b7(e){return Cr(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function $7(e,t){if(ue(e,()=>e.linkProgram(t)),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function bp(e,t){if(ue(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function _7(e,t){const r=Cr(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ue(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),ue(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),r}function S7(e,t){const r=Cr(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ue(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)),ue(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),r}function k7(e){return Cr(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function E7(e,t){const r=K().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const s=`[${e}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(e>r||t>r){const s=`[${e}x${t}]`,o=`[${r}x${r}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function N7(e){return Cr(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function tx(e,t,r,s,o,a,i){const u=e.getAttribLocation(t,r);return u===-1?!1:(ue(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),ue(e,()=>e.vertexAttribPointer(u,o,e.FLOAT,!1,a,i)),ue(e,()=>e.enableVertexAttribArray(u)),!0)}function T7(e,t,r){P7(e,r),ue(e,()=>e.activeTexture(e.TEXTURE0+r)),ue(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function I7(e,t,r){return Cr(e,()=>e.getUniformLocation(t,r),'uniform "'+r+'" not present in program.')}function D7(e,t,r){return e.getUniformLocation(t,r)}function A7(e,t,r,s){ue(e,()=>T7(e,t,s)),ue(e,()=>e.uniform1i(r,s))}function $p(e,t,r){ue(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),ue(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function nx(e,t){ue(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),ue(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function Xi(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+R7(e,t))}function R7(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function Cr(e,t,r){const s=ue(e,()=>t());if(s==null)throw new Error(r);return s}function P7(e,t){const r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+e.TEXTURE0;if(s<e.TEXTURE0||s>r){const o=`[gl.TEXTURE0, gl.TEXTURE${r}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Bo(e,t=2){return ne(e.slice(0,e.length-t))}function Lo(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function _p(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Bo(e),...Lo(e)]),t}function O7(e,t=!1){let r=K().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(r=r*2,e=e.map((o,a)=>a>=e.length-2?xC(e[a]):e[a]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Os(e).newShape);let s=ne(e);if(e.length<=1&&s<=r)return[1,s];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){const o=Bo(e);let a=2,i=2;return e.length&&([a,i]=Lo(e)),s=o*(a/2)*(i/2),kd(s).map(u=>u*2)}return kd(s)}function Yi(e){return e%2===0}function al(e,t){if(e=e.slice(-2),t=t.slice(-2),_t(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const r=e.slice(-1)[0],s=t.slice(-1)[0];if(r===s||Yi(r)&&Yi(s)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Yi(e[0])&&Yi(t[0])}let Sp,kp;function F7(e){if(Sp==null){const t=Qn(e);Sp=t.getParameter(t.MAX_TEXTURE_SIZE)}return Sp}function B7(e){if(kp==null){const t=Qn(e);kp=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,kp)}function L7(e){if(e===0)return 0;let t;const r=Qn(e);return mn(r,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:mn(r,"EXT_disjoint_timer_query")?t=1:t=0,t}function mn(e,t){return e.getExtension(t)!=null}function rx(e){try{if(Qn(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function z7(e){if(e===0)return!1;const t=Qn(e);if(e===1){if(!mn(t,"OES_texture_float"))return!1}else if(!mn(t,"EXT_color_buffer_float"))return!1;return lf(t)}function M7(e){if(e===0)return!1;const t=Qn(e);if(e===1){if(!mn(t,"OES_texture_float")||!mn(t,"WEBGL_color_buffer_float"))return!1}else{if(mn(t,"EXT_color_buffer_float"))return lf(t);const s="EXT_color_buffer_half_float";if(mn(t,s)){const o=t.getExtension(s);return V7(t,o)}return!1}return lf(t)}function lf(e){const t=pg(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const s=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,s,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}function V7(e,t){const r=pg(e,t),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=1,a=1;e.texImage2D(e.TEXTURE_2D,0,r.internalFormatHalfFloat,o,a,0,r.textureFormatFloat,r.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(i),u}function U7(e){return e!==2?!1:Qn(e).fenceSync!=null}function Ci(e,t){Array.isArray(e)||(e=[e]),e.forEach(r=>{r!=null&&k(r.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pe=K();pe.registerFlag("HAS_WEBGL",()=>pe.getNumber("WEBGL_VERSION")>0);pe.registerFlag("WEBGL_VERSION",()=>rx(2)?2:rx(1)?1:0);pe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);pe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>pe.get("WEBGL_VERSION")===2);pe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);pe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);pe.registerFlag("WEBGL_PACK",()=>pe.getBool("HAS_WEBGL"));pe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_CLIP",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);pe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_PACK_REDUCE",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_LAZILY_UNPACK",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_CONV_IM2COL",()=>pe.getBool("WEBGL_PACK"));pe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>F7(pe.getNumber("WEBGL_VERSION")));pe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>B7(pe.getNumber("WEBGL_VERSION")));pe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=pe.getNumber("WEBGL_VERSION");return e===0?0:L7(e)});pe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>pe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!YE());pe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>z7(pe.getNumber("WEBGL_VERSION")));pe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>pe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:pe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));pe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>M7(pe.getNumber("WEBGL_VERSION")));pe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>U7(pe.getNumber("WEBGL_VERSION")));pe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>pe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);pe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(){let e,t,r,s,o,a,i,u,l,c;return K().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",s="in",o="texture",a="outputColor",i="out vec4 outputColor;",u=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",s="varying",o="texture2D",a="gl_FragColor",i="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:s,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:u,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(e,t,r="index"){const s=Kt(t);return s.map((o,a)=>{const i=`int ${e[a]} = ${r} / ${o}`,u=a===s.length-1?`int ${e[a+1]} = ${r} - ${e[a]} * ${o}`:`index -= ${e[a]} * ${o}`;return`${i}; ${u};`}).join("")}function dg(e){const t=Kt(e).map(r=>r.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}const L4=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W7{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ti.DENSE;const r=Da(t),s=At();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${Ms(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${r[0]}, ${r[1]}));
        int index = 4 * (resTexRC.x * ${r[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G7{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ti.DENSE;const r=Da(t),s=At();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${Ms(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${r[0]}, ${r[1]}));
        int index = 4 * (resTexRC.x * ${r[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j7{constructor(t){this.variableNames=["A"],this.outTexUsage=nn.DOWNLOAD;const r=At();this.outputShape=t,this.userCode=`
      ${L4}

      void main() {
        float x = getAAtOutCoords();
        ${r.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H7{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=nn.DOWNLOAD;const r=At();this.outputShape=t,this.userCode=`
      ${L4}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${r.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7{constructor(t,r,s=!1){this.variableNames=["A"];const o=At(),[a,i]=r;this.outputShape=t;let u="result";s&&(u="floor(result * 255. + 0.5)"),this.userCode=`
      ${dg(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${i};
        int c = imod(flatIndex, ${i});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${i}.0, ${a}.0);
        vec4 values = ${o.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${o.output} = vec4(${u}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q7{constructor(t,r,s=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const o=At(),[a,i]=r;this.outputShape=t;let u="",l="result";s&&(l="floor(result * 255. + 0.5)");for(let c=0;c<=1;c++)for(let p=0;p<=1;p++){const d=c*2+p;u+=`
          localCoords = coords;
          if(localCoords[2] + ${p} < ${t[2]}) {
            localCoords[2] += ${p};
            if(localCoords[1] + ${c} < ${t[1]}) {
              localCoords[1] += ${c};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${i};
              c = imod(flatIndex, ${i});
              uv = (vec2(c, r) + halfCR) / vec2(${i}.0, ${a}.0);
              values = ${o.texture2D}(A, uv);

              if(offset == 0) {
                result[${d}] = values[0];
              } else if(offset == 1) {
                result[${d}] = values[1];
              } else if(offset == 2) {
                result[${d}] = values[2];
              } else {
                result[${d}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${dg(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${u}

        ${o.output} = ${l};
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(e){const t=At(),r=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return x7(e,r)}function Y7(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return _7(e,t)}function Q7(e){const t=new Uint16Array([0,1,2,2,1,3]);return S7(e,t)}function wi(e,t,r,s,o,a){E7(t,r);const i=k7(e),u=e.TEXTURE_2D;return ue(e,()=>e.bindTexture(u,i)),ue(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),ue(e,()=>e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),ue(e,()=>e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)),ue(e,()=>e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)),ue(e,()=>e.texImage2D(u,0,s,t,r,0,o,a,null)),ue(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function z4(e){return e.internalFormatFloat}function Z7(e,t,r,s){const[o,a]=vi(t,r);return wi(e,o,a,z4(s),s.textureFormatFloat,e.FLOAT)}function M4(e){return e.internalFormatHalfFloat}function J7(e,t,r,s){const[o,a]=vi(t,r);return wi(e,o,a,M4(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function V4(e){return e.downloadTextureFormat}function eP(e,t,r,s){const[o,a]=vi(t,r);return wi(e,o,a,V4(s),e.RGBA,e.UNSIGNED_BYTE)}function U4(e){return e.internalFormatPackedFloat}function tP(e,t,r,s){const[o,a]=Zo(t,r);return wi(e,o,a,U4(s),e.RGBA,e.FLOAT)}function W4(e){return e.internalFormatPackedHalfFloat}function nP(e,t,r,s){const[o,a]=Zo(t,r);return wi(e,o,a,W4(s),e.RGBA,s.textureTypeHalfFloat)}function rP(e,t,r){return ue(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),tx(e,t,"clipSpacePos",r,3,20,0)&&tx(e,t,"uv",r,2,20,12)}function sP(e,t,r,s,o,a){ue(e,()=>e.bindTexture(e.TEXTURE_2D,t));let i,u,l;o instanceof Uint8Array?(i=new Uint8Array(r*s*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(r*s*4),u=e.FLOAT,l=a.internalFormatPackedFloat),i.set(o),ue(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,r,s,0,e.RGBA,u,i)),ue(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function oP(e,t,r){ue(e,()=>e.bindTexture(e.TEXTURE_2D,t)),r.data instanceof Uint8Array?ue(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)):ue(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)),ue(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function aP(e,t,r,s){const o=e.createBuffer();ue(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const u=4*4*t*r;return ue(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,u,e.STREAM_READ)),ue(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)),ue(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function iP(e,t,r){const s=e,o=new Float32Array(r);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function uP(e,t,r,s){const[o,a]=vi(t,r),i=4,u=new Uint8Array(p7(t*r,i));return ue(e,()=>e.readPixels(0,0,o,a,s.downloadTextureFormat,e.UNSIGNED_BYTE,u)),new Float32Array(u.buffer)}function lP(e,t,r,s,o,a,i,u){const l=e,c=new Float32Array(d7(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function cP(e,t,r){const s=new Float32Array(t*r*4);return ue(e,()=>e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pP{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const r=K().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,u7(r,t)):this.gl=Qn(r);let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(K().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=qi(this.gl,a),mn(this.gl,i))this.textureHalfFloatExtension=qi(this.gl,i);else if(K().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),mn(this.gl,o))this.colorBufferHalfFloatExtension=qi(this.gl,o);else if(K().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",mn(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(mn(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Y7(this.gl),this.indexBuffer=Q7(this.gl),this.framebuffer=N7(this.gl),this.textureConfig=pg(this.gl,this.textureHalfFloatExtension)}get debug(){return K().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;ue(t,()=>t.finish()),ue(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),ue(t,()=>t.deleteFramebuffer(this.framebuffer)),ue(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),ue(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),ue(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,r){return this.throwIfDisposed(),Z7(this.gl,t,r,this.textureConfig)}createFloat16MatrixTexture(t,r){return this.throwIfDisposed(),J7(this.gl,t,r,this.textureConfig)}createUnsignedBytesMatrixTexture(t,r){return this.throwIfDisposed(),eP(this.gl,t,r,this.textureConfig)}uploadPixelDataToTexture(t,r){this.throwIfDisposed(),oP(this.gl,t,r)}uploadDenseMatrixToTexture(t,r,s,o){this.throwIfDisposed(),sP(this.gl,t,r,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,r){return this.throwIfDisposed(),nP(this.gl,t,r,this.textureConfig)}createPackedMatrixTexture(t,r){return this.throwIfDisposed(),tP(this.gl,t,r,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(nx(this.gl,this.framebuffer),this.outputTexture=null),ue(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,r,s){return this.downloadMatrixDriver(t,()=>uP(this.gl,r,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,r,s,o,a,i){return lP(this.gl,t,r,s,o,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,r){return iP(this.gl,t,r)}createBufferFromTexture(t,r,s){this.bindTextureToFrameBuffer(t);const o=aP(this.gl,r,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let r,s;if(K().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const i=o.clientWaitSync(a,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},r=a}else K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(r,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:r,isFencePassed:s}}downloadMatrixFromPackedTexture(t,r,s){return this.downloadMatrixDriver(t,()=>cP(this.gl,r,s))}createProgram(t){this.throwIfDisposed();const r=this.gl,s=v7(r,t),o=X7(r),a=b7(r);return ue(r,()=>r.attachShader(a,o)),ue(r,()=>r.attachShader(a,s)),$7(r,a),this.debug&&bp(r,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=rP(r,this.program,this.vertexBuffer)),a}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&ue(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&bp(this.gl,this.program),ue(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,r,s=!0){return this.throwIfDisposed(),s?I7(this.gl,t,r):D7(this.gl,t,r)}getAttributeLocation(t,r){return this.throwIfDisposed(),ue(this.gl,()=>this.gl.getAttribLocation(t,r))}getUniformLocationNoThrow(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)}setInputMatrixTexture(t,r,s){this.throwIfDisposed(),this.throwIfNoProgram(),A7(this.gl,t,r,s)}setOutputMatrixTexture(t,r,s){this.setOutputMatrixTextureDriver(t,s,r)}setOutputPackedMatrixTexture(t,r,s){this.throwIfDisposed();const[o,a]=Zo(r,s);this.setOutputMatrixTextureDriver(t,o,a)}setOutputMatrixWriteRegion(t,r,s,o){this.setOutputMatrixWriteRegionDriver(s,t,o,r)}setOutputPackedMatrixWriteRegion(t,r,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&bp(this.gl,this.program),Xi(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),ue(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ue(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=qi(this.gl,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,a),a}const t=this.getQueryTimerExtensionWebGL1(),r=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,r),r}endQuery(){if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2();r.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await ly(()=>this.disposed||this.isQueryAvailable(t,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,r){if(r===0)return null;if(r===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,r){if(r===0)return!0;if(r===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(r=>{this.addItemToPoll(()=>t.isFencePassed(),()=>r())})}pollItems(){const t=dP(this.itemsToPoll.map(r=>r.isDoneFn));for(let r=0;r<=t;++r){const{resolveFn:s}=this.itemsToPoll[r];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,r){this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),!(this.itemsToPoll.length>1)&&ly(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),$p(this.gl,t,this.framebuffer),this.debug&&Xi(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?($p(this.gl,this.outputTexture,this.framebuffer),this.debug&&Xi(this.gl)):nx(this.gl,this.framebuffer)}downloadMatrixDriver(t,r){this.bindTextureToFrameBuffer(t);const s=r();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,r,s){this.throwIfDisposed();const o=this.gl;$p(o,t,this.framebuffer),this.debug&&Xi(o),this.outputTexture=t,ue(o,()=>o.viewport(0,0,r,s)),ue(o,()=>o.scissor(0,0,r,s))}setOutputMatrixWriteRegionDriver(t,r,s,o){this.throwIfDisposed(),ue(this.gl,()=>this.gl.scissor(t,r,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function dP(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:G4}=eD;function fP(e,t,r,s){const o=[];e.forEach(m=>{const g=ne(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?o.push(`uniform float ${m.name}${g>1?`[${g}]`:""};`):(o.push(`uniform sampler2D ${m.name};`),o.push(`uniform int offset${m.name};`))});const a=o.join(`
`),i=e.map(m=>hP(m,t,s)).join(`
`),u=t.texShape,l=At(),c=yP(l);let p,d,f=CP(l);return t.isPacked?(p=mP(t.logicalShape,u),d=vP(l)):(p=gP(t.logicalShape,u),d=xP(l)),s&&(f+=_P),[f,c,d,a,p,i,r].join(`
`)}function Jo(e){const t=e.shapeInfo.logicalShape;switch(t.length){case 0:return FP(e);case 1:return LP(e);case 2:return MP(e);case 3:return UP(e);case 4:return GP(e);case 5:return jP(e);case 6:return HP(e);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function j4(e){switch(e.shapeInfo.logicalShape.length){case 0:return OP(e);case 1:return BP(e);case 2:return zP(e);case 3:return VP(e);default:return WP(e)}}function hP(e,t,r=!1){let s="";r?s+=j4(e):s+=Jo(e);const o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(r?s+=KP(e,t):s+=qP(e,t)),s}function mP(e,t){switch(e.length){case 0:return H4();case 1:return SP(e,t);case 2:return RP(e,t);case 3:return EP(e,t);default:return TP(e,t)}}function gP(e,t){switch(e.length){case 0:return H4();case 1:return kP(e,t);case 2:return PP(e,t);case 3:return NP(e,t);case 4:return IP(e,t);case 5:return DP(e,t);case 6:return AP(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function yP(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function xP(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function vP(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function CP(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${wP}
    ${bP}
    ${$P}
  `}const wP=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bP=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$P=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_P=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function H4(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function SP(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function kP(e,t){return t[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function EP(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[2]/2),o=s*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function NP(e,t){const r=Ms(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function TP(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[e.length-1]/2),o=s*Math.ceil(e[e.length-2]/2);let a=o,i="",u="b, r, c";for(let l=2;l<e.length-1;l++)a*=e[e.length-l-1],i=`
      int b${l} = index / ${a};
      index -= b${l} * ${a};
    `+i,u=`b${l}, `+u;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${i}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${e.length}(${u});
    }
  `}function IP(e,t){const r=Ms(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function DP(e,t){const r=Ms(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${r}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function AP(e,t){const r=Ms(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${r}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function RP(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(_t(e,t))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(e[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function PP(e,t){return _t(e,t)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Vs(e){return`offset${e}`}function OP(e){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=At();return`
    vec4 ${r}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function FP(e){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[s,o]=e.shapeInfo.texShape;if(s===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const[a,i]=e.shapeInfo.texShape,u=Vs(t);return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${i}, ${u});
      return sampleTexture(${t}, uv);
    }
  `}function BP(e){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],a=At();return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }
  `}function LP(e){const t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${ea(e)}
      }
    `;const s=e.shapeInfo.texShape,o=s[0],a=s[1];if(a===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const i=Vs(t);return a===1?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${o}.0);
        return sampleTexture(${t}, uv);
      }
    `:o===1?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${a}, index + ${i});
      return sampleTexture(${t}, uv);
    }
  `}function zP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],i=o[1],u=At();if(o!=null&&_t(t,o))return`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${a}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(t[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function MP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(o!=null&&_t(t,o)){const d=o[0],f=o[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:i}=Os(t),u=a;if(u.length<t.length){const d=ta(e,u),f=["row","col"];return`
      ${Jo(d)}
      float ${s}(int row, int col) {
        return ${s}(${na(f,i)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${ea(e)}
      }
    `;const l=o[0],c=o[1],p=Vs(r);return c===1?`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${p}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${p};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function VP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(t[0]===1){const d=t.slice(1),f=[1,2],h=ta(e,d),m=["b","row","col"];return`
        ${j4(h)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${na(m,f)});
        }
      `}const i=a[0],u=a[1],l=Math.ceil(t[2]/2),c=l*Math.ceil(t[1]/2),p=At();return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${i}, ${u}, ${c}, ${l}, b, row, col);
      return ${p.texture2D}(${r}, uv);
    }
  `}function UP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t[1]*t[2],a=t[2],{newShape:i,keptDims:u}=Os(t),l=i;if(l.length<t.length){const m=ta(e,l),g=["row","col","depth"];return`
        ${Jo(m)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${na(g,u)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${a}, 1)));
        ${ea(e)}
      }
    `;const c=e.shapeInfo.texShape,p=c[0],d=c[1],f=e.shapeInfo.flatOffset;if(d===o&&f==null)return`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${p}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===a&&f==null)return`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `;const h=Vs(r);return`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${a} + depth + ${h};
        vec2 uv = uvFromFlat(${p}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function WP(e){const t=e.shapeInfo.logicalShape,r=t.length,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=i[0],l=i[1],c=Math.ceil(t[r-1]/2);let p=c*Math.ceil(t[r-2]/2),d="int b, int row, int col",f=`b * ${p} + (row / 2) * ${c} + (col / 2)`;for(let m=2;m<r-1;m++)d=`int b${m}, `+d,p*=t[r-m-1],f=`b${m} * ${p} + `+f;const h=At();return`
    vec4 ${o}(${d}) {
      int index = ${f};
      int texR = index / ${l};
      int texC = index - texR * ${l};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${u});
      return ${h.texture2D}(${s}, uv);
    }
  `}function GP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t[3],a=t[2]*o,i=t[1]*a,{newShape:u,keptDims:l}=Os(t);if(u.length<t.length){const m=ta(e,u),g=["row","col","depth","depth2"];return`
      ${Jo(m)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${na(g,l)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${i}, ${a}, ${o}, 1)));
        ${ea(e)}
      }
    `;const c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],f=p[1];if(f===i&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===o&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const h=Vs(r);return`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${a} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${d}, ${f}, index + ${h});
      return sampleTexture(${r}, uv);
    }
  `}function jP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,u=t[1]*i,{newShape:l,keptDims:c}=Os(t);if(l.length<t.length){const g=ta(e,l),x=["row","col","depth","depth2","depth3"];return`
      ${Jo(g)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${na(x,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${i}, ${a}, ${o})) +
          depth3;
        ${ea(e)}
      }
    `;const p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];if(h===u&&p==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${a}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===o&&p==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const m=Vs(r);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${i} + depth * ${a} +
          depth2 * ${o} + depth3 + ${m};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${r}, uv);
    }
  `}function HP(e){const t=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:o,keptDims:a}=Os(t);if(o.length<t.length){const x=ta(e,o),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Jo(x)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${na(y,a)});
      }
    `}const i=t[5],u=t[4]*i,l=t[3]*u,c=t[2]*l,p=t[1]*c;if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${p}, ${c}, ${l}, ${u})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${ea(e)}
      }
    `;const d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===p&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${u}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=Vs(r);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${p} + col * ${c} + depth * ${l} +
          depth2 * ${u} + depth3 * ${i} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${r}, uv);
    }
  `}function ea(e){const t=e.name,r=ne(e.shapeInfo.logicalShape);return r<2?`return ${t};`:`
    for (int i = 0; i < ${r}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function KP(e,t){const r=e.name,s=r.charAt(0).toUpperCase()+r.slice(1),o="get"+s+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,u=G4(e.shapeInfo.logicalShape,t.logicalShape),l=Oe(i),c=i-a;let p;const d=["x","y","z","w","u","v"];a===0?p="":i<2&&u.length>=1?p="coords = 0;":p=u.map(v=>`coords.${d[v+c]} = 0;`).join(`
`);let f="";i<2&&a>0?f="coords":f=e.shapeInfo.logicalShape.map((v,w)=>`coords.${d[w+c]}`).join(", ");let h="return outputValue;";const g=ne(e.shapeInfo.logicalShape)===1,y=ne(t.logicalShape)===1;if(a===1&&!g&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(u.length){const v=a-2,w=a-1;u.indexOf(v)>-1&&u.indexOf(w)>-1?h="return vec4(outputValue.x);":u.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${p}
      vec4 outputValue = get${s}(${f});
      ${h}
    }
  `}function qP(e,t){const r=e.name,s=r.charAt(0).toUpperCase()+r.slice(1),o="get"+s+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===l&&e.shapeInfo.flatOffset==null&&_t(i,a))return`
      float ${o}() {
        return sampleTexture(${r}, resultUV);
      }
    `;const c=Oe(l),p=G4(e.shapeInfo.logicalShape,t.logicalShape),d=l-u;let f;const h=["x","y","z","w","u","v"];u===0?f="":l<2&&p.length>=1?f="coords = 0;":f=p.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return l<2&&u>0?m="coords":m=e.shapeInfo.logicalShape.map((g,x)=>`coords.${h[x+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${s}(${m});
    }
  `}function Oe(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function ta(e,t){const r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function na(e,t){return t.map(r=>e[r]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XP(e,t,r,s){const o=t.userCode,a=r.map((h,m)=>{const g={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(g.flatOffset=h.texData.slice.flatOffset),{name:t.variableNames[m],shapeInfo:g}}),i=a.map(h=>h.shapeInfo),u={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},l=fP(a,u,o,t.packedInputs),c=e.createProgram(l);let p=null;const d=e.getUniformLocation(c,"NAN",!1);K().getNumber("WEBGL_VERSION")===1&&(p=e.getUniformLocation(c,"INFINITY",!1));const f={};for(let h=0;h<t.variableNames.length;h++){const m=t.variableNames[h],g=!1;f[m]=e.getUniformLocation(c,m,g),f[`offset${m}`]=e.getUniformLocation(c,`offset${m}`,g)}return{program:t,source:l,webGLProgram:c,uniformLocations:f,inShapeInfos:i,outShapeInfo:u,infLoc:p,nanLoc:d}}function sx(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((r,s)=>{const o=r.logicalShape,a=t[s],i=a.shape;if(!_t(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(r.isUniform&&a.isUniform)return;const u=r.texShape,l=a.isUniform?null:a.texData.texShape;if(!_t(u,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${u} and ${l} must match`)})}function YP(e,t,r,s,o){sx(t.inShapeInfos,r),sx([t.outShapeInfo],[s]);const a=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),K().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),r.forEach((u,l)=>{const c=t.program.variableNames[l],p=t.uniformLocations[c],d=t.uniformLocations[`offset${c}`];if(p!=null){if(u.isUniform){if(ne(u.shape)<2)e.gl.uniform1f(p,u.uniformValues[0]);else{let f=u.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),e.gl.uniform1fv(p,f)}return}u.texData.slice!=null&&d!=null&&e.gl.uniform1i(d,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture,p,l)}}),o!=null&&o(e,t.webGLProgram),e.executeProgram()}function QP(e,t,r){let s="";t.concat(r).forEach(i=>{const u=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0,l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${u}`});const o=e.userCode;let a=e.constructor.name;return a+="_"+s+"_"+o,a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZP(e){const t=new Float32Array(e.length);for(let r=0;r<e.length;++r)t[r]=Math.abs(e[r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wr(e){return(t,r,s,o,a)=>{const i=ve(t,r),u=i.length,l=Kt(i),c=ne(i),p=Xr(a,c),d=t.length,f=r.length,h=Kt(t),m=Kt(r),g=jd(t,i),x=jd(r,i);if(g.length+x.length===0)for(let y=0;y<p.length;++y)p[y]=e(s[y%s.length],o[y%o.length]);else for(let y=0;y<p.length;++y){const v=_C(y,u,l),w=v.slice(-d);g.forEach(S=>w[S]=0);const $=Td(w,d,h),b=v.slice(-f);x.forEach(S=>b[S]=0);const T=Td(b,f,m);p[y]=e(s[$],o[T])}return[p,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JP=wr((e,t)=>e+t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eO(e,t,r,s,o){const a=ne(s),i=Yr(o,r);for(let u=0;u<e.length;u++){const l=e[u];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(a>0?i[l]+=t[u]:i[l]+=1)}return i}function tO(e,t,r,s=!1){const o=e.shape[0],a=e.shape[1],i=St([o,r],t.dtype);for(let u=0;u<o;u++)for(let l=0;l<a;l++){const c=e.get(u,l);if(c<0)throw new Error("Input x must be non-negative!");c>=r||(s?i.set(1,u,c):t.size>0?i.set(i.get(u,c)+t.get(u,l),u,c):i.set(i.get(u,c)+1,u,c))}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ra(e){return(t,r,s)=>{const o=Xr(r,t.length);for(let a=0;a<t.length;++a)o[a]=e(t[a],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nO=ra(e=>Math.ceil(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rO(e,t,r,s){const o=Dh(r,ne(t));if(s&&r!=="string"){let a=0;e.forEach(i=>{const u=ne(i.shape);o.set(i.vals,a),a+=u})}else{let a=0;e.forEach(i=>{const u=r==="string"?ig(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const p=c*t[1]+a;for(let d=0;d<i.shape[1];++d)o[p+d]=u[l++]}a+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sO=ra(e=>Math.exp(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oO=ra(e=>Math.expm1(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aO=ra(e=>Math.floor(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iO(e,t,r){const s=St(r,e.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),u=i[0],l=i[2],c=t.locToIndex([u,l]);i[2]=t.values[c];const p=e.locToIndex(i);s.values[o]=e.values[p]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uO=wr((e,t)=>e>t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lO=wr((e,t)=>e<t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(e,t,r){const s=(t-e)/(r-1),o=Yr(r,"float32");o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pO=ra(e=>Math.log(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dO(e,t,r,s){const o=Xr(s,ne(r));for(let a=0;a<o.length;++a){const i=a*t;let u=e[i];for(let l=0;l<t;++l){const c=e[i+l];c>u&&(u=c)}o[a]=u}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fO=wr((e,t)=>Math.max(e,t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hO=wr((e,t)=>Math.min(e,t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4=wr((e,t)=>e*t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mO(e,t,r){const s=Go(-1,r);return K4([],t,s,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO=wr((e,t)=>e!==t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yO(e,t,r,s,o){const a=t.length,i=ne(t),u=Kt(t),l=Kt(o),c=Xr(r,ne(o));for(let p=0;p<i;++p){const d=_C(p,a,u),f=new Array(d.length);for(let m=0;m<f.length;m++)f[m]=d[s[m]];const h=Td(f,a,l);c[h]=e[p]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xO(e,t,r,s){const[o,a]=Bn(e,s),i=Xn(t,"int32"),u=Yr(ne(o),i),l=ne(a);for(let c=0;c<u.length;++c){const p=c*l;let d=1;for(let f=0;f<l;++f)d*=r[p+f];u[c]=d}return{outVals:u,outShape:o,outDtype:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vO(e,t,r,s){const o=e===t,a=e<t&&r<0,i=t<e&&r>1;if(o||a||i)return Yr(0,s);const u=Math.abs(Math.ceil((t-e)/r)),l=Yr(u,s);t<e&&r===1&&(r=-1),l[0]=e;for(let c=1;c<l.length;c++)l[c]=l[c-1]+r;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CO=ra(e=>1/Math.sqrt(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wO(e,t,r,s,o){const a=$0(s,t,r),i=ne(r),u=Kt(s);if(a){const d=_0(t,u);return o==="string"?e.slice(d,d+i):e.subarray(d,d+i)}const l=o==="string"?ig(e):e,c=St(s,o,l),p=St(r,o);for(let d=0;d<p.size;++d){const f=p.indexToLoc(d),h=f.map((m,g)=>m+t[g]);p.set(c.get(...h),...f)}return o==="string"?b4(p.values):p.values}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bO=wr((e,t)=>{const r=e-t;return r*r});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $O(e,t,r,s){const o=St(e,t.dtype);for(let a=0;a<o.size;a++){const i=o.indexToLoc(a),u=new Array(i.length);for(let l=0;l<u.length;l++)u[l]=i[l]*r[l]+s[l];o.set(t.get(...u),...i)}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _O=wr((e,t)=>e-t);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(e,t){const r=new Array(e.rank);for(let o=0;o<r.length;o++)r[o]=e.shape[o]*t[o];const s=St(r,e.dtype);for(let o=0;o<s.values.length;++o){const a=s.indexToLoc(o),i=new Array(e.rank);for(let l=0;l<i.length;l++)i[l]=a[l]%e.shape[l];const u=e.locToIndex(i);s.values[o]=e.values[u]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kO(e,t,r,s,o){const a=t[t.length-1],[i,u]=[e.length/a,a],l=Xr(r,i*s),c=Xr("int32",i*s);for(let d=0;d<i;d++){const f=d*u,h=e.subarray(f,f+u),m=[];for(let v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((v,w)=>w.value-v.value);const g=d*s,x=l.subarray(g,g+s),y=c.subarray(g,g+s);for(let v=0;v<s;v++)x[v]=m[v].value,y[v]=m[v].index}const p=t.slice();return p[p.length-1]=s,[St(p,r,l),St(p,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(e,t,r,s){const o=Ge(t,r)[0],a=[1,r[0],1];for(let m=0;m<o;m++)a[0]*=r[m];a[1]=r[o];for(let m=o+1;m<r.length;m++)a[2]*=r[m];const i={},u=new Int32Array(r[o]),l=new Za(a,s,e),c=[],p=a[0]===1&&a[2]===1;for(let m=0;m<r[o];m++){let g;if(p)g=e[m].toString();else{const x=[];for(let y=0;y<a[0];y++)for(let v=0;v<a[2];v++)x.push(l.get(y,m,v));g=x.join(",")}if(i[g]!==void 0)u[m]=i[g];else{const x=Object.keys(i).length;i[g]=x,u[m]=x,c.push(m)}}const d=a.slice();d[1]=Object.keys(i).length;const f=new Za(d,s);c.forEach((m,g)=>{for(let x=0;x<a[0];x++)for(let y=0;y<a[2];y++)f.set(l.get(x,m,y),x,g,y)});const h=r.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:u}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NO=Object.freeze(Object.defineProperty({__proto__:null,simpleAbsImpl:ZP,addImpl:JP,bincountImpl:eO,bincountReduceImpl:tO,ceilImpl:nO,concatImpl:rO,expImpl:sO,expm1Impl:oO,floorImpl:aO,gatherV2Impl:iO,greaterImpl:uO,lessImpl:lO,linSpaceImpl:cO,logImpl:pO,maxImpl:dO,maximumImpl:fO,minimumImpl:hO,multiplyImpl:K4,negImpl:mO,notEqualImpl:gO,prodImpl:xO,rangeImpl:vO,rsqrtImpl:CO,sliceImpl:wO,squaredDifferenceImpl:bO,stridedSliceImpl:$O,subImpl:_O,tileImpl:SO,topKImpl:kO,transposeImpl:yO,uniqueImpl:EO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:TO,bincountImpl:q4,bincountReduceImpl:IO,ceilImpl:DO,concatImpl:AO,expImpl:RO,expm1Impl:PO,floorImpl:OO,gatherV2Impl:FO,greaterImpl:BO,lessImpl:LO,linSpaceImpl:zO,logImpl:MO,maxImpl:VO,maximumImpl:UO,minimumImpl:WO,multiplyImpl:GO,negImpl:jO,prodImpl:HO,rangeImpl:KO,rsqrtImpl:qO,simpleAbsImpl:X4,sliceImpl:XO,stridedSliceImpl:YO,subImpl:QO,tileImpl:ZO,topKImpl:JO,transposeImpl:fg,uniqueImpl:eF}=NO;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4(e,t){return["x","y","z","w","u","v"].slice(0,t).map(r=>`${e}.${r}`)}function It(e,t){return t===1?[e]:Y4(e,t)}function tF(e,t){if(e===1)return"rc";let r="";for(let s=0;s<e;s++)r+=t[s],s<e-1&&(r+=",");return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nF{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const r=t.length;if(r===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const s=It("rc",r),o=Oe(r),a=sF(r,t,s),i=oF(r,t[t.length-1],t[t.length-2],s),u=aF(t,s);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${u}));
          }
        }
      `}}}function rF(e,t){const r=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let a=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<e;i++)a=`${t[t.length-1-i]},`+a;r.push(a)}return r}function sF(e,t,r){if(e===1)return`rc > ${t[0]}`;let s="";for(let o=e-2;o<e;o++)s+=`${r[o]} >= ${t[o]}`,o<e-1&&(s+="||");return s}function oF(e,t,r,s){if(e===1)return"";const o=s.slice(-2);return`
    int r = ${o[0]};
    int c = ${o[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${t};
    bool rEdge = rp1 >= ${r};
  `}function aF(e,t){const r=e.length,s=rF(r,t);return r===1?`getA(rc),
            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${s[0]}),
          cEdge ? 0. : getA(${s[1]}),
          rEdge ? 0. : getA(${s[2]}),
          rEdge || cEdge ? 0. : getA(${s[3]})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q4{constructor(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let s="";for(let o=0;o<4;o++){let a="thisRC = rc;";o%2===1&&(a+="thisRC.z += 1;"),o>1&&(a+="thisRC.y += 1;"),s+=`
        ${a}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${iF(r)}
      ${dg(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${t[1]};
        int cols = ${t[2]};

        ${s}

        setOutput(result);
      }
    `}}function iF(e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${Ms(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uF{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,r,s){const o=ax(r,s),a=ix(t,o,s);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=ox(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[a].shift();return this.usedTextures[a].push(l),l}let u;return o===ft.PACKED_2X2_FLOAT32?u=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===ft.PACKED_2X2_FLOAT16?u=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===ft.UNPACKED_FLOAT32?u=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===ft.UNPACKED_FLOAT16?u=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===ft.PACKED_4X1_UNSIGNED_BYTE&&(u=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(u),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),u}releaseTexture(t,r,s,o){if(this.freeTextures==null)return;const a=ax(s,o),i=ix(r,a,o);i in this.freeTextures||(this.freeTextures[i]=[]);const u=ox(r,a,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=K().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=u):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=u),this.numUsedTextures--;const c=this.usedTextures[i],p=c.indexOf(t);if(p<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(p,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const r=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*r)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(r=>{this.gpgpu.deleteMatrixTexture(r)});for(const t in this.usedTextures)this.usedTextures[t].forEach(r=>{this.gpgpu.deleteMatrixTexture(r)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function lF(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}function ox(e,t,r,s,o){const a=cF(t,s);let i;if(o){const[l,c]=Zo(e[0],e[1]);i=l*c}else{const[l,c]=vi(e[0],e[1]);i=l*c}const u=lF(r,a);return i*u}function cF(e,t){switch(e){case ft.PACKED_2X2_FLOAT32:return U4(t);case ft.PACKED_2X2_FLOAT16:return W4(t);case ft.UNPACKED_FLOAT32:return z4(t);case ft.UNPACKED_FLOAT16:return M4(t);case ft.PACKED_4X1_UNSIGNED_BYTE:return V4(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function pF(e){return K().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ft.PACKED_2X2_FLOAT32:ft.UNPACKED_FLOAT32:e?ft.PACKED_2X2_FLOAT16:ft.UNPACKED_FLOAT16}function ax(e,t){if(e===nn.UPLOAD)return ft.PACKED_2X2_FLOAT32;if(e===nn.RENDER||e==null)return pF(t);if(e===nn.DOWNLOAD||e===nn.PIXELS)return ft.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function ix(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hr{constructor(t,r){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        ${r}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const zn="if (isnan(x)) return x;",dF="return x;",ux="return abs(x);",fF="return (x >= 0.0) ? x : (exp(x) - 1.0);",hF=zn+`
  return (x < 0.0) ? 0.0 : x;
`,mF=zn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Qi="return x;";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gF="return x;",yF=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,xF=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vF=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class Co{constructor(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${r}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CF{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const r=t.length,s=It("rc",r),o=Oe(r),a=tF(r,s),i=s.slice(-2),u=r<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${u}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wF=Qb,bF=1e-7,$F=1e-4,Zi={};function _F(e){return e in Zi||(Zi[e]={}),Zi[e]}const SF=128,kF=600;function EF(){return K().global.screen==null?1024:K().global.screen.height*K().global.screen.width*window.devicePixelRatio*kF/1024/1024}class NF extends yC{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!K().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){const r=Qn(K().getNumber("WEBGL_VERSION"));this.binaryCache=_F(K().getNumber("WEBGL_VERSION")),this.gpgpu=new pP(r),this.canvas=r.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;this.textureManager=new uF(this.gpgpu),this.numMBBeforeWarning=EF(),this.texData=new hE(this,ji())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,r,s){if((K().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||K().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={};return this.texData.set(o,{shape:r,dtype:s,values:t,usage:nn.UPLOAD,refCount:1,complexParentRefCount:0}),o}incRef(t){const r=this.texData.get(t);r.refCount++}decRef(t){if(this.texData.has(t)){const r=this.texData.get(t);r.refCount--}}decComplexRef(t){if(this.texData.has(t)){const r=this.texData.get(t);r.complexParentRefCount>0&&r.refCount--}}move(t,r,s,o){if(K().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:o,values:r,usage:nn.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(t){const r=t.dataId;if(this.texData.has(r)){const s=this.texData.get(r);s.refCount--,s.refCount<1&&this.disposeData(r)}}readSync(t){const r=this.texData.get(t),{values:s,dtype:o,complexTensorInfos:a,slice:i,shape:u,isPacked:l}=r;if(i!=null){let f;l?f=new Co(u,Qi):f=new Hr(u,Qi);const h=this.runWebGLProgram(f,[{dataId:t,shape:u,dtype:o}],o),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(s!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return s;const c=this.activeTimers!=null;let p;c&&(p=Er());let d;if(o==="complex64"){const f=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);d=qd(f,h)}else d=this.getValuesFromTexture(t);return c&&(this.downloadWaitMs+=Er()-p),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const m=this.pendingRead.get(t);return new Promise(g=>m.push(g))}const r=this.texData.get(t),{values:s,shape:o,slice:a,dtype:i,complexTensorInfos:u,isPacked:l}=r;if(a!=null){let m;l?m=new Co(o,Qi):m=new Hr(o,Qi);const g=this.runWebGLProgram(m,[{dataId:t,shape:o,dtype:i}],i),x=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),x}if(s!=null)return this.convertAndCacheOnCPU(t);if(!K().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&K().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,p;if(i!=="complex64"&&K().get("WEBGL_BUFFER_SUPPORTED")){p=this.decode(t);const m=this.texData.get(p.dataId);c=this.gpgpu.createBufferFromTexture(m.texture,...Da(o))}this.pendingRead.set(t,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const m=await Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),g=m[0],x=m[1];d=qd(g,x)}else if(c==null)d=this.getValuesFromTexture(t);else{const m=ne(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,m)}p!=null&&this.disposeIntermediateTensorInfo(p);const f=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(m=>m(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),f}bufferSync(t){const r=this.readSync(t.dataId);let s=r;if(t.dtype==="string")try{s=r.map(o=>Qa(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let r=0;r<t.length;r++){const s=t[r];if(!g7(s))throw K().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:r,dtype:s,isPacked:o}=this.texData.get(t),a=ne(r);if(K().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(t),h=this.texData.get(f.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture,...Da(r)).subarray(0,a);return this.disposeIntermediateTensorInfo(f),m}const i=K().getBool("WEBGL_PACK")&&o===!0,u=i?_p(r):r,l=i?new H7(u):new j7(u),c=this.runWebGLProgram(l,[{shape:u,dtype:s,dataId:t}],"float32"),p=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),d}async time(t){const r=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,t();const a=Ao(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Ao(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=r,o&&(this.programTimersStack=null);const u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);u.kernelMs=mE(l),u.getExtraProfileInfo=()=>l.map((c,p)=>({name:i[p],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Er(),endMs:null}}endTimer(t){return K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Er(),t)}async getQueryTime(t){if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const r=t;return r.endMs-r.startMs}disposeData(t){if(this.pendingDisposal.has(t))return;if(this.pendingRead.has(t)){this.pendingDisposal.add(t),this.pendingDeletes++;return}if(!this.texData.has(t))return;if(this.texData.get(t).complexParentRefCount>0){this.texData.get(t).refCount--;return}this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);r!=null&&(this.texData.get(r.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(r.real),this.texData.get(r.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(r.imag)),this.texData.delete(t)}releaseGPUData(t){const{texture:r,dtype:s,texShape:o,usage:a,isPacked:i,slice:u}=this.texData.get(t),l=u&&u.origDataId||t,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),r!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(r,o,a,i)));const p=this.texData.get(t);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}getCPUBackend(){return K().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ji().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,r=SF){const s=this.getCPUBackend();return!K().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&s==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),s!=null&&t.every(o=>this.texData.get(o.dataId).texture==null&&ne(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(t){xi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const r=t.dataSync();return wF(t.shape,r)}packedUnaryOp(t,r,s){const o=new Co(t.shape,r);return this.compileAndRun(o,[t],s)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const s=X4(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,s)}if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,ux,t.dtype);const r=new Hr(t.shape,ux);return this.compileAndRun(r,[t])}makeTensorInfo(t,r,s){let o;if(r==="string"&&s!=null&&s.length>0&&Xl(s[0])){const a=s.map(i=>ec(i));o=this.write(a,t,r)}else o=this.write(s,t,r);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:r}}makeOutput(t,r,s){const{dataId:o}=this.makeTensorInfo(t,r,s);return ji().makeTensorFromDataId(o,t,r,this)}unpackTensor(t){const r=new CF(t.shape);return this.runWebGLProgram(r,[t],t.dtype)}packTensor(t){const r=new nF(t.shape),s=!0;return this.runWebGLProgram(r,[t],t.dtype,null,s)}packedReshape(t,r){const s=[Bo(t.shape),...Lo(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},a=[Bo(r),...Lo(r)],i=new Q4(a,s),u=!0,l=this.runWebGLProgram(i,[o],t.dtype,null,u);return{dataId:l.dataId,shape:r,dtype:l.dtype}}decode(t){const r=this.texData.get(t),{isPacked:s,shape:o,dtype:a}=r,i=_p(o);let u;s?u=new G7(i):u=new W7(i);const l=!0,c=this.runWebGLProgram(u,[{shape:i,dtype:a,dataId:t}],a,null,l);return{dtype:a,shape:o,dataId:c.dataId}}runWebGLProgram(t,r,s,o,a=!1){const i=this.makeTensorInfo(t.outputShape,s),u=this.texData.get(i.dataId);if(t.packedOutput&&(u.isPacked=!0),t.outPackingScheme===ti.DENSE){const g=Da(t.outputShape);u.texShape=g.map(x=>x*2)}if(t.outTexUsage!=null&&(u.usage=t.outTexUsage),ne(i.shape)===0)return u.values=Xr(i.dtype,0),i;const l=[],c=r.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(g.dataId);if(x.texture==null){if(!t.packedInputs&&ne(g.shape)<=K().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:x.values};t.packedInputs&&(x.isPacked=!0,x.shape=g.shape)}else if(!!x.isPacked!=!!t.packedInputs)g=x.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),x=this.texData.get(g.dataId);else if(x.isPacked&&!al(x.shape,g.shape)){const y=g,v=g.shape;g.shape=x.shape,g=this.packedReshape(g,v),l.push(g),x=this.texData.get(g.dataId),y.shape=v}return this.uploadToGPU(g.dataId),{shape:g.shape,texData:x,isUniform:!1}});this.uploadToGPU(i.dataId);const p={shape:i.shape,texData:u,isUniform:!1},d=QP(t,c,p),f=this.getAndSaveBinary(d,()=>XP(this.gpgpu,t,c,p)),h=this.activeTimers!=null;let m;if(h&&(m=this.startTimer()),YP(this.gpgpu,f,c,p,o),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),h&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)})),!K().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&a===!1){const g=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),g}return i}compileAndRun(t,r,s,o,a=!1){s=s||r[0].dtype;const i=this.runWebGLProgram(t,r,s,o,a);return ji().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}getAndSaveBinary(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(K().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Se(()=>{if(!K().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=K().getBool("DEBUG");K().set("DEBUG",!1);const r=this.abs(de(1e-8)).dataSync()[0];if(K().set("DEBUG",t),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?bF:$F}uploadToGPU(t){const r=this.texData.get(t),{shape:s,dtype:o,values:a,texture:i,usage:u,isPacked:l}=r;if(i!=null)return;const c=this.activeTimers!=null;let p;c&&(p=Er());let d=r.texShape;if(d==null&&(d=O7(s,l),r.texShape=d),a!=null){const f=_p(s);let h,m=d[1],g=d[0];const x=a instanceof Uint8Array;l?([m,g]=Zo(d[0],d[1]),h=new q7(f,[g,m],x)):h=new K7(f,[g,m],x);const y=this.makeTensorInfo([g,m],o);x?this.texData.get(y.dataId).usage=nn.PIXELS:this.texData.get(y.dataId).usage=nn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,g,a);const v=!0,w=this.runWebGLProgram(h,[y],o,null,v),$=this.texData.get(w.dataId);r.texture=$.texture,r.texShape=$.texShape,r.isPacked=$.isPacked,r.usage=$.usage,this.disposeIntermediateTensorInfo(y),this.texData.delete(w.dataId),r.values=null,c&&(this.uploadWaitMs+=Er()-p)}else{const f=this.acquireTexture(d,u,o,l);r.texture=f}}convertAndCacheOnCPU(t,r){const s=this.texData.get(t),{dtype:o}=s;return this.releaseGPUData(t),r!=null&&(s.values=TF(r,o)),s.values}acquireTexture(t,r,s,o){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,r,o)}computeBytes(t,r){return t[0]*t[1]*CC(r)}}function TF(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const r=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let s=0;s<r.length;++s)r[s]=Math.round(e[s]);return r}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Iw()&&GN("webgl",()=>new NF,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class zo{constructor(t,r,s){this.variableNames=["A","B"],this.outputShape=ve(r,s),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gc=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class bi{constructor(t,r,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ve(r,s);const a=this.outputShape.length;let i="";if(o)if(a===0||ne(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Oe(a)} coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=It("coords",a);i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qt(e){const{inputs:t,backend:r}=e,{x:s}=t;return r.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const IF={kernelName:gm,backendName:"webgl",kernelFunc:Qt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rs(e){const{inputs:t,backend:r}=e,{real:s,imag:o}=t,a=r.makeTensorInfo(s.shape,"complex64"),i=r.texData.get(a.dataId),u=Qt({inputs:{x:s},backend:r}),l=r.texData.get(u.dataId);l.complexParentRefCount++;const c=Qt({inputs:{x:o},backend:r}),p=r.texData.get(c.dataId);return p.complexParentRefCount++,i.complexTensorInfos={real:u,imag:c},a}const DF={kernelName:RC,backendName:"webgl",kernelFunc:rs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4="return (a < 0.) ? b * a : a;",e3=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function AF(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{alpha:a}=s,i=r.makeTensorInfo([],"float32",Go(a,"float32")),u=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bi(e3,o.shape,i.shape):new zo(J4,o.shape,i.shape),l=r.runWebGLProgram(u,[o,i],o.dtype);return r.disposeIntermediateTensorInfo(i),l}const RF={kernelName:Cm,backendName:"webgl",kernelFunc:AF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3="return (a < 0.) ? b * a : a;",n3=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function PF(e){const{inputs:t,backend:r}=e,{x:s,alpha:o}=t,a=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bi(n3,s.shape,o.shape):new zo(t3,s.shape,o.shape);return r.runWebGLProgram(a,[s,o],s.dtype)}const OF={kernelName:Mm,backendName:"webgl",kernelFunc:PF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3="if (isnan(x)) return x;",FF=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,BF=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function $e({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:r,dtype:s}){return({inputs:o,backend:a})=>{const{x:i}=o,u=a,l=s||i.dtype;if(u.shouldExecuteOnCPU([i])&&r!=null){const d=u.texData.get(i.dataId),f=r(d.values,l);return u.makeTensorInfo(i.shape,l,f)}const c=K().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let p;return c?p=new Co(i.shape,t):p=new Hr(i.shape,e),u.runWebGLProgram(p,[i],l)}}function yt({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:r=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:a}){return({inputs:i,backend:u})=>{const{a:l,b:c}=i,p=u;if(s&&l.dtype==="complex64"){const m=p.texData.get(l.dataId),g=p.texData.get(c.dataId),[x,y]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(w=>{const[$,b]=w,T={dataId:$.dataId,dtype:$.dtype,shape:l.shape},S={dataId:b.dataId,dtype:b.dtype,shape:c.shape},D=new zo(e,l.shape,c.shape);return p.runWebGLProgram(D,[T,S],Xn($.dtype,b.dtype))}),v=rs({inputs:{real:x,imag:y},backend:p});return p.disposeIntermediateTensorInfo(x),p.disposeIntermediateTensorInfo(y),v}const d=a||Xn(l.dtype,c.dtype);if(p.shouldExecuteOnCPU([l,c])&&o!=null){const m=p.texData.get(l.dataId),g=p.texData.get(c.dataId),[x,y]=o(l.shape,c.shape,m.values,g.values,d),v=p.makeTensorInfo(y,d),w=p.texData.get(v.dataId);return w.values=x,v}const f=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return f?h=new bi(t,l.shape,c.shape,r):h=new zo(e,l.shape,c.shape),p.runWebGLProgram(h,[l,c],d)}}function yc(e,t=!1){if(e==="linear")return t?gF:dF;if(e==="relu")return t?xF:hF;if(e==="elu")return t?yF:fF;if(e==="relu6")return t?vF:mF;if(e==="prelu")return t?n3:t3;if(e==="leakyrelu")return t?e3:J4;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s3{constructor(t,r,s,o=!1,a=!1,i=!1,u=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const p=o?t[1]:t[2],d=Math.ceil(p/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",m=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",y="";u&&(l?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${u}
        }`:c?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${u}
        }`:x=`vec4 activation(vec4 x) {
          ${u}
        }`,y="result = activation(result);");const v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let w="rc.x",$="rc.x";t[0]<r[0]?w=`int(min(float(rc.x), ${t[0]-1}.))`:r[0]<t[0]&&($=`int(min(float(rc.x), ${r[0]-1}.))`),this.userCode=`
      ${x}

      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${$};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lx={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class cx{constructor(t,r,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ve(r,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const px="return a * b;";function o3(e){const{inputs:t,backend:r}=e,{a:s,b:o}=t,a=Xn(s.dtype,o.dtype);if(s.dtype==="complex64"){const u=r.texData.get(s.dataId),l=r.texData.get(o.dataId),c=new cx(lx.REAL,s.shape,o.shape),p=new cx(lx.IMAG,s.shape,o.shape),d=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:s.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=r.runWebGLProgram(c,d,"float32"),h=r.runWebGLProgram(p,d,"float32"),m=rs({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),m}if(r.shouldExecuteOnCPU([s,o])){const u=r.texData.get(s.dataId),l=r.texData.get(o.dataId),[c,p]=GO(s.shape,o.shape,u.values,l.values,a),d=r.makeTensorInfo(p,a),f=r.texData.get(d.dataId);return f.values=c,d}let i;return K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new bi(px,s.shape,o.shape):i=new zo(px,s.shape,o.shape),r.runWebGLProgram(i,[s,o],a)}const LF={kernelName:Rm,backendName:"webgl",kernelFunc:o3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zF(e,t,r){const s=[Bo(e.shape),...Lo(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},a=[Bo(t),...Lo(t)],i=new Q4(a,s),u=!0,l=r.runWebGLProgram(i,[o],e.dtype,null,u);return{dataId:l.dataId,shape:t,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function re(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{shape:a}=s,i=r,u=ne(o.shape),l=gE(a,u),c=ne(l);k(u===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${u} elements. The new shape and old shape must have the same number of elements.`);const p=i.texData.get(o.dataId);return p.isPacked&&!al(o.shape,l)&&!(p.texture!==null&&al(p.shape,l))?zF(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const MF={kernelName:Wm,backendName:"webgl",kernelFunc:re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dx{constructor(t,r){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:a,outSize:i}=t;this.outputShape=[o,i];const u=Math.floor(s/4)*4,l=s%4;let c="sumValue += dot(values, ones);";if(r!=null){const d=1/r;c=`sumValue += dot(values * ${ut(d)?d.toPrecision(2):d}, ones);`}let p="";a%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${u};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VF{constructor(t,r){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:a,outSize:i}=t;this.outputShape=[o,i];let u="0.0",l="";r==="prod"?u="1.0":r==="min"?(u="1.0 / 1e-20",l="min"):r==="max"&&(u="-1.0 / 1e-20",l="max");let c=`${r}(${r}(${r}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;r==="sum"?c="sumValue":r==="prod"?c="prodValue":r==="all"?c="allValue":r==="any"&&(c="anyValue");const p=Math.floor(s/4)*4,d=s%4;let f=`
      if (${r==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${r==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
      }
    `,h="vec4";r==="all"?(u="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):r==="any"&&(u="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";a%s>0&&(m=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${u};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${u});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${p}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${p};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UF(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const r=t.length?t[t.length-1].outSize:e[1],s=mc(r);t.push({inSize:r,windowSize:s,outSize:Math.ceil(r/s)})}return t}function Us(e,t,r,s){const o=UF(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:u,windowSize:l,outSize:c}=o[i];let p,d;r==="mean"?p=i===0?new dx({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c},u):new dx({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c}):p=new VF({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c},r),d=a,a=s.runWebGLProgram(p,[a],t),d.dataId!==e.dataId&&s.disposeIntermediateTensorInfo(d)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WF{constructor(t,r){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[r[i]];this.outputShape=s,this.rank=s.length;const o=Oe(this.rank),a=GF(r);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function GF(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const r=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let o=0;o<e.length;o++)s[e[o]]=r[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jF{constructor(t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let p=0;p<s.length;p++)s[p]=t[r[p]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Oe(this.rank),a=Y4("rc",this.rank),i=new Array(this.rank);for(let p=0;p<r.length;p++)i[r[p]]=a[p];const u=`vec2(${i.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${u})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xc(e,t,r){const s=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jF(e.shape,t):new WF(e.shape,t);return r.runWebGLProgram(s,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HF(e,t,r,s){const o=t,a=e.shape.length,i=Ge(o,e.shape);let u=i;const l=cn(u,a),c=l!=null;let p=e;c&&(p=xc(e,l,s),u=bn(u.length,a)),Ln("sum",u,a);const[d,f]=Bn(p.shape,u);let h=d;r&&(h=Xt(d,i));const m=ne(f),x=ne(e.shape)/m,y=re({inputs:{x:p},attrs:{shape:[x,m]},backend:s}),v=v0(e.dtype),w=Us(y,v,"sum",s),$=re({inputs:{x:w},attrs:{shape:h},backend:s});return s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(w),c&&s.disposeIntermediateTensorInfo(p),$}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,keepDims:i}=s;return HF(o,a,i,r)}const KF={kernelName:o0,backendName:"webgl",kernelFunc:hg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bt(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{perm:a}=s,i=r,u=o.shape.length,l=new Array(u);for(let p=0;p<l.length;p++)l[p]=o.shape[a[p]];let c;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=fg(d,o.shape,o.dtype,a,l);c=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(c.dataId);h.values=f}else c=xc(o,a,i);return c}const qF={kernelName:f0,backendName:"webgl",kernelFunc:Bt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3=1e3;function il({a:e,b:t,transposeA:r,transposeB:s,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:u=0,activation:l=null}){const c=e.shape.length,p=t.shape.length,d=r?e.shape[c-2]:e.shape[c-1],f=s?t.shape[p-1]:t.shape[p-2],h=r?e.shape[c-1]:e.shape[c-2],m=s?t.shape[p-2]:t.shape[p-1],g=e.shape.slice(0,-2),x=t.shape.slice(0,-2),y=ne(g),v=ne(x),w=y===v||y===1||v===1;k(c>=2&&p>=2&&w,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${g}) and (${x}).`);const b=(y>v?e.shape.slice(0,-2):t.shape.slice(0,-2)).concat([h,m]);k(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${r} and transposeB=${s} must match.`);const T=r?[y,d,h]:[y,h,d],S=s?[v,m,f]:[v,f,m],D=re({inputs:{x:e},backend:o,attrs:{shape:T}}),z=re({inputs:{x:t},backend:o,attrs:{shape:S}}),E=[D,z],A=Math.max(y,v),O=r?D.shape[1]:D.shape[2],V=a!=null,B=i!=null,W=l==="leakyrelu",H=l!=null?yc(l,!0):null,Q=V||B||W||H!=null;let U;if((h===1||m===1)&&O>a3&&Q===!1){let ae=D,ee=z;r&&(ae=Bt({inputs:{x:D},backend:o,attrs:{perm:[0,2,1]}}),E.push(ae)),s&&(ee=Bt({inputs:{x:z},backend:o,attrs:{perm:[0,2,1]}}),E.push(ee));const Y=m!==1,Z=m===1;let te=ae;Y&&(te=re({inputs:{x:ae},backend:o,attrs:{shape:[A,O,1]}}),E.push(te));const le=m===1?2:1;let M=ee;Z&&(M=re({inputs:{x:ee},backend:o,attrs:{shape:[A,1,O]}}),E.push(M));const ye=o3({inputs:{a:te,b:M},backend:o});U=hg({inputs:{x:ye},backend:o,attrs:{axis:le,keepDims:!0}}),E.push(ye)}else{const ae=Xn(e.dtype,t.dtype),ee=new s3(T,S,[A,h,m],r,s,V,H,B,W),Y=[D,z];if(a!=null&&Y.push(a),B&&Y.push(i),W){const Z=o.makeTensorInfo([],"float32",Go(u,"float32"));Y.push(Z),E.push(Z)}U=o.runWebGLProgram(ee,Y,ae)}const G=re({inputs:{x:U},backend:o,attrs:{shape:b}});E.push(U);for(const ae of E)o.disposeIntermediateTensorInfo(ae);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XF(e){const{inputs:t,backend:r,attrs:s}=e,{a:o,b:a,bias:i,preluActivationWeights:u}=t,{transposeA:l,transposeB:c,activation:p,leakyreluAlpha:d}=s;return il({a:o,b:a,transposeA:l,transposeB:c,backend:r,bias:i,preluActivationWeights:u,leakyreluAlpha:d,activation:p})}const YF={kernelName:Dd,backendName:"webgl",kernelFunc:XF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fx="return abs(x);";function QF(e){const{inputs:t,backend:r}=e,{x:s}=t;if(r.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const a=r.texData.get(s.dataId),i=X4(a.values);return r.makeTensorInfo(s.shape,s.dtype,i)}let o;return K().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Co(s.shape,fx):o=new Hr(s.shape,fx),r.runWebGLProgram(o,[s],s.dtype)}const ZF={kernelName:Ah,backendName:"webgl",kernelFunc:QF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JF=zn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,eB=$e({opSnippet:JF}),tB={kernelName:Rh,backendName:"webgl",kernelFunc:eB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nB=zn+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,rB=$e({opSnippet:nB}),sB={kernelName:Ph,backendName:"webgl",kernelFunc:rB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hx="return a + b;",oB=yt({opSnippet:hx,packedOpSnippet:hx,supportsComplex:!0,cpuKernelImpl:TO}),aB={kernelName:Ql,backendName:"webgl",kernelFunc:oB};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iB{constructor(t,r){this.outputShape=[],this.outputShape=t,this.variableNames=r.map((a,i)=>`T${i}`);const s=[];this.variableNames.forEach(a=>{s.push(`float v${a} = get${a}AtOutCoords();`)});const o=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uB{constructor(t,r){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=r.map((a,i)=>`T${i}`);const s=[];this.variableNames.forEach(a=>{s.push(`vec4 v${a} = get${a}AtOutCoords();`)});const o=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wu(e){const{inputs:t,backend:r}=e,s=t;if(s.length===1)return Qt({inputs:{x:s[0]},backend:r});if(s.length>K().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),c=wu({inputs:s.slice(0,l),backend:r}),p=wu({inputs:s.slice(l),backend:r});return wu({inputs:[c,p],backend:r})}const o=s.map(l=>l.dtype).reduce((l,c)=>Xn(l,c)),a=s.map(l=>l.shape),u=K().getBool("WEBGL_PACK")?new uB(s[0].shape,a):new iB(s[0].shape,a);return r.runWebGLProgram(u,s,o)}const lB={kernelName:Oh,backendName:"webgl",kernelFunc:wu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,keepDims:i}=s,u=o.shape.length,l=Ge(a,o.shape);let c=l;const p=cn(c,u);let d=o;p!=null&&(d=Bt({inputs:{x:o},backend:r,attrs:{perm:p}}),c=bn(c.length,u)),Ln("all",c,u);const[f,h]=Bn(d.shape,c),m=ne(h),g=re({inputs:{x:d},backend:r,attrs:{shape:[-1,m]}}),x=Us(g,g.dtype,"all",r);let y;if(i){const v=Xt(f,l);y=re({inputs:{x},backend:r,attrs:{shape:v}})}else y=re({inputs:{x},backend:r,attrs:{shape:f}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),p!=null&&r.disposeIntermediateTensorInfo(d),y}const pB={kernelName:NC,backendName:"webgl",kernelFunc:cB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,keepDims:i}=s,u=o.shape.length,l=Ge(a,o.shape);let c=l;const p=cn(c,u);let d=o;p!=null&&(d=Bt({inputs:{x:o},backend:r,attrs:{perm:p}}),c=bn(c.length,u)),Ln("any",c,u);const[f,h]=Bn(d.shape,c),m=ne(h),g=re({inputs:{x:d},backend:r,attrs:{shape:[-1,m]}}),x=Us(g,g.dtype,"any",r);let y;if(i){const v=Xt(f,l);y=re({inputs:{x},backend:r,attrs:{shape:v}})}else y=re({inputs:{x},backend:r,attrs:{shape:f}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),p!=null&&r.disposeIntermediateTensorInfo(d),y}const fB={kernelName:TC,backendName:"webgl",kernelFunc:dB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hB{constructor(t,r,s){this.variableNames=["A"];const{windowSize:o,batchSize:a,outSize:i}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const u=r==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${u} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mB{constructor(t,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const a=t[t.length-1],i=Math.ceil(a/r);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const u=this.outputShape,l=u.length,c=Oe(l),p=It("coords",l);let d,f;if(i===1){f=l+1;const D=Oe(f);d=`
        ${D} sourceLocR = ${D}(${p.join()}, 0);
        ++${p[l-1]};
        ${D} sourceLocG = ${D}(${p.join()}, 0);
        ++${p[l-2]};
        ${D} sourceLocA = ${D}(${p.join()}, 0);
        --${p[l-1]};
        ${D} sourceLocB = ${D}(${p.join()}, 0);
        --${p[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${p[l-1]};
        ${c} sourceLocG = coords;
        ++${p[l-2]};
        ${c} sourceLocA = coords;
        --${p[l-1]};
        ${c} sourceLocB = coords;
        --${p[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),m="."+h[f-1],g=h.map(D=>"int "+D),x=It("sourceLocR",f-1).concat("inIdx.r"),y=It("sourceLocG",f-1).concat("inIdx.g"),v=It("sourceLocB",f-1).concat("inIdx.b"),w=It("sourceLocA",f-1).concat("inIdx.a"),$=s==="max"?"greaterThan":"lessThan",b=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()})));`,T=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,S=o?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${p[l-1]} < ${u[l-1]-1};
        bool hasNextRow = ${p[l-2]} < ${u[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${r};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${r}; i++) {
          inIdx = srcIdx;
          ${b}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${$}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3(e,t,r,s=null){let o=t.shape[0],a=t.shape[1];s!=null&&(o=s.shape[0],a=s.shape[1]);const i=mc(a),u={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},l=new hB(u,r,s==null),c=[t];s!=null&&c.push(s);const p=e.runWebGLProgram(l,c,"int32");if(p.shape[1]===1)return p;const d=i3(e,t,r,p);return e.disposeIntermediateTensorInfo(p),d}function u3(e,t,r,s=null){const o=s!=null?s.shape:t.shape,a=o[o.length-1],i=mc(a),u=new mB(o,i,r,s==null),l=s==null?[t]:[t,s],c=e.runWebGLProgram(u,l,"int32");if(c.shape.length===t.shape.length){const p=u3(e,t,r,c);return e.disposeIntermediateTensorInfo(c),p}return c}function l3(e,t,r,s){const o=[r];if(Ln("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,t.shape.length),!K().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const a=[],[i,u]=Bn(t.shape,o),l=ne(u),c=re({inputs:{x:t},backend:e,attrs:{shape:[-1,l]}});a.push(c);const p=i3(e,c,s);a.push(p);const d=re({inputs:{x:p},backend:e,attrs:{shape:i}});return a.forEach(f=>e.disposeIntermediateTensorInfo(f)),d}return u3(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a}=s;let i=Ge(a,o.shape);const u=cn(i,o.shape.length);let l=o;const c=[];u!=null&&(l=Bt({inputs:{x:o},backend:r,attrs:{perm:u}}),c.push(l),i=bn(i.length,l.shape.length)),Ln("argMax",[i[0]],l.shape.length);const p=l3(r,l,i[0],"max");return c.forEach(d=>r.disposeIntermediateTensorInfo(d)),p}const yB={kernelName:Fh,backendName:"webgl",kernelFunc:gB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a}=s;let i=Ge(a,o.shape);const u=cn(i,o.shape.length);let l=o;const c=[];u!=null&&(l=Bt({inputs:{x:o},backend:r,attrs:{perm:u}}),c.push(l),i=bn(i.length,l.shape.length)),Ln("argMin",[i[0]],l.shape.length);const p=l3(r,l,i[0],"min");return c.forEach(d=>r.disposeIntermediateTensorInfo(d)),p}const vB={kernelName:Bh,backendName:"webgl",kernelFunc:xB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB=zn+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,wB=$e({opSnippet:CB}),bB={kernelName:Lh,backendName:"webgl",kernelFunc:wB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $B=zn+"return log(x + sqrt(x * x + 1.0));",_B=$e({opSnippet:$B}),SB={kernelName:zh,backendName:"webgl",kernelFunc:_B};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kB=zn+`
  return atan(x);
`,EB=$e({opSnippet:kB}),NB={kernelName:Mh,backendName:"webgl",kernelFunc:EB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TB=FF+`
  return atan(a, b);
`,IB=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+BF+`
  return result;
`,DB=yt({opSnippet:TB,packedOpSnippet:IB}),AB={kernelName:Uh,backendName:"webgl",kernelFunc:DB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RB=zn+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,PB=$e({opSnippet:RB}),OB={kernelName:Vh,backendName:"webgl",kernelFunc:PB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ni{constructor(t,r,s,o=!1,a=!1){if(this.variableNames=["x"],r==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,p=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;const g=r==="avg",x=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,y=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let v="0.0";if(g||(v="-1.0 / 1e-20"),s){const D=">=";this.userCode=`
        const ivec2 strides = ivec2(${u}, ${l});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${p}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${D} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?a?x:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let $=`${r}(${r}(${r}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;r==="avg"&&($="avgValue / count");const b=Math.floor(i/4)*4,T=i%4,S=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${b}; wC += 4) {
            int xC = xCCorner + wC * ${p};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              getValue(batch, xR, xC + 2 * ${p}, d),
              getValue(batch, xR, xC + 3 * ${p}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${b};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              getValue(batch, xR, xC + 2 * ${p}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${$});
      }
    `}}class mg{constructor(t,r,s,o=!1,a=!1){if(this.variableNames=["x"],r==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,u=t.strideDepth,l=t.strideHeight,c=t.strideWidth,p=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,m=t.effectiveFilterHeight,g=t.effectiveFilterWidth,x=t.padInfo.front,y=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;const w=r==="avg";let $="0.0";if(w||($="-1.0 / 1e-20"),s){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${u}, ${l}, ${c});
        const ivec3 pads = ivec3(${x}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${p}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?a?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let T=`${r}(${r}(${r}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;r==="avg"&&(T="avgValue / count");const S=Math.floor(i/4)*4,D=i%4,z=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${u}, ${l}, ${c});
      const ivec3 pads = ivec3(${x}, ${y}, ${v});
      const float initializationValue = ${$};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${$});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${p}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${z}
            }

            int xC = xCCorner + ${S};
            if (${D===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${z}
            } else if (${D===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${z}
            } else if (${D===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${z}
            }
          }
          setOutput(${T});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t;Ci(o,"avgPool");const{filterSize:a,strides:i,pad:u,dimRoundingMode:l}=s,c=1;k(lt(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const p=Fs(o.shape,a,i,c,u,l);if(p.filterWidth===1&&p.filterHeight===1&&_t(p.inShape,p.outShape))return Qt({inputs:{x:o},backend:r});const d=new ni(p,"avg",!1);return r.runWebGLProgram(d,[o],"float32")}const BB={kernelName:Wh,backendName:"webgl",kernelFunc:FB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LB(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:l,dataFormat:c}=s,p=[1,1,1],d=ci(o.shape,a,i,p,u,l,c),f=new mg(d,"avg",!1);return r.runWebGLProgram(f,[o],"float32")}const zB={kernelName:Gh,backendName:"webgl",kernelFunc:LB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MB{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const r=t.filterHeight,s=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,p=l-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(r*s);this.userCode=`
      const ivec2 pads = ivec2(${p}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${u}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class VB{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const r=t.filterDepth,s=t.filterHeight,o=t.filterWidth,a=t.strideDepth,i=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,p=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=d-1-t.padInfo.front,g=f-1-t.padInfo.top,x=h-1-t.padInfo.left,y=1/(r*s*o);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${x});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${p}) {
              float dyC = float(dyCCorner + wC) / ${u}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UB(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,input:a}=t,i=a,{filterSize:u,strides:l,pad:c,dimRoundingMode:p}=s,d=[1,1,1],f=ci(i.shape,u,l,d,c,p),h=new VB(f);return r.runWebGLProgram(h,[o],i.dtype)}const WB={kernelName:DC,backendName:"webgl",kernelFunc:UB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GB(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,input:a}=t,i=a;Ci([o,a],"avgPoolGrad");const{filterSize:u,strides:l,pad:c}=s,p=Fs(i.shape,u,l,1,c),d=new MB(p);return r.runWebGLProgram(d,[o],i.dtype)}const jB={kernelName:IC,backendName:"webgl",kernelFunc:GB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HB(e){const{inputs:t,backend:r,attrs:s}=e,{a:o,b:a}=t,{transposeA:i,transposeB:u}=s;return il({a:o,b:a,transposeA:i,transposeB:u,backend:r})}const KB={kernelName:jh,backendName:"webgl",kernelFunc:HB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qB{constructor(t,r,s,o,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ve(t,r),ve(t,s);let u="0.0";o!=null&&(ve(t,o),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");let l="1.0";a!=null&&(ve(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${u};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XB{constructor(t,r,s,o,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ve(t,r),ve(t,s);let u="vec4(0.0)";o!=null&&(ve(t,o),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(ve(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${u};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YB=({inputs:e,backend:t,attrs:r})=>{const{x:s,mean:o,variance:a,offset:i,scale:u}=e;k(o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k(u==null||o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=[s,o,a];let p=null;i!=null&&(p=i.shape,c.push(i));let d=null;u!=null&&(d=u.shape,c.push(u));const f=K().getBool("WEBGL_PACK_NORMALIZATION")?new XB(s.shape,o.shape,a.shape,p,d,l):new qB(s.shape,o.shape,a.shape,p,d,l);return t.runWebGLProgram(f,c,c[0].dtype)},QB={kernelName:fm,backendName:"webgl",kernelFunc:YB};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZB{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const r=Oe(this.rank),s=`uniform int start[${this.rank}];`,o=JB(this.rank);let a;const i=t.map((u,l)=>`sourceLoc.${cf[l]} = start[${l}] + coords.${cf[l]};`);a=`
        ${r} sourceLoc;
        ${r} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      ${s}
      void main() {
        ${a}
        setOutput(getSource(${o}));
      }
    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(r,s)=>{this.startLoc==null&&(this.startLoc=r.getUniformLocationNoThrow(s,"start"),this.startLoc==null)||r.gl.uniform1iv(this.startLoc,t)}}}const cf=["x","y","z","w","u","v"];function JB(e){if(e===1)return"sourceLoc";if(e<=6)return cf.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eL{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const r=Oe(this.rank),s=It("coords",this.rank),o=It("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${a})`,u=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${r}(${t.map((p,d)=>`start[${d}]`).join()});`:t.map((p,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${r} coords = getOutputCoords();
        ${r} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${u}
        ${l}
        setOutput(result);
      }
    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(r,s)=>{this.startLoc==null&&(this.startLoc=r.getUniformLocationNoThrow(s,"start"),this.startLoc==null)||r.gl.uniform1iv(this.startLoc,t)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tL(e,t,r,s){const o=s.texData.get(e.dataId),a=s.makeTensorInfo(r,e.dtype),i=s.texData.get(a.dataId);Object.assign(i,o),i.complexParentRefCount=0,i.refCount=1,i.shape=r,i.dtype=e.dtype;let u=_0(t,Kt(e.shape));o.slice&&(u+=o.slice.flatOffset),i.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),a}function $i(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{begin:a,size:i}=s,[u,l]=S0(o,a,i);if(jw(o,u,l),ne(l)===0)return r.makeTensorInfo(l,o.dtype,[]);if(r.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=r.texData.get(o.dataId),f=XO(d.values,u,l,o.shape,o.dtype);return r.makeTensorInfo(l,o.dtype,f)}const{isPacked:c}=r.texData.get(o.dataId),p=$0(o.shape,u,l);if(c||!p){const d=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eL(l):new ZB(l),f=d.getCustomSetupFunc(u);return r.runWebGLProgram(d,[o],o.dtype,f)}return r.uploadToGPU(o.dataId),tL(o,u,l,r)}const nL={kernelName:Zm,backendName:"webgl",kernelFunc:$i};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rL=e=>{const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{blockShape:a,crops:i}=s;k(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce((v,w)=>v*w),l=ng(o.shape,a,u),c=rg(l.length,a.length),p=sg(o.shape,a,u),d=c4(i,a.length),f=p4(p,i,a.length),h=[],m=re({inputs:{x:o},backend:r,attrs:{shape:l}}),g=Bt({inputs:{x:m},backend:r,attrs:{perm:c}}),x=re({inputs:{x:g},backend:r,attrs:{shape:p}}),y=$i({inputs:{x},backend:r,attrs:{begin:d,size:f}});return h.push(m),h.push(g),h.push(x),h.forEach(v=>r.disposeIntermediateTensorInfo(v)),y},sL={kernelName:Hh,backendName:"webgl",kernelFunc:rL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,weights:a}=t,{size:i}=s,u=r.readSync(o.dataId),l=r.readSync(a.dataId),c=q4(u,l,a.dtype,a.shape,i);return r.makeTensorInfo([i],a.dtype,c)}const aL={kernelName:AC,backendName:"webgl",kernelFunc:oL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iL="return float(a != b);",c3=yt({opSnippet:iL,dtype:"bool"}),uL={kernelName:uw,backendName:"webgl",kernelFunc:c3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _i(e){const{inputs:t,backend:r}=e,{input:s}=t,o=r.texData.get(s.dataId);return Qt({inputs:{x:o.complexTensorInfos.real},backend:r})}const lL={kernelName:hw,backendName:"webgl",kernelFunc:_i};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cL="return float(int(x));";function pL(e,t){const r=new Hr(e.shape,cL),s=t.runWebGLProgram(r,[e],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pf(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{dtype:a}=s;if(a==="complex64"){if(o.dtype==="complex64")return Qt({inputs:{x:o},backend:r});const i=mr(o.shape),u=pf({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),l=rs({inputs:{real:u,imag:i},backend:r});return i.dispose(),r.disposeIntermediateTensorInfo(u),l}if(o.dtype==="complex64"){const i=_i({inputs:{input:o},backend:r}),u=pf({inputs:{x:i},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(i),u}if(!vC(o.dtype,a)){const i=Qt({inputs:{x:o},backend:r});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(a==="int32")return pL(o,r);if(a==="bool"){const i=r.makeTensorInfo([],"bool",Xr("bool",1)),l=c3({inputs:{a:o,b:i},backend:r});return r.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}const dL={kernelName:Zl,backendName:"webgl",kernelFunc:pf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mx="return ceil(x);",fL=$e({opSnippet:mx,packedOpSnippet:mx,cpuKernelImpl:DO}),hL={kernelName:Kh,backendName:"webgl",kernelFunc:fL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mL{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(t,r){return(s,o)=>{this.minLoc==null&&(this.minLoc=s.getUniformLocationNoThrow(o,"minVal"),this.maxLoc=s.getUniformLocationNoThrow(o,"maxVal")),s.gl.uniform1f(this.minLoc,t),s.gl.uniform1f(this.maxLoc,r)}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gL{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(t,r){return(s,o)=>{this.minLoc==null&&(this.minLoc=s.getUniformLocationNoThrow(o,"minVal"),this.maxLoc=s.getUniformLocationNoThrow(o,"maxVal")),s.gl.uniform1f(this.minLoc,t),s.gl.uniform1f(this.maxLoc,r)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=s;let u;K().getBool("WEBGL_PACK_CLIP")?u=new gL(o.shape):u=new mL(o.shape);const l=u.getCustomSetupFunc(a,i);return r.runWebGLProgram(u,[o],o.dtype,l)}const xL={kernelName:qh,backendName:"webgl",kernelFunc:yL};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vL{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gx(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function CL(e){const{inputs:t,backend:r}=e,{x:s}=t,o=r.texData.get(s.dataId),a=new vL(s.shape),i=[gx(s,o.complexTensorInfos.real),gx(s,o.complexTensorInfos.imag)];return r.runWebGLProgram(a,i,i[0].dtype)}const wL={kernelName:Xh,backendName:"webgl",kernelFunc:CL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bL{constructor(t){this.outputShape=[],this.outputShape=Yo(t,1),this.variableNames=t.map((i,u)=>`T${u}`);const r=new Array(t.length-1);r[0]=t[0][1];for(let i=1;i<r.length;i++)r[i]=r[i-1]+t[i][1];const s=[`if (yC < ${r[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<r.length;i++){const u=r[i-1];s.push(`else if (yC < ${r[i]}) setOutput(getT${i}(yR, yC-${u}));`)}const o=r.length,a=r[r.length-1];s.push(`else setOutput(getT${o}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $L{constructor(t,r){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Yo(t,r);const s=this.outputShape,o=s.length,a=Oe(o),i=It("coords",o),u=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((g,x)=>`T${x}`);const l=new Array(t.length-1);l[0]=t[0][r];for(let g=1;g<l.length;g++)l[g]=l[g-1]+t[g][r];const c=u[r],p=u.slice(-2),d=u.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${p.join()}));
        }`;for(let g=1;g<l.length;g++){const x=l[g-1];f+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${Ji(u,c,x)}),
            vec2(${Ji(p,c,x)}));
        }`}const h=l.length,m=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${Ji(u,c,m)}),
          vec2(${Ji(p,c,m)}));`,this.userCode=`
      float getValue(${u.map(g=>"int "+g)}) {
        ${f}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Ji(e,t,r){const s=e.indexOf(t);return e.map((a,i)=>i===s?`${a} - ${r}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vc(e){const{inputs:t,backend:r}=e,{input:s}=t,o=r.texData.get(s.dataId);return Qt({inputs:{x:o.complexTensorInfos.imag},backend:r})}const _L={kernelName:YC,backendName:"webgl",kernelFunc:vc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ys(e,t,r){const s=e[0].dtype;if(s==="complex64"){const c=e.map(m=>_i({inputs:{input:m},backend:r})),p=e.map(m=>vc({inputs:{input:m},backend:r})),d=Ys(c,t,r),f=Ys(p,t,r),h=rs({inputs:{real:d,imag:f},backend:r});return c.forEach(m=>r.disposeIntermediateTensorInfo(m)),p.forEach(m=>r.disposeIntermediateTensorInfo(m)),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(f),h}if(s==="string"){const{tensors2D:c,outShape:p}=yx(e,t,r),d=c.map(x=>({vals:r.readSync(x.dataId),shape:x.shape})),f=c[0].shape[0]===1,h=AO(d,p,s,f),m=Yo(e.map(x=>x.shape),t),g=r.makeTensorInfo(m,s,h);return c.forEach(x=>r.disposeIntermediateTensorInfo(x)),g}if(e.length>K().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(e.length/2),p=Ys(e.slice(0,c),t,r),d=Ys(e.slice(c),t,r),f=Ys([p,d],t,r);return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(d),f}if(K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const c=new $L(e.map(p=>p.shape),t);return r.runWebGLProgram(c,e,s)}const{tensors2D:o,outShape:a}=yx(e,t,r),i=new bL(o.map(c=>c.shape)),u=r.runWebGLProgram(i,o,s);o.forEach(c=>r.disposeIntermediateTensorInfo(c));const l=re({inputs:{x:u},attrs:{shape:a},backend:r});return r.disposeIntermediateTensorInfo(u),l}function yx(e,t,r){const s=Yo(e.map(a=>a.shape),t);return{tensors2D:e.map(a=>re({inputs:{x:a},attrs:{shape:[-1,ne(a.shape.slice(t))]},backend:r})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3(e){const{inputs:t,backend:r,attrs:s}=e,{axis:o}=s,a=Ge(o,t[0].shape)[0],i=Yo(t.map(c=>c.shape),a);if(ne(i)===0)return r.makeTensorInfo(i,t[0].dtype,[]);const u=t.filter(c=>ne(c.shape)>0);if(u.length===1)return Qt({inputs:{x:u[0]},backend:r});const l=u.map(c=>c.shape);return u4(l,a),Ys(u,a,r)}const SL={kernelName:Yh,backendName:"webgl",kernelFunc:p3};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d3{constructor(t,r=!1,s=null,o=!1,a=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,u=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,p=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,m=Math.floor(t.inChannels/4)*4,g=t.inChannels%4,x=t.dataFormat==="channelsLast",y=x?1:2,v=x?2:3,w=x?3:1;let $="",b="";s&&(o?$=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?$=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:$=`
          float activation(float x) {
            ${s}
          }
        `,b="result = activation(result);");const T=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${$}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${p};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${b}
        setOutput(result);
      }
    `}}class kL{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const r=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left,a=t.strideDepth,i=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,p=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,m=Math.floor(t.inChannels/4)*4,g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${u});
      const ivec3 pads = ivec3(${r}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${p};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EL{constructor(t,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:o,inChannels:a,strideWidth:i,strideHeight:u,padInfo:l,outWidth:c,dilationWidth:p,dilationHeight:d,dataFormat:f}=s,{left:h,top:m}=l,g=a*o,x=At(),y=f==="channelsLast",v=y?0:1,w=y?1:2;let $="";for(let b=0;b<=1;b++)for(let T=0;T<=1;T++)$+=`
          blockIndex = rc.y + ${T};
          pos = rc.x + ${b};

          if(blockIndex < ${t[1]} && pos < ${t[0]}) {
            offsetY = int(blockIndex / (${c})) * ${u} - ${m};
            d0 = offsetY + ${d} * (pos / ${g});

            if(d0 < ${r[v]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${c}.) * ${i}. - ${h}.);
              d1 = offsetX + ${p} * (int(mod(float(pos), ${g}.) / ${a}.));

              if(d1 < ${r[w]} && d1 >= 0) {

                ch = int(mod(float(pos), ${a}.));

                if (${y}) {
                  innerDims = vec2(d1, ch);
                  result[${b*2+T}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${b*2+T}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${$}

        ${x.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3({x:e,filter:t,convInfo:r,backend:s,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:u=null}){const l=e.shape,c=s.texData.get(e.dataId),p=r.inChannels,d=l[0]*l[1]*l[2],f=r.outChannels,h=r.dataFormat==="channelsLast",m=!1,g=!1;let x;const y=[],v=(d===1||f===1)&&p>a3,w=l[2]%2!==0&&!!c.isPacked;if(v||!K().getBool("WEBGL_LAZILY_UNPACK")||!K().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!w){const $=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],b=re({inputs:{x:e},backend:s,attrs:{shape:[1,$,r.inChannels]}}),T=re({inputs:{x:t},backend:s,attrs:{shape:[1,r.inChannels,r.outChannels]}}),S=il({a:b,b:T,transposeA:m,transposeB:g,backend:s,bias:o,activation:u,preluActivationWeights:a,leakyreluAlpha:i});x=re({inputs:{x:S},backend:s,attrs:{shape:r.outShape}}),y.push(b),y.push(T),y.push(S)}else{const $=h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),b={dataId:e.dataId,shape:[1,$,r.inChannels],dtype:e.dtype},T=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,k(al(c.shape,b.shape),()=>`packed reshape ${c.shape} to ${b.shape} isn't free`);const S=re({inputs:{x:t},backend:s,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(S);const D=il({a:b,b:S,backend:s,transposeA:m,transposeB:g,bias:o,activation:u,preluActivationWeights:a,leakyreluAlpha:i}),z=s.texData.get(D.dataId);k(z.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=T,z.shape=r.outShape,x=Qt({inputs:{x:D},backend:s}),x.shape=r.outShape,y.push(D)}for(const $ of y)s.disposeIntermediateTensorInfo($);return x}function h3({x:e,filter:t,convInfo:r,backend:s,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:u=null}){const{filterWidth:l,filterHeight:c,inChannels:p,outWidth:d,outHeight:f,dataFormat:h}=r,m=h==="channelsLast",g=l*c*p,x=f*d,y=[g,x],v=!0,w=!1,$=[],b=re({inputs:{x:e},backend:s,attrs:{shape:e.shape.slice(1)}}),T=re({inputs:{x:t},backend:s,attrs:{shape:[1,g,ne(t.shape)/g]}});$.push(b),$.push(T);const S=new EL(y,b.shape,r),D=s.runWebGLProgram(S,[b],"float32"),z=re({inputs:{x:D},backend:s,attrs:{shape:[1,y[0],y[1]]}});$.push(D),$.push(z);const E=o!=null,A=a!=null,O=u==="leakyrelu",V=u?yc(u,!0):null,B=new s3(z.shape,T.shape,[1,x,r.outChannels],v,w,E,V,A,O),W=[z,T];if(o&&W.push(o),A&&W.push(a),O){const G=s.makeTensorInfo([],"float32",Go(i,"float32"));W.push(G),$.push(G)}const H=s.runWebGLProgram(B,W,"float32"),Q=m?[1,f,d,r.outChannels]:[1,r.outChannels,f,d],U=re({inputs:{x:H},backend:s,attrs:{shape:Q}});$.push(H);for(const G of $)s.disposeIntermediateTensorInfo(G);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a}=t,{strides:i,pad:u,dataFormat:l,dilations:c,dimRoundingMode:p}=s,d=jo(l),f=ln(o.shape,a.shape,i,c,u,p,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=f3({x:o,filter:a,convInfo:f,backend:r});else if(K().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=h3({x:o,filter:a,convInfo:f,backend:r});else{const g=new d3(f);h=r.runWebGLProgram(g,[o,a],"float32")}const m=re({inputs:{x:h},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(h),m}const TL={kernelName:Qh,backendName:"webgl",kernelFunc:NL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IL{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const r=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,a=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${r} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${a};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DL{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const r=t.filterHeight,s=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=t.dataFormat==="channelsLast",u=r-1-t.padInfo.top,l=s-1-t.padInfo.left,c=i?1:2,p=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${u}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${p}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${r} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AL{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const r=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.padInfo.front,i=t.padInfo.top,u=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${r} - ${a};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${u};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class RL{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const r=t.filterDepth,s=t.filterHeight,o=t.filterWidth,a=t.strideDepth,i=t.strideHeight,u=t.strideWidth,l=r-1-t.padInfo.front,c=s-1-t.padInfo.top,p=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${r}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${r} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${u}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,dy:a}=t,{strides:i,pad:u,dataFormat:l,dimRoundingMode:c,filterShape:p}=s,d=jo(l),f=ln(o.shape,p,i,1,u,c,!1,d),h=new IL(f);return r.runWebGLProgram(h,[o,a],"float32")}const OL={kernelName:PC,backendName:"webgl",kernelFunc:PL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FL(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,filter:a}=t,{inputShape:i,strides:u,pad:l,dataFormat:c,dimRoundingMode:p}=s,d=jo(c),f=ln(i,a.shape,u,1,l,p,!1,d),h=new DL(f);return r.runWebGLProgram(h,[o,a],"float32")}const BL={kernelName:Zh,backendName:"webgl",kernelFunc:FL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a}=t,{strides:i,pad:u,dilations:l}=s,c=pi(o.shape,a.shape,i,l,u),p=new kL(c);return r.runWebGLProgram(p,[o,a],"float32")}const zL={kernelName:Jh,backendName:"webgl",kernelFunc:LL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ML(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,dy:a}=t,{strides:i,pad:u,filterShape:l}=s,c=pi(o.shape,l,i,1,u),p=new AL(c);return r.runWebGLProgram(p,[o,a],"float32")}const VL={kernelName:OC,backendName:"webgl",kernelFunc:ML};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UL(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,filter:a}=t,{pad:i,strides:u,inputShape:l}=s,c=pi(l,a.shape,u,1,i),p=new RL(c);return r.runWebGLProgram(p,[o,a],"float32")}const WL={kernelName:FC,backendName:"webgl",kernelFunc:UL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL=r3+`
  return cos(x);
`,jL=$e({opSnippet:GL}),HL={kernelName:em,backendName:"webgl",kernelFunc:jL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KL=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,qL=$e({opSnippet:KL}),XL={kernelName:tm,backendName:"webgl",kernelFunc:qL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YL{constructor(t,r,s,o,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,u,l,c]=t,[p]=r,[d,f]=s;this.outputShape=[p,d,f,c];const h=o==="bilinear"?1:0,[m,g]=[`${u-1}.0`,`${l-1}.0`],[x,y,v]=d>1?[`${(u-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,$,b]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${$};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${b};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QL=e=>{const{inputs:t,backend:r,attrs:s}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:u,method:l,extrapolationValue:c}=s,p=new YL(o.shape,a.shape,u,l,c);return r.runWebGLProgram(p,[o,a,i],"float32")},ZL={kernelName:BC,backendName:"webgl",kernelFunc:QL};class xx{constructor(t,r,s){this.variableNames=["x"],this.outputShape=t;const o=t.length,a=r?"0.0":`getX(${vx(o,"coords")})`,i=t[t.length-1];let u="",l="";r?(u=s?`end != ${i-1}`:"end != 0",l=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${i}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${Oe(o)} coords = getOutputCoords();
        int end = ${Cx(o,"coords")};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${l};
          ${Cx(o,"coords")} = idx;
          val += getX(${vx(o,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(t){return(r,s)=>{this.index==null&&(this.index=r.getUniformLocation(s,"index")),r.gl.uniform1f(this.index,t)}}}function vx(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function Cx(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JL(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,exclusive:i,reverse:u}=s,l=o.shape.length,c=cn([a],l);let p=o;c!=null&&(p=Bt({inputs:{x:o},backend:r,attrs:{perm:c}}));const d=bn(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${a}`);const f=p.shape[d];let h=Qt({inputs:{x:p},backend:r});for(let m=0;m<=Math.ceil(Math.log2(f))-1;m++){const g=new xx(p.shape,!1,u),x=g.getCustomSetupFunc(m),y=h;h=r.runWebGLProgram(g,[h],h.dtype,x),r.disposeIntermediateTensorInfo(y)}if(i){const m=new xx(p.shape,i,u),g=h;h=r.runWebGLProgram(m,[h],h.dtype),r.disposeIntermediateTensorInfo(g)}if(c!=null){const m=mi(c),g=Bt({inputs:{x:h},backend:r,attrs:{perm:m}});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),g}return h}const ez={kernelName:nm,backendName:"webgl",kernelFunc:JL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tz(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,weights:a}=t,{size:i,binaryOutput:u}=s;if(o.shape.length===1){const l=r.readSync(o.dataId),c=r.readSync(a.dataId),p=q4(l,c,a.dtype,a.shape,i);return r.makeTensorInfo([i],a.dtype,p)}else if(o.shape.length===2){const l=r.bufferSync(o),c=r.bufferSync(a),p=IO(l,c,i,u);return r.makeTensorInfo(p.shape,a.dtype,p.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const nz={kernelName:LC,backendName:"webgl",kernelFunc:tz};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rz{constructor(t,r,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${r};
      int offset_h = imod(h, ${r});
      int in_w = w / ${r};
      int offset_w = imod(w, ${r});
      int offset_d = (offset_h * ${r} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sz(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{blockSize:a,dataFormat:i}=s;k(a>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${a}`);const u=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],c=i==="NHWC"?o.shape[2]:o.shape[3],p=i==="NHWC"?o.shape[3]:o.shape[1],d=l*a,f=c*a,h=p/(a*a),m=i==="NHWC"?[u,d,f,h]:[u,h,d,f],g=new rz(m,a,i);return r.runWebGLProgram(g,[o],o.dtype)}const oz={kernelName:zC,backendName:"webgl",kernelFunc:sz};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m3{constructor(t,r=!1,s=null,o=!1,a=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,u=t.inWidth,l=t.padInfo.top,c=t.padInfo.left,p=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,h=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,x=t.outChannels/t.inChannels;let y="",v="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,v="result = activation(result);");const w=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${p}, ${d});
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${x};
        int q = d2 - d1 * ${x};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${m}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${i}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${u}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${w}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g3{constructor(t,r=!1,s=null,o=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const i=t.inHeight,u=t.inWidth,l=t.padInfo.top,c=t.padInfo.left,p=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,h=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,x=g;let y="int xR; int xC; int xCOffset;";for(let b=0;b<m;b++)for(let T=0;T<g;T++)y+=`
          vec4 xTexelR${b}C${T*2} = vec4(0.);
          vec4 wR${b}C${T} = vec4(0.);
          vec4 xR${b}C${T} = vec4(0.);`;for(let b=0;b<m;b++)for(let T=0;T<x;T++){const S=T*2;if(y+=`
          xR = xRCorner + ${b*f};
          xC = xCCorner + ${S*h};
        `,d===1){if(S<g&&(c%2===1?y+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${u}) {
                  xTexelR${b}C${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${u}) {
                    xTexelR${b}C${S}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${b}C${S} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${u}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${u}) {
                    previous.zw = vec2(0.);
                  }

                  xR${b}C${S} = vec4(previous.zw, xTexelR${b}C${S}.xy);
                } else {
                  xR${b}C${S} = vec4(0, 0, xTexelR${b}C${S}.xy);
                }
              `:y+=`
                if(xR >= 0 && xR < ${i} && xC >= 0 && xC < ${u}) {
                  xTexelR${b}C${S} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${b}C${S} = vec4(0.);
                }

                xR${b}C${S} = xTexelR${b}C${S};
              `,S+1<g)){const D=c%2===0?xC(h):h;h%2===0&&c%2===1||h%2!==0&&c%2!==1?(y+=`
                  xCOffset = xC + ${c%2} + ${D};

                  if(xR >= 0 && xR < ${i} &&
                    xCOffset >= 0 && xCOffset < ${u}) {
                    xTexelR${b}C${S+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(y+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${i} &&
                      xCOffset >= 0 && xCOffset < ${u}) {
                      xTexelR${b}C${S} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${b}C${S} = vec4(0.);
                    }
                  `),y+=`
                  xR${b}C${S+1} = vec4(
                    xTexelR${b}C${S}.zw, xTexelR${b}C${S+2}.xy);
                `):y+=`
                  xCOffset = xC + ${D};

                  if(xR >= 0 && xR < ${i} &&
                    xCOffset >= 0 && xCOffset < ${u}) {
                    xTexelR${b}C${S+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${b}C${S+1} = xTexelR${b}C${S+2};
                `}}else S<g&&(y+=`
              if(xR >= 0 && xR < ${i}) {
            `,c%2===1?(y+=`
                xCOffset = xC + 1 - ${d};
                if(xCOffset >= 0 && xCOffset < ${u}) {
                  xTexelR${b}C${S} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${b}C${S} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${u}) {
                  xTexelR${b}C${S+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${b}C${S+2} = vec4(0.);
                }

                xR${b}C${S} = vec4(
                  xTexelR${b}C${S}.zw, xTexelR${b}C${S+2}.zw);
              `,S+1<g&&(y+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${d};
                  if(xCOffset >= 0 && xCOffset < ${u}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${b}C${S+1} = vec4(xTexelR${b}C${S+2}.xy, final.xy);
                `)):(y+=`
                if(xC >= 0 && xC < ${u}) {
                  xTexelR${b}C${S} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${b}C${S} = vec4(0.);
                }

                xCOffset = xC + ${d};
                if(xCOffset >= 0 && xCOffset < ${u}) {
                  xTexelR${b}C${S+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${b}C${S+2} = vec4(0.);
                }

                xR${b}C${S} = vec4(
                  xTexelR${b}C${S}.xy, xTexelR${b}C${S+2}.xy);
              `,S+1<g&&(y+=`
                  xR${b}C${S+1} = vec4(
                    xTexelR${b}C${S}.zw, xTexelR${b}C${S+2}.zw);
                `)),y+="}");S<g&&(y+=`
            vec4 wTexelR${b}C${S} = getW(${b}, ${S}, d1, q);
            wR${b}C${S} = vec4(wTexelR${b}C${S}.xz, wTexelR${b}C${S}.xz);
          `,S+1<g&&(y+=`
              vec4 wTexelR${b}C${S+1} = getW(${b}, ${S+1}, d1, q);
              wR${b}C${S+1} =
                vec4(wTexelR${b}C${S+1}.xz, wTexelR${b}C${S+1}.xz);`))}for(let b=0;b<m;b++)for(let T=0;T<g;T++)y+=`dotProd += xR${b}C${T} * wR${b}C${T};`;let v="",w="";s&&(o?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:a?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,w="result = activation(result);");const $=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      const ivec2 strides = ivec2(${p}, ${d});
      const ivec2 pads = ivec2(${l}, ${c});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${y}

        vec4 result = dotProd;
        ${$}
        ${w}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a}=t,{strides:i,pad:u,dilations:l,dimRoundingMode:c}=s;let p=l;p==null&&(p=[1,1]),k(lt(i,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`);const d=ln(o.shape,a.shape,i,p,u,c,!0);let f;return K().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new g3(d):f=new m3(d),r.runWebGLProgram(f,[o,a],"float32")}const iz={kernelName:rm,backendName:"webgl",kernelFunc:az};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uz{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const r=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,a=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${r} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${a};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lz{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const r=t.filterHeight,s=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=r-1-t.padInfo.top,u=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${r}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${r} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cz(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,dy:a}=t,{strides:i,dilations:u,pad:l,dimRoundingMode:c,filterShape:p}=s,d=ln(o.shape,p,i,u,l,c,!0),f=new uz(d);return r.runWebGLProgram(f,[o,a],"float32")}const pz={kernelName:MC,backendName:"webgl",kernelFunc:cz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dz(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,filter:a}=t,{strides:i,dilations:u,pad:l,dimRoundingMode:c,inputShape:p}=s,d=ln(p,a.shape,i,u,l,c,!0),f=new lz(d);return r.runWebGLProgram(f,[o,a],"float32")}const fz={kernelName:VC,backendName:"webgl",kernelFunc:dz};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hz{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mz(e){const{inputs:t,backend:r}=e,{x:s}=t,o=[...s.shape,...s.shape],a=ne(s.shape),i=re({inputs:{x:s},backend:r,attrs:{shape:[a]}}),u=new hz(a),l=r.runWebGLProgram(u,[i],i.dtype),c=re({inputs:{x:l},backend:r,attrs:{shape:o}});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),c}const gz={kernelName:TE,backendName:"webgl",kernelFunc:mz};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yz{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:r,inWidth:s,padInfo:o,strideHeight:a,strideWidth:i,filterHeight:u,filterWidth:l,dilationHeight:c,dilationWidth:p}=t,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${u}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${r}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${p};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xz(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a}=t,{strides:i,pad:u,dilations:l}=s,c=hb(o.shape,a.shape,i,u,"NHWC",l);let p;const d=new yz(c);p=r.runWebGLProgram(d,[o,a],"float32");const f=re({inputs:{x:p},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(p),f}const vz={kernelName:sm,backendName:"webgl",kernelFunc:xz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cz="return (x >= 0.0) ? x : (exp(x) - 1.0);",wz=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,bz=$e({opSnippet:Cz,packedOpSnippet:wz}),$z={kernelName:am,backendName:"webgl",kernelFunc:bz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _z="return (b >= 1.0) ? a : a * (b + 1.0);",Sz=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,kz=e=>{const{inputs:t,backend:r}=e,{dy:s,y:o}=t,a=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bi(Sz,s.shape,o.shape):new zo(_z,s.shape,o.shape);return r.runWebGLProgram(a,[s,o],s.dtype)},Ez={kernelName:UC,backendName:"webgl",kernelFunc:kz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nz=`
  return vec4(equal(a, b));
`,Tz="return float(a == b);",Iz=yt({opSnippet:Tz,packedOpSnippet:Nz,dtype:"bool"}),Dz={kernelName:WC,backendName:"webgl",kernelFunc:Iz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Az=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${d4};
  float a1 = ${f4};
  float a2 = ${h4};
  float a3 = ${m4};
  float a4 = ${g4};
  float a5 = ${y4};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Rz=$e({opSnippet:Az}),Pz={kernelName:im,backendName:"webgl",kernelFunc:Rz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wx="return exp(x);",y3=$e({opSnippet:wx,packedOpSnippet:wx,cpuKernelImpl:RO}),Oz={kernelName:um,backendName:"webgl",kernelFunc:y3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function df(e){const{inputs:t,attrs:r,backend:s}=e,{dim:o}=r,{input:a}=t,i=a.shape.length,u=a.shape.slice();let l=o;return o<0&&(k(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),u.splice(l,0,1),re({inputs:{x:a},backend:s,attrs:{shape:u}})}const Fz={kernelName:lm,backendName:"webgl",kernelFunc:df};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bx="return exp(x) - 1.0;",Bz=$e({opSnippet:bx,packedOpSnippet:bx,cpuKernelImpl:PO}),Lz={kernelName:cm,backendName:"webgl",kernelFunc:Bz};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $x{constructor(t,r,s){this.variableNames=["real","imag"];const o=r[1];this.outputShape=r;const a=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let u;if(t==="real")u="return real * expR - imag * expI;";else if(t==="imag")u="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${u}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3(e,t,r){const s=r.texData.get(e.dataId),o=ne(e.shape),a=e.shape[e.shape.length-1],i=o/a,u=re({inputs:{x:e},backend:r,attrs:{shape:[i,a]}}),l=u.shape,c=new $x("real",l,t),p=new $x("imag",l,t),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],f=r.runWebGLProgram(c,d,"float32"),h=r.runWebGLProgram(p,d,"float32"),m=rs({inputs:{real:f,imag:h},backend:r});r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h);const g=re({inputs:{x:m},backend:r,attrs:{shape:e.shape}});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(m),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zz(e){const{inputs:t,backend:r}=e,{input:s}=t;return x3(s,!1,r)}const Mz={kernelName:GC,backendName:"webgl",kernelFunc:zz};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vz{constructor(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(t){return(r,s)=>{this.valueLoc==null&&(this.valueLoc=r.getUniformLocationNoThrow(s,"value")),r.gl.uniform1f(this.valueLoc,t)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(e){const{backend:t,attrs:r}=e,{shape:s,value:o}=r;let{dtype:a}=r;if(a=a||Yl(o),a==="string"){const i=Dh(a,ne(s));return i.fill(o),t.makeTensorInfo(s,a,i)}else{const i=new Vz(s,o),u=i.getCustomSetupFunc(o);return t.runWebGLProgram(i,[],a,u)}}const Uz={kernelName:jC,backendName:"webgl",kernelFunc:gg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wz{constructor(t){this.variableNames=["Image"],this.outputShape=[];const r=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${r} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${r}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gz={kernelName:HC,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:r}=e,s=t,o=new Wz(r.shape);return s.runWebGLProgram(o,[r],r.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _x="return floor(x);",jz=$e({opSnippet:_x,packedOpSnippet:_x,cpuKernelImpl:OO}),Hz={kernelName:pm,backendName:"webgl",kernelFunc:jz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kz=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,qz=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Xz=yt({opSnippet:Kz,packedOpSnippet:qz,dtype:"int32"}),Yz={kernelName:dm,backendName:"webgl",kernelFunc:Xz};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qz{constructor(t){this.variableNames=["A"];const r=At(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${r.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zz{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=At(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${r.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jz={kernelName:Id,backendName:"webgl",kernelFunc:eM};let Ks;function eM(e){const{inputs:t,backend:r,attrs:s}=e;let{pixels:o}=t;const{numChannels:a}=s,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,l=typeof ImageBitmap<"u"&&o instanceof ImageBitmap,[c,p]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],d=[p,c],f=[p,c,a];(u||i||l)&&(Ks==null&&(Ks=document.createElement("canvas").getContext("2d")),Ks.canvas.width=c,Ks.canvas.height=p,Ks.drawImage(o,0,0,c,p),o=Ks.canvas);const h=r.makeTensorInfo(d,"int32");r.texData.get(h.dataId).usage=nn.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(h.dataId),o);const m=K().getBool("WEBGL_PACK")?new Zz(f):new Qz(f),g=r.runWebGLProgram(m,[h],"int32");return r.disposeData(h.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tM(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a,bias:i,preluActivationWeights:u}=t,{strides:l,pad:c,dataFormat:p,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:m}=s,g=jo(p),x=ln(o.shape,a.shape,l,d,c,f,!1,g);let y;const v=[];if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))y=f3({x:o,filter:a,convInfo:x,backend:r,bias:i,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else if(K().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)y=h3({x:o,filter:a,convInfo:x,backend:r,bias:i,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{const $=i!=null,b=u!=null,T=h==="leakyrelu",S=h?yc(h,!1):null,D=new d3(x,$,S,b,T),z=[o,a];if(i&&z.push(i),u&&z.push(u),T){const E=r.makeTensorInfo([],"float32",Go(m,"float32"));z.push(E),v.push(E)}y=r.runWebGLProgram(D,z,"float32")}const w=re({inputs:{x:y},backend:r,attrs:{shape:x.outShape}});return v.push(y),v.forEach($=>r.disposeIntermediateTensorInfo($)),w}const nM={kernelName:Ad,backendName:"webgl",kernelFunc:tM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rM(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,filter:a,bias:i,preluActivationWeights:u}=t,{strides:l,pad:c,dilations:p,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=s,m=[];let g=p;g==null&&(g=[1,1]),k(lt(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const x=ln(o.shape,a.shape,l,g,c,d,!0),y=K().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,v=f?yc(f,y):null,w=[o,a],$=i!=null,b=u!=null,T=f==="leakyrelu";if($&&w.push(i),b&&w.push(u),T){const z=r.makeTensorInfo([],"float32",Go(h,"float32"));w.push(z),m.push(z)}let S;y?S=new g3(x,$,v,b,T):S=new m3(x,$,v,b,T);const D=r.runWebGLProgram(S,w,"float32");return m.forEach(z=>r.disposeIntermediateTensorInfo(z)),D}const sM={kernelName:Rd,backendName:"webgl",kernelFunc:rM};class oM{constructor(t,r,s){this.sliceDim=t,this.strides=r,this.variableNames=["x","indices"],this.outputShape=s;const o=Oe(r.length),a=Oe(s.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${i};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aM(e){const{inputs:t,backend:r}=e,{params:s,indices:o}=t,a=o.shape,i=a[a.length-1],[u,l,c,p]=Uw(s,o),d=re({inputs:{x:o},backend:r,attrs:{shape:[l,i]}}),f=re({inputs:{x:s},backend:r,attrs:{shape:[ne(s.shape)/c,c]}}),h=new oM(i,p,[l,c]),m=r.runWebGLProgram(h,[f,d],f.dtype),g=re({inputs:{x:m},backend:r,attrs:{shape:u}});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),g}const iM={kernelName:KC,backendName:"webgl",kernelFunc:aM};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uM{constructor(t,r){this.variableNames=["A","indices"],this.outputShape=r,this.rank=r.length;const s=Oe(this.rank),o=lM(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function lM(e,t){const r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)o===2?s.push("int(getIndices(resRC.x, resRC.z))"):s.push(`${r[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cM(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,indices:a}=t,{axis:i,batchDims:u}=s,l=Ge(i,o.shape)[0],c=w4(o,a,l,u),p=ne(a.shape),d=[],f=re({inputs:{x:o},backend:r,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=re({inputs:{x:a},backend:r,attrs:{shape:[c.batchSize,p/c.batchSize]}});d.push(f),d.push(h);const m=[c.batchSize,c.outerSize,p/c.batchSize,c.sliceSize];if(r.shouldExecuteOnCPU([o,a])||o.dtype==="string"){const v=r.bufferSync(h),w=r.bufferSync(f),$=FO(w,v,m);return d.forEach(b=>r.disposeIntermediateTensorInfo(b)),r.makeTensorInfo(c.outputShape,$.dtype,$.values)}const g=new uM(f.shape,m),x=r.runWebGLProgram(g,[f,h],f.dtype);d.push(x);const y=re({inputs:{x},backend:r,attrs:{shape:c.outputShape}});return d.forEach(v=>r.disposeIntermediateTensorInfo(v)),y}const pM={kernelName:hm,backendName:"webgl",kernelFunc:cM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dM="return float(a > b);",fM=`
  return vec4(greaterThan(a, b));
`,hM=yt({opSnippet:dM,packedOpSnippet:fM,cpuKernelImpl:BO,dtype:"bool"}),mM={kernelName:qC,backendName:"webgl",kernelFunc:hM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gM="return float(a >= b);",yM=`
  return vec4(greaterThanEqual(a, b));
`,xM=yt({opSnippet:gM,packedOpSnippet:yM,dtype:"bool"}),vM={kernelName:mm,backendName:"webgl",kernelFunc:xM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CM(e){const{inputs:t,backend:r}=e,{input:s}=t;return x3(s,!0,r)}const wM={kernelName:XC,backendName:"webgl",kernelFunc:CM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bM="return float(!isnan(x) && !isinf(x));",$M=$e({opSnippet:bM,dtype:"bool"}),_M={kernelName:ym,backendName:"webgl",kernelFunc:$M};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SM="return float(isinf(x));",kM=$e({opSnippet:SM,dtype:"bool"}),EM={kernelName:xm,backendName:"webgl",kernelFunc:kM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NM="return float(isnan(x));",TM=$e({opSnippet:NM,dtype:"bool"}),IM={kernelName:vm,backendName:"webgl",kernelFunc:TM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DM="return float(a < b);",AM=`
  return vec4(lessThan(a, b));
`,RM=yt({opSnippet:DM,packedOpSnippet:AM,cpuKernelImpl:LO,dtype:"bool"}),PM={kernelName:QC,backendName:"webgl",kernelFunc:RM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OM="return float(a <= b);",FM=`
  return vec4(lessThanEqual(a, b));
`,BM=yt({opSnippet:OM,packedOpSnippet:FM,dtype:"bool"}),LM={kernelName:ZC,backendName:"webgl",kernelFunc:BM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zM(e){const{backend:t,attrs:r}=e,{start:s,stop:o,num:a}=r,i=zO(s,o,a);return t.makeTensorInfo([i.length],"float32",i)}const MM={kernelName:JC,backendName:"webgl",kernelFunc:zM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VM=`if (x < 0.0) return NAN;
  return log(x);`,UM=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,WM=$e({opSnippet:VM,packedOpSnippet:UM,cpuKernelImpl:MO}),GM={kernelName:wm,backendName:"webgl",kernelFunc:WM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jM="return log(1.0 + x);",HM=$e({opSnippet:jM}),KM={kernelName:bm,backendName:"webgl",kernelFunc:HM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qM="return float(a >= 1.0 && b >= 1.0);",XM=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,YM=yt({opSnippet:qM,packedOpSnippet:XM,dtype:"bool"}),QM={kernelName:ew,backendName:"webgl",kernelFunc:YM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZM="return float(!(x >= 1.0));",JM=$e({opSnippet:ZM}),eV={kernelName:tw,backendName:"webgl",kernelFunc:JM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tV="return float(a >= 1.0 || b >= 1.0);",nV=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,rV=yt({opSnippet:tV,packedOpSnippet:nV,dtype:"bool"}),sV={kernelName:nw,backendName:"webgl",kernelFunc:rV};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oV{constructor(t,r,s,o,a){this.variableNames=["x"],this.outputShape=[];const i=r,u=t[3]-1;this.outputShape=t;let l;const c=`float(${s}) + float(${o}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${u}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aV{constructor(t,r,s,o,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=r,u=t[3]-1;this.outputShape=t;let l;const c=`float(${s}) + float(${o}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${u}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iV=e=>{const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:u,beta:l}=s,c=K().getBool("WEBGL_PACK_NORMALIZATION")?new aV(o.shape,a,i,u,l):new oV(o.shape,a,i,u,l);return r.runWebGLProgram(c,[o],o.dtype)},uV={kernelName:$m,backendName:"webgl",kernelFunc:iV};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lV{constructor(t,r,s,o,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=r,this.bias=s,this.alpha=o,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${r})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${r} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${a})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cV=e=>{const{inputs:t,backend:r,attrs:s}=e,{x:o,y:a,dy:i}=t,{depthRadius:u,bias:l,alpha:c,beta:p}=s,d=new lV(o.shape,u,l,c,p);return r.runWebGLProgram(d,[o,a,i],o.dtype)},pV={kernelName:rw,backendName:"webgl",kernelFunc:cV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dV(e,t,r,s){const o=ne(t),i=ne(e.shape)/o,u=re({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=Us(u,e.dtype,"max",s),c=re({inputs:{x:l},attrs:{shape:r},backend:s});return s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=s,u=o.shape.length,l=Ge(a,o.shape);let c=l;const p=cn(c,u),d=p!=null,f=r.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const w=r.texData.get(h.dataId).values,$=new Array(u);for(let S=0;S<$.length;S++)$[S]=o.shape[p[S]];const b=fg(w,o.shape,o.dtype,p,$);h=r.makeTensorInfo($,o.dtype);const T=r.texData.get(h.dataId);T.values=b}else h=xc(o,p,r);c=bn(c.length,u)}Ln("max",c,u);const[m,g]=Bn(h.shape,c);let x=m;i&&(x=Xt(m,l));let y;if(f){const w=r.texData.get(h.dataId).values,$=VO(w,ne(g),x,o.dtype);y=r.makeTensorInfo(x,o.dtype);const b=r.texData.get(y.dataId);b.values=$}else y=dV(h,g,x,r);return d&&r.disposeIntermediateTensorInfo(h),y}const fV={kernelName:_m,backendName:"webgl",kernelFunc:v3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hV=Z4+`
  return max(a, b);
`,mV=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+gc+`
  return result;
`,gV=yt({opSnippet:hV,packedOpSnippet:mV,cpuKernelImpl:UO}),yV={kernelName:Sm,backendName:"webgl",kernelFunc:gV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t;Ci(o,"maxPool");const{filterSize:a,strides:i,pad:u,dimRoundingMode:l}=s,c=1;k(lt(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const p=Fs(o.shape,a,i,c,u,l);if(p.filterWidth===1&&p.filterHeight===1&&_t(p.inShape,p.outShape))return Qt({inputs:{x:o},backend:r});const d=new ni(p,"max",!1);return r.runWebGLProgram(d,[o],o.dtype)}const vV={kernelName:km,backendName:"webgl",kernelFunc:xV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CV(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{filterSize:a,strides:i,pad:u,dataFormat:l,dimRoundingMode:c}=s,p=[1,1,1],d=ci(o.shape,a,i,p,u,c,l),f=new mg(d,"max",!1);return r.runWebGLProgram(f,[o],o.dtype)}const wV={kernelName:Em,backendName:"webgl",kernelFunc:CV};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bV{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const r=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,a=t.effectiveFilterHeight,i=t.effectiveFilterWidth,u=a-1-t.padInfo.top,l=i-1-t.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(${u}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class $V{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const r=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,i=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=c-1-t.padInfo.top,h=p-1-t.padInfo.left,m=l*c*p-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${p} +
                  wR * ${p} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _V(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,input:a}=t,i=a,{filterSize:u,strides:l,pad:c,dimRoundingMode:p}=s,d=[1,1,1],f=ci(i.shape,u,l,d,c,p),h=new mg(f,"max",!0),m=r.runWebGLProgram(h,[i],i.dtype),g=new $V(f),x=r.runWebGLProgram(g,[o,m],i.dtype);return r.disposeIntermediateTensorInfo(m),x}const SV={kernelName:ow,backendName:"webgl",kernelFunc:_V};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kV(e){const{inputs:t,backend:r,attrs:s}=e,{dy:o,input:a,output:i}=t,u=a;Ci([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:p,dimRoundingMode:d}=s,f=Fs(u.shape,l,c,1,p,d),h=!0,m=new ni(f,"max",h),g=r.runWebGLProgram(m,[u],u.dtype),x=new bV(f),y=r.runWebGLProgram(x,[o,g],u.dtype);return r.disposeIntermediateTensorInfo(g),y}const EV={kernelName:sw,backendName:"webgl",kernelFunc:kV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NV(e,t,r,s){let o=new ni(r,"max",!1);const a=s.runWebGLProgram(o,[e],"float32");o=new ni(r,"max",!0,!0,t);const i=s.runWebGLProgram(o,[e],"float32");return[a,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV={kernelName:aw,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{const{x:s}=e,{filterSize:o,strides:a,pad:i,includeBatchInIndex:u}=t,l=r;k(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const c=[1,1];k(lt(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const p=Fs(s.shape,o,a,c,i),[d,f]=NV(s,u,p,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IV(e,t,r,s){const o=ne(t),i=ne(e.shape)/o,u=re({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=Us(u,"float32","mean",s),c=re({inputs:{x:l},attrs:{shape:r},backend:s});return s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DV={kernelName:Nm,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{const{x:s}=e,{keepDims:o,axis:a}=t,i=r,u=s.shape.length,l=Ge(a,s.shape);let c=l;const p=cn(c,u),d=p!=null,f=i.shouldExecuteOnCPU([s]),h=[];let m=s;if(d){if(f){const $=i.texData.get(m.dataId).values,b=new Array(u);for(let D=0;D<b.length;D++)b[D]=s.shape[p[D]];const T=fg($,s.shape,s.dtype,p,b);m=i.makeTensorInfo(b,s.dtype);const S=i.texData.get(m.dataId);S.values=T}else m=xc(s,p,i);h.push(m),c=bn(c.length,u)}Ln("sum",c,u);const[g,x]=Bn(m.shape,c);let y=g;o&&(y=Xt(g,l));const v=IV(m,x,y,i);for(const w of h)i.disposeIntermediateTensorInfo(w);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,keepDims:i}=s,u=o.shape.length,l=Ge(a,o.shape);let c=l;const p=cn(c,u);let d=o;p!=null&&(d=Bt({inputs:{x:o},backend:r,attrs:{perm:p}}),c=bn(c.length,o.shape.length)),Ln("min",c,u);const[f,h]=Bn(d.shape,c),m=ne(h),g=re({inputs:{x:d},backend:r,attrs:{shape:[-1,m]}}),x=Us(g,g.dtype,"min",r);let y;if(i){const v=Xt(f,l);y=re({inputs:{x},backend:r,attrs:{shape:v}})}else y=re({inputs:{x},backend:r,attrs:{shape:f}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),p!=null&&r.disposeIntermediateTensorInfo(d),y}const RV={kernelName:Tm,backendName:"webgl",kernelFunc:AV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV=Z4+`
  return min(a, b);
`,OV=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+gc+`
  return result;
`,FV=yt({opSnippet:PV,packedOpSnippet:OV,cpuKernelImpl:WO}),BV={kernelName:Im,backendName:"webgl",kernelFunc:FV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LV{constructor(t,r,s){this.variableNames=["x"],this.outputShape=r.map((p,d)=>p[0]+t[d]+p[1]);const o=t.length,a=Oe(o),i=r.map(p=>p[0]).join(","),u=r.map((p,d)=>p[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${u};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${u});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zV{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((m,g)=>m[0]+t[g]+m[1]);const o=t.length,a=Oe(o),i=r.map(m=>m[0]).join(","),u=r.map((m,g)=>m[0]+t[g]).join(","),l=It("rc",o),c=It("source",o),p=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,f=s==="reflect"?0:1;let h="";if(o===1){const m=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${a} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${p}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const m=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${a} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${p}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${p}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${u});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=({inputs:e,backend:t,attrs:r})=>{const{x:s}=e,{paddings:o,mode:a}=r,i=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zV(s.shape,o,a):new LV(s.shape,o,a);return t.runWebGLProgram(i,[s],s.dtype)},VV={kernelName:Dm,backendName:"webgl",kernelFunc:MV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UV=`if (b == 0.0) return NAN;
  return mod(a, b);`,WV=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+gc+`
  return result;
`,GV=yt({opSnippet:UV,packedOpSnippet:WV}),jV={kernelName:Am,backendName:"webgl",kernelFunc:GV};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HV{constructor(t,r,s){this.variableNames=["probs"],this.outputShape=[t,s],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${r-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${r-1}));
      }
    `}getCustomSetupFunc(t){return(r,s)=>{this.seedLoc==null&&(this.seedLoc=r.getUniformLocation(s,"seed")),r.gl.uniform1f(this.seedLoc,t)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KV=`
if (a == b) {
  return 1.0;
};
return a / b;`,qV=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,C3=yt({opSnippet:KV,packedOpSnippet:qV,checkOutOfBounds:!0}),XV={kernelName:om,backendName:"webgl",kernelFunc:C3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sx="return a - b;",w3=yt({opSnippet:Sx,packedOpSnippet:Sx,supportsComplex:!0,cpuKernelImpl:QO}),YV={kernelName:c0,backendName:"webgl",kernelFunc:w3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3(e){const{inputs:t,backend:r,attrs:s}=e,{logits:o}=t,{dim:a}=s,i=Ge([a],o.shape),u=v3({inputs:{x:o},backend:r,attrs:{reductionIndices:i,keepDims:!1}}),l=Xt(u.shape,i),c=re({inputs:{x:u},backend:r,attrs:{shape:l}}),p=w3({inputs:{a:o,b:c},backend:r}),d=y3({inputs:{x:p},backend:r}),f=hg({inputs:{x:d},backend:r,attrs:{axis:i,keepDims:!1}}),h=re({inputs:{x:f},backend:r,attrs:{shape:l}}),m=C3({inputs:{a:d,b:h},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),m}const QV={kernelName:u0,backendName:"webgl",kernelFunc:b3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(e){const{inputs:t,backend:r,attrs:s}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:u}=s,l=u?o:b3({inputs:{logits:o},backend:r,attrs:{dim:o.shape.length-1}}),c=l.shape[0],p=l.shape[1],d=new HV(c,p,a),f=d.getCustomSetupFunc(i),h=r.runWebGLProgram(d,[l],"int32",f);return u||r.disposeIntermediateTensorInfo(l),h}const JV={kernelName:iw,backendName:"webgl",kernelFunc:ZV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kx="return -x;";function eU(e){const{inputs:t,backend:r}=e,{x:s}=t;if(r.shouldExecuteOnCPU([s])){const a=r.texData.get(s.dataId),[i,u]=jO(a.values,s.shape,s.dtype);return r.makeTensorInfo(u,s.dtype,i)}let o;return K().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Co(s.shape,kx):o=new Hr(s.shape,kx),r.runWebGLProgram(o,[s],s.dtype)}const tU={kernelName:Pm,backendName:"webgl",kernelFunc:eU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nU=r4;function rU(e){xi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:r,attrs:s}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:l}=s,c=r.readSync(o.dataId),p=r.readSync(a.dataId),{selectedIndices:d}=nU(c,p,i,u,l);return r.makeTensorInfo([d.length],"int32",new Int32Array(d))}const sU={kernelName:lw,backendName:"webgl",kernelFunc:rU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oU=s4;function aU(e){xi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:r,attrs:s}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:l,padToMaxOutputSize:c}=s,p=r.readSync(o.dataId),d=r.readSync(a.dataId),{selectedIndices:f,validOutputs:h}=oU(p,d,i,u,l,c);return[r.makeTensorInfo([f.length],"int32",new Int32Array(f)),r.makeTensorInfo([],"int32",new Int32Array([h]))]}const iU={kernelName:cw,backendName:"webgl",kernelFunc:aU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uU=o4;function lU(e){xi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:r,attrs:s}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=s,p=r.readSync(o.dataId),d=r.readSync(a.dataId),f=i,h=u,m=l,g=c,{selectedIndices:x,selectedScores:y}=uU(p,d,f,h,m,g);return[r.makeTensorInfo([x.length],"int32",new Int32Array(x)),r.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const cU={kernelName:pw,backendName:"webgl",kernelFunc:lU};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pU{constructor(t,r,s,o){this.variableNames=["indices"],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU=e=>{const{inputs:t,backend:r,attrs:s}=e,{indices:o}=t,{depth:a,onValue:i,offValue:u}=s,l=ne(o.shape),c=new pU(l,a,i,u),p=re({inputs:{x:o},backend:r,attrs:{shape:[l]}}),d=r.runWebGLProgram(c,[p],o.dtype);r.disposeIntermediateTensorInfo(p);const f=[...o.shape,a],h=re({inputs:{x:d},backend:r,attrs:{shape:f}});return r.disposeIntermediateTensorInfo(d),h},fU={kernelName:Fm,backendName:"webgl",kernelFunc:dU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ul(e){const{inputs:t,backend:r}=e,{x:s}=t;if(s.dtype==="complex64"){const o=_i({inputs:{input:s},backend:r}),a=ul({inputs:{x:o},backend:r}),i=vc({inputs:{input:s},backend:r}),u=ul({inputs:{x:i},backend:r}),l=rs({inputs:{real:a,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(u),l}else return gg({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:r})}const hU={kernelName:g0,backendName:"webgl",kernelFunc:ul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3(e){const{inputs:t,backend:r}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=_i({inputs:{input:s},backend:r}),a=$3({inputs:{x:o},backend:r}),i=vc({inputs:{input:s},backend:r}),u=ul({inputs:{x:i},backend:r}),l=rs({inputs:{real:a,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(u),l}else return gg({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:r})}const mU={kernelName:Om,backendName:"webgl",kernelFunc:$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gU(e){const{inputs:t,backend:r,attrs:s}=e,{axis:o}=s;if(t.length===1)return df({inputs:{input:t[0]},backend:r,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach(p=>{Fe(a,p.shape,"All tensors passed to stack must have matching shapes"),k(i===p.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],l=t.map(p=>{const d=df({inputs:{input:p},backend:r,attrs:{dim:o}});return u.push(d),d}),c=p3({inputs:l,backend:r,attrs:{axis:o}});return u.forEach(p=>r.disposeIntermediateTensorInfo(p)),c}const yU={kernelName:Bm,backendName:"webgl",kernelFunc:gU};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xU{constructor(t,r,s){this.variableNames=["x"],this.outputShape=r.map((c,p)=>c[0]+t[p]+c[1]);const o=t.length,a=Oe(o),i=r.map(c=>c[0]).join(","),u=r.map((c,p)=>c[0]+t[p]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${u};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${s}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${u});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${s}));
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vU{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((g,x)=>g[0]+t[x]+g[1]);const o=t.length,a=Oe(o),i=r.map(g=>g[0]).join(","),u=r.map((g,x)=>g[0]+t[x]).join(","),l=It("rc",o),c=It("source",o),p=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${a} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${p}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${p}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let g=0,x=o===1?2:4;g<x;g++)m+=`
        ${f[g]}
        if (${h}) {
          result[${g}] = float(${s});
        } else {
          ${a} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=o===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${u});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3=e=>{const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{paddings:a,constantValue:i}=s,u=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vU(o.shape,a,i):new xU(o.shape,a,i);return r.runWebGLProgram(u,[o],o.dtype)},CU={kernelName:Lm,backendName:"webgl",kernelFunc:_3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wU=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,bU=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+gc+`
  return result;
`,$U=yt({opSnippet:wU,packedOpSnippet:bU}),_U={kernelName:zm,backendName:"webgl",kernelFunc:$U};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SU(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{axis:a,keepDims:i}=s,u=o.shape.length,l=[],c=Ge(a,o.shape);let p=c;const d=cn(p,u);let f=o;d!=null&&(f=Bt({inputs:{x:o},backend:r,attrs:{perm:d}}),p=bn(p.length,u),l.push(f)),Ln("prod",p,u);let h;if(r.shouldExecuteOnCPU([f])){const m=r.texData.get(f.dataId).values,{outVals:g,outShape:x,outDtype:y}=HO(f.shape,f.dtype,m,p);h=r.makeTensorInfo(x,y,g)}else{const[m,g]=Bn(f.shape,p),x=ne(g),y=re({inputs:{x:f},backend:r,attrs:{shape:[-1,x]}}),v=v0(o.dtype),w=Us(y,v,"prod",r);h=re({inputs:{x:w},backend:r,attrs:{shape:m}}),l.push(y),l.push(w)}if(i){l.push(h);const m=Xt(h.shape,c);h=re({inputs:{x:h},backend:r,attrs:{shape:m}})}return l.forEach(m=>r.disposeIntermediateTensorInfo(m)),h}const kU={kernelName:dw,backendName:"webgl",kernelFunc:SU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3=e=>{const{backend:t,attrs:r}=e,{start:s,stop:o,step:a,dtype:i}=r,u=KO(s,o,a,i);return t.makeTensorInfo([u.length],i,u)},EU={kernelName:fw,backendName:"webgl",kernelFunc:S3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NU="return 1.0 / x;",TU=$e({opSnippet:NU}),IU={kernelName:Vm,backendName:"webgl",kernelFunc:TU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DU=zn+`
  return (x < 0.0) ? 0.0 : x;
`,AU=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RU=$e({opSnippet:DU,packedOpSnippet:AU}),PU={kernelName:Um,backendName:"webgl",kernelFunc:RU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OU=zn+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,FU=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,BU=$e({opSnippet:OU,packedOpSnippet:FU}),LU={kernelName:Hm,backendName:"webgl",kernelFunc:BU};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zU{constructor(t,r,s,o,a){this.variableNames=["A"],this.outputShape=[];const[i,u,l,c]=t;this.outputShape=[i,r,s,c];const p=[o&&r>1?u-1:u,o&&s>1?l-1:l],d=[o&&r>1?r-1:r,o&&s>1?s-1:s];let f;a?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${p[0]/d[0]},
          ${p[1]/d[1]});
      const vec2 inputShapeRC = vec2(${u}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MU{constructor(t,r,s,o,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,u,l,c]=t;this.outputShape=[i,r,s,c];const p=[o&&r>1?u-1:u,o&&s>1?l-1:l],d=[o&&r>1?r-1:r,o&&s>1?s-1:s];let f;a?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${p[0]/d[0]},
          ${p[1]/d[1]},
          ${p[1]/d[1]});
      const vec3 inputShapeRC = vec3(${u}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(e){const{inputs:t,backend:r,attrs:s}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:u}=s,[l,c]=u,p=K().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new MU(o.shape,l,c,a,i):new zU(o.shape,l,c,a,i);return r.runWebGLProgram(p,[o],"float32")}const UU={kernelName:jm,backendName:"webgl",kernelFunc:VU};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WU{constructor(t,r,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=r;const[,o,a]=r,[,i,u]=t,l=[s&&i>1?o-1:o,s&&u>1?a-1:a],c=[s&&i>1?i-1:i,s&&u>1?u-1:u],p=l[0]/c[0],d=l[1]/c[1],f=1/p,h=1/d,m=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${p});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${u}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(e){const{inputs:t,backend:r,attrs:s}=e,{images:o,dy:a}=t,{alignCorners:i}=s,u=new WU(a.shape,o.shape,i);return r.runWebGLProgram(u,[a],a.dtype)}const jU={kernelName:gw,backendName:"webgl",kernelFunc:GU};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HU{constructor(t,r,s,o,a){this.variableNames=["A"],this.outputShape=[];const[i,u,l,c]=t;this.outputShape=[i,r,s,c];const p=[o&&r>1?u-1:u,o&&s>1?l-1:l],d=[o&&r>1?r-1:r,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;a?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${p[0]/d[0]},
          ${p[1]/d[1]});
      const vec2 inputShapeRC = vec2(${u}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KU(e){const{inputs:t,backend:r,attrs:s}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:u}=s,[l,c]=u,p=new HU(o.shape,l,c,a,i);return r.runWebGLProgram(p,[o],o.dtype)}const qU={kernelName:Gm,backendName:"webgl",kernelFunc:KU};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XU{constructor(t,r,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=r;const[,o,a]=r,[,i,u]=t,l=[s&&i>1?o-1:o,s&&u>1?a-1:a],c=[s&&i>1?i-1:i,s&&u>1?u-1:u],p=l[0]/c[0],d=l[1]/c[1],f=1/p,h=1/d,m=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${p});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${u}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YU(e){const{inputs:t,backend:r,attrs:s}=e,{images:o,dy:a}=t,{alignCorners:i}=s,u=new XU(a.shape,o.shape,i);return r.runWebGLProgram(u,[a],a.dtype)}const QU={kernelName:mw,backendName:"webgl",kernelFunc:YU};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZU{constructor(t,r){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=u=>r.indexOf(u)!==-1&&t[u]!==1?`${t[u]} - coords[${u}] - 1`:`coords[${u}]`,a=t.map((u,l)=>o(l)).join(","),i=Oe(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JU{constructor(t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const o=It("rc",s),a=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,u=Oe(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${u} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${a}){
            result.g = ${c(o.slice())};
          }
          if(${i}) {
            result.b = ${p(o.slice())};
            if(${a}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return f(m)}function c(m){return m[s-1]="("+m[s-1]+" + 1)",f(m)}function p(m){return m[s-2]="("+m[s-2]+" + 1)",f(m)}function d(m){return m[s-1]="("+m[s-1]+" + 1)",m[s-2]="("+m[s-2]+" + 1)",f(m)}function f(m){const g=t.map((v,w)=>h(w,m)),x=g.join(","),y=g.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${y}))`}function h(m,g){return r.indexOf(m)!==-1&&t[m]!==1?`${t[m]} - ${g[m]} - 1`:`${g[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eW(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{dims:a}=s,i=o.shape.length,u=Ge(a,o.shape);if(i===0)return Qt({inputs:{x:o},backend:r});const l=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JU(o.shape,u):new ZU(o.shape,u);return r.runWebGLProgram(l,[o],o.dtype)}const tW={kernelName:Km,backendName:"webgl",kernelFunc:eW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nW{constructor(t,r,s,o){this.variableNames=["Image"],this.outputShape=[];const a=t[1],i=t[2],u=Math.sin(r).toFixed(3),l=Math.cos(r).toFixed(3);this.outputShape=t;const[c,p]=l4(o,a,i),d=c.toFixed(3),f=p.toFixed(3);let h="";typeof s=="number"?h=`float outputValue = ${s.toFixed(2)};`:h=`
        vec3 fill = vec3(${s.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${d}) * ${l} - (float(y) - ${f}) * ${u};
          float coordYFloat = (float(x) - ${d}) * ${u} + (float(y) - ${f}) * ${l};
          int coordX = int(round(coordXFloat + ${d}));
          int coordY = int(round(coordYFloat + ${f}));
          ${h}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${a}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rW={kernelName:$w,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:r})=>{const{image:s}=e,{radians:o,fillValue:a,center:i}=t,u=r,l=new nW(s.shape,o,a,i);return u.runWebGLProgram(l,[s],s.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sW=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,oW=$e({opSnippet:sW}),aW={kernelName:qm,backendName:"webgl",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW="return inversesqrt(x);",uW=$e({opSnippet:iW,cpuKernelImpl:qO}),lW={kernelName:Xm,backendName:"webgl",kernelFunc:uW};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k3{constructor(t,r,s,o,a,i,u=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Oe(a.length),c=Oe(i.length);let p="";s===1?p="i":s===2&&(p="i, j");const d=`getIndices(${p})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,m=r>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${r}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${m};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(e){const{inputs:t,backend:r,attrs:s}=e,{indices:o,updates:a}=t,{shape:i}=s,{sliceRank:u,numUpdates:l,sliceSize:c,strides:p,outputSize:d}=b0(a,o,i),f=[d/c,c];if(d===0)return r.makeTensorInfo(i,o.dtype);const h=re({inputs:{x:o},backend:r,attrs:{shape:[l,u]}}),m=re({inputs:{x:a},backend:r,attrs:{shape:[l,c]}}),g=r.makeTensorInfo([],"float32",new Float32Array([0])),x=new k3(l,u,h.shape.length,m.shape.length,p,f),y=r.runWebGLProgram(x,[m,h,g],m.dtype),v=re({inputs:{x:y},backend:r,attrs:{shape:i}});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(g),v}const pW={kernelName:yw,backendName:"webgl",kernelFunc:cW};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dW{constructor(t,r,s){this.variableNames=["c","a","b"],this.outputShape=r;let o,a;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)a="resRC",o="resRC";else{const u=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let p=0;p<r.length;p++)c.push(`${u[p]}`),p<t&&l.push(`${u[p]}`);o=l.join(),a=c.join()}const i=Oe(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fW(e){const{inputs:t,backend:r}=e,{condition:s,t:o,e:a}=t,i=new dW(s.shape.length,o.shape,o.shape.length);return r.runWebGLProgram(i,[s,o,a],Xn(o.dtype,a.dtype))}const hW={kernelName:Ym,backendName:"webgl",kernelFunc:fW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mW=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${og};
  float scale = ${ag};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,gW=$e({opSnippet:mW}),yW={kernelName:Qm,backendName:"webgl",kernelFunc:gW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xW="return 1.0 / (1.0 + exp(-1.0 * x));",vW=$e({opSnippet:xW}),CW={kernelName:n0,backendName:"webgl",kernelFunc:vW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wW=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,bW=$e({opSnippet:wW}),$W={kernelName:t0,backendName:"webgl",kernelFunc:bW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _W=r3+`
  return sin(x);
`,SW=$e({opSnippet:_W}),kW={kernelName:Jm,backendName:"webgl",kernelFunc:SW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EW=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,NW=$e({opSnippet:EW}),TW={kernelName:e0,backendName:"webgl",kernelFunc:NW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,DW=$e({opSnippet:IW}),AW={kernelName:r0,backendName:"webgl",kernelFunc:DW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RW=e=>{const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{blockShape:a,paddings:i}=s;k(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce((y,v)=>y*v),l=[[0,0]];l.push(...i);for(let y=1+a.length;y<o.shape.length;++y)l.push([0,0]);const c=[],p=_3({inputs:{x:o},backend:r,attrs:{paddings:l,constantValue:0}}),d=ng(p.shape,a,u,!1),f=rg(d.length,a.length,!1),h=sg(p.shape,a,u,!1),m=re({inputs:{x:p},backend:r,attrs:{shape:d}}),g=Bt({inputs:{x:m},backend:r,attrs:{perm:f}}),x=re({inputs:{x:g},backend:r,attrs:{shape:h}});return c.push(p),c.push(m),c.push(g),c.forEach(y=>r.disposeIntermediateTensorInfo(y)),x},PW={kernelName:a0,backendName:"webgl",kernelFunc:RW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(e){const{inputs:t,backend:r,attrs:s}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:u}=s,{sliceRank:l,numUpdates:c,strides:p,outputSize:d}=b0(a,o,u),f=!1,h=new k3(c,l,o.shape.length,a.shape.length,p,[d,1],f),m=r.runWebGLProgram(h,[a,o,i],a.dtype),g=re({inputs:{x:m},backend:r,attrs:{shape:u}});return r.disposeIntermediateTensorInfo(m),g}const FW={kernelName:vw,backendName:"webgl",kernelFunc:OW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=s,u=Ge(i,o.shape)[0],l=x4(o,a,u),c=o.shape.length,p=new Array(c).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[u]=f;const m=$i({inputs:{x:o},backend:r,attrs:{begin:p,size:h}});return p[u]+=f,m})}const LW={kernelName:i0,backendName:"webgl",kernelFunc:BW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zW="return sqrt(x);",MW=$e({opSnippet:zW}),VW={kernelName:s0,backendName:"webgl",kernelFunc:MW};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UW="return x * x;",WW=$e({opSnippet:UW}),GW={kernelName:xw,backendName:"webgl",kernelFunc:WW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ex="return (a - b) * (a - b);",jW=yt({opSnippet:Ex,packedOpSnippet:Ex}),HW={kernelName:l0,backendName:"webgl",kernelFunc:jW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW({inputs:e,attrs:t,backend:r}){const{x:s}=e,o=zn+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,a=new Hr(s.shape,o);return r.runWebGLProgram(a,[s],s.dtype)}const qW={kernelName:y0,backendName:"webgl",kernelFunc:KW};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XW{constructor(t,r,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,a=Oe(s.length),i=Oe(s.length);let u="";if(o===1)u="coords * strides + begin";else{let l=0;u=s.map((c,p)=>(l++,s.length===1?`coords * strides[${p}] + begin[${p}]`:`coords[${l-1}] * strides[${p}] + begin[${p}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${t});
      ${a} strides = ${a}(${r});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{begin:a,end:i,strides:u,beginMask:l,endMask:c,ellipsisMask:p,newAxisMask:d,shrinkAxisMask:f}=s,{nonStrided:h,$begin:m,$strides:g,size:x,newShape:y,outShape:v}=nb(o.shape,a,i,u,l,c,p,d,f),w=re({inputs:{x:o},backend:r,attrs:{shape:y}});let $;if(h){const T=$i({inputs:{x:w},backend:r,attrs:{begin:m,size:x}});$=re({inputs:{x:T},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(T)}else if(v.some(T=>T===0))$=r.makeTensorInfo(v,o.dtype,[]);else if(r.shouldExecuteOnCPU([w])){const D=r.texData.get(w.dataId).values,z=St(w.shape,w.dtype,D),E=YO(v,z,g,m);$=r.makeTensorInfo(v,w.dtype,E.values)}else{const S=new XW(m,g,v);$=r.runWebGLProgram(S,[w],w.dtype)}const b=re({inputs:{x:$},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo($),b}const QW={kernelName:Cw,backendName:"webgl",kernelFunc:YW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZW="return tan(x);",JW=$e({opSnippet:ZW}),eG={kernelName:p0,backendName:"webgl",kernelFunc:JW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tG=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,nG=$e({opSnippet:tG}),rG={kernelName:d0,backendName:"webgl",kernelFunc:nG};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sG{constructor(t,r){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[i]*r[i];this.outputShape=s,this.rank=s.length;const o=Oe(this.rank),a=oG(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function oG(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const r=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${r[o]}, ${e[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{reps:a}=s;if(o.dtype==="string"){const c=r.readSync(o.dataId).map(f=>Qa(f)),p=St(o.shape,o.dtype,c),d=ZO(p,a);return r.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new sG(o.shape,a);return r.runWebGLProgram(i,[o],o.dtype)}const aG={kernelName:Jl,backendName:"webgl",kernelFunc:E3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iG(e){const{inputs:t,backend:r,attrs:s}=e,{x:o}=t,{k:a,sorted:i}=s,u=r.readSync(o.dataId),[l,c]=JO(u,o.shape,o.dtype,a,i);return[r.makeTensorInfo(l.shape,l.dtype,l.values),r.makeTensorInfo(c.shape,c.dtype,c.values)]}const uG={kernelName:ww,backendName:"webgl",kernelFunc:iG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lG(e){const{inputs:t,attrs:r,backend:s}=e,{axis:o}=r,{x:a}=t;Ci(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(a.dataId),{outputValues:u,outputShape:l,indices:c}=eF(i,o,a.shape,a.dtype);return[s.makeTensorInfo(l,a.dtype,u),s.makeTensorInfo([c.length],"int32",c)]}const cG={kernelName:bw,backendName:"webgl",kernelFunc:lG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pG(e){const{inputs:t,backend:r,attrs:s}=e,{value:o}=t;let{axis:a}=s;a<0&&(a+=o.shape.length);const i=o,u=i.shape.length,l=o.shape[a],c=new Array(u-1);let p=0;for(let g=0;g<u;g++)g!==a&&(c[p++]=i.shape[g]);const d=[],f=new Array(u).fill(0),h=i.shape.slice();h[a]=1;const m=new Array(l);for(let g=0;g<m.length;g++){f[a]=g;const x=$i({inputs:{x:i},backend:r,attrs:{begin:f,size:h}}),y=re({inputs:{x},backend:r,attrs:{shape:c}});m[g]=y,d.push(x)}return d.forEach(g=>r.disposeIntermediateTensorInfo(g)),m}const dG={kernelName:h0,backendName:"webgl",kernelFunc:pG};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fG{constructor(t,r){this.variableNames=["x","segmentIds"];const s=t.windowSize,o=t.batchSize,a=t.inSize,i=t.numSegments,u=i*Math.ceil(a/s);this.outputShape=[o,u];const l="0.0",c="sumValue",p=Math.floor(s/4)*4,d=s%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";a%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let m="";a%s>0&&(m=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${p}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${p};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hG(e){const{inputs:t,backend:r,attrs:s}=e,{x:o,segmentIds:a}=t,{numSegments:i}=s,u=o.shape.length,l=[];let c=0;const p=cn([c],u);let d=o;p!=null&&(d=Bt({inputs:{x:o},backend:r,attrs:{perm:p}}),l.push(d),c=bn(1,u)[0]);const f=C4(d.shape,c,i),h=ne([d.shape[c]]),m=re({inputs:{x:d},backend:r,attrs:{shape:[-1,h]}});l.push(m);const g=v0(o.dtype),x=($,b,T,S,D)=>{const z=$.shape[0],E=$.shape[1],A=v4(E,D),O={windowSize:A,inSize:E,batchSize:z,numSegments:D},V=new fG(O,b),B=r.compileAndRun(V,[$,T],S);if(l.push(B),B.shape[1]===D)return B;const W=S3({backend:r,attrs:{start:0,stop:D,step:1,dtype:"float32"}}),H=E3({inputs:{x:W},backend:r,attrs:{reps:[E/A]}});return l.push(W),l.push(H),x(B,b,H,S,D)},y=x(m,"unsortedSegmentSum",a,g,i),v=re({inputs:{x:y},backend:r,attrs:{shape:f}});let w=v;if(p!=null){l.push(v);const $=mi(p);w=Bt({inputs:{x:w},backend:r,attrs:{perm:$}})}return l.forEach($=>r.disposeIntermediateTensorInfo($)),w}const mG={kernelName:m0,backendName:"webgl",kernelFunc:hG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gG=[uV,pV,YF,ZF,tB,sB,aB,lB,pB,fB,yB,vB,bB,SB,AB,NB,OB,zB,BB,WB,jB,KB,QB,sL,aL,dL,hL,xL,wL,DF,SL,OL,BL,TL,VL,WL,zL,HL,XL,ZL,ez,nz,oz,pz,fz,iz,gz,vz,$z,Ez,Dz,Pz,Oz,Fz,Lz,Mz,Uz,Gz,Hz,Yz,Jz,nM,sM,iM,pM,mM,vM,IF,wM,_L,_M,EM,IM,RF,PM,LM,MM,KM,GM,QM,eV,sV,fV,wV,vV,SV,EV,TV,yV,DV,RV,BV,VV,jV,JV,LF,tU,sU,iU,cU,uL,fU,mU,yU,CU,_U,OF,kU,EU,lL,XV,IU,LU,PU,MF,UU,jU,qU,QU,tW,rW,aW,lW,pW,hW,yW,CW,$W,kW,TW,nL,QV,AW,PW,FW,LW,VW,GW,HW,qW,QW,YV,KF,eG,rG,aG,uG,qF,cG,dG,mG,hU];for(const e of gG)RE(e);class yG{constructor(t,r,s,o){ze(this,"canvas");ze(this,"fileInfo");ze(this,"image");ze(this,"loading");ze(this,"canvasContext");ze(this,"mode");ze(this,"isIosVer13");ze(this,"maskColor");ze(this,"model");this.canvas=t,this.fileInfo=r,this.model=I4(Fo.mediapipeFacemesh,{maxFaces:1}),this.image=s,this.loading=document.getElementById("ML_Loading"),this.canvasContext=this.canvas.getContext("2d"),this.mode=o,this.mode=="mask"?this.maskImgLoad():this.rotate2(this.image,!0)}maskImgLoad(){const t=new Image,r=new Image,s=new Image,o=new Image,a=new Image,i=new Image,u=new Image,l=new Image,c=new Image,p=new Image,d=new Image,f=new Image;t.src=`${process.env.PATH}/images/beige-left.png`,r.src=`${process.env.PATH}/images/beige-right.png`,s.src=`${process.env.PATH}/images/mint-left.png`,o.src=`${process.env.PATH}/images/mint-right.png`,a.src=`${process.env.PATH}/images/black-left.png`,i.src=`${process.env.PATH}/images/black-right.png`,u.src=`${process.env.PATH}/images/white-left.png`,c.src=`${process.env.PATH}/images/white-right.png`,l.src=`${process.env.PATH}/images/purple-left.png`,p.src=`${process.env.PATH}/images/purple-right.png`,d.src=`${process.env.PATH}/images/pink-left.png`,f.src=`${process.env.PATH}/images/pink-right.png`,this.maskColor={white:[u,c],black:[a,i],pink:[d,f],purple:[l,p],beige:[t,r],mint:[s,o]},this.maskColor[store.getState().ColorReducer.mainMaskColor][1].onload=()=>this.rotate2(this.image,!0)}async rotate2(t,r){const s=navigator.userAgent;ex.getData(t,async()=>{const o=ex.getTag(t,"Orientation");if(/ipad|iphone/i.test(s)){let a=0,i,u;if(s.indexOf("FBSV")>-1?(i=s.split("FBSV")[1],u=i.substring(1,3)+"."+i.substring(4,5),a=parseFloat(u)):(i=s.split("OS")[1],u=i.substring(1,3)+"."+i.substring(4,5),a=parseFloat(u)),a<13.4)switch(this.isIosVer13=!0,o){case void 0:await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);break;case 1:await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);break;case 3:await this.canvasContext.translate(this.canvas.width/2,this.canvas.height/2),await this.canvasContext.rotate(Math.PI),await this.canvasContext.translate(-this.canvas.width/2,-this.canvas.height/2),await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);break;case 6:this.canvas.width<this.canvas.height?this.canvas.width=this.canvas.height:this.canvas.height=this.canvas.width,await this.canvasContext.translate(this.canvas.width/2,this.canvas.height/2),await this.canvasContext.rotate(Math.PI*.5),await this.canvasContext.translate(-this.canvas.width/2,-this.canvas.height/2),await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);break;case 8:this.canvas.width<this.canvas.height?this.canvas.width=this.canvas.height:this.canvas.height=this.canvas.width,await this.canvasContext.translate(this.canvas.width/2,this.canvas.height/2),await this.canvasContext.rotate(Math.PI*1.5),await this.canvasContext.translate(-this.canvas.width/2,-this.canvas.height/2),await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);break}else await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height)}else await this.canvasContext.drawImage(t,0,0,this.canvas.width,this.canvas.height);r&&this.rotate()})}async rotate(){const t=document.getElementById("testWrapper"),r=document.getElementById("headerWrapper");this.image.src=this.canvas.toDataURL(),this.image.onload=async()=>{this.model.then(async s=>{const o=await s.estimateFaces({input:this.canvas,returnTensors:!1,flipHorizontal:!1});if(o.length===0)this.loading.style.display="none",alert("\uC5BC\uAD74\uC774 \uC778\uC2DD\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uB978 \uC0AC\uC9C4\uC73C\uB85C \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.");else{this.mode!="mask"&&(r.style.display="none",r.style.opacity="0"),t.style.opacity="1",this.image.style.display="block";const i=await o[0].scaledMesh.map(u=>({x:u[0],y:u[1]}));if(t.insertBefore(this.canvas,t.firstChild),this.isIosVer13&&(await this.canvasContext.translate(this.canvas.width/2,this.canvas.height/2),await this.canvasContext.rotate(Math.PI*.5),await this.canvasContext.translate(-this.canvas.width/2,-this.canvas.height/2),await this.canvasContext.drawImage(this.image,0,0,this.canvas.width,this.canvas.height)),this.mode=="faceboard"){store.dispatch(actionCreators.setScanStart(!0)),this.loading.style.display="none";let u=store.getState().ColorReducer.mainFaceBoardColor;new FaceBoard(i,u,this.canvas),this.isIosVer13&&this.reRotate(),setInterval(async()=>{const l=store.getState().ColorReducer.mainFaceBoardColor;u!=l&&(u=l,this.isIosVer13?(this.canvas.style.display="none",new FaceBoard(i,u,this.canvas),this.reRotate()):new FaceBoard(i,u,this.canvas))},300)}else{const u=A4();this.loading.style.display="none";let l=this.maskColor[store.getState().ColorReducer.mainMaskColor],c=l[0],p=l[1];new Cu(this.canvas,c,p,i,u[0],u[1],u[1]),this.isIosVer13&&setTimeout(()=>{this.reRotate()},1e3),setInterval(()=>{const d=this.maskColor[store.getState().ColorReducer.mainMaskColor];l!=d&&(l=d,c=d[0],p=d[1],this.isIosVer13&&(this.canvas.style.display="none",new Cu(this.canvas,c,p,i,u[0],u[1],u[1]),setTimeout(()=>{this.reRotate()},1e3)),new Cu(this.canvas,c,p,i,u[0],u[1],u[1]))},300)}}})}}reRotate(){const t=new Image;t.src=this.canvas.toDataURL(),t.onload=()=>{this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.style.display="block",this.rotate2(t,!1)}}}function Nx(e){const t=document.getElementById("imageInput"),r=document.getElementById("ML_Loading");t.onclick=()=>t.value="",t.onchange=o=>{const a=o.target;if(a.files&&a.files[0]){const i=a.files[0],u=new FileReader;u.onload=async function(l){if(e!=="scan"){const c=document.getElementById("faceImage"),p=l.target;c.src=p.result,c.onload=async()=>{const d=document.createElement("canvas");d.className="faceCanvas",d.style.position="absolute",d.style.zIndex="998",d.style.left="0",d.width=c.width,d.height=c.height,new yG(d,i,c,e)}}else s(i)},u.readAsDataURL(i)}},t.click();return;function s(o){const a=r.firstElementChild.lastElementChild,i=r.firstElementChild.children[1];if(a.innerText="\uCD5C\uB300 10\uCD08 \uC815\uB3C4 \uC18C\uC694\uB429\uB2C8\uB2E4.",i.innerText="\uD37C\uC2A4\uB110\uCEEC\uB7EC\uB97C \uCE21\uC815 \uC911\uC785\uB2C8\uB2E4.",r.style.display="block",!xG(o.name)){r.style.display="none";return}const u=new FormData;u.append("file",o),bf.post("/remove/sendImg",u).then(l=>{localStorage.setItem("faceData",JSON.stringify(l.data)),document.getElementById(l.data.result).click()}).catch(l=>{l.response.data.code===1?alert("\uC5BC\uAD74\uC774 \uC778\uC2DD\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uB2E4\uB978 \uC0AC\uC9C4\uC73C\uB85C \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."):alert("\uC5BC\uAD74\uC744 \uAE30\uC6B8\uC774\uC9C0 \uC54A\uACE0 \uC815\uBA74\uC744 \uC751\uC2DC\uD55C \uC0AC\uC9C4\uC73C\uB85C \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."),r.style.display="none"})}}function xG(e){const t=e.lastIndexOf("."),s=e.substring(t+1,e.length).toLowerCase();return s=="jpg"||s=="png"||s=="jpeg"?!0:(alert("jpg, jpeg, png  \uD655\uC7A5\uC790\uB9CC \uAC00\uB2A5\uD569\uB2C8\uB2E4."),!1)}async function vG(e){const t=navigator.userAgent;if(/fb/i.test(t)&&!/fbios/i.test(t)){let s=0,o,a;t.indexOf("FBSV")>-1?(o=t.split("FBSV")[1],a=o.substring(1,3)+"."+o.substring(4,5),s=parseFloat(a)):(o=t.split("OS")[1],a=o.substring(1,3)+"."+o.substring(4,5),s=parseFloat(a)),s<13.4&&window.open("x-web-search://?mycolor.kr")}if(localStorage.getItem("isScanPossible")==="false"&&confirm("\uAE30\uAE30\uC758 \uC0AC\uC591\uC774 \uC88B\uC9C0 \uC54A\uC544 \uC6D0\uD65C\uD55C \uCE21\uC815\uC774 \uD798\uB4ED\uB2C8\uB2E4. \uD655\uC778\uC744 \uB204\uB974\uC2DC\uBA74 \uC774\uBBF8\uC9C0 \uC5C5\uB85C\uB4DC \uBC29\uC2DD\uC73C\uB85C \uC804\uD658\uD569\uB2C8\uB2E4. \uCDE8\uC18C\uB97C \uB204\uB974\uC2DC\uBA74 \uADF8\uB300\uB85C \uC9C4\uD589\uD569\uB2C8\uB2E4.")&&r(),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const s=innerWidth*4/3;return t.indexOf("Safari")!=-1&&t.indexOf("Chrome")==-1?await navigator.mediaDevices.getUserMedia({video:{aspectRatio:1.33,facingMode:"user",frameRate:{ideal:60}}}):await navigator.mediaDevices.getUserMedia({video:{aspectRatio:1.33,frameRate:{ideal:60},facingMode:"user"}})}catch(s){r(s)}else r();function r(s="default"){document.getElementById("testExplain").innerText=s,e!="scan"&&Nx(e);const o=/mobile/i.test(t);/crios/i.test(t)?alert("\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uBE0C\uB77C\uC6B0\uC800\uC785\uB2C8\uB2E4. safari\uB85C \uC811\uC18D\uD574\uC8FC\uC138\uC694."):/denied/i.test(s)?/kakaotalk/i.test(t)?confirm("\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uBE0C\uB77C\uC6B0\uC800\uAC70\uB098 \uCE74\uBA54\uB77C \uAD8C\uD55C\uC744 \uCC28\uB2E8\uD558\uC168\uC2B5\uB2C8\uB2E4. \uC678\uBD80 \uBE0C\uB77C\uC6B0\uC800\uB85C \uC5F0\uACB0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(/iphone|ipad/i.test(t)?window.open("https://urlopen.link/mycolor.kr"):window.open("intent://mycolor.kr#Intent;scheme=http;package=com.android.chrome;end")):alert("\uCE74\uBA54\uB77C \uAD8C\uD55C\uC744 \uCC28\uB2E8\uD558\uC168\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800 \uC124\uC815\uC5D0\uC11C \uD5C8\uC6A9\uC73C\uB85C \uBC14\uAFD4\uC8FC\uC138\uC694."):o?confirm("\uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uBE0C\uB77C\uC6B0\uC800\uAC70\uB098 \uCE74\uBA54\uB77C \uAD8C\uD55C\uC744 \uCC28\uB2E8\uD558\uC168\uC2B5\uB2C8\uB2E4. \uC678\uBD80 \uBE0C\uB77C\uC6B0\uC800\uB85C \uC5F0\uACB0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(/iphone|ipad/i.test(t)?window.open("https://urlopen.link/mycolor.kr"):window.open("intent://mycolor.kr#Intent;scheme=http;package=com.android.chrome;end")):Nx(e)}}const CG=()=>{var e;return{debounce(t,r){clearTimeout(e),e=setTimeout(()=>{t(...arguments)},r)}}},wG=({setStream:e})=>{const t=CG();return j(Vt.Wrapper,{onClick:()=>{t.debounce(async()=>{const r=await vG("scan");r&&e(r)},300)},children:Ee(Vt.MiddleWrapper,{children:[j(Vt.ImgWrapper,{children:j(Vt.CamImg,{alt:"camera \uCE74\uBA54\uB77C",src:"/images/camera.svg"})}),Ee(Vt.TextWrapper,{children:[j(Vt.H1,{children:"\uC2E4\uC2DC\uAC04 \uCE21\uC815 \uBC29\uC2DD"}),j(Vt.P,{children:"\uAE30\uC885\uC5D0 \uB530\uB77C \uB2E4\uC18C \uB290\uB9B4 \uC218 \uC788\uC5B4\uC694"})]})]})})},bG=()=>j(Vt.Wrapper,{onClick:()=>{alert("\uCD94\uD6C4 \uC5C5\uB370\uC774\uD2B8 \uC608\uC815\uC774\uC5D0\uC694!")},children:Ee(Vt.MiddleWrapper,{children:[j(Vt.ImgWrapper,{children:j(Vt.CamImg,{alt:"camera \uCE74\uBA54\uB77C",src:"/images/upload.svg"})}),Ee(Vt.TextWrapper,{children:[j(Vt.H1,{children:"\uC0AC\uC9C4 \uC5C5\uB85C\uB4DC \uBC29\uC2DD"}),j(Vt.P,{children:"\uC0AC\uC9C4\uC740 \uC800\uC7A5\uB418\uC9C0 \uC54A\uC544\uC694."})]})]})}),$G=ge.section`
  display: flex;
  opacity: 0;
  flex-direction: column;
  align-items: center;
  height: calc(var(--vh, 1vh) * 100);
  background-size: cover;
  background-position: center;
  background-image: url('/images/background.svg');
  overflow-y: hidden;
  transition: opacity 1s;
  @media (max-height: 568px) {
    height: unset;
    min-height: calc(var(--vh, 1vh) * 100);
    justify-content: unset;
    padding-bottom: 60px;
  }
`,_G=ge.div`
  flex-direction: column;
  align-items: center;
  transition: all 0.5s ease-in;
  display: flex;
`;ge.video`
  object-fit: fill;
  transform: scale(-1, 1);
  display: none;
`;ge.canvas`
  left: 0;
  transform: scale(-1, 1);
`;ge.div`
  position: relative;
  margin-top: 25px;
  transition: all 0.5s ease-out;
  opacity: 0;
  @media (min-width: 1025px) {
    width: 650px;
  }
  @media (min-width: 610px) and (max-width: 1024px) {
    width: 600px;
  }
  @media (max-width: 610px) {
    width: 320px;
  }
`;const SG=()=>{const[e,t]=xe.exports.useState(),r=()=>document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`);return xe.exports.useEffect(()=>{const s=new Image;s.src="/images/background.svg",s.onload=()=>{const o=document.getElementById("mainBody");o.style.backgroundImage=`url(${s.src})`,o.style.opacity="1"},r(),window.addEventListener("resize",r)},[]),j($G,{id:"mainBody",children:e?j(i7,{drawMethod:"scan",stream:e}):Ee(_G,{id:"headerWrapper",children:[j(pE,{}),j(oE,{}),j(iE,{}),Ee("section",{children:[j(wG,{setStream:t}),j(bG,{})]})]})})},kG=Qk`
/* @font-face { 
  font-family: 'Noto Sans';
  font-style: normal;
  font-weight: 100;
  src: local('Noto Sans'),
  url("https://jaehoon-bucket.s3.ap-northeast-2.amazonaws.com/NotoSansCJKkr-DemiLight.woff") format('woff')
}
@font-face {
  font-family: 'HSThin';
  font-style: normal;
  font-weight: 100;
  src: local('HSThin'),
  url(https://cdn.jsdelivr.net/gh/hoonsbory/mycolor-deploy/font/HSThin.woff2) format('woff2'),
  url(https://cdn.jsdelivr.net/gh/hoonsbory/mycolor-deploy/font/HSThin.woff) format('woff'),
  url(https://cdn.jsdelivr.net/gh/hoonsbory/mycolor-deploy/font/HSThin.ttf) format('truetype'),
  url(https://cdn.jsdelivr.net/gh/hoonsbory/mycolor-deploy/font/HSThin.otf) format('opentype')
  파이썬의 pyftsubset을 통해 경량화함 
} */
@font-face { 
  font-family: 'Dongle';
  src : url("./fonts/Dongle-Regular-subset.woff");
}
@font-face {
	font-family: 'Pretendard Variable';
	font-weight: 45 920;
	font-style: normal;
	font-display: swap;
	src: local('Pretendard Variable'), url('./fonts/PretendardVariable-subset.woff2') format('woff2-variations');
}
.slick-arrow{
  display : none !important;
}
button{
  cursor: pointer;
}
body {
  margin: 0;
  padding : 0;
  font-size: 10px;
  font-weight: 500;
  padding-right : 0px !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: 'Pretendard Variable';
  overflow-x : hidden;
}
html{
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overflow : auto; 
}
html,body{
  text-size-adjust : none;
  -webkit-text-size-adjust: none;
	-moz-text-size-adjust: none;
	-ms-text-size-adjust: none;
  -o-text-size-adjust: none;
}
  .lazy {
    visibility: hidden;
  }
  .afterLoad{
    visibility : visible !important;
  }
  p{
    margin : 0;
  }
  *{
    box-sizing: border-box;
    font-family: 'Pretendard Variable';
    outline : 0;
    border : 0;
    min-height: 0;
    min-width: 0;
  }
  /* #video, .faceCanvas, #colorCanvas{
    width : 100vw  !important;
    height : 100vh !important;
    position: fixed;
    left : 0;
    top : 0;
    transition: 0.125s linear;
    z-index: 999;
    @media (max-width: 720px) {
      width : 720px;
    }
  } */
    /* @media(max-height : 768px){
      height : 130% !important;
    }*/
    /* @media (min-width: 1025px) {
      height: 800px;
    }
    @media (min-width: 610px) and (max-width: 1024px) {
      height: 750px;
    }
    @media (max-width: 610px) {
      height: 480px;
    }
    @media(max-height : 568px){
      max-height : 60vh !important;
    }  */
  .slick-prev{
    left : 0;
    z-index : 999;
  }
  .slick-next{
    right : 0;
  }
  .slick-prev:before, .slick-next:before{
    color : black;
  }
`;bf.defaults.baseURL="https://server.mycolor.kr:7001";Np.createRoot(document.getElementById("root")).render(Ee(Xk,{theme:lg,children:[j(kG,{}),j(SG,{})]}));
